function FP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var UP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function VP(t){var e=t.default;if(typeof e=="function"){var n=function(){return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var W={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bu=Symbol.for("react.element"),BP=Symbol.for("react.portal"),zP=Symbol.for("react.fragment"),jP=Symbol.for("react.strict_mode"),$P=Symbol.for("react.profiler"),GP=Symbol.for("react.provider"),HP=Symbol.for("react.context"),WP=Symbol.for("react.forward_ref"),XP=Symbol.for("react.suspense"),qP=Symbol.for("react.memo"),YP=Symbol.for("react.lazy"),By=Symbol.iterator;function ZP(t){return t===null||typeof t!="object"?null:(t=By&&t[By]||t["@@iterator"],typeof t=="function"?t:null)}var jw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$w=Object.assign,Gw={};function Oa(t,e,n){this.props=t,this.context=e,this.refs=Gw,this.updater=n||jw}Oa.prototype.isReactComponent={};Oa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Oa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Hw(){}Hw.prototype=Oa.prototype;function Wm(t,e,n){this.props=t,this.context=e,this.refs=Gw,this.updater=n||jw}var Xm=Wm.prototype=new Hw;Xm.constructor=Wm;$w(Xm,Oa.prototype);Xm.isPureReactComponent=!0;var zy=Array.isArray,Ww=Object.prototype.hasOwnProperty,qm={current:null},Xw={key:!0,ref:!0,__self:!0,__source:!0};function qw(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Ww.call(e,r)&&!Xw.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:bu,type:t,key:s,ref:o,props:i,_owner:qm.current}}function KP(t,e){return{$$typeof:bu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ym(t){return typeof t=="object"&&t!==null&&t.$$typeof===bu}function QP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var jy=/\/+/g;function Bd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?QP(""+t.key):e.toString(36)}function Gc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case bu:case BP:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Bd(o,0):r,zy(i)?(n="",t!=null&&(n=t.replace(jy,"$&/")+"/"),Gc(i,e,n,"",function(u){return u})):i!=null&&(Ym(i)&&(i=KP(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(jy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",zy(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Bd(s,a);o+=Gc(s,e,n,l,i)}else if(l=ZP(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Bd(s,a++),o+=Gc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function sc(t,e,n){if(t==null)return t;var r=[],i=0;return Gc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function JP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vn={current:null},Hc={transition:null},eM={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:Hc,ReactCurrentOwner:qm};Ge.Children={map:sc,forEach:function(t,e,n){sc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return sc(t,function(){e++}),e},toArray:function(t){return sc(t,function(e){return e})||[]},only:function(t){if(!Ym(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ge.Component=Oa;Ge.Fragment=zP;Ge.Profiler=$P;Ge.PureComponent=Wm;Ge.StrictMode=jP;Ge.Suspense=XP;Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eM;Ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$w({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=qm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Ww.call(e,l)&&!Xw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:bu,type:t.type,key:i,ref:s,props:r,_owner:o}};Ge.createContext=function(t){return t={$$typeof:HP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:GP,_context:t},t.Consumer=t};Ge.createElement=qw;Ge.createFactory=function(t){var e=qw.bind(null,t);return e.type=t,e};Ge.createRef=function(){return{current:null}};Ge.forwardRef=function(t){return{$$typeof:WP,render:t}};Ge.isValidElement=Ym;Ge.lazy=function(t){return{$$typeof:YP,_payload:{_status:-1,_result:t},_init:JP}};Ge.memo=function(t,e){return{$$typeof:qP,type:t,compare:e===void 0?null:e}};Ge.startTransition=function(t){var e=Hc.transition;Hc.transition={};try{t()}finally{Hc.transition=e}};Ge.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ge.useCallback=function(t,e){return vn.current.useCallback(t,e)};Ge.useContext=function(t){return vn.current.useContext(t)};Ge.useDebugValue=function(){};Ge.useDeferredValue=function(t){return vn.current.useDeferredValue(t)};Ge.useEffect=function(t,e){return vn.current.useEffect(t,e)};Ge.useId=function(){return vn.current.useId()};Ge.useImperativeHandle=function(t,e,n){return vn.current.useImperativeHandle(t,e,n)};Ge.useInsertionEffect=function(t,e){return vn.current.useInsertionEffect(t,e)};Ge.useLayoutEffect=function(t,e){return vn.current.useLayoutEffect(t,e)};Ge.useMemo=function(t,e){return vn.current.useMemo(t,e)};Ge.useReducer=function(t,e,n){return vn.current.useReducer(t,e,n)};Ge.useRef=function(t){return vn.current.useRef(t)};Ge.useState=function(t){return vn.current.useState(t)};Ge.useSyncExternalStore=function(t,e,n){return vn.current.useSyncExternalStore(t,e,n)};Ge.useTransition=function(){return vn.current.useTransition()};Ge.version="18.2.0";(function(t){t.exports=Ge})(W);const qe=Hm(W.exports);var $y={},Ia={exports:{}},$n={},Yw={exports:{}},Zw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,ae){var re=$.length;$.push(ae);e:for(;0<re;){var oe=re-1>>>1,I=$[oe];if(0<i(I,ae))$[oe]=ae,$[re]=I,re=oe;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var ae=$[0],re=$.pop();if(re!==ae){$[0]=re;e:for(var oe=0,I=$.length,K=I>>>1;oe<K;){var Q=2*(oe+1)-1,be=$[Q],ue=Q+1,de=$[ue];if(0>i(be,re))ue<I&&0>i(de,be)?($[oe]=de,$[ue]=re,oe=ue):($[oe]=be,$[Q]=re,oe=Q);else if(ue<I&&0>i(de,re))$[oe]=de,$[ue]=re,oe=ue;else break e}}return ae}function i($,ae){var re=$.sortIndex-ae.sortIndex;return re!==0?re:$.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,d=3,g=!1,y=!1,m=!1,x=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var ae=n(u);ae!==null;){if(ae.callback===null)r(u);else if(ae.startTime<=$)r(u),ae.sortIndex=ae.expirationTime,e(l,ae);else break;ae=n(u)}}function R($){if(m=!1,w($),!y)if(n(l)!==null)y=!0,Be(L);else{var ae=n(u);ae!==null&&j(R,ae.startTime-$)}}function L($,ae){y=!1,m&&(m=!1,S(N),N=-1),g=!0;var re=d;try{for(w(ae),f=n(l);f!==null&&(!(f.expirationTime>ae)||$&&!ie());){var oe=f.callback;if(typeof oe=="function"){f.callback=null,d=f.priorityLevel;var I=oe(f.expirationTime<=ae);ae=t.unstable_now(),typeof I=="function"?f.callback=I:f===n(l)&&r(l),w(ae)}else r(l);f=n(l)}if(f!==null)var K=!0;else{var Q=n(u);Q!==null&&j(R,Q.startTime-ae),K=!1}return K}finally{f=null,d=re,g=!1}}var C=!1,U=null,N=-1,H=5,G=-1;function ie(){return!(t.unstable_now()-G<H)}function Ce(){if(U!==null){var $=t.unstable_now();G=$;var ae=!0;try{ae=U(!0,$)}finally{ae?Ee():(C=!1,U=null)}}else C=!1}var Ee;if(typeof v=="function")Ee=function(){v(Ce)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,_e=ee.port2;ee.port1.onmessage=Ce,Ee=function(){_e.postMessage(null)}}else Ee=function(){x(Ce,0)};function Be($){U=$,C||(C=!0,Ee())}function j($,ae){N=x(function(){$(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,Be(L))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(d){case 1:case 2:case 3:var ae=3;break;default:ae=d}var re=d;d=ae;try{return $()}finally{d=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,ae){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var re=d;d=$;try{return ae()}finally{d=re}},t.unstable_scheduleCallback=function($,ae,re){var oe=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?oe+re:oe):re=oe,$){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=re+I,$={id:c++,callback:ae,priorityLevel:$,startTime:re,expirationTime:I,sortIndex:-1},re>oe?($.sortIndex=re,e(u,$),n(l)===null&&$===n(u)&&(m?(S(N),N=-1):m=!0,j(R,re-oe))):($.sortIndex=I,e(l,$),y||g||(y=!0,Be(L))),$},t.unstable_shouldYield=ie,t.unstable_wrapCallback=function($){var ae=d;return function(){var re=d;d=ae;try{return $.apply(this,arguments)}finally{d=re}}}})(Zw);(function(t){t.exports=Zw})(Yw);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kw=W.exports,zn=Yw.exports;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qw=new Set,Yl={};function Ys(t,e){ha(t,e),ha(t+"Capture",e)}function ha(t,e){for(Yl[t]=e,t=0;t<e.length;t++)Qw.add(e[t])}var ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),og=Object.prototype.hasOwnProperty,tM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gy={},Hy={};function nM(t){return og.call(Hy,t)?!0:og.call(Gy,t)?!1:tM.test(t)?Hy[t]=!0:(Gy[t]=!0,!1)}function rM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iM(t,e,n,r){if(e===null||typeof e>"u"||rM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qt[t]=new yn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qt[e]=new yn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qt[t]=new yn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qt[t]=new yn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qt[t]=new yn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qt[t]=new yn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qt[t]=new yn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qt[t]=new yn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qt[t]=new yn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zm=/[\-:]([a-z])/g;function Km(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zm,Km);Qt[e]=new yn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zm,Km);Qt[e]=new yn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zm,Km);Qt[e]=new yn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qt[t]=new yn(t,1,!1,t.toLowerCase(),null,!1,!1)});Qt.xlinkHref=new yn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qt[t]=new yn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qm(t,e,n,r){var i=Qt.hasOwnProperty(e)?Qt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iM(e,n,i,r)&&(n=null),r||i===null?nM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var fi=Kw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oc=Symbol.for("react.element"),Bo=Symbol.for("react.portal"),zo=Symbol.for("react.fragment"),Jm=Symbol.for("react.strict_mode"),ag=Symbol.for("react.profiler"),Jw=Symbol.for("react.provider"),eE=Symbol.for("react.context"),ev=Symbol.for("react.forward_ref"),lg=Symbol.for("react.suspense"),ug=Symbol.for("react.suspense_list"),tv=Symbol.for("react.memo"),ki=Symbol.for("react.lazy"),tE=Symbol.for("react.offscreen"),Wy=Symbol.iterator;function el(t){return t===null||typeof t!="object"?null:(t=Wy&&t[Wy]||t["@@iterator"],typeof t=="function"?t:null)}var St=Object.assign,zd;function El(t){if(zd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zd=e&&e[1]||""}return`
`+zd+t}var jd=!1;function $d(t,e){if(!t||jd)return"";jd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{jd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?El(t):""}function sM(t){switch(t.tag){case 5:return El(t.type);case 16:return El("Lazy");case 13:return El("Suspense");case 19:return El("SuspenseList");case 0:case 2:case 15:return t=$d(t.type,!1),t;case 11:return t=$d(t.type.render,!1),t;case 1:return t=$d(t.type,!0),t;default:return""}}function cg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zo:return"Fragment";case Bo:return"Portal";case ag:return"Profiler";case Jm:return"StrictMode";case lg:return"Suspense";case ug:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case eE:return(t.displayName||"Context")+".Consumer";case Jw:return(t._context.displayName||"Context")+".Provider";case ev:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tv:return e=t.displayName||null,e!==null?e:cg(t.type)||"Memo";case ki:e=t._payload,t=t._init;try{return cg(t(e))}catch{}}return null}function oM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cg(e);case 8:return e===Jm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ji(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function nE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aM(t){var e=nE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ac(t){t._valueTracker||(t._valueTracker=aM(t))}function rE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=nE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function df(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fg(t,e){var n=e.checked;return St({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function Xy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ji(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function iE(t,e){e=e.checked,e!=null&&Qm(t,"checked",e,!1)}function hg(t,e){iE(t,e);var n=Ji(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?dg(t,e.type,n):e.hasOwnProperty("defaultValue")&&dg(t,e.type,Ji(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function dg(t,e,n){(e!=="number"||df(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Sl=Array.isArray;function na(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ji(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function pg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return St({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ne(92));if(Sl(n)){if(1<n.length)throw Error(ne(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ji(n)}}function sE(t,e){var n=Ji(e.value),r=Ji(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Zy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function oE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?oE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lc,aE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(lc=lc||document.createElement("div"),lc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Zl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ll={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lM=["Webkit","ms","Moz","O"];Object.keys(Ll).forEach(function(t){lM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ll[e]=Ll[t]})});function lE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ll.hasOwnProperty(t)&&Ll[t]?(""+e).trim():e+"px"}function uE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=lE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var uM=St({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mg(t,e){if(e){if(uM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function vg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yg=null;function nv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _g=null,ra=null,ia=null;function Ky(t){if(t=Su(t)){if(typeof _g!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=mh(e),_g(t.stateNode,t.type,e))}}function cE(t){ra?ia?ia.push(t):ia=[t]:ra=t}function fE(){if(ra){var t=ra,e=ia;if(ia=ra=null,Ky(t),e)for(t=0;t<e.length;t++)Ky(e[t])}}function hE(t,e){return t(e)}function dE(){}var Gd=!1;function pE(t,e,n){if(Gd)return t(e,n);Gd=!0;try{return hE(t,e,n)}finally{Gd=!1,(ra!==null||ia!==null)&&(dE(),fE())}}function Kl(t,e){var n=t.stateNode;if(n===null)return null;var r=mh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ne(231,e,typeof n));return n}var bg=!1;if(ii)try{var tl={};Object.defineProperty(tl,"passive",{get:function(){bg=!0}}),window.addEventListener("test",tl,tl),window.removeEventListener("test",tl,tl)}catch{bg=!1}function cM(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var kl=!1,pf=null,gf=!1,wg=null,fM={onError:function(t){kl=!0,pf=t}};function hM(t,e,n,r,i,s,o,a,l){kl=!1,pf=null,cM.apply(fM,arguments)}function dM(t,e,n,r,i,s,o,a,l){if(hM.apply(this,arguments),kl){if(kl){var u=pf;kl=!1,pf=null}else throw Error(ne(198));gf||(gf=!0,wg=u)}}function Zs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function gE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qy(t){if(Zs(t)!==t)throw Error(ne(188))}function pM(t){var e=t.alternate;if(!e){if(e=Zs(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Qy(i),t;if(s===r)return Qy(i),e;s=s.sibling}throw Error(ne(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ne(189))}}if(n.alternate!==r)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?t:e}function mE(t){return t=pM(t),t!==null?vE(t):null}function vE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=vE(t);if(e!==null)return e;t=t.sibling}return null}var yE=zn.unstable_scheduleCallback,Jy=zn.unstable_cancelCallback,gM=zn.unstable_shouldYield,mM=zn.unstable_requestPaint,Rt=zn.unstable_now,vM=zn.unstable_getCurrentPriorityLevel,rv=zn.unstable_ImmediatePriority,_E=zn.unstable_UserBlockingPriority,mf=zn.unstable_NormalPriority,yM=zn.unstable_LowPriority,bE=zn.unstable_IdlePriority,hh=null,Vr=null;function _M(t){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(hh,t,void 0,(t.current.flags&128)===128)}catch{}}var wr=Math.clz32?Math.clz32:EM,bM=Math.log,wM=Math.LN2;function EM(t){return t>>>=0,t===0?32:31-(bM(t)/wM|0)|0}var uc=64,cc=4194304;function Tl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Tl(a):(s&=o,s!==0&&(r=Tl(s)))}else o=n&~i,o!==0?r=Tl(o):s!==0&&(r=Tl(s));if(r===0)return 0;if(e!==0&&e!==r&&(e&i)===0&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-wr(e),i=1<<n,r|=t[n],e&=~i;return r}function SM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TM(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-wr(s),a=1<<o,l=i[o];l===-1?((a&n)===0||(a&r)!==0)&&(i[o]=SM(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Eg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wE(){var t=uc;return uc<<=1,(uc&4194240)===0&&(uc=64),t}function Hd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function wu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wr(e),t[e]=n}function AM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-wr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function iv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-wr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var nt=0;function EE(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var SE,sv,TE,AE,xE,Sg=!1,fc=[],ji=null,$i=null,Gi=null,Ql=new Map,Jl=new Map,Di=[],xM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function e_(t,e){switch(t){case"focusin":case"focusout":ji=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":Gi=null;break;case"pointerover":case"pointerout":Ql.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(e.pointerId)}}function nl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Su(e),e!==null&&sv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function RM(t,e,n,r,i){switch(e){case"focusin":return ji=nl(ji,t,e,n,r,i),!0;case"dragenter":return $i=nl($i,t,e,n,r,i),!0;case"mouseover":return Gi=nl(Gi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ql.set(s,nl(Ql.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Jl.set(s,nl(Jl.get(s)||null,t,e,n,r,i)),!0}return!1}function RE(t){var e=Ms(t.target);if(e!==null){var n=Zs(e);if(n!==null){if(e=n.tag,e===13){if(e=gE(n),e!==null){t.blockedOn=e,xE(t.priority,function(){TE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Tg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);yg=r,n.target.dispatchEvent(r),yg=null}else return e=Su(n),e!==null&&sv(e),t.blockedOn=n,!1;e.shift()}return!0}function t_(t,e,n){Wc(t)&&n.delete(e)}function CM(){Sg=!1,ji!==null&&Wc(ji)&&(ji=null),$i!==null&&Wc($i)&&($i=null),Gi!==null&&Wc(Gi)&&(Gi=null),Ql.forEach(t_),Jl.forEach(t_)}function rl(t,e){t.blockedOn===e&&(t.blockedOn=null,Sg||(Sg=!0,zn.unstable_scheduleCallback(zn.unstable_NormalPriority,CM)))}function eu(t){function e(i){return rl(i,t)}if(0<fc.length){rl(fc[0],t);for(var n=1;n<fc.length;n++){var r=fc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ji!==null&&rl(ji,t),$i!==null&&rl($i,t),Gi!==null&&rl(Gi,t),Ql.forEach(e),Jl.forEach(e),n=0;n<Di.length;n++)r=Di[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Di.length&&(n=Di[0],n.blockedOn===null);)RE(n),n.blockedOn===null&&Di.shift()}var sa=fi.ReactCurrentBatchConfig,yf=!0;function PM(t,e,n,r){var i=nt,s=sa.transition;sa.transition=null;try{nt=1,ov(t,e,n,r)}finally{nt=i,sa.transition=s}}function MM(t,e,n,r){var i=nt,s=sa.transition;sa.transition=null;try{nt=4,ov(t,e,n,r)}finally{nt=i,sa.transition=s}}function ov(t,e,n,r){if(yf){var i=Tg(t,e,n,r);if(i===null)tp(t,e,r,_f,n),e_(t,r);else if(RM(i,t,e,n,r))r.stopPropagation();else if(e_(t,r),e&4&&-1<xM.indexOf(t)){for(;i!==null;){var s=Su(i);if(s!==null&&SE(s),s=Tg(t,e,n,r),s===null&&tp(t,e,r,_f,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else tp(t,e,r,null,n)}}var _f=null;function Tg(t,e,n,r){if(_f=null,t=nv(r),t=Ms(t),t!==null)if(e=Zs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=gE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _f=t,null}function CE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vM()){case rv:return 1;case _E:return 4;case mf:case yM:return 16;case bE:return 536870912;default:return 16}default:return 16}}var Ui=null,av=null,Xc=null;function PE(){if(Xc)return Xc;var t,e=av,n=e.length,r,i="value"in Ui?Ui.value:Ui.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Xc=i.slice(t,1<r?1-r:void 0)}function qc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hc(){return!0}function n_(){return!1}function Gn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?hc:n_,this.isPropagationStopped=n_,this}return St(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hc)},persist:function(){},isPersistent:hc}),e}var Na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lv=Gn(Na),Eu=St({},Na,{view:0,detail:0}),LM=Gn(Eu),Wd,Xd,il,dh=St({},Eu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==il&&(il&&t.type==="mousemove"?(Wd=t.screenX-il.screenX,Xd=t.screenY-il.screenY):Xd=Wd=0,il=t),Wd)},movementY:function(t){return"movementY"in t?t.movementY:Xd}}),r_=Gn(dh),kM=St({},dh,{dataTransfer:0}),OM=Gn(kM),IM=St({},Eu,{relatedTarget:0}),qd=Gn(IM),NM=St({},Na,{animationName:0,elapsedTime:0,pseudoElement:0}),DM=Gn(NM),FM=St({},Na,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UM=Gn(FM),VM=St({},Na,{data:0}),i_=Gn(VM),BM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $M(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jM[t])?!!e[t]:!1}function uv(){return $M}var GM=St({},Eu,{key:function(t){if(t.key){var e=BM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uv,charCode:function(t){return t.type==="keypress"?qc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),HM=Gn(GM),WM=St({},dh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),s_=Gn(WM),XM=St({},Eu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uv}),qM=Gn(XM),YM=St({},Na,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZM=Gn(YM),KM=St({},dh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),QM=Gn(KM),JM=[9,13,27,32],cv=ii&&"CompositionEvent"in window,Ol=null;ii&&"documentMode"in document&&(Ol=document.documentMode);var eL=ii&&"TextEvent"in window&&!Ol,ME=ii&&(!cv||Ol&&8<Ol&&11>=Ol),o_=String.fromCharCode(32),a_=!1;function LE(t,e){switch(t){case"keyup":return JM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var jo=!1;function tL(t,e){switch(t){case"compositionend":return kE(e);case"keypress":return e.which!==32?null:(a_=!0,o_);case"textInput":return t=e.data,t===o_&&a_?null:t;default:return null}}function nL(t,e){if(jo)return t==="compositionend"||!cv&&LE(t,e)?(t=PE(),Xc=av=Ui=null,jo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ME&&e.locale!=="ko"?null:e.data;default:return null}}var rL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rL[t.type]:e==="textarea"}function OE(t,e,n,r){cE(r),e=bf(e,"onChange"),0<e.length&&(n=new lv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Il=null,tu=null;function iL(t){GE(t,0)}function ph(t){var e=Ho(t);if(rE(e))return t}function sL(t,e){if(t==="change")return e}var IE=!1;if(ii){var Yd;if(ii){var Zd="oninput"in document;if(!Zd){var u_=document.createElement("div");u_.setAttribute("oninput","return;"),Zd=typeof u_.oninput=="function"}Yd=Zd}else Yd=!1;IE=Yd&&(!document.documentMode||9<document.documentMode)}function c_(){Il&&(Il.detachEvent("onpropertychange",NE),tu=Il=null)}function NE(t){if(t.propertyName==="value"&&ph(tu)){var e=[];OE(e,tu,t,nv(t)),pE(iL,e)}}function oL(t,e,n){t==="focusin"?(c_(),Il=e,tu=n,Il.attachEvent("onpropertychange",NE)):t==="focusout"&&c_()}function aL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ph(tu)}function lL(t,e){if(t==="click")return ph(e)}function uL(t,e){if(t==="input"||t==="change")return ph(e)}function cL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ar=typeof Object.is=="function"?Object.is:cL;function nu(t,e){if(Ar(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!og.call(e,i)||!Ar(t[i],e[i]))return!1}return!0}function f_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function h_(t,e){var n=f_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=f_(n)}}function DE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?DE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function FE(){for(var t=window,e=df();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=df(t.document)}return e}function fv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fL(t){var e=FE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&DE(n.ownerDocument.documentElement,n)){if(r!==null&&fv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=h_(n,s);var o=h_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hL=ii&&"documentMode"in document&&11>=document.documentMode,$o=null,Ag=null,Nl=null,xg=!1;function d_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xg||$o==null||$o!==df(r)||(r=$o,"selectionStart"in r&&fv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Nl&&nu(Nl,r)||(Nl=r,r=bf(Ag,"onSelect"),0<r.length&&(e=new lv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$o)))}function dc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Go={animationend:dc("Animation","AnimationEnd"),animationiteration:dc("Animation","AnimationIteration"),animationstart:dc("Animation","AnimationStart"),transitionend:dc("Transition","TransitionEnd")},Kd={},UE={};ii&&(UE=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function gh(t){if(Kd[t])return Kd[t];if(!Go[t])return t;var e=Go[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in UE)return Kd[t]=e[n];return t}var VE=gh("animationend"),BE=gh("animationiteration"),zE=gh("animationstart"),jE=gh("transitionend"),$E=new Map,p_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ns(t,e){$E.set(t,e),Ys(e,[t])}for(var Qd=0;Qd<p_.length;Qd++){var Jd=p_[Qd],dL=Jd.toLowerCase(),pL=Jd[0].toUpperCase()+Jd.slice(1);ns(dL,"on"+pL)}ns(VE,"onAnimationEnd");ns(BE,"onAnimationIteration");ns(zE,"onAnimationStart");ns("dblclick","onDoubleClick");ns("focusin","onFocus");ns("focusout","onBlur");ns(jE,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);Ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ys("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Al));function g_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dM(r,e,void 0,t),t.currentTarget=null}function GE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;g_(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;g_(i,a,u),s=l}}}if(gf)throw t=wg,gf=!1,wg=null,t}function dt(t,e){var n=e[Lg];n===void 0&&(n=e[Lg]=new Set);var r=t+"__bubble";n.has(r)||(HE(e,t,2,!1),n.add(r))}function ep(t,e,n){var r=0;e&&(r|=4),HE(n,t,r,e)}var pc="_reactListening"+Math.random().toString(36).slice(2);function ru(t){if(!t[pc]){t[pc]=!0,Qw.forEach(function(n){n!=="selectionchange"&&(gL.has(n)||ep(n,!1,t),ep(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[pc]||(e[pc]=!0,ep("selectionchange",!1,e))}}function HE(t,e,n,r){switch(CE(e)){case 1:var i=PM;break;case 4:i=MM;break;default:i=ov}n=i.bind(null,e,n,t),i=void 0,!bg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function tp(t,e,n,r,i){var s=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ms(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}pE(function(){var u=s,c=nv(n),f=[];e:{var d=$E.get(t);if(d!==void 0){var g=lv,y=t;switch(t){case"keypress":if(qc(n)===0)break e;case"keydown":case"keyup":g=HM;break;case"focusin":y="focus",g=qd;break;case"focusout":y="blur",g=qd;break;case"beforeblur":case"afterblur":g=qd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=r_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=OM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=qM;break;case VE:case BE:case zE:g=DM;break;case jE:g=ZM;break;case"scroll":g=LM;break;case"wheel":g=QM;break;case"copy":case"cut":case"paste":g=UM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=s_}var m=(e&4)!==0,x=!m&&t==="scroll",S=m?d!==null?d+"Capture":null:d;m=[];for(var v=u,w;v!==null;){w=v;var R=w.stateNode;if(w.tag===5&&R!==null&&(w=R,S!==null&&(R=Kl(v,S),R!=null&&m.push(iu(v,R,w)))),x)break;v=v.return}0<m.length&&(d=new g(d,y,null,n,c),f.push({event:d,listeners:m}))}}if((e&7)===0){e:{if(d=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",d&&n!==yg&&(y=n.relatedTarget||n.fromElement)&&(Ms(y)||y[si]))break e;if((g||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=u,y=y?Ms(y):null,y!==null&&(x=Zs(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=u),g!==y)){if(m=r_,R="onMouseLeave",S="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=s_,R="onPointerLeave",S="onPointerEnter",v="pointer"),x=g==null?d:Ho(g),w=y==null?d:Ho(y),d=new m(R,v+"leave",g,n,c),d.target=x,d.relatedTarget=w,R=null,Ms(c)===u&&(m=new m(S,v+"enter",y,n,c),m.target=w,m.relatedTarget=x,R=m),x=R,g&&y)t:{for(m=g,S=y,v=0,w=m;w;w=xo(w))v++;for(w=0,R=S;R;R=xo(R))w++;for(;0<v-w;)m=xo(m),v--;for(;0<w-v;)S=xo(S),w--;for(;v--;){if(m===S||S!==null&&m===S.alternate)break t;m=xo(m),S=xo(S)}m=null}else m=null;g!==null&&m_(f,d,g,m,!1),y!==null&&x!==null&&m_(f,x,y,m,!0)}}e:{if(d=u?Ho(u):window,g=d.nodeName&&d.nodeName.toLowerCase(),g==="select"||g==="input"&&d.type==="file")var L=sL;else if(l_(d))if(IE)L=uL;else{L=aL;var C=oL}else(g=d.nodeName)&&g.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(L=lL);if(L&&(L=L(t,u))){OE(f,L,n,c);break e}C&&C(t,d,u),t==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&dg(d,"number",d.value)}switch(C=u?Ho(u):window,t){case"focusin":(l_(C)||C.contentEditable==="true")&&($o=C,Ag=u,Nl=null);break;case"focusout":Nl=Ag=$o=null;break;case"mousedown":xg=!0;break;case"contextmenu":case"mouseup":case"dragend":xg=!1,d_(f,n,c);break;case"selectionchange":if(hL)break;case"keydown":case"keyup":d_(f,n,c)}var U;if(cv)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else jo?LE(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(ME&&n.locale!=="ko"&&(jo||N!=="onCompositionStart"?N==="onCompositionEnd"&&jo&&(U=PE()):(Ui=c,av="value"in Ui?Ui.value:Ui.textContent,jo=!0)),C=bf(u,N),0<C.length&&(N=new i_(N,t,null,n,c),f.push({event:N,listeners:C}),U?N.data=U:(U=kE(n),U!==null&&(N.data=U)))),(U=eL?tL(t,n):nL(t,n))&&(u=bf(u,"onBeforeInput"),0<u.length&&(c=new i_("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=U))}GE(f,e)})}function iu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Kl(t,n),s!=null&&r.unshift(iu(t,s,i)),s=Kl(t,e),s!=null&&r.push(iu(t,s,i))),t=t.return}return r}function xo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function m_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Kl(n,s),l!=null&&o.unshift(iu(n,l,a))):i||(l=Kl(n,s),l!=null&&o.push(iu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var mL=/\r\n?/g,vL=/\u0000|\uFFFD/g;function v_(t){return(typeof t=="string"?t:""+t).replace(mL,`
`).replace(vL,"")}function gc(t,e,n){if(e=v_(e),v_(t)!==e&&n)throw Error(ne(425))}function wf(){}var Rg=null,Cg=null;function Pg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Mg=typeof setTimeout=="function"?setTimeout:void 0,yL=typeof clearTimeout=="function"?clearTimeout:void 0,y_=typeof Promise=="function"?Promise:void 0,_L=typeof queueMicrotask=="function"?queueMicrotask:typeof y_<"u"?function(t){return y_.resolve(null).then(t).catch(bL)}:Mg;function bL(t){setTimeout(function(){throw t})}function np(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),eu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);eu(e)}function Hi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function __(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Da=Math.random().toString(36).slice(2),Fr="__reactFiber$"+Da,su="__reactProps$"+Da,si="__reactContainer$"+Da,Lg="__reactEvents$"+Da,wL="__reactListeners$"+Da,EL="__reactHandles$"+Da;function Ms(t){var e=t[Fr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[si]||n[Fr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=__(t);t!==null;){if(n=t[Fr])return n;t=__(t)}return e}t=n,n=t.parentNode}return null}function Su(t){return t=t[Fr]||t[si],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ho(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function mh(t){return t[su]||null}var kg=[],Wo=-1;function rs(t){return{current:t}}function pt(t){0>Wo||(t.current=kg[Wo],kg[Wo]=null,Wo--)}function ct(t,e){Wo++,kg[Wo]=t.current,t.current=e}var es={},ln=rs(es),An=rs(!1),Vs=es;function da(t,e){var n=t.type.contextTypes;if(!n)return es;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function xn(t){return t=t.childContextTypes,t!=null}function Ef(){pt(An),pt(ln)}function b_(t,e,n){if(ln.current!==es)throw Error(ne(168));ct(ln,e),ct(An,n)}function WE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ne(108,oM(t)||"Unknown",i));return St({},n,r)}function Sf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||es,Vs=ln.current,ct(ln,t),ct(An,An.current),!0}function w_(t,e,n){var r=t.stateNode;if(!r)throw Error(ne(169));n?(t=WE(t,e,Vs),r.__reactInternalMemoizedMergedChildContext=t,pt(An),pt(ln),ct(ln,t)):pt(An),ct(An,n)}var Qr=null,vh=!1,rp=!1;function XE(t){Qr===null?Qr=[t]:Qr.push(t)}function SL(t){vh=!0,XE(t)}function is(){if(!rp&&Qr!==null){rp=!0;var t=0,e=nt;try{var n=Qr;for(nt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qr=null,vh=!1}catch(i){throw Qr!==null&&(Qr=Qr.slice(t+1)),yE(rv,is),i}finally{nt=e,rp=!1}}return null}var Xo=[],qo=0,Tf=null,Af=0,Zn=[],Kn=0,Bs=null,ei=1,ti="";function Ss(t,e){Xo[qo++]=Af,Xo[qo++]=Tf,Tf=t,Af=e}function qE(t,e,n){Zn[Kn++]=ei,Zn[Kn++]=ti,Zn[Kn++]=Bs,Bs=t;var r=ei;t=ti;var i=32-wr(r)-1;r&=~(1<<i),n+=1;var s=32-wr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ei=1<<32-wr(e)+i|n<<i|r,ti=s+t}else ei=1<<s|n<<i|r,ti=t}function hv(t){t.return!==null&&(Ss(t,1),qE(t,1,0))}function dv(t){for(;t===Tf;)Tf=Xo[--qo],Xo[qo]=null,Af=Xo[--qo],Xo[qo]=null;for(;t===Bs;)Bs=Zn[--Kn],Zn[Kn]=null,ti=Zn[--Kn],Zn[Kn]=null,ei=Zn[--Kn],Zn[Kn]=null}var Vn=null,Un=null,mt=!1,yr=null;function YE(t,e){var n=Jn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function E_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vn=t,Un=Hi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vn=t,Un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Bs!==null?{id:ei,overflow:ti}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Jn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Vn=t,Un=null,!0):!1;default:return!1}}function Og(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ig(t){if(mt){var e=Un;if(e){var n=e;if(!E_(t,e)){if(Og(t))throw Error(ne(418));e=Hi(n.nextSibling);var r=Vn;e&&E_(t,e)?YE(r,n):(t.flags=t.flags&-4097|2,mt=!1,Vn=t)}}else{if(Og(t))throw Error(ne(418));t.flags=t.flags&-4097|2,mt=!1,Vn=t}}}function S_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vn=t}function mc(t){if(t!==Vn)return!1;if(!mt)return S_(t),mt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Pg(t.type,t.memoizedProps)),e&&(e=Un)){if(Og(t))throw ZE(),Error(ne(418));for(;e;)YE(t,e),e=Hi(e.nextSibling)}if(S_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Un=Hi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Un=null}}else Un=Vn?Hi(t.stateNode.nextSibling):null;return!0}function ZE(){for(var t=Un;t;)t=Hi(t.nextSibling)}function pa(){Un=Vn=null,mt=!1}function pv(t){yr===null?yr=[t]:yr.push(t)}var TL=fi.ReactCurrentBatchConfig;function pr(t,e){if(t&&t.defaultProps){e=St({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var xf=rs(null),Rf=null,Yo=null,gv=null;function mv(){gv=Yo=Rf=null}function vv(t){var e=xf.current;pt(xf),t._currentValue=e}function Ng(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function oa(t,e){Rf=t,gv=Yo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(Sn=!0),t.firstContext=null)}function nr(t){var e=t._currentValue;if(gv!==t)if(t={context:t,memoizedValue:e,next:null},Yo===null){if(Rf===null)throw Error(ne(308));Yo=t,Rf.dependencies={lanes:0,firstContext:t}}else Yo=Yo.next=t;return e}var Ls=null;function yv(t){Ls===null?Ls=[t]:Ls.push(t)}function KE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,yv(e)):(n.next=i.next,i.next=n),e.interleaved=n,oi(t,r)}function oi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Oi=!1;function _v(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function QE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ni(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(Ye&2)!==0){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,oi(t,n)}return i=r.interleaved,i===null?(e.next=e,yv(r)):(e.next=i.next,i.next=e),r.interleaved=e,oi(t,n)}function Yc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,iv(t,n)}}function T_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Cf(t,e,n,r){var i=t.updateQueue;Oi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,c=u=l=null,a=s;do{var d=a.lane,g=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,m=a;switch(d=e,g=n,m.tag){case 1:if(y=m.payload,typeof y=="function"){f=y.call(g,f,d);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=m.payload,d=typeof y=="function"?y.call(g,f,d):y,d==null)break e;f=St({},f,d);break e;case 2:Oi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else g={eventTime:g,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=g,l=f):c=c.next=g,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);js|=o,t.lanes=o,t.memoizedState=f}}function A_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ne(191,i));i.call(r)}}}var JE=new Kw.Component().refs;function Dg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:St({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yh={isMounted:function(t){return(t=t._reactInternals)?Zs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=mn(),i=qi(t),s=ni(r,i);s.payload=e,n!=null&&(s.callback=n),e=Wi(t,s,i),e!==null&&(Er(e,t,i,r),Yc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=mn(),i=qi(t),s=ni(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Wi(t,s,i),e!==null&&(Er(e,t,i,r),Yc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mn(),r=qi(t),i=ni(n,r);i.tag=2,e!=null&&(i.callback=e),e=Wi(t,i,r),e!==null&&(Er(e,t,r,n),Yc(e,t,r))}};function x_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!nu(n,r)||!nu(i,s):!0}function eS(t,e,n){var r=!1,i=es,s=e.contextType;return typeof s=="object"&&s!==null?s=nr(s):(i=xn(e)?Vs:ln.current,r=e.contextTypes,s=(r=r!=null)?da(t,i):es),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function R_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yh.enqueueReplaceState(e,e.state,null)}function Fg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=JE,_v(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=nr(s):(s=xn(e)?Vs:ln.current,i.context=da(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Dg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&yh.enqueueReplaceState(i,i.state,null),Cf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function sl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ne(309));var r=n.stateNode}if(!r)throw Error(ne(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===JE&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ne(284));if(!n._owner)throw Error(ne(290,t))}return t}function vc(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function C_(t){var e=t._init;return e(t._payload)}function tS(t){function e(S,v){if(t){var w=S.deletions;w===null?(S.deletions=[v],S.flags|=16):w.push(v)}}function n(S,v){if(!t)return null;for(;v!==null;)e(S,v),v=v.sibling;return null}function r(S,v){for(S=new Map;v!==null;)v.key!==null?S.set(v.key,v):S.set(v.index,v),v=v.sibling;return S}function i(S,v){return S=Yi(S,v),S.index=0,S.sibling=null,S}function s(S,v,w){return S.index=w,t?(w=S.alternate,w!==null?(w=w.index,w<v?(S.flags|=2,v):w):(S.flags|=2,v)):(S.flags|=1048576,v)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function a(S,v,w,R){return v===null||v.tag!==6?(v=cp(w,S.mode,R),v.return=S,v):(v=i(v,w),v.return=S,v)}function l(S,v,w,R){var L=w.type;return L===zo?c(S,v,w.props.children,R,w.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ki&&C_(L)===v.type)?(R=i(v,w.props),R.ref=sl(S,v,w),R.return=S,R):(R=tf(w.type,w.key,w.props,null,S.mode,R),R.ref=sl(S,v,w),R.return=S,R)}function u(S,v,w,R){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=fp(w,S.mode,R),v.return=S,v):(v=i(v,w.children||[]),v.return=S,v)}function c(S,v,w,R,L){return v===null||v.tag!==7?(v=Ds(w,S.mode,R,L),v.return=S,v):(v=i(v,w),v.return=S,v)}function f(S,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=cp(""+v,S.mode,w),v.return=S,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case oc:return w=tf(v.type,v.key,v.props,null,S.mode,w),w.ref=sl(S,null,v),w.return=S,w;case Bo:return v=fp(v,S.mode,w),v.return=S,v;case ki:var R=v._init;return f(S,R(v._payload),w)}if(Sl(v)||el(v))return v=Ds(v,S.mode,w,null),v.return=S,v;vc(S,v)}return null}function d(S,v,w,R){var L=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return L!==null?null:a(S,v,""+w,R);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case oc:return w.key===L?l(S,v,w,R):null;case Bo:return w.key===L?u(S,v,w,R):null;case ki:return L=w._init,d(S,v,L(w._payload),R)}if(Sl(w)||el(w))return L!==null?null:c(S,v,w,R,null);vc(S,w)}return null}function g(S,v,w,R,L){if(typeof R=="string"&&R!==""||typeof R=="number")return S=S.get(w)||null,a(v,S,""+R,L);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case oc:return S=S.get(R.key===null?w:R.key)||null,l(v,S,R,L);case Bo:return S=S.get(R.key===null?w:R.key)||null,u(v,S,R,L);case ki:var C=R._init;return g(S,v,w,C(R._payload),L)}if(Sl(R)||el(R))return S=S.get(w)||null,c(v,S,R,L,null);vc(v,R)}return null}function y(S,v,w,R){for(var L=null,C=null,U=v,N=v=0,H=null;U!==null&&N<w.length;N++){U.index>N?(H=U,U=null):H=U.sibling;var G=d(S,U,w[N],R);if(G===null){U===null&&(U=H);break}t&&U&&G.alternate===null&&e(S,U),v=s(G,v,N),C===null?L=G:C.sibling=G,C=G,U=H}if(N===w.length)return n(S,U),mt&&Ss(S,N),L;if(U===null){for(;N<w.length;N++)U=f(S,w[N],R),U!==null&&(v=s(U,v,N),C===null?L=U:C.sibling=U,C=U);return mt&&Ss(S,N),L}for(U=r(S,U);N<w.length;N++)H=g(U,S,N,w[N],R),H!==null&&(t&&H.alternate!==null&&U.delete(H.key===null?N:H.key),v=s(H,v,N),C===null?L=H:C.sibling=H,C=H);return t&&U.forEach(function(ie){return e(S,ie)}),mt&&Ss(S,N),L}function m(S,v,w,R){var L=el(w);if(typeof L!="function")throw Error(ne(150));if(w=L.call(w),w==null)throw Error(ne(151));for(var C=L=null,U=v,N=v=0,H=null,G=w.next();U!==null&&!G.done;N++,G=w.next()){U.index>N?(H=U,U=null):H=U.sibling;var ie=d(S,U,G.value,R);if(ie===null){U===null&&(U=H);break}t&&U&&ie.alternate===null&&e(S,U),v=s(ie,v,N),C===null?L=ie:C.sibling=ie,C=ie,U=H}if(G.done)return n(S,U),mt&&Ss(S,N),L;if(U===null){for(;!G.done;N++,G=w.next())G=f(S,G.value,R),G!==null&&(v=s(G,v,N),C===null?L=G:C.sibling=G,C=G);return mt&&Ss(S,N),L}for(U=r(S,U);!G.done;N++,G=w.next())G=g(U,S,N,G.value,R),G!==null&&(t&&G.alternate!==null&&U.delete(G.key===null?N:G.key),v=s(G,v,N),C===null?L=G:C.sibling=G,C=G);return t&&U.forEach(function(Ce){return e(S,Ce)}),mt&&Ss(S,N),L}function x(S,v,w,R){if(typeof w=="object"&&w!==null&&w.type===zo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case oc:e:{for(var L=w.key,C=v;C!==null;){if(C.key===L){if(L=w.type,L===zo){if(C.tag===7){n(S,C.sibling),v=i(C,w.props.children),v.return=S,S=v;break e}}else if(C.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ki&&C_(L)===C.type){n(S,C.sibling),v=i(C,w.props),v.ref=sl(S,C,w),v.return=S,S=v;break e}n(S,C);break}else e(S,C);C=C.sibling}w.type===zo?(v=Ds(w.props.children,S.mode,R,w.key),v.return=S,S=v):(R=tf(w.type,w.key,w.props,null,S.mode,R),R.ref=sl(S,v,w),R.return=S,S=R)}return o(S);case Bo:e:{for(C=w.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(S,v.sibling),v=i(v,w.children||[]),v.return=S,S=v;break e}else{n(S,v);break}else e(S,v);v=v.sibling}v=fp(w,S.mode,R),v.return=S,S=v}return o(S);case ki:return C=w._init,x(S,v,C(w._payload),R)}if(Sl(w))return y(S,v,w,R);if(el(w))return m(S,v,w,R);vc(S,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(S,v.sibling),v=i(v,w),v.return=S,S=v):(n(S,v),v=cp(w,S.mode,R),v.return=S,S=v),o(S)):n(S,v)}return x}var ga=tS(!0),nS=tS(!1),Tu={},Br=rs(Tu),ou=rs(Tu),au=rs(Tu);function ks(t){if(t===Tu)throw Error(ne(174));return t}function bv(t,e){switch(ct(au,e),ct(ou,t),ct(Br,Tu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gg(e,t)}pt(Br),ct(Br,e)}function ma(){pt(Br),pt(ou),pt(au)}function rS(t){ks(au.current);var e=ks(Br.current),n=gg(e,t.type);e!==n&&(ct(ou,t),ct(Br,n))}function wv(t){ou.current===t&&(pt(Br),pt(ou))}var wt=rs(0);function Pf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ip=[];function Ev(){for(var t=0;t<ip.length;t++)ip[t]._workInProgressVersionPrimary=null;ip.length=0}var Zc=fi.ReactCurrentDispatcher,sp=fi.ReactCurrentBatchConfig,zs=0,Et=null,Dt=null,jt=null,Mf=!1,Dl=!1,lu=0,AL=0;function tn(){throw Error(ne(321))}function Sv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ar(t[n],e[n]))return!1;return!0}function Tv(t,e,n,r,i,s){if(zs=s,Et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zc.current=t===null||t.memoizedState===null?PL:ML,t=n(r,i),Dl){s=0;do{if(Dl=!1,lu=0,25<=s)throw Error(ne(301));s+=1,jt=Dt=null,e.updateQueue=null,Zc.current=LL,t=n(r,i)}while(Dl)}if(Zc.current=Lf,e=Dt!==null&&Dt.next!==null,zs=0,jt=Dt=Et=null,Mf=!1,e)throw Error(ne(300));return t}function Av(){var t=lu!==0;return lu=0,t}function Dr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?Et.memoizedState=jt=t:jt=jt.next=t,jt}function rr(){if(Dt===null){var t=Et.alternate;t=t!==null?t.memoizedState:null}else t=Dt.next;var e=jt===null?Et.memoizedState:jt.next;if(e!==null)jt=e,Dt=t;else{if(t===null)throw Error(ne(310));Dt=t,t={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},jt===null?Et.memoizedState=jt=t:jt=jt.next=t}return jt}function uu(t,e){return typeof e=="function"?e(t):e}function op(t){var e=rr(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=Dt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((zs&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Et.lanes|=c,js|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Ar(r,e.memoizedState)||(Sn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Et.lanes|=s,js|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ap(t){var e=rr(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ar(s,e.memoizedState)||(Sn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function iS(){}function sS(t,e){var n=Et,r=rr(),i=e(),s=!Ar(r.memoizedState,i);if(s&&(r.memoizedState=i,Sn=!0),r=r.queue,xv(lS.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||jt!==null&&jt.memoizedState.tag&1){if(n.flags|=2048,cu(9,aS.bind(null,n,r,i,e),void 0,null),$t===null)throw Error(ne(349));(zs&30)!==0||oS(n,e,i)}return i}function oS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function aS(t,e,n,r){e.value=n,e.getSnapshot=r,uS(e)&&cS(t)}function lS(t,e,n){return n(function(){uS(e)&&cS(t)})}function uS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ar(t,n)}catch{return!0}}function cS(t){var e=oi(t,1);e!==null&&Er(e,t,1,-1)}function P_(t){var e=Dr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uu,lastRenderedState:t},e.queue=t,t=t.dispatch=CL.bind(null,Et,t),[e.memoizedState,t]}function cu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function fS(){return rr().memoizedState}function Kc(t,e,n,r){var i=Dr();Et.flags|=t,i.memoizedState=cu(1|e,n,void 0,r===void 0?null:r)}function _h(t,e,n,r){var i=rr();r=r===void 0?null:r;var s=void 0;if(Dt!==null){var o=Dt.memoizedState;if(s=o.destroy,r!==null&&Sv(r,o.deps)){i.memoizedState=cu(e,n,s,r);return}}Et.flags|=t,i.memoizedState=cu(1|e,n,s,r)}function M_(t,e){return Kc(8390656,8,t,e)}function xv(t,e){return _h(2048,8,t,e)}function hS(t,e){return _h(4,2,t,e)}function dS(t,e){return _h(4,4,t,e)}function pS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gS(t,e,n){return n=n!=null?n.concat([t]):null,_h(4,4,pS.bind(null,e,t),n)}function Rv(){}function mS(t,e){var n=rr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Sv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function vS(t,e){var n=rr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Sv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function yS(t,e,n){return(zs&21)===0?(t.baseState&&(t.baseState=!1,Sn=!0),t.memoizedState=n):(Ar(n,e)||(n=wE(),Et.lanes|=n,js|=n,t.baseState=!0),e)}function xL(t,e){var n=nt;nt=n!==0&&4>n?n:4,t(!0);var r=sp.transition;sp.transition={};try{t(!1),e()}finally{nt=n,sp.transition=r}}function _S(){return rr().memoizedState}function RL(t,e,n){var r=qi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},bS(t))wS(e,n);else if(n=KE(t,e,n,r),n!==null){var i=mn();Er(n,t,r,i),ES(n,e,r)}}function CL(t,e,n){var r=qi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(bS(t))wS(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ar(a,o)){var l=e.interleaved;l===null?(i.next=i,yv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=KE(t,e,i,r),n!==null&&(i=mn(),Er(n,t,r,i),ES(n,e,r))}}function bS(t){var e=t.alternate;return t===Et||e!==null&&e===Et}function wS(t,e){Dl=Mf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ES(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,iv(t,n)}}var Lf={readContext:nr,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},PL={readContext:nr,useCallback:function(t,e){return Dr().memoizedState=[t,e===void 0?null:e],t},useContext:nr,useEffect:M_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Kc(4194308,4,pS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Kc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Kc(4,2,t,e)},useMemo:function(t,e){var n=Dr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Dr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=RL.bind(null,Et,t),[r.memoizedState,t]},useRef:function(t){var e=Dr();return t={current:t},e.memoizedState=t},useState:P_,useDebugValue:Rv,useDeferredValue:function(t){return Dr().memoizedState=t},useTransition:function(){var t=P_(!1),e=t[0];return t=xL.bind(null,t[1]),Dr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Et,i=Dr();if(mt){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=e(),$t===null)throw Error(ne(349));(zs&30)!==0||oS(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,M_(lS.bind(null,r,s,t),[t]),r.flags|=2048,cu(9,aS.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Dr(),e=$t.identifierPrefix;if(mt){var n=ti,r=ei;n=(r&~(1<<32-wr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=lu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=AL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ML={readContext:nr,useCallback:mS,useContext:nr,useEffect:xv,useImperativeHandle:gS,useInsertionEffect:hS,useLayoutEffect:dS,useMemo:vS,useReducer:op,useRef:fS,useState:function(){return op(uu)},useDebugValue:Rv,useDeferredValue:function(t){var e=rr();return yS(e,Dt.memoizedState,t)},useTransition:function(){var t=op(uu)[0],e=rr().memoizedState;return[t,e]},useMutableSource:iS,useSyncExternalStore:sS,useId:_S,unstable_isNewReconciler:!1},LL={readContext:nr,useCallback:mS,useContext:nr,useEffect:xv,useImperativeHandle:gS,useInsertionEffect:hS,useLayoutEffect:dS,useMemo:vS,useReducer:ap,useRef:fS,useState:function(){return ap(uu)},useDebugValue:Rv,useDeferredValue:function(t){var e=rr();return Dt===null?e.memoizedState=t:yS(e,Dt.memoizedState,t)},useTransition:function(){var t=ap(uu)[0],e=rr().memoizedState;return[t,e]},useMutableSource:iS,useSyncExternalStore:sS,useId:_S,unstable_isNewReconciler:!1};function va(t,e){try{var n="",r=e;do n+=sM(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function lp(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function Ug(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var kL=typeof WeakMap=="function"?WeakMap:Map;function SS(t,e,n){n=ni(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Of||(Of=!0,qg=r),Ug(t,e)},n}function TS(t,e,n){n=ni(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ug(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ug(t,e),typeof r!="function"&&(Xi===null?Xi=new Set([this]):Xi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function L_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new kL;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=WL.bind(null,t,e,n),e.then(t,t))}function k_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function O_(t,e,n,r,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ni(-1,1),e.tag=2,Wi(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var OL=fi.ReactCurrentOwner,Sn=!1;function hn(t,e,n,r){e.child=t===null?nS(e,null,n,r):ga(e,t.child,n,r)}function I_(t,e,n,r,i){n=n.render;var s=e.ref;return oa(e,i),r=Tv(t,e,n,r,s,i),n=Av(),t!==null&&!Sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ai(t,e,i)):(mt&&n&&hv(e),e.flags|=1,hn(t,e,r,i),e.child)}function N_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Nv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,AS(t,e,s,r,i)):(t=tf(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,(t.lanes&i)===0){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:nu,n(o,r)&&t.ref===e.ref)return ai(t,e,i)}return e.flags|=1,t=Yi(s,r),t.ref=e.ref,t.return=e,e.child=t}function AS(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(nu(s,r)&&t.ref===e.ref)if(Sn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)(t.flags&131072)!==0&&(Sn=!0);else return e.lanes=t.lanes,ai(t,e,i)}return Vg(t,e,n,r,i)}function xS(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct(Ko,Nn),Nn|=n;else{if((n&1073741824)===0)return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ct(Ko,Nn),Nn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ct(Ko,Nn),Nn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ct(Ko,Nn),Nn|=r;return hn(t,e,i,n),e.child}function RS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vg(t,e,n,r,i){var s=xn(n)?Vs:ln.current;return s=da(e,s),oa(e,i),n=Tv(t,e,n,r,s,i),r=Av(),t!==null&&!Sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ai(t,e,i)):(mt&&r&&hv(e),e.flags|=1,hn(t,e,n,i),e.child)}function D_(t,e,n,r,i){if(xn(n)){var s=!0;Sf(e)}else s=!1;if(oa(e,i),e.stateNode===null)Qc(t,e),eS(e,n,r),Fg(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=nr(u):(u=xn(n)?Vs:ln.current,u=da(e,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&R_(e,o,r,u),Oi=!1;var d=e.memoizedState;o.state=d,Cf(e,r,o,i),l=e.memoizedState,a!==r||d!==l||An.current||Oi?(typeof c=="function"&&(Dg(e,n,c,r),l=e.memoizedState),(a=Oi||x_(e,n,a,r,d,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,QE(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:pr(e.type,a),o.props=u,f=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=nr(l):(l=xn(n)?Vs:ln.current,l=da(e,l));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==l)&&R_(e,o,r,l),Oi=!1,d=e.memoizedState,o.state=d,Cf(e,r,o,i);var y=e.memoizedState;a!==f||d!==y||An.current||Oi?(typeof g=="function"&&(Dg(e,n,g,r),y=e.memoizedState),(u=Oi||x_(e,n,u,r,d,y,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Bg(t,e,n,r,s,i)}function Bg(t,e,n,r,i,s){RS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&w_(e,n,!1),ai(t,e,s);r=e.stateNode,OL.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ga(e,t.child,null,s),e.child=ga(e,null,a,s)):hn(t,e,a,s),e.memoizedState=r.state,i&&w_(e,n,!0),e.child}function CS(t){var e=t.stateNode;e.pendingContext?b_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&b_(t,e.context,!1),bv(t,e.containerInfo)}function F_(t,e,n,r,i){return pa(),pv(i),e.flags|=256,hn(t,e,n,r),e.child}var zg={dehydrated:null,treeContext:null,retryLane:0};function jg(t){return{baseLanes:t,cachePool:null,transitions:null}}function PS(t,e,n){var r=e.pendingProps,i=wt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ct(wt,i&1),t===null)return Ig(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},(r&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Eh(o,r,0,null),t=Ds(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=jg(n),e.memoizedState=zg,t):Cv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return IL(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return(o&1)===0&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Yi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Yi(a,s):(s=Ds(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?jg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=zg,r}return s=t.child,t=s.sibling,r=Yi(s,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Cv(t,e){return e=Eh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yc(t,e,n,r){return r!==null&&pv(r),ga(e,t.child,null,n),t=Cv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function IL(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=lp(Error(ne(422))),yc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Eh({mode:"visible",children:r.children},i,0,null),s=Ds(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,(e.mode&1)!==0&&ga(e,t.child,null,o),e.child.memoizedState=jg(o),e.memoizedState=zg,s);if((e.mode&1)===0)return yc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ne(419)),r=lp(s,r,void 0),yc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Sn||a){if(r=$t,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|o))!==0?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,oi(t,i),Er(r,t,i,-1))}return Iv(),r=lp(Error(ne(421))),yc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=XL.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Un=Hi(i.nextSibling),Vn=e,mt=!0,yr=null,t!==null&&(Zn[Kn++]=ei,Zn[Kn++]=ti,Zn[Kn++]=Bs,ei=t.id,ti=t.overflow,Bs=e),e=Cv(e,r.children),e.flags|=4096,e)}function U_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ng(t.return,e,n)}function up(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function MS(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(hn(t,e,r.children,n),r=wt.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&U_(t,n,e);else if(t.tag===19)U_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ct(wt,r),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Pf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),up(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Pf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}up(e,!0,n,null,s);break;case"together":up(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qc(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ai(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),js|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,n=Yi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Yi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function NL(t,e,n){switch(e.tag){case 3:CS(e),pa();break;case 5:rS(e);break;case 1:xn(e.type)&&Sf(e);break;case 4:bv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ct(xf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ct(wt,wt.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?PS(t,e,n):(ct(wt,wt.current&1),t=ai(t,e,n),t!==null?t.sibling:null);ct(wt,wt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return MS(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ct(wt,wt.current),r)break;return null;case 22:case 23:return e.lanes=0,xS(t,e,n)}return ai(t,e,n)}var LS,$g,kS,OS;LS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$g=function(){};kS=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ks(Br.current);var s=null;switch(n){case"input":i=fg(t,i),r=fg(t,r),s=[];break;case"select":i=St({},i,{value:void 0}),r=St({},r,{value:void 0}),s=[];break;case"textarea":i=pg(t,i),r=pg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wf)}mg(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Yl.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Yl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&dt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};OS=function(t,e,n,r){n!==r&&(e.flags|=4)};function ol(t,e){if(!mt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function nn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function DL(t,e,n){var r=e.pendingProps;switch(dv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(e),null;case 1:return xn(e.type)&&Ef(),nn(e),null;case 3:return r=e.stateNode,ma(),pt(An),pt(ln),Ev(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(mc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,yr!==null&&(Kg(yr),yr=null))),$g(t,e),nn(e),null;case 5:wv(e);var i=ks(au.current);if(n=e.type,t!==null&&e.stateNode!=null)kS(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ne(166));return nn(e),null}if(t=ks(Br.current),mc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Fr]=e,r[su]=s,t=(e.mode&1)!==0,n){case"dialog":dt("cancel",r),dt("close",r);break;case"iframe":case"object":case"embed":dt("load",r);break;case"video":case"audio":for(i=0;i<Al.length;i++)dt(Al[i],r);break;case"source":dt("error",r);break;case"img":case"image":case"link":dt("error",r),dt("load",r);break;case"details":dt("toggle",r);break;case"input":Xy(r,s),dt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},dt("invalid",r);break;case"textarea":Yy(r,s),dt("invalid",r)}mg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&gc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&gc(r.textContent,a,t),i=["children",""+a]):Yl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&dt("scroll",r)}switch(n){case"input":ac(r),qy(r,s,!0);break;case"textarea":ac(r),Zy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=wf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=oE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Fr]=e,t[su]=r,LS(t,e,!1,!1),e.stateNode=t;e:{switch(o=vg(n,r),n){case"dialog":dt("cancel",t),dt("close",t),i=r;break;case"iframe":case"object":case"embed":dt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Al.length;i++)dt(Al[i],t);i=r;break;case"source":dt("error",t),i=r;break;case"img":case"image":case"link":dt("error",t),dt("load",t),i=r;break;case"details":dt("toggle",t),i=r;break;case"input":Xy(t,r),i=fg(t,r),dt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=St({},r,{value:void 0}),dt("invalid",t);break;case"textarea":Yy(t,r),i=pg(t,r),dt("invalid",t);break;default:i=r}mg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?uE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&aE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Zl(t,l):typeof l=="number"&&Zl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Yl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&dt("scroll",t):l!=null&&Qm(t,s,l,o))}switch(n){case"input":ac(t),qy(t,r,!1);break;case"textarea":ac(t),Zy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ji(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?na(t,!!r.multiple,s,!1):r.defaultValue!=null&&na(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=wf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nn(e),null;case 6:if(t&&e.stateNode!=null)OS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ne(166));if(n=ks(au.current),ks(Br.current),mc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Fr]=e,(s=r.nodeValue!==n)&&(t=Vn,t!==null))switch(t.tag){case 3:gc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Fr]=e,e.stateNode=r}return nn(e),null;case 13:if(pt(wt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(mt&&Un!==null&&(e.mode&1)!==0&&(e.flags&128)===0)ZE(),pa(),e.flags|=98560,s=!1;else if(s=mc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ne(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ne(317));s[Fr]=e}else pa(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;nn(e),s=!1}else yr!==null&&(Kg(yr),yr=null),s=!0;if(!s)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(wt.current&1)!==0?Ft===0&&(Ft=3):Iv())),e.updateQueue!==null&&(e.flags|=4),nn(e),null);case 4:return ma(),$g(t,e),t===null&&ru(e.stateNode.containerInfo),nn(e),null;case 10:return vv(e.type._context),nn(e),null;case 17:return xn(e.type)&&Ef(),nn(e),null;case 19:if(pt(wt),s=e.memoizedState,s===null)return nn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ol(s,!1);else{if(Ft!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=Pf(t),o!==null){for(e.flags|=128,ol(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ct(wt,wt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Rt()>ya&&(e.flags|=128,r=!0,ol(s,!1),e.lanes=4194304)}else{if(!r)if(t=Pf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ol(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!mt)return nn(e),null}else 2*Rt()-s.renderingStartTime>ya&&n!==1073741824&&(e.flags|=128,r=!0,ol(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Rt(),e.sibling=null,n=wt.current,ct(wt,r?n&1|2:n&1),e):(nn(e),null);case 22:case 23:return Ov(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(Nn&1073741824)!==0&&(nn(e),e.subtreeFlags&6&&(e.flags|=8192)):nn(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function FL(t,e){switch(dv(e),e.tag){case 1:return xn(e.type)&&Ef(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ma(),pt(An),pt(ln),Ev(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return wv(e),null;case 13:if(pt(wt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));pa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pt(wt),null;case 4:return ma(),null;case 10:return vv(e.type._context),null;case 22:case 23:return Ov(),null;case 24:return null;default:return null}}var _c=!1,an=!1,UL=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Zo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){At(t,e,r)}else n.current=null}function Gg(t,e,n){try{n()}catch(r){At(t,e,r)}}var V_=!1;function VL(t,e){if(Rg=yf,t=FE(),fv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,f=t,d=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)d=f,f=g;for(;;){if(f===t)break t;if(d===n&&++u===i&&(a=o),d===s&&++c===r&&(l=o),(g=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cg={focusedElem:t,selectionRange:n},yf=!1,ve=e;ve!==null;)if(e=ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ve=t;else for(;ve!==null;){e=ve;try{var y=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var m=y.memoizedProps,x=y.memoizedState,S=e.stateNode,v=S.getSnapshotBeforeUpdate(e.elementType===e.type?m:pr(e.type,m),x);S.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(R){At(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,ve=t;break}ve=e.return}return y=V_,V_=!1,y}function Fl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Gg(e,n,s)}i=i.next}while(i!==r)}}function bh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Hg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function IS(t){var e=t.alternate;e!==null&&(t.alternate=null,IS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Fr],delete e[su],delete e[Lg],delete e[wL],delete e[EL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function NS(t){return t.tag===5||t.tag===3||t.tag===4}function B_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||NS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wf));else if(r!==4&&(t=t.child,t!==null))for(Wg(t,e,n),t=t.sibling;t!==null;)Wg(t,e,n),t=t.sibling}function Xg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Xg(t,e,n),t=t.sibling;t!==null;)Xg(t,e,n),t=t.sibling}var Yt=null,vr=!1;function xi(t,e,n){for(n=n.child;n!==null;)DS(t,e,n),n=n.sibling}function DS(t,e,n){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(hh,n)}catch{}switch(n.tag){case 5:an||Zo(n,e);case 6:var r=Yt,i=vr;Yt=null,xi(t,e,n),Yt=r,vr=i,Yt!==null&&(vr?(t=Yt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Yt.removeChild(n.stateNode));break;case 18:Yt!==null&&(vr?(t=Yt,n=n.stateNode,t.nodeType===8?np(t.parentNode,n):t.nodeType===1&&np(t,n),eu(t)):np(Yt,n.stateNode));break;case 4:r=Yt,i=vr,Yt=n.stateNode.containerInfo,vr=!0,xi(t,e,n),Yt=r,vr=i;break;case 0:case 11:case 14:case 15:if(!an&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&Gg(n,e,o),i=i.next}while(i!==r)}xi(t,e,n);break;case 1:if(!an&&(Zo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){At(n,e,a)}xi(t,e,n);break;case 21:xi(t,e,n);break;case 22:n.mode&1?(an=(r=an)||n.memoizedState!==null,xi(t,e,n),an=r):xi(t,e,n);break;default:xi(t,e,n)}}function z_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new UL),e.forEach(function(r){var i=qL.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function hr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Yt=a.stateNode,vr=!1;break e;case 3:Yt=a.stateNode.containerInfo,vr=!0;break e;case 4:Yt=a.stateNode.containerInfo,vr=!0;break e}a=a.return}if(Yt===null)throw Error(ne(160));DS(s,o,i),Yt=null,vr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){At(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)FS(e,t),e=e.sibling}function FS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hr(e,t),kr(t),r&4){try{Fl(3,t,t.return),bh(3,t)}catch(m){At(t,t.return,m)}try{Fl(5,t,t.return)}catch(m){At(t,t.return,m)}}break;case 1:hr(e,t),kr(t),r&512&&n!==null&&Zo(n,n.return);break;case 5:if(hr(e,t),kr(t),r&512&&n!==null&&Zo(n,n.return),t.flags&32){var i=t.stateNode;try{Zl(i,"")}catch(m){At(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&iE(i,s),vg(a,o);var u=vg(a,s);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?uE(i,f):c==="dangerouslySetInnerHTML"?aE(i,f):c==="children"?Zl(i,f):Qm(i,c,f,u)}switch(a){case"input":hg(i,s);break;case"textarea":sE(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?na(i,!!s.multiple,g,!1):d!==!!s.multiple&&(s.defaultValue!=null?na(i,!!s.multiple,s.defaultValue,!0):na(i,!!s.multiple,s.multiple?[]:"",!1))}i[su]=s}catch(m){At(t,t.return,m)}}break;case 6:if(hr(e,t),kr(t),r&4){if(t.stateNode===null)throw Error(ne(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){At(t,t.return,m)}}break;case 3:if(hr(e,t),kr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{eu(e.containerInfo)}catch(m){At(t,t.return,m)}break;case 4:hr(e,t),kr(t);break;case 13:hr(e,t),kr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Lv=Rt())),r&4&&z_(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(an=(u=an)||c,hr(e,t),an=u):hr(e,t),kr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&(t.mode&1)!==0)for(ve=t,c=t.child;c!==null;){for(f=ve=c;ve!==null;){switch(d=ve,g=d.child,d.tag){case 0:case 11:case 14:case 15:Fl(4,d,d.return);break;case 1:Zo(d,d.return);var y=d.stateNode;if(typeof y.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(m){At(r,n,m)}}break;case 5:Zo(d,d.return);break;case 22:if(d.memoizedState!==null){$_(f);continue}}g!==null?(g.return=d,ve=g):$_(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=lE("display",o))}catch(m){At(t,t.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){At(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:hr(e,t),kr(t),r&4&&z_(t);break;case 21:break;default:hr(e,t),kr(t)}}function kr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(NS(n)){var r=n;break e}n=n.return}throw Error(ne(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Zl(i,""),r.flags&=-33);var s=B_(t);Xg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=B_(t);Wg(t,a,o);break;default:throw Error(ne(161))}}catch(l){At(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function BL(t,e,n){ve=t,US(t)}function US(t,e,n){for(var r=(t.mode&1)!==0;ve!==null;){var i=ve,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||_c;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||an;a=_c;var u=an;if(_c=o,(an=l)&&!u)for(ve=i;ve!==null;)o=ve,l=o.child,o.tag===22&&o.memoizedState!==null?G_(i):l!==null?(l.return=o,ve=l):G_(i);for(;s!==null;)ve=s,US(s),s=s.sibling;ve=i,_c=a,an=u}j_(t)}else(i.subtreeFlags&8772)!==0&&s!==null?(s.return=i,ve=s):j_(t)}}function j_(t){for(;ve!==null;){var e=ve;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:an||bh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!an)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:pr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&A_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}A_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&eu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}an||e.flags&512&&Hg(e)}catch(d){At(e,e.return,d)}}if(e===t){ve=null;break}if(n=e.sibling,n!==null){n.return=e.return,ve=n;break}ve=e.return}}function $_(t){for(;ve!==null;){var e=ve;if(e===t){ve=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ve=n;break}ve=e.return}}function G_(t){for(;ve!==null;){var e=ve;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{bh(4,e)}catch(l){At(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){At(e,i,l)}}var s=e.return;try{Hg(e)}catch(l){At(e,s,l)}break;case 5:var o=e.return;try{Hg(e)}catch(l){At(e,o,l)}}}catch(l){At(e,e.return,l)}if(e===t){ve=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ve=a;break}ve=e.return}}var zL=Math.ceil,kf=fi.ReactCurrentDispatcher,Pv=fi.ReactCurrentOwner,er=fi.ReactCurrentBatchConfig,Ye=0,$t=null,kt=null,Kt=0,Nn=0,Ko=rs(0),Ft=0,fu=null,js=0,wh=0,Mv=0,Ul=null,En=null,Lv=0,ya=1/0,Kr=null,Of=!1,qg=null,Xi=null,bc=!1,Vi=null,If=0,Vl=0,Yg=null,Jc=-1,ef=0;function mn(){return(Ye&6)!==0?Rt():Jc!==-1?Jc:Jc=Rt()}function qi(t){return(t.mode&1)===0?1:(Ye&2)!==0&&Kt!==0?Kt&-Kt:TL.transition!==null?(ef===0&&(ef=wE()),ef):(t=nt,t!==0||(t=window.event,t=t===void 0?16:CE(t.type)),t)}function Er(t,e,n,r){if(50<Vl)throw Vl=0,Yg=null,Error(ne(185));wu(t,n,r),((Ye&2)===0||t!==$t)&&(t===$t&&((Ye&2)===0&&(wh|=n),Ft===4&&Fi(t,Kt)),Rn(t,r),n===1&&Ye===0&&(e.mode&1)===0&&(ya=Rt()+500,vh&&is()))}function Rn(t,e){var n=t.callbackNode;TM(t,e);var r=vf(t,t===$t?Kt:0);if(r===0)n!==null&&Jy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Jy(n),e===1)t.tag===0?SL(H_.bind(null,t)):XE(H_.bind(null,t)),_L(function(){(Ye&6)===0&&is()}),n=null;else{switch(EE(r)){case 1:n=rv;break;case 4:n=_E;break;case 16:n=mf;break;case 536870912:n=bE;break;default:n=mf}n=WS(n,VS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function VS(t,e){if(Jc=-1,ef=0,(Ye&6)!==0)throw Error(ne(327));var n=t.callbackNode;if(aa()&&t.callbackNode!==n)return null;var r=vf(t,t===$t?Kt:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=Nf(t,r);else{e=r;var i=Ye;Ye|=2;var s=zS();($t!==t||Kt!==e)&&(Kr=null,ya=Rt()+500,Ns(t,e));do try{GL();break}catch(a){BS(t,a)}while(1);mv(),kf.current=s,Ye=i,kt!==null?e=0:($t=null,Kt=0,e=Ft)}if(e!==0){if(e===2&&(i=Eg(t),i!==0&&(r=i,e=Zg(t,i))),e===1)throw n=fu,Ns(t,0),Fi(t,r),Rn(t,Rt()),n;if(e===6)Fi(t,r);else{if(i=t.current.alternate,(r&30)===0&&!jL(i)&&(e=Nf(t,r),e===2&&(s=Eg(t),s!==0&&(r=s,e=Zg(t,s))),e===1))throw n=fu,Ns(t,0),Fi(t,r),Rn(t,Rt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ne(345));case 2:Ts(t,En,Kr);break;case 3:if(Fi(t,r),(r&130023424)===r&&(e=Lv+500-Rt(),10<e)){if(vf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){mn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Mg(Ts.bind(null,t,En,Kr),e);break}Ts(t,En,Kr);break;case 4:if(Fi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-wr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zL(r/1960))-r,10<r){t.timeoutHandle=Mg(Ts.bind(null,t,En,Kr),r);break}Ts(t,En,Kr);break;case 5:Ts(t,En,Kr);break;default:throw Error(ne(329))}}}return Rn(t,Rt()),t.callbackNode===n?VS.bind(null,t):null}function Zg(t,e){var n=Ul;return t.current.memoizedState.isDehydrated&&(Ns(t,e).flags|=256),t=Nf(t,e),t!==2&&(e=En,En=n,e!==null&&Kg(e)),t}function Kg(t){En===null?En=t:En.push.apply(En,t)}function jL(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ar(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fi(t,e){for(e&=~Mv,e&=~wh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wr(e),r=1<<n;t[n]=-1,e&=~r}}function H_(t){if((Ye&6)!==0)throw Error(ne(327));aa();var e=vf(t,0);if((e&1)===0)return Rn(t,Rt()),null;var n=Nf(t,e);if(t.tag!==0&&n===2){var r=Eg(t);r!==0&&(e=r,n=Zg(t,r))}if(n===1)throw n=fu,Ns(t,0),Fi(t,e),Rn(t,Rt()),n;if(n===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ts(t,En,Kr),Rn(t,Rt()),null}function kv(t,e){var n=Ye;Ye|=1;try{return t(e)}finally{Ye=n,Ye===0&&(ya=Rt()+500,vh&&is())}}function $s(t){Vi!==null&&Vi.tag===0&&(Ye&6)===0&&aa();var e=Ye;Ye|=1;var n=er.transition,r=nt;try{if(er.transition=null,nt=1,t)return t()}finally{nt=r,er.transition=n,Ye=e,(Ye&6)===0&&is()}}function Ov(){Nn=Ko.current,pt(Ko)}function Ns(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,yL(n)),kt!==null)for(n=kt.return;n!==null;){var r=n;switch(dv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ef();break;case 3:ma(),pt(An),pt(ln),Ev();break;case 5:wv(r);break;case 4:ma();break;case 13:pt(wt);break;case 19:pt(wt);break;case 10:vv(r.type._context);break;case 22:case 23:Ov()}n=n.return}if($t=t,kt=t=Yi(t.current,null),Kt=Nn=e,Ft=0,fu=null,Mv=wh=js=0,En=Ul=null,Ls!==null){for(e=0;e<Ls.length;e++)if(n=Ls[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ls=null}return t}function BS(t,e){do{var n=kt;try{if(mv(),Zc.current=Lf,Mf){for(var r=Et.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Mf=!1}if(zs=0,jt=Dt=Et=null,Dl=!1,lu=0,Pv.current=null,n===null||n.return===null){Ft=1,fu=e,kt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Kt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if((c.mode&1)===0&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=k_(o);if(g!==null){g.flags&=-257,O_(g,o,a,s,e),g.mode&1&&L_(s,u,e),e=g,l=u;var y=e.updateQueue;if(y===null){var m=new Set;m.add(l),e.updateQueue=m}else y.add(l);break e}else{if((e&1)===0){L_(s,u,e),Iv();break e}l=Error(ne(426))}}else if(mt&&a.mode&1){var x=k_(o);if(x!==null){(x.flags&65536)===0&&(x.flags|=256),O_(x,o,a,s,e),pv(va(l,a));break e}}s=l=va(l,a),Ft!==4&&(Ft=2),Ul===null?Ul=[s]:Ul.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=SS(s,l,e);T_(s,S);break e;case 1:a=l;var v=s.type,w=s.stateNode;if((s.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Xi===null||!Xi.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=TS(s,a,e);T_(s,R);break e}}s=s.return}while(s!==null)}$S(n)}catch(L){e=L,kt===n&&n!==null&&(kt=n=n.return);continue}break}while(1)}function zS(){var t=kf.current;return kf.current=Lf,t===null?Lf:t}function Iv(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),$t===null||(js&268435455)===0&&(wh&268435455)===0||Fi($t,Kt)}function Nf(t,e){var n=Ye;Ye|=2;var r=zS();($t!==t||Kt!==e)&&(Kr=null,Ns(t,e));do try{$L();break}catch(i){BS(t,i)}while(1);if(mv(),Ye=n,kf.current=r,kt!==null)throw Error(ne(261));return $t=null,Kt=0,Ft}function $L(){for(;kt!==null;)jS(kt)}function GL(){for(;kt!==null&&!gM();)jS(kt)}function jS(t){var e=HS(t.alternate,t,Nn);t.memoizedProps=t.pendingProps,e===null?$S(t):kt=e,Pv.current=null}function $S(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=DL(n,e,Nn),n!==null){kt=n;return}}else{if(n=FL(n,e),n!==null){n.flags&=32767,kt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ft=6,kt=null;return}}if(e=e.sibling,e!==null){kt=e;return}kt=e=t}while(e!==null);Ft===0&&(Ft=5)}function Ts(t,e,n){var r=nt,i=er.transition;try{er.transition=null,nt=1,HL(t,e,n,r)}finally{er.transition=i,nt=r}return null}function HL(t,e,n,r){do aa();while(Vi!==null);if((Ye&6)!==0)throw Error(ne(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(AM(t,s),t===$t&&(kt=$t=null,Kt=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||bc||(bc=!0,WS(mf,function(){return aa(),null})),s=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||s){s=er.transition,er.transition=null;var o=nt;nt=1;var a=Ye;Ye|=4,Pv.current=null,VL(t,n),FS(n,t),fL(Cg),yf=!!Rg,Cg=Rg=null,t.current=n,BL(n),mM(),Ye=a,nt=o,er.transition=s}else t.current=n;if(bc&&(bc=!1,Vi=t,If=i),s=t.pendingLanes,s===0&&(Xi=null),_M(n.stateNode),Rn(t,Rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Of)throw Of=!1,t=qg,qg=null,t;return(If&1)!==0&&t.tag!==0&&aa(),s=t.pendingLanes,(s&1)!==0?t===Yg?Vl++:(Vl=0,Yg=t):Vl=0,is(),null}function aa(){if(Vi!==null){var t=EE(If),e=er.transition,n=nt;try{if(er.transition=null,nt=16>t?16:t,Vi===null)var r=!1;else{if(t=Vi,Vi=null,If=0,(Ye&6)!==0)throw Error(ne(331));var i=Ye;for(Ye|=4,ve=t.current;ve!==null;){var s=ve,o=s.child;if((ve.flags&16)!==0){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ve=u;ve!==null;){var c=ve;switch(c.tag){case 0:case 11:case 15:Fl(8,c,s)}var f=c.child;if(f!==null)f.return=c,ve=f;else for(;ve!==null;){c=ve;var d=c.sibling,g=c.return;if(IS(c),c===u){ve=null;break}if(d!==null){d.return=g,ve=d;break}ve=g}}}var y=s.alternate;if(y!==null){var m=y.child;if(m!==null){y.child=null;do{var x=m.sibling;m.sibling=null,m=x}while(m!==null)}}ve=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,ve=o;else e:for(;ve!==null;){if(s=ve,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:Fl(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,ve=S;break e}ve=s.return}}var v=t.current;for(ve=v;ve!==null;){o=ve;var w=o.child;if((o.subtreeFlags&2064)!==0&&w!==null)w.return=o,ve=w;else e:for(o=v;ve!==null;){if(a=ve,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:bh(9,a)}}catch(L){At(a,a.return,L)}if(a===o){ve=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,ve=R;break e}ve=a.return}}if(Ye=i,is(),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(hh,t)}catch{}r=!0}return r}finally{nt=n,er.transition=e}}return!1}function W_(t,e,n){e=va(n,e),e=SS(t,e,1),t=Wi(t,e,1),e=mn(),t!==null&&(wu(t,1,e),Rn(t,e))}function At(t,e,n){if(t.tag===3)W_(t,t,n);else for(;e!==null;){if(e.tag===3){W_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xi===null||!Xi.has(r))){t=va(n,t),t=TS(e,t,1),e=Wi(e,t,1),t=mn(),e!==null&&(wu(e,1,t),Rn(e,t));break}}e=e.return}}function WL(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=mn(),t.pingedLanes|=t.suspendedLanes&n,$t===t&&(Kt&n)===n&&(Ft===4||Ft===3&&(Kt&130023424)===Kt&&500>Rt()-Lv?Ns(t,0):Mv|=n),Rn(t,e)}function GS(t,e){e===0&&((t.mode&1)===0?e=1:(e=cc,cc<<=1,(cc&130023424)===0&&(cc=4194304)));var n=mn();t=oi(t,e),t!==null&&(wu(t,e,n),Rn(t,n))}function XL(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),GS(t,n)}function qL(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ne(314))}r!==null&&r.delete(e),GS(t,n)}var HS;HS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||An.current)Sn=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return Sn=!1,NL(t,e,n);Sn=(t.flags&131072)!==0}else Sn=!1,mt&&(e.flags&1048576)!==0&&qE(e,Af,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Qc(t,e),t=e.pendingProps;var i=da(e,ln.current);oa(e,n),i=Tv(null,e,r,t,i,n);var s=Av();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xn(r)?(s=!0,Sf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_v(e),i.updater=yh,e.stateNode=i,i._reactInternals=e,Fg(e,r,t,n),e=Bg(null,e,r,!0,s,n)):(e.tag=0,mt&&s&&hv(e),hn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Qc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=ZL(r),t=pr(r,t),i){case 0:e=Vg(null,e,r,t,n);break e;case 1:e=D_(null,e,r,t,n);break e;case 11:e=I_(null,e,r,t,n);break e;case 14:e=N_(null,e,r,pr(r.type,t),n);break e}throw Error(ne(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pr(r,i),Vg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pr(r,i),D_(t,e,r,i,n);case 3:e:{if(CS(e),t===null)throw Error(ne(387));r=e.pendingProps,s=e.memoizedState,i=s.element,QE(t,e),Cf(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=va(Error(ne(423)),e),e=F_(t,e,r,n,i);break e}else if(r!==i){i=va(Error(ne(424)),e),e=F_(t,e,r,n,i);break e}else for(Un=Hi(e.stateNode.containerInfo.firstChild),Vn=e,mt=!0,yr=null,n=nS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pa(),r===i){e=ai(t,e,n);break e}hn(t,e,r,n)}e=e.child}return e;case 5:return rS(e),t===null&&Ig(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Pg(r,i)?o=null:s!==null&&Pg(r,s)&&(e.flags|=32),RS(t,e),hn(t,e,o,n),e.child;case 6:return t===null&&Ig(e),null;case 13:return PS(t,e,n);case 4:return bv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ga(e,null,r,n):hn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pr(r,i),I_(t,e,r,i,n);case 7:return hn(t,e,e.pendingProps,n),e.child;case 8:return hn(t,e,e.pendingProps.children,n),e.child;case 12:return hn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ct(xf,r._currentValue),r._currentValue=o,s!==null)if(Ar(s.value,o)){if(s.children===i.children&&!An.current){e=ai(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ni(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Ng(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ne(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ng(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}hn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,oa(e,n),i=nr(i),r=r(i),e.flags|=1,hn(t,e,r,n),e.child;case 14:return r=e.type,i=pr(r,e.pendingProps),i=pr(r.type,i),N_(t,e,r,i,n);case 15:return AS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pr(r,i),Qc(t,e),e.tag=1,xn(r)?(t=!0,Sf(e)):t=!1,oa(e,n),eS(e,r,i),Fg(e,r,i,n),Bg(null,e,r,!0,t,n);case 19:return MS(t,e,n);case 22:return xS(t,e,n)}throw Error(ne(156,e.tag))};function WS(t,e){return yE(t,e)}function YL(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(t,e,n,r){return new YL(t,e,n,r)}function Nv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ZL(t){if(typeof t=="function")return Nv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ev)return 11;if(t===tv)return 14}return 2}function Yi(t,e){var n=t.alternate;return n===null?(n=Jn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function tf(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Nv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case zo:return Ds(n.children,i,s,e);case Jm:o=8,i|=8;break;case ag:return t=Jn(12,n,e,i|2),t.elementType=ag,t.lanes=s,t;case lg:return t=Jn(13,n,e,i),t.elementType=lg,t.lanes=s,t;case ug:return t=Jn(19,n,e,i),t.elementType=ug,t.lanes=s,t;case tE:return Eh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Jw:o=10;break e;case eE:o=9;break e;case ev:o=11;break e;case tv:o=14;break e;case ki:o=16,r=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=Jn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ds(t,e,n,r){return t=Jn(7,t,r,e),t.lanes=n,t}function Eh(t,e,n,r){return t=Jn(22,t,r,e),t.elementType=tE,t.lanes=n,t.stateNode={isHidden:!1},t}function cp(t,e,n){return t=Jn(6,t,null,e),t.lanes=n,t}function fp(t,e,n){return e=Jn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KL(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hd(0),this.expirationTimes=Hd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Dv(t,e,n,r,i,s,o,a,l){return t=new KL(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Jn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_v(s),t}function QL(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function XS(t){if(!t)return es;t=t._reactInternals;e:{if(Zs(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var n=t.type;if(xn(n))return WE(t,n,e)}return e}function qS(t,e,n,r,i,s,o,a,l){return t=Dv(n,r,!0,t,i,s,o,a,l),t.context=XS(null),n=t.current,r=mn(),i=qi(n),s=ni(r,i),s.callback=e!=null?e:null,Wi(n,s,i),t.current.lanes=i,wu(t,i,r),Rn(t,r),t}function Sh(t,e,n,r){var i=e.current,s=mn(),o=qi(i);return n=XS(n),e.context===null?e.context=n:e.pendingContext=n,e=ni(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Wi(i,e,o),t!==null&&(Er(t,i,o,s),Yc(t,i,o)),o}function Df(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function X_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Fv(t,e){X_(t,e),(t=t.alternate)&&X_(t,e)}function JL(){return null}var YS=typeof reportError=="function"?reportError:function(t){console.error(t)};function Uv(t){this._internalRoot=t}Th.prototype.render=Uv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));Sh(t,e,null,null)};Th.prototype.unmount=Uv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$s(function(){Sh(null,t,null,null)}),e[si]=null}};function Th(t){this._internalRoot=t}Th.prototype.unstable_scheduleHydration=function(t){if(t){var e=AE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Di.length&&e!==0&&e<Di[n].priority;n++);Di.splice(n,0,t),n===0&&RE(t)}};function Vv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ah(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function q_(){}function e3(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Df(o);s.call(u)}}var o=qS(e,r,t,0,null,!1,!1,"",q_);return t._reactRootContainer=o,t[si]=o.current,ru(t.nodeType===8?t.parentNode:t),$s(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Df(l);a.call(u)}}var l=Dv(t,0,!1,null,null,!1,!1,"",q_);return t._reactRootContainer=l,t[si]=l.current,ru(t.nodeType===8?t.parentNode:t),$s(function(){Sh(e,l,n,r)}),l}function xh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Df(o);a.call(l)}}Sh(e,o,t,i)}else o=e3(n,e,t,i,r);return Df(o)}SE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Tl(e.pendingLanes);n!==0&&(iv(e,n|1),Rn(e,Rt()),(Ye&6)===0&&(ya=Rt()+500,is()))}break;case 13:$s(function(){var r=oi(t,1);if(r!==null){var i=mn();Er(r,t,1,i)}}),Fv(t,1)}};sv=function(t){if(t.tag===13){var e=oi(t,134217728);if(e!==null){var n=mn();Er(e,t,134217728,n)}Fv(t,134217728)}};TE=function(t){if(t.tag===13){var e=qi(t),n=oi(t,e);if(n!==null){var r=mn();Er(n,t,e,r)}Fv(t,e)}};AE=function(){return nt};xE=function(t,e){var n=nt;try{return nt=t,e()}finally{nt=n}};_g=function(t,e,n){switch(e){case"input":if(hg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=mh(r);if(!i)throw Error(ne(90));rE(r),hg(r,i)}}}break;case"textarea":sE(t,n);break;case"select":e=n.value,e!=null&&na(t,!!n.multiple,e,!1)}};hE=kv;dE=$s;var t3={usingClientEntryPoint:!1,Events:[Su,Ho,mh,cE,fE,kv]},al={findFiberByHostInstance:Ms,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},n3={bundleType:al.bundleType,version:al.version,rendererPackageName:al.rendererPackageName,rendererConfig:al.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mE(t),t===null?null:t.stateNode},findFiberByHostInstance:al.findFiberByHostInstance||JL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wc.isDisabled&&wc.supportsFiber)try{hh=wc.inject(n3),Vr=wc}catch{}}$n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t3;$n.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vv(e))throw Error(ne(200));return QL(t,e,null,n)};$n.createRoot=function(t,e){if(!Vv(t))throw Error(ne(299));var n=!1,r="",i=YS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Dv(t,1,!1,null,null,n,!1,r,i),t[si]=e.current,ru(t.nodeType===8?t.parentNode:t),new Uv(e)};$n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=mE(e),t=t===null?null:t.stateNode,t};$n.flushSync=function(t){return $s(t)};$n.hydrate=function(t,e,n){if(!Ah(e))throw Error(ne(200));return xh(null,t,e,!0,n)};$n.hydrateRoot=function(t,e,n){if(!Vv(t))throw Error(ne(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=YS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=qS(e,null,t,1,n!=null?n:null,i,!1,s,o),t[si]=e.current,ru(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Th(e)};$n.render=function(t,e,n){if(!Ah(e))throw Error(ne(200));return xh(null,t,e,!1,n)};$n.unmountComponentAtNode=function(t){if(!Ah(t))throw Error(ne(40));return t._reactRootContainer?($s(function(){xh(null,null,t,!1,function(){t._reactRootContainer=null,t[si]=null})}),!0):!1};$n.unstable_batchedUpdates=kv;$n.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ah(n))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return xh(t,e,n,!1,r)};$n.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=$n})(Ia);const xl=Hm(Ia.exports);var Y_=Ia.exports;$y.createRoot=Y_.createRoot,$y.hydrateRoot=Y_.hydrateRoot;var ZS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Z_=qe.createContext&&qe.createContext(ZS),Rh={exports:{}},Ch={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r3=W.exports,i3=Symbol.for("react.element"),s3=Symbol.for("react.fragment"),o3=Object.prototype.hasOwnProperty,a3=r3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l3={key:!0,ref:!0,__self:!0,__source:!0};function KS(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)o3.call(e,r)&&!l3.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:i3,type:t,key:s,ref:o,props:i,_owner:a3.current}}Ch.Fragment=s3;Ch.jsx=KS;Ch.jsxs=KS;(function(t){t.exports=Ch})(Rh);const fW=Rh.exports.Fragment,Oe=Rh.exports.jsx,la=Rh.exports.jsxs;var Zi=globalThis&&globalThis.__assign||function(){return Zi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Zi.apply(this,arguments)},u3=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function QS(t){return t&&t.map(function(e,n){return qe.createElement(e.tag,Zi({key:n},e.attr),QS(e.child))})}function Gt(t){return function(e){return Oe(c3,{...Zi({attr:Zi({},t.attr)},e),children:QS(t.child)})}}function c3(t){var e=function(n){var r=t.attr,i=t.size,s=t.title,o=u3(t,["attr","size","title"]),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),la("svg",{...Zi({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Zi(Zi({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),children:[s&&Oe("title",{children:s}),t.children]})};return Z_!==void 0?Oe(Z_.Consumer,{children:function(n){return e(n)}}):e(ZS)}function hW(t){return Gt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M13.8995 4.10052V2.10052H21.8995V10.1005H19.8995V5.51477L14.1213 11.293L12.7071 9.87878L18.4854 4.10052H13.8995Z",fill:"currentColor"}},{tag:"path",attr:{d:"M4.10046 13.8995H2.10046V21.8995H10.1005V19.8995H5.51468L11.2929 14.1212L9.87872 12.707L4.10046 18.4853V13.8995Z",fill:"currentColor"}}]})(t)}function dW(t){return Gt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{opacity:"0.2",fillRule:"evenodd",clipRule:"evenodd",d:"M12 19C15.866 19 19 15.866 19 12C19 8.13401 15.866 5 12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",fill:"currentColor"}},{tag:"path",attr:{d:"M2 12C2 6.47715 6.47715 2 12 2V5C8.13401 5 5 8.13401 5 12H2Z",fill:"currentColor"}}]})(t)}function pW(t){return Gt({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"desc",attr:{},child:[]},{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"8"}},{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"4"}},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"22"}},{tag:"line",attr:{x1:"20",y1:"12",x2:"22",y2:"12"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"4",y2:"12"}}]})(t)}function gW(t){return Gt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"}}]})(t)}function mW(t){return Gt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"}},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"}},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"}},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"}}]})(t)}function f3(t){const e=new Error(t);if(e.stack===void 0)try{throw e}catch{}return e}var h3=f3,Ie=h3;function d3(t){return!!t&&typeof t.then=="function"}var vt=d3;function p3(t,e){if(t!=null)return t;throw Ie(e!=null?e:"Got unexpected null or undefined")}var yt=p3;function Le(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Ph{getValue(){throw Ie("BaseLoadable")}toPromise(){throw Ie("BaseLoadable")}valueMaybe(){throw Ie("BaseLoadable")}valueOrThrow(){throw Ie(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw Ie("BaseLoadable")}promiseOrThrow(){throw Ie(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw Ie("BaseLoadable")}errorOrThrow(){throw Ie(`Loadable expected error, but in "${this.state}" state`)}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw Ie("BaseLoadable")}}class g3 extends Ph{constructor(e){super(),Le(this,"state","hasValue"),Le(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const n=e(this.contents);return vt(n)?Gs(n):_a(n)?n:Au(n)}catch(n){return vt(n)?Gs(n.next(()=>this.map(e))):Mh(n)}}}class m3 extends Ph{constructor(e){super(),Le(this,"state","hasError"),Le(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class JS extends Ph{constructor(e){super(),Le(this,"state","loading"),Le(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return Gs(this.contents.then(n=>{const r=e(n);if(_a(r)){const i=r;switch(i.state){case"hasValue":return i.contents;case"hasError":throw i.contents;case"loading":return i.contents}}return r}).catch(n=>{if(vt(n))return n.then(()=>this.map(e).contents);throw n}))}}function Au(t){return Object.freeze(new g3(t))}function Mh(t){return Object.freeze(new m3(t))}function Gs(t){return Object.freeze(new JS(t))}function eT(){return Object.freeze(new JS(new Promise(()=>{})))}function v3(t){return t.every(e=>e.state==="hasValue")?Au(t.map(e=>e.contents)):t.some(e=>e.state==="hasError")?Mh(yt(t.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):Gs(Promise.all(t.map(e=>e.contents)))}function tT(t){const n=(Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(i=>t[i])).map(i=>_a(i)?i:vt(i)?Gs(i):Au(i)),r=v3(n);return Array.isArray(t)?r:r.map(i=>Object.getOwnPropertyNames(t).reduce((s,o,a)=>({...s,[o]:i[a]}),{}))}function _a(t){return t instanceof Ph}const y3={of:t=>vt(t)?Gs(t):_a(t)?t:Au(t),error:t=>Mh(t),loading:()=>eT(),all:tT,isLoadable:_a};var Ks={loadableWithValue:Au,loadableWithError:Mh,loadableWithPromise:Gs,loadableLoading:eT,loadableAll:tT,isLoadable:_a,RecoilLoadable:y3},_3=Ks.loadableWithValue,b3=Ks.loadableWithError,w3=Ks.loadableWithPromise,E3=Ks.loadableLoading,S3=Ks.loadableAll,T3=Ks.isLoadable,A3=Ks.RecoilLoadable,xu=Object.freeze({__proto__:null,loadableWithValue:_3,loadableWithError:b3,loadableWithPromise:w3,loadableLoading:E3,loadableAll:S3,isLoadable:T3,RecoilLoadable:A3});const Lh=new Map().set("recoil_hamt_2020",!0).set("recoil_sync_external_store",!0).set("recoil_suppress_rerender_in_callback",!0).set("recoil_memory_managament_2020",!0);function kh(t){var e;return(e=Lh.get(t))!==null&&e!==void 0?e:!1}kh.setPass=t=>{Lh.set(t,!0)};kh.setFail=t=>{Lh.set(t,!1)};kh.clear=()=>{Lh.clear()};var ot=kh;function x3(t,e,{error:n}={}){return null}var R3=x3,Bv=R3,hp,dp,pp;const C3=(hp=qe.createMutableSource)!==null&&hp!==void 0?hp:qe.unstable_createMutableSource,nT=(dp=qe.useMutableSource)!==null&&dp!==void 0?dp:qe.unstable_useMutableSource,rT=(pp=qe.useSyncExternalStore)!==null&&pp!==void 0?pp:qe.unstable_useSyncExternalStore;function P3(){var t;const{ReactCurrentDispatcher:e,ReactCurrentOwner:n}=qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((t=e==null?void 0:e.current)!==null&&t!==void 0?t:n.currentDispatcher).useSyncExternalStore!=null}function M3(){return ot("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:ot("recoil_sync_external_store")&&rT!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:ot("recoil_mutable_source")&&nT!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?ot("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:ot("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function L3(){return!1}var Ru={createMutableSource:C3,useMutableSource:nT,useSyncExternalStore:rT,currentRendererSupportsUseSyncExternalStore:P3,reactMode:M3,isFastRefreshEnabled:L3};const iT={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0};function k3(){var t,e,n;if(typeof process>"u"||((t=process)===null||t===void 0?void 0:t.env)==null)return;const r=(e=process.env.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED)===null||e===void 0||(n=e.toLowerCase())===null||n===void 0?void 0:n.trim();if(r==null||r==="")return;if(!["true","false"].includes(r))throw Ie(`process.env.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED value must be 'true', 'false', or empty: ${r}`);iT.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=r==="true"}k3();var sT=iT;class zv{constructor(e){Le(this,"key",void 0),this.key=e}toJSON(){return{key:this.key}}}class oT extends zv{}class aT extends zv{}function O3(t){return t instanceof oT||t instanceof aT}var Oh={AbstractRecoilValue:zv,RecoilState:oT,RecoilValueReadOnly:aT,isRecoilValue:O3},I3=Oh.AbstractRecoilValue,N3=Oh.RecoilState,D3=Oh.RecoilValueReadOnly,F3=Oh.isRecoilValue,ba=Object.freeze({__proto__:null,AbstractRecoilValue:I3,RecoilState:N3,RecoilValueReadOnly:D3,isRecoilValue:F3});function U3(t,e){return function*(){let n=0;for(const r of t)yield e(r,n++)}()}var Ih=U3;class lT{}const V3=new lT,Hs=new Map,jv=new Map;function B3(t){return Ih(t,e=>yt(jv.get(e)))}function z3(t){if(Hs.has(t)){const e=`Duplicate atom key "${t}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(e)}}function j3(t){sT.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&z3(t.key),Hs.set(t.key,t);const e=t.set==null?new ba.RecoilValueReadOnly(t.key):new ba.RecoilState(t.key);return jv.set(t.key,e),e}class uT extends Error{}function $3(t){const e=Hs.get(t);if(e==null)throw new uT(`Missing definition for RecoilValue: "${t}""`);return e}function G3(t){return Hs.get(t)}const Ff=new Map;function H3(t){var e;if(!ot("recoil_memory_managament_2020"))return;const n=Hs.get(t);if(n!=null&&(e=n.shouldDeleteConfigOnRelease)!==null&&e!==void 0&&e.call(n)){var r;Hs.delete(t),(r=cT(t))===null||r===void 0||r(),Ff.delete(t)}}function W3(t,e){!ot("recoil_memory_managament_2020")||(e===void 0?Ff.delete(t):Ff.set(t,e))}function cT(t){return Ff.get(t)}var Pn={nodes:Hs,recoilValues:jv,registerNode:j3,getNode:$3,getNodeMaybe:G3,deleteNodeConfigIfPossible:H3,setConfigDeletionHandler:W3,getConfigDeletionHandler:cT,recoilValuesForKeys:B3,NodeMissingError:uT,DefaultValue:lT,DEFAULT_VALUE:V3};function X3(t,e){e()}var q3={enqueueExecution:X3};function Y3(t,e){return e={exports:{}},t(e,e.exports),e.exports}var Z3=Y3(function(t){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},n={},r=5,i=Math.pow(2,r),s=i-1,o=i/2,a=i/4,l={},u=function(D){return function(){return D}},c=n.hash=function(B){var D=typeof B>"u"?"undefined":e(B);if(D==="number")return B;D!=="string"&&(B+="");for(var Z=0,se=0,le=B.length;se<le;++se){var pe=B.charCodeAt(se);Z=(Z<<5)-Z+pe|0}return Z},f=function(D){return D-=D>>1&1431655765,D=(D&858993459)+(D>>2&858993459),D=D+(D>>4)&252645135,D+=D>>8,D+=D>>16,D&127},d=function(D,Z){return Z>>>D&s},g=function(D){return 1<<D},y=function(D,Z){return f(D&Z-1)},m=function(D,Z,se,le){var pe=le;if(!D){var Ae=le.length;pe=new Array(Ae);for(var Te=0;Te<Ae;++Te)pe[Te]=le[Te]}return pe[Z]=se,pe},x=function(D,Z,se){var le=se.length-1,pe=0,Ae=0,Te=se;if(D)pe=Ae=Z;else for(Te=new Array(le);pe<Z;)Te[Ae++]=se[pe++];for(++pe;pe<=le;)Te[Ae++]=se[pe++];return D&&(Te.length=le),Te},S=function(D,Z,se,le){var pe=le.length;if(D){for(var Ae=pe;Ae>=Z;)le[Ae--]=le[Ae];return le[Z]=se,le}for(var Te=0,Se=0,Me=new Array(pe+1);Te<Z;)Me[Se++]=le[Te++];for(Me[Z]=se;Te<pe;)Me[++Se]=le[Te++];return Me},v=1,w=2,R=3,L=4,C={__hamt_isEmpty:!0},U=function(D){return D===C||D&&D.__hamt_isEmpty},N=function(D,Z,se,le){return{type:v,edit:D,hash:Z,key:se,value:le,_modify:$}},H=function(D,Z,se){return{type:w,edit:D,hash:Z,children:se,_modify:ae}},G=function(D,Z,se){return{type:R,edit:D,mask:Z,children:se,_modify:re}},ie=function(D,Z,se){return{type:L,edit:D,size:Z,children:se,_modify:oe}},Ce=function(D){return D===C||D.type===v||D.type===w},Ee=function(D,Z,se,le,pe){for(var Ae=[],Te=le,Se=0,Me=0;Te;++Me)Te&1&&(Ae[Me]=pe[Se++]),Te>>>=1;return Ae[Z]=se,ie(D,Se+1,Ae)},ee=function(D,Z,se,le){for(var pe=new Array(Z-1),Ae=0,Te=0,Se=0,Me=le.length;Se<Me;++Se)if(Se!==se){var rt=le[Se];rt&&!U(rt)&&(pe[Ae++]=rt,Te|=1<<Se)}return G(D,Te,pe)},_e=function B(D,Z,se,le,pe,Ae){if(se===pe)return H(D,se,[Ae,le]);var Te=d(Z,se),Se=d(Z,pe);return G(D,g(Te)|g(Se),Te===Se?[B(D,Z+r,se,le,pe,Ae)]:Te<Se?[le,Ae]:[Ae,le])},Be=function(D,Z,se,le,pe,Ae,Te,Se){for(var Me=pe.length,rt=0;rt<Me;++rt){var Vt=pe[rt];if(se(Te,Vt.key)){var bt=Vt.value,Jt=Ae(bt);return Jt===bt?pe:Jt===l?(--Se.value,x(D,rt,pe)):m(D,rt,N(Z,le,Te,Jt),pe)}}var fn=Ae();return fn===l?pe:(++Se.value,m(D,Me,N(Z,le,Te,fn),pe))},j=function(D,Z){return D===Z.edit},$=function(D,Z,se,le,pe,Ae,Te){if(Z(Ae,this.key)){var Se=le(this.value);return Se===this.value?this:Se===l?(--Te.value,C):j(D,this)?(this.value=Se,this):N(D,pe,Ae,Se)}var Me=le();return Me===l?this:(++Te.value,_e(D,se,this.hash,this,pe,N(D,pe,Ae,Me)))},ae=function(D,Z,se,le,pe,Ae,Te){if(pe===this.hash){var Se=j(D,this),Me=Be(Se,D,Z,this.hash,this.children,le,Ae,Te);return Me===this.children?this:Me.length>1?H(D,this.hash,Me):Me[0]}var rt=le();return rt===l?this:(++Te.value,_e(D,se,this.hash,this,pe,N(D,pe,Ae,rt)))},re=function(D,Z,se,le,pe,Ae,Te){var Se=this.mask,Me=this.children,rt=d(se,pe),Vt=g(rt),bt=y(Se,Vt),Jt=Se&Vt,fn=Jt?Me[bt]:C,Cr=fn._modify(D,Z,se+r,le,pe,Ae,Te);if(fn===Cr)return this;var or=j(D,this),Pr=Se,Mr=void 0;if(Jt&&U(Cr)){if(Pr&=~Vt,!Pr)return C;if(Me.length<=2&&Ce(Me[bt^1]))return Me[bt^1];Mr=x(or,bt,Me)}else if(!Jt&&!U(Cr)){if(Me.length>=o)return Ee(D,rt,Cr,Se,Me);Pr|=Vt,Mr=S(or,bt,Cr,Me)}else Mr=m(or,bt,Cr,Me);return or?(this.mask=Pr,this.children=Mr,this):G(D,Pr,Mr)},oe=function(D,Z,se,le,pe,Ae,Te){var Se=this.size,Me=this.children,rt=d(se,pe),Vt=Me[rt],bt=(Vt||C)._modify(D,Z,se+r,le,pe,Ae,Te);if(Vt===bt)return this;var Jt=j(D,this),fn=void 0;if(U(Vt)&&!U(bt))++Se,fn=m(Jt,rt,bt,Me);else if(!U(Vt)&&U(bt)){if(--Se,Se<=a)return ee(D,Se,rt,Me);fn=m(Jt,rt,C,Me)}else fn=m(Jt,rt,bt,Me);return Jt?(this.size=Se,this.children=fn,this):ie(D,Se,fn)};C._modify=function(B,D,Z,se,le,pe,Ae){var Te=se();return Te===l?C:(++Ae.value,N(B,le,pe,Te))};function I(B,D,Z,se,le){this._editable=B,this._edit=D,this._config=Z,this._root=se,this._size=le}I.prototype.setTree=function(B,D){return this._editable?(this._root=B,this._size=D,this):B===this._root?this:new I(this._editable,this._edit,this._config,B,D)};var K=n.tryGetHash=function(B,D,Z,se){for(var le=se._root,pe=0,Ae=se._config.keyEq;;)switch(le.type){case v:return Ae(Z,le.key)?le.value:B;case w:{if(D===le.hash)for(var Te=le.children,Se=0,Me=Te.length;Se<Me;++Se){var rt=Te[Se];if(Ae(Z,rt.key))return rt.value}return B}case R:{var Vt=d(pe,D),bt=g(Vt);if(le.mask&bt){le=le.children[y(le.mask,bt)],pe+=r;break}return B}case L:{if(le=le.children[d(pe,D)],le){pe+=r;break}return B}default:return B}};I.prototype.tryGetHash=function(B,D,Z){return K(B,D,Z,this)};var Q=n.tryGet=function(B,D,Z){return K(B,Z._config.hash(D),D,Z)};I.prototype.tryGet=function(B,D){return Q(B,D,this)};var be=n.getHash=function(B,D,Z){return K(void 0,B,D,Z)};I.prototype.getHash=function(B,D){return be(B,D,this)},n.get=function(B,D){return K(void 0,D._config.hash(B),B,D)},I.prototype.get=function(B,D){return Q(D,B,this)};var ue=n.has=function(B,D,Z){return K(l,B,D,Z)!==l};I.prototype.hasHash=function(B,D){return ue(B,D,this)};var de=n.has=function(B,D){return ue(D._config.hash(B),B,D)};I.prototype.has=function(B){return de(B,this)};var Re=function(D,Z){return D===Z};n.make=function(B){return new I(0,0,{keyEq:B&&B.keyEq||Re,hash:B&&B.hash||c},C,0)},n.empty=n.make();var ce=n.isEmpty=function(B){return B&&!!U(B._root)};I.prototype.isEmpty=function(){return ce(this)};var ke=n.modifyHash=function(B,D,Z,se){var le={value:se._size},pe=se._root._modify(se._editable?se._edit:NaN,se._config.keyEq,0,B,D,Z,le);return se.setTree(pe,le.value)};I.prototype.modifyHash=function(B,D,Z){return ke(Z,B,D,this)};var at=n.modify=function(B,D,Z){return ke(B,Z._config.hash(D),D,Z)};I.prototype.modify=function(B,D){return at(D,B,this)};var je=n.setHash=function(B,D,Z,se){return ke(u(Z),B,D,se)};I.prototype.setHash=function(B,D,Z){return je(B,D,Z,this)};var Ze=n.set=function(B,D,Z){return je(Z._config.hash(B),B,D,Z)};I.prototype.set=function(B,D){return Ze(B,D,this)};var xt=u(l),cn=n.removeHash=function(B,D,Z){return ke(xt,B,D,Z)};I.prototype.removeHash=I.prototype.deleteHash=function(B,D){return cn(B,D,this)};var ft=n.remove=function(B,D){return cn(D._config.hash(B),B,D)};I.prototype.remove=I.prototype.delete=function(B){return ft(B,this)};var _t=n.beginMutation=function(B){return new I(B._editable+1,B._edit+1,B._config,B._root,B._size)};I.prototype.beginMutation=function(){return _t(this)};var Hr=n.endMutation=function(B){return B._editable=B._editable&&B._editable-1,B};I.prototype.endMutation=function(){return Hr(this)};var ro=n.mutate=function(B,D){var Z=_t(D);return B(Z),Hr(Z)};I.prototype.mutate=function(B){return ro(B,this)};var sr=function(D){return D&&Ut(D[0],D[1],D[2],D[3],D[4])},Ut=function(D,Z,se,le,pe){for(;se<D;){var Ae=Z[se++];if(Ae&&!U(Ae))return ls(Ae,le,[D,Z,se,le,pe])}return sr(pe)},ls=function(D,Z,se){switch(D.type){case v:return{value:Z(D),rest:se};case w:case L:case R:var le=D.children;return Ut(le.length,le,0,Z,se);default:return sr(se)}},io={done:!0};function mi(B){this.v=B}mi.prototype.next=function(){if(!this.v)return io;var B=this.v;return this.v=sr(B.rest),B},mi.prototype[Symbol.iterator]=function(){return this};var vi=function(D,Z){return new mi(ls(D._root,Z))},so=function(D){return[D.key,D.value]},us=n.entries=function(B){return vi(B,so)};I.prototype.entries=I.prototype[Symbol.iterator]=function(){return us(this)};var cs=function(D){return D.key},fs=n.keys=function(B){return vi(B,cs)};I.prototype.keys=function(){return fs(this)};var hs=function(D){return D.value},yi=n.values=I.prototype.values=function(B){return vi(B,hs)};I.prototype.values=function(){return yi(this)};var _i=n.fold=function(B,D,Z){var se=Z._root;if(se.type===v)return B(D,se.value,se.key);for(var le=[se.children],pe=void 0;pe=le.pop();)for(var Ae=0,Te=pe.length;Ae<Te;){var Se=pe[Ae++];Se&&Se.type&&(Se.type===v?D=B(D,Se.value,Se.key):le.push(Se.children))}return D};I.prototype.fold=function(B,D){return _i(B,D,this)};var oo=n.forEach=function(B,D){return _i(function(Z,se,le){return B(se,le,D)},null,D)};I.prototype.forEach=function(B){return oo(B,this)};var ao=n.count=function(B){return B._size};I.prototype.count=function(){return ao(this)},Object.defineProperty(I.prototype,"size",{get:I.prototype.count}),t.exports?t.exports=n:(void 0).hamt=n});class K3{constructor(e){Le(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,n){return this._map.set(e,n),this}delete(e){return this._map.delete(e),this}clone(){return Gv(this)}toMap(){return new Map(this._map)}}class $v{constructor(e){if(Le(this,"_hamt",Z3.empty.beginMutation()),e instanceof $v){const n=e._hamt.endMutation();e._hamt=n.beginMutation(),this._hamt=n.beginMutation()}else if(e)for(const[n,r]of e.entries())this._hamt.set(n,r)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,n){return this._hamt.set(e,n),this}delete(e){return this._hamt.delete(e),this}clone(){return Gv(this)}toMap(){return new Map(this._hamt)}}function Gv(t){return ot("recoil_hamt_2020")?new $v(t):new K3(t)}var Q3={persistentMap:Gv},J3=Q3.persistentMap,ek=Object.freeze({__proto__:null,persistentMap:J3});function tk(t,...e){const n=new Set;e:for(const r of t){for(const i of e)if(i.has(r))continue e;n.add(r)}return n}var Bl=tk;function nk(t,e){const n=new Map;return t.forEach((r,i)=>{n.set(i,e(r,i))}),n}var Uf=nk;function rk(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function ik(t){return{nodeDeps:Uf(t.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:Uf(t.nodeToNodeSubscriptions,e=>new Set(e))}}function gp(t,e,n,r){const{nodeDeps:i,nodeToNodeSubscriptions:s}=n,o=i.get(t);if(o&&r&&o!==r.nodeDeps.get(t))return;i.set(t,e);const a=o==null?e:Bl(e,o);for(const l of a)s.has(l)||s.set(l,new Set),yt(s.get(l)).add(t);if(o){const l=Bl(o,e);for(const u of l){if(!s.has(u))return;const c=yt(s.get(u));c.delete(t),c.size===0&&s.delete(u)}}}function sk(t,e,n,r){var i,s,o,a;const l=n.getState();r===l.currentTree.version||r===((i=l.nextTree)===null||i===void 0?void 0:i.version)||((s=l.previousTree)===null||s===void 0||s.version);const u=n.getGraph(r);if(gp(t,e,u),r===((o=l.previousTree)===null||o===void 0?void 0:o.version)){const f=n.getGraph(l.currentTree.version);gp(t,e,f,u)}if(r===((a=l.previousTree)===null||a===void 0?void 0:a.version)||r===l.currentTree.version){var c;const f=(c=l.nextTree)===null||c===void 0?void 0:c.version;if(f!==void 0){const d=n.getGraph(f);gp(t,e,d,u)}}}var Cu={cloneGraph:ik,graph:rk,saveDepsToStore:sk};let ok=0;const ak=()=>ok++;let lk=0;const uk=()=>lk++;let ck=0;const fk=()=>ck++;var Nh={getNextTreeStateVersion:ak,getNextStoreID:uk,getNextComponentID:fk};const{persistentMap:K_}=ek,{graph:hk}=Cu,{getNextTreeStateVersion:fT}=Nh;function hT(){const t=fT();return{version:t,stateID:t,transactionMetadata:{},dirtyAtoms:new Set,atomValues:K_(),nonvalidatedAtoms:K_()}}function dk(){const t=hT();return{currentTree:t,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(t.version,hk()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var dT={makeEmptyTreeState:hT,makeEmptyStoreState:dk,getNextTreeStateVersion:fT};class pT{}function pk(){return new pT}var Dh={RetentionZone:pT,retentionZone:pk};function gk(t,e){const n=new Set(t);return n.add(e),n}function mk(t,e){const n=new Set(t);return n.delete(e),n}function vk(t,e,n){const r=new Map(t);return r.set(e,n),r}function yk(t,e,n){const r=new Map(t);return r.set(e,n(r.get(e))),r}function _k(t,e){const n=new Map(t);return n.delete(e),n}function bk(t,e){const n=new Map(t);return e.forEach(r=>n.delete(r)),n}var gT={setByAddingToSet:gk,setByDeletingFromSet:mk,mapBySettingInMap:vk,mapByUpdatingInMap:yk,mapByDeletingFromMap:_k,mapByDeletingMultipleFromMap:bk};function*wk(t,e){let n=0;for(const r of t)e(r,n++)&&(yield r)}var Hv=wk;function Ek(t,e){return new Proxy(t,{get:(r,i)=>(!(i in r)&&i in e&&(r[i]=e[i]()),r[i]),ownKeys:r=>Object.keys(r)})}var mT=Ek;const{getNode:Pu,getNodeMaybe:Sk,recoilValuesForKeys:Q_}=Pn,{RetentionZone:J_}=Dh,{setByAddingToSet:Tk}=gT,Ak=Object.freeze(new Set);class xk extends Error{}function Rk(t,e,n){if(!ot("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:r}=t.getState().retention;function i(s){let o=r.get(s);o||r.set(s,o=new Set),o.add(e)}if(n instanceof J_)i(n);else if(Array.isArray(n))for(const s of n)i(s);return()=>{if(!ot("recoil_memory_managament_2020"))return;const{retention:s}=t.getState();function o(a){const l=s.nodesRetainedByZone.get(a);l==null||l.delete(e),l&&l.size===0&&s.nodesRetainedByZone.delete(a)}if(n instanceof J_)o(n);else if(Array.isArray(n))for(const a of n)o(a)}}function Wv(t,e,n,r){const i=t.getState();if(i.nodeCleanupFunctions.has(n))return;const s=Pu(n),o=Rk(t,n,s.retainedBy),a=s.init(t,e,r);i.nodeCleanupFunctions.set(n,()=>{a(),o()})}function Ck(t,e,n){Wv(t,t.getState().currentTree,e,n)}function Pk(t,e){var n;const r=t.getState();(n=r.nodeCleanupFunctions.get(e))===null||n===void 0||n(),r.nodeCleanupFunctions.delete(e)}function Mk(t,e,n){return Wv(t,e,n,"get"),Pu(n).get(t,e)}function vT(t,e,n){return Pu(n).peek(t,e)}function Lk(t,e,n){var r;const i=Sk(e);return i==null||(r=i.invalidate)===null||r===void 0||r.call(i,t),{...t,atomValues:t.atomValues.clone().delete(e),nonvalidatedAtoms:t.nonvalidatedAtoms.clone().set(e,n),dirtyAtoms:Tk(t.dirtyAtoms,e)}}function kk(t,e,n,r){const i=Pu(n);if(i.set==null)throw new xk(`Attempt to set read-only RecoilValue: ${n}`);const s=i.set;return Wv(t,e,n,"set"),s(t,e,r)}function Ok(t,e,n){const r=t.getState(),i=t.getGraph(e.version),s=Pu(n).nodeType;return mT({type:s},{loadable:()=>vT(t,e,n),isActive:()=>r.knownAtoms.has(n)||r.knownSelectors.has(n),isSet:()=>s==="selector"?!1:e.atomValues.has(n),isModified:()=>e.dirtyAtoms.has(n),deps:()=>{var o;return Q_((o=i.nodeDeps.get(n))!==null&&o!==void 0?o:[])},subscribers:()=>{var o,a;return{nodes:Q_(Hv(yT(t,e,new Set([n])),l=>l!==n)),components:Ih((o=(a=r.nodeToComponentSubscriptions.get(n))===null||a===void 0?void 0:a.values())!==null&&o!==void 0?o:[],([l])=>({name:l}))}}})}function yT(t,e,n){const r=new Set,i=Array.from(n),s=t.getGraph(e.version);for(let a=i.pop();a;a=i.pop()){var o;r.add(a);const l=(o=s.nodeToNodeSubscriptions.get(a))!==null&&o!==void 0?o:Ak;for(const u of l)r.has(u)||i.push(u)}return r}var ss={getNodeLoadable:Mk,peekNodeLoadable:vT,setNodeValue:kk,initializeNode:Ck,cleanUpNode:Pk,setUnvalidatedAtomValue_DEPRECATED:Lk,peekNodeInfo:Ok,getDownstreamNodes:yT};let _T=null;function Ik(t){_T=t}function Nk(){var t;(t=_T)===null||t===void 0||t()}var bT={setInvalidateMemoizedSnapshot:Ik,invalidateMemoizedSnapshot:Nk};const{getDownstreamNodes:Dk,getNodeLoadable:wT,setNodeValue:Fk}=ss,{getNextComponentID:Uk}=Nh,{getNode:Vk,getNodeMaybe:ET}=Pn,{DefaultValue:Xv}=Pn,{reactMode:Bk}=Ru,{AbstractRecoilValue:zk,RecoilState:jk,RecoilValueReadOnly:$k,isRecoilValue:Gk}=ba,{invalidateMemoizedSnapshot:Hk}=bT;function Wk(t,{key:e},n=t.getState().currentTree){var r,i;const s=t.getState();n.version===s.currentTree.version||n.version===((r=s.nextTree)===null||r===void 0?void 0:r.version)||(n.version,(i=s.previousTree)===null||i===void 0||i.version);const o=wT(t,n,e);return o.state==="loading"&&o.contents.catch(()=>{}),o}function Xk(t,e){const n=t.clone();return e.forEach((r,i)=>{r.state==="hasValue"&&r.contents instanceof Xv?n.delete(i):n.set(i,r)}),n}function qk(t,e,{key:n},r){if(typeof r=="function"){const i=wT(t,e,n);if(i.state==="loading"){const s=`Tried to set atom or selector "${n}" using an updater function while the current state is pending, this is not currently supported.`;throw Ie(s)}else if(i.state==="hasError")throw i.contents;return r(i.contents)}else return r}function Yk(t,e,n){if(n.type==="set"){const{recoilValue:i,valueOrUpdater:s}=n,o=qk(t,e,i,s),a=Fk(t,e,i.key,o);for(const[l,u]of a.entries())Qg(e,l,u)}else if(n.type==="setLoadable"){const{recoilValue:{key:i},loadable:s}=n;Qg(e,i,s)}else if(n.type==="markModified"){const{recoilValue:{key:i}}=n;e.dirtyAtoms.add(i)}else if(n.type==="setUnvalidated"){var r;const{recoilValue:{key:i},unvalidatedValue:s}=n,o=ET(i);o==null||(r=o.invalidate)===null||r===void 0||r.call(o,e),e.atomValues.delete(i),e.nonvalidatedAtoms.set(i,s),e.dirtyAtoms.add(i)}else Bv(`Unknown action ${n.type}`)}function Qg(t,e,n){n.state==="hasValue"&&n.contents instanceof Xv?t.atomValues.delete(e):t.atomValues.set(e,n),t.dirtyAtoms.add(e),t.nonvalidatedAtoms.delete(e)}function ST(t,e){t.replaceState(n=>{const r=TT(n);for(const i of e)Yk(t,r,i);return AT(t,r),Hk(),r})}function Fh(t,e){if(zl.length){const n=zl[zl.length-1];let r=n.get(t);r||n.set(t,r=[]),r.push(e)}else ST(t,[e])}const zl=[];function Zk(){const t=new Map;return zl.push(t),()=>{for(const[e,n]of t)ST(e,n);zl.pop()}}function TT(t){return{...t,atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(t.dirtyAtoms)}}function AT(t,e){const n=Dk(t,e,e.dirtyAtoms);for(const s of n){var r,i;(r=ET(s))===null||r===void 0||(i=r.invalidate)===null||i===void 0||i.call(r,e)}}function xT(t,e,n){Fh(t,{type:"set",recoilValue:e,valueOrUpdater:n})}function Kk(t,e,n){if(n instanceof Xv)return xT(t,e,n);Fh(t,{type:"setLoadable",recoilValue:e,loadable:n})}function Qk(t,e){Fh(t,{type:"markModified",recoilValue:e})}function Jk(t,e,n){Fh(t,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:n})}function eO(t,{key:e},n,r=null){const i=Uk(),s=t.getState();s.nodeToComponentSubscriptions.has(e)||s.nodeToComponentSubscriptions.set(e,new Map),yt(s.nodeToComponentSubscriptions.get(e)).set(i,[r!=null?r:"<not captured>",n]);const o=Bk();if(o.early&&(o.mode==="LEGACY"||o.mode==="MUTABLE_SOURCE")){const a=t.getState().nextTree;a&&a.dirtyAtoms.has(e)&&n(a)}return{release:()=>{const a=t.getState(),l=a.nodeToComponentSubscriptions.get(e);l===void 0||!l.has(i)||(l.delete(i),l.size===0&&a.nodeToComponentSubscriptions.delete(e))}}}function tO(t,e){var n;const{currentTree:r}=t.getState(),i=Vk(e.key);(n=i.clearCache)===null||n===void 0||n.call(i,t,r)}var jr={RecoilValueReadOnly:$k,AbstractRecoilValue:zk,RecoilState:jk,getRecoilValueAsLoadable:Wk,setRecoilValue:xT,setRecoilValueLoadable:Kk,markRecoilValueModified:Qk,setUnvalidatedRecoilValue:Jk,subscribeToRecoilValue:eO,isRecoilValue:Gk,applyAtomValueWrites:Xk,batchStart:Zk,writeLoadableToTreeState:Qg,invalidateDownstreams:AT,copyTreeState:TT,refreshRecoilValue:tO};function nO(t,e,n){const r=t.entries();let i=r.next();for(;!i.done;){const s=i.value;if(e.call(n,s[1],s[0],t))return!0;i=r.next()}return!1}var rO=nO;const{cleanUpNode:iO}=ss,{deleteNodeConfigIfPossible:sO,getNode:RT}=Pn,{RetentionZone:CT}=Dh,oO=12e4,PT=new Set;function MT(t,e){const n=t.getState(),r=n.currentTree;if(n.nextTree)return;const i=new Set;for(const o of e)if(o instanceof CT)for(const a of cO(n,o))i.add(a);else i.add(o);const s=aO(t,i);for(const o of s)uO(t,r,o)}function aO(t,e){const n=t.getState(),r=n.currentTree,i=t.getGraph(r.version),s=new Set,o=new Set;return a(e),s;function a(l){const u=new Set,c=lO(t,r,l,s,o);for(const y of c){var f;if(RT(y).retainedBy==="recoilRoot"){o.add(y);continue}if(((f=n.retention.referenceCounts.get(y))!==null&&f!==void 0?f:0)>0){o.add(y);continue}if(LT(y).some(x=>n.retention.referenceCounts.get(x))){o.add(y);continue}const m=i.nodeToNodeSubscriptions.get(y);if(m&&rO(m,x=>o.has(x))){o.add(y);continue}s.add(y),u.add(y)}const d=new Set;for(const y of u)for(const m of(g=i.nodeDeps.get(y))!==null&&g!==void 0?g:PT){var g;s.has(m)||d.add(m)}d.size&&a(d)}}function lO(t,e,n,r,i){const s=t.getGraph(e.version),o=[],a=new Set;for(;n.size>0;)l(yt(n.values().next().value));return o;function l(u){if(r.has(u)||i.has(u)){n.delete(u);return}if(a.has(u))return;const c=s.nodeToNodeSubscriptions.get(u);if(c)for(const f of c)l(f);a.add(u),n.delete(u),o.push(u)}}function uO(t,e,n){if(!ot("recoil_memory_managament_2020"))return;iO(t,n);const r=t.getState();r.knownAtoms.delete(n),r.knownSelectors.delete(n),r.nodeTransactionSubscriptions.delete(n),r.retention.referenceCounts.delete(n);const i=LT(n);for(const l of i){var s;(s=r.retention.nodesRetainedByZone.get(l))===null||s===void 0||s.delete(n)}e.atomValues.delete(n),e.dirtyAtoms.delete(n),e.nonvalidatedAtoms.delete(n);const o=r.graphsByVersion.get(e.version);if(o){const l=o.nodeDeps.get(n);if(l!==void 0){o.nodeDeps.delete(n);for(const u of l){var a;(a=o.nodeToNodeSubscriptions.get(u))===null||a===void 0||a.delete(n)}}o.nodeToNodeSubscriptions.delete(n)}sO(n)}function cO(t,e){var n;return(n=t.retention.nodesRetainedByZone.get(e))!==null&&n!==void 0?n:PT}function LT(t){const e=RT(t).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof CT?[e]:e}function fO(t,e){const n=t.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(e):MT(t,new Set([e]))}function hO(t,e,n){var r;if(!ot("recoil_memory_managament_2020"))return;const i=t.getState().retention.referenceCounts,s=((r=i.get(e))!==null&&r!==void 0?r:0)+n;s===0?kT(t,e):i.set(e,s)}function kT(t,e){if(!ot("recoil_memory_managament_2020"))return;t.getState().retention.referenceCounts.delete(e),fO(t,e)}function dO(t){if(!ot("recoil_memory_managament_2020"))return;const e=t.getState();MT(t,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function pO(t){return t===void 0?"recoilRoot":t}var Qs={SUSPENSE_TIMEOUT_MS:oO,updateRetainCount:hO,updateRetainCountToZero:kT,releaseScheduledRetainablesNow:dO,retainedByOptionWithDefault:pO};const{unstable_batchedUpdates:gO}=xl;var mO={unstable_batchedUpdates:gO};const{unstable_batchedUpdates:vO}=mO;var yO={unstable_batchedUpdates:vO};const{batchStart:_O}=jr,{unstable_batchedUpdates:bO}=yO;let qv=bO;const wO=t=>{qv=t},EO=()=>qv,SO=t=>{qv(()=>{let e=()=>{};try{e=_O(),t()}finally{e()}})};var Uh={getBatcher:EO,setBatcher:wO,batchUpdates:SO};function*TO(t){for(const e of t)for(const n of e)yield n}var OT=TO;const IT=typeof Window>"u"||typeof window>"u",AO=t=>!IT&&(t===window||t instanceof Window),xO=typeof navigator<"u"&&navigator.product==="ReactNative";var Yv={isSSR:IT,isReactNative:xO,isWindow:AO};function RO(t,e){let n;return(...i)=>{n||(n={});const s=e(...i);return Object.hasOwnProperty.call(n,s)||(n[s]=t(...i)),n[s]}}function CO(t,e){let n,r;return(...s)=>{const o=e(...s);return n===o||(n=o,r=t(...s)),r}}function PO(t,e){let n,r;return[(...o)=>{const a=e(...o);return n===a||(n=a,r=t(...o)),r},()=>{n=null}]}var MO={memoizeWithArgsHash:RO,memoizeOneWithArgsHash:CO,memoizeOneWithArgsHashAndInvalidation:PO};const{batchUpdates:Jg}=Uh,{initializeNode:LO,peekNodeInfo:kO}=ss,{graph:OO}=Cu,{getNextStoreID:IO}=Nh,{DEFAULT_VALUE:NO,recoilValues:e1,recoilValuesForKeys:t1}=Pn,{AbstractRecoilValue:DO,getRecoilValueAsLoadable:FO,setRecoilValue:n1,setUnvalidatedRecoilValue:UO}=jr,{updateRetainCount:nf}=Qs,{setInvalidateMemoizedSnapshot:VO}=bT,{getNextTreeStateVersion:BO,makeEmptyStoreState:zO}=dT,{isSSR:jO}=Yv,{memoizeOneWithArgsHashAndInvalidation:$O}=MO;class Vh{constructor(e,n){Le(this,"_store",void 0),Le(this,"_refCount",1),Le(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),FO(this._store,r))),Le(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),Le(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];const o=this._store.getState().currentTree;return t1(o.dirtyAtoms)}const i=this._store.getState().knownAtoms,s=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?e1.values():r.isInitialized===!0?t1(OT([i,s])):Hv(e1.values(),({key:o})=>!i.has(o)&&!s.has(o))}),Le(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),kO(this._store,this._store.getState().currentTree,r))),Le(this,"map",r=>{this.checkRefCount_INTERNAL();const i=new em(this,Jg);return r(i),i}),Le(this,"asyncMap",async r=>{this.checkRefCount_INTERNAL();const i=new em(this,Jg);return i.retain(),await r(i),i.autoRelease_INTERNAL(),i}),this._store={storeID:IO(),parentStoreID:n,getState:()=>e,replaceState:r=>{e.currentTree=r(e.currentTree)},getGraph:r=>{const i=e.graphsByVersion;if(i.has(r))return yt(i.get(r));const s=OO();return i.set(r,s),s},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw Ie("Cannot subscribe to Snapshots")}};for(const r of this._store.getState().knownAtoms)LO(this._store,r,"get"),nf(this._store,r,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let e=!1;return()=>{e||(e=!0,this._release())}}autoRelease_INTERNAL(){jO||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(e=>e()),this._store.getState().nodeCleanupFunctions.clear(),!ot("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){ot("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function NT(t,e,n=!1){const r=t.getState(),i=n?BO():e.version;return{currentTree:{version:n?i:e.version,stateID:n?i:e.stateID,transactionMetadata:{...e.transactionMetadata},dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(i,t.getGraph(e.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(Ih(r.nodeCleanupFunctions.entries(),([s])=>[s,()=>{}]))}}function GO(t){const e=new Vh(zO());return t!=null?e.map(t):e}const[r1,DT]=$O((t,e)=>{var n;const r=t.getState(),i=e==="latest"?(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree:yt(r.previousTree);return new Vh(NT(t,i),t.storeID)},(t,e)=>{var n,r;return String(e)+String(t.storeID)+String((n=t.getState().nextTree)===null||n===void 0?void 0:n.version)+String(t.getState().currentTree.version)+String((r=t.getState().previousTree)===null||r===void 0?void 0:r.version)});VO(DT);function HO(t,e="latest"){const n=r1(t,e);return n.isRetained()?n:(DT(),r1(t,e))}class em extends Vh{constructor(e,n){super(NT(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID()),Le(this,"_batch",void 0),Le(this,"set",(r,i)=>{this.checkRefCount_INTERNAL();const s=this.getStore_INTERNAL();this._batch(()=>{nf(s,r.key,1),n1(this.getStore_INTERNAL(),r,i)})}),Le(this,"reset",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();this._batch(()=>{nf(i,r.key,1),n1(this.getStore_INTERNAL(),r,NO)})}),Le(this,"setUnvalidatedAtomValues_DEPRECATED",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();Jg(()=>{for(const[s,o]of r.entries())nf(i,s,1),UO(i,new DO(s),o)})}),this._batch=n}}var Bh={Snapshot:Vh,MutableSnapshot:em,freshSnapshot:GO,cloneSnapshot:HO},WO=Bh.Snapshot,XO=Bh.MutableSnapshot,qO=Bh.freshSnapshot,YO=Bh.cloneSnapshot,zh=Object.freeze({__proto__:null,Snapshot:WO,MutableSnapshot:XO,freshSnapshot:qO,cloneSnapshot:YO});function ZO(...t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}var KO=ZO;const{useRef:QO}=qe;function JO(t){const e=QO(t);return e.current===t&&typeof t=="function"&&(e.current=t()),e}var i1=JO;const{getNextTreeStateVersion:eI,makeEmptyStoreState:FT}=dT,{cleanUpNode:tI,getDownstreamNodes:nI,initializeNode:rI,setNodeValue:iI,setUnvalidatedAtomValue_DEPRECATED:sI}=ss,{graph:oI}=Cu,{cloneGraph:aI}=Cu,{getNextStoreID:UT}=Nh,{createMutableSource:mp,reactMode:VT}=Ru,{applyAtomValueWrites:lI}=jr,{releaseScheduledRetainablesNow:BT}=Qs,{freshSnapshot:uI}=zh,{useCallback:cI,useContext:zT,useEffect:tm,useMemo:fI,useRef:hI,useState:dI}=qe;function ll(){throw Ie("This component must be used inside a <RecoilRoot> component.")}const jT=Object.freeze({storeID:UT(),getState:ll,replaceState:ll,getGraph:ll,subscribeToTransactions:ll,addTransactionMetadata:ll});let nm=!1;function s1(t){if(nm)throw Ie("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const e=t.getState();if(e.nextTree===null){ot("recoil_memory_managament_2020")&&ot("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&BT(t);const n=e.currentTree.version,r=eI();e.nextTree={...e.currentTree,version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}},e.graphsByVersion.set(r,aI(yt(e.graphsByVersion.get(n))))}}const $T=qe.createContext({current:jT}),jh=()=>zT($T),GT=qe.createContext(null);function pI(){return zT(GT)}function Zv(t,e,n){const r=nI(t,n,n.dirtyAtoms);for(const i of r){const s=e.nodeToComponentSubscriptions.get(i);if(s)for(const[o,[a,l]]of s)l(n)}}function HT(t){const e=t.getState(),n=e.currentTree,r=n.dirtyAtoms;if(r.size){for(const[i,s]of e.nodeTransactionSubscriptions)if(r.has(i))for(const[o,a]of s)a(t);for(const[i,s]of e.transactionSubscriptions)s(t);(!VT().early||e.suspendedComponentResolvers.size>0)&&(Zv(t,e,n),e.suspendedComponentResolvers.forEach(i=>i()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(i=>i(n)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function gI(t){const e=t.getState();e.commitDepth++;try{const{nextTree:n}=e;if(n==null)return;e.previousTree=e.currentTree,e.currentTree=n,e.nextTree=null,HT(t),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):Bv("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,ot("recoil_memory_managament_2020")&&n==null&&BT(t)}finally{e.commitDepth--}}function mI({setNotifyBatcherOfChange:t}){const e=jh(),[,n]=dI([]);return t(()=>n({})),tm(()=>(t(()=>n({})),()=>{t(()=>{})}),[t]),tm(()=>{q3.enqueueExecution("Batcher",()=>{gI(e.current)})}),null}function vI(t,e){const n=FT();return e({set:(r,i)=>{const s=n.currentTree,o=iI(t,s,r.key,i),a=new Set(o.keys()),l=s.nonvalidatedAtoms.clone();for(const u of a)l.delete(u);n.currentTree={...s,dirtyAtoms:KO(s.dirtyAtoms,a),atomValues:lI(s.atomValues,o),nonvalidatedAtoms:l}},setUnvalidatedAtomValues:r=>{r.forEach((i,s)=>{n.currentTree=sI(n.currentTree,s,i)})}}),n}function yI(t){const e=uI(t),n=e.getStore_INTERNAL().getState();return e.retain(),n.nodeCleanupFunctions.forEach(r=>r()),n.nodeCleanupFunctions.clear(),n}let o1=0;function _I({initializeState_DEPRECATED:t,initializeState:e,store_INTERNAL:n,children:r}){let i;const s=g=>{const y=i.current.graphsByVersion;if(y.has(g))return yt(y.get(g));const m=oI();return y.set(g,m),m},o=(g,y)=>{if(y==null){const{transactionSubscriptions:m}=f.current.getState(),x=o1++;return m.set(x,g),{release:()=>{m.delete(x)}}}else{const{nodeTransactionSubscriptions:m}=f.current.getState();m.has(y)||m.set(y,new Map);const x=o1++;return yt(m.get(y)).set(x,g),{release:()=>{const S=m.get(y);S&&(S.delete(x),S.size===0&&m.delete(y))}}}},a=g=>{s1(f.current);for(const y of Object.keys(g))yt(f.current.getState().nextTree).transactionMetadata[y]=g[y]},l=g=>{s1(f.current);const y=yt(i.current.nextTree);let m;try{nm=!0,m=g(y)}finally{nm=!1}m!==y&&(i.current.nextTree=m,VT().early&&Zv(f.current,i.current,m),yt(u.current)())},u=hI(null),c=cI(g=>{u.current=g},[u]),f=i1(()=>n!=null?n:{storeID:UT(),getState:()=>i.current,replaceState:l,getGraph:s,subscribeToTransactions:o,addTransactionMetadata:a});n!=null&&(f.current=n),i=i1(()=>t!=null?vI(f.current,t):e!=null?yI(e):FT());const d=fI(()=>mp==null?void 0:mp(i,()=>i.current.currentTree.version),[i]);return tm(()=>{const g=f.current;for(const y of new Set(g.getState().knownAtoms))rI(g,y,"get");return()=>{for(const y of g.getState().knownAtoms)tI(g,y)}},[f]),Oe($T.Provider,{value:f,children:la(GT.Provider,{value:d,children:[Oe(mI,{setNotifyBatcherOfChange:c}),r]})})}function bI(t){const{override:e,...n}=t,r=jh();return e===!1&&r.current!==jT?t.children:Oe(_I,{...n})}function wI(){return jh().current.storeID}var hi={RecoilRoot:bI,useStoreRef:jh,useRecoilMutableSource:pI,useRecoilStoreID:wI,notifyComponents_FOR_TESTING:Zv,sendEndOfBatchNotifications_FOR_TESTING:HT};function EI(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}var SI=EI;const{useEffect:TI,useRef:AI}=qe;function xI(t){const e=AI();return TI(()=>{e.current=t}),e.current}var WT=xI;const{useStoreRef:RI}=hi,{SUSPENSE_TIMEOUT_MS:CI}=Qs,{updateRetainCount:ul}=Qs,{RetentionZone:PI}=Dh,{useEffect:MI,useRef:LI}=qe,{isSSR:a1}=Yv;function kI(t){if(!!ot("recoil_memory_managament_2020"))return OI(t)}function OI(t){const n=(Array.isArray(t)?t:[t]).map(o=>o instanceof PI?o:o.key),r=RI();MI(()=>{if(!ot("recoil_memory_managament_2020"))return;const o=r.current;if(i.current&&!a1)window.clearTimeout(i.current),i.current=null;else for(const a of n)ul(o,a,1);return()=>{for(const a of n)ul(o,a,-1)}},[r,...n]);const i=LI(),s=WT(n);if(!a1&&(s===void 0||!SI(s,n))){const o=r.current;for(const a of n)ul(o,a,1);if(s)for(const a of s)ul(o,a,-1);i.current&&window.clearTimeout(i.current),i.current=window.setTimeout(()=>{i.current=null;for(const a of n)ul(o,a,-1)},CI)}}var Kv=kI;function II(){return"<component name not available>"}var Mu=II;const{batchUpdates:NI}=Uh,{DEFAULT_VALUE:XT}=Pn,{currentRendererSupportsUseSyncExternalStore:DI,reactMode:Fa,useMutableSource:FI,useSyncExternalStore:UI}=Ru,{useRecoilMutableSource:VI,useStoreRef:$r}=hi,{AbstractRecoilValue:rm,getRecoilValueAsLoadable:Lu,setRecoilValue:Vf,setUnvalidatedRecoilValue:BI,subscribeToRecoilValue:wa}=jr,{useCallback:Cn,useEffect:Ea,useMemo:qT,useRef:jl,useState:Qv}=qe,{setByAddingToSet:zI}=gT;function Jv(t,e,n){if(t.state==="hasValue")return t.contents;throw t.state==="loading"?new Promise(i=>{n.current.getState().suspendedComponentResolvers.add(i)}):t.state==="hasError"?t.contents:Ie(`Invalid value of loadable atom "${e.key}"`)}function jI(){const t=Mu(),e=$r(),[,n]=Qv([]),r=jl(new Set);r.current=new Set;const i=jl(new Set),s=jl(new Map),o=Cn(l=>{const u=s.current.get(l);u&&(u.release(),s.current.delete(l))},[s]),a=Cn((l,u)=>{s.current.has(u)&&n([])},[]);return Ea(()=>{const l=e.current;Bl(r.current,i.current).forEach(u=>{if(s.current.has(u))return;const c=wa(l,new rm(u),d=>a(d,u),t);s.current.set(u,c),l.getState().nextTree?l.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a(l.getState(),u)}):a(l.getState(),u)}),Bl(i.current,r.current).forEach(u=>{o(u)}),i.current=r.current}),Ea(()=>{const l=s.current;return Bl(r.current,new Set(l.keys())).forEach(u=>{const c=wa(e.current,new rm(u),f=>a(f,u),t);l.set(u,c)}),()=>l.forEach((u,c)=>o(c))},[t,e,o,a]),qT(()=>{function l(y){return m=>{Vf(e.current,y,m)}}function u(y){return()=>Vf(e.current,y,XT)}function c(y){var m;r.current.has(y.key)||(r.current=zI(r.current,y.key));const x=e.current.getState();return Lu(e.current,y,Fa().early&&(m=x.nextTree)!==null&&m!==void 0?m:x.currentTree)}function f(y){const m=c(y);return Jv(m,y,e)}function d(y){return[f(y),l(y)]}function g(y){return[c(y),l(y)]}return{getRecoilValue:f,getRecoilValueLoadable:c,getRecoilState:d,getRecoilStateLoadable:g,getSetRecoilState:l,getResetRecoilState:u}},[r,e])}const $I={current:0};function GI(t){const e=$r(),n=Mu(),r=Cn(()=>{var a;const l=e.current,u=l.getState(),c=Fa().early&&(a=u.nextTree)!==null&&a!==void 0?a:u.currentTree;return{loadable:Lu(l,t,c),key:t.key}},[e,t]),i=Cn(a=>{let l;return()=>{var u,c;const f=a();return(u=l)!==null&&u!==void 0&&u.loadable.is(f.loadable)&&((c=l)===null||c===void 0?void 0:c.key)===f.key?l:(l=f,f)}},[]),s=qT(()=>i(r),[r,i]),o=Cn(a=>{const l=e.current;return wa(l,t,a,n).release},[e,t,n]);return UI(o,s,s).loadable}function HI(t){const e=$r(),n=Cn(()=>{var u;const c=e.current,f=c.getState(),d=Fa().early&&(u=f.nextTree)!==null&&u!==void 0?u:f.currentTree;return Lu(c,t,d)},[e,t]),r=Cn(()=>n(),[n]),i=Mu(),s=Cn((u,c)=>{const f=e.current;return wa(f,t,()=>{if(!ot("recoil_suppress_rerender_in_callback"))return c();const g=n();l.current.is(g)||c(),l.current=g},i).release},[e,t,i,n]),o=VI();if(o==null)throw Ie("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const a=FI(o,r,s),l=jl(a);return Ea(()=>{l.current=a}),a}function im(t){const e=$r(),n=Mu(),r=Cn(()=>{var l;const u=e.current,c=u.getState(),f=Fa().early&&(l=c.nextTree)!==null&&l!==void 0?l:c.currentTree;return Lu(u,t,f)},[e,t]),i=Cn(()=>({loadable:r(),key:t.key}),[r,t.key]),s=Cn(l=>{const u=i();return l.loadable.is(u.loadable)&&l.key===u.key?l:u},[i]);Ea(()=>{const l=wa(e.current,t,u=>{a(s)},n);return a(s),l.release},[n,t,e,s]);const[o,a]=Qv(i);return o.key!==t.key?i().loadable:o.loadable}function WI(t){const e=$r(),[,n]=Qv([]),r=Mu(),i=Cn(()=>{var a;const l=e.current,u=l.getState(),c=Fa().early&&(a=u.nextTree)!==null&&a!==void 0?a:u.currentTree;return Lu(l,t,c)},[e,t]),s=i(),o=jl(s);return Ea(()=>{o.current=s}),Ea(()=>{const a=e.current,l=a.getState(),u=wa(a,t,f=>{var d;if(!ot("recoil_suppress_rerender_in_callback"))return n([]);const g=i();(d=o.current)!==null&&d!==void 0&&d.is(g)||n(g),o.current=g},r);if(l.nextTree)a.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{o.current=null,n([])});else{var c;if(!ot("recoil_suppress_rerender_in_callback"))return n([]);const f=i();(c=o.current)!==null&&c!==void 0&&c.is(f)||n(f),o.current=f}return u.release},[r,i,t,e]),s}function e0(t){return ot("recoil_memory_managament_2020")&&Kv(t),{TRANSITION_SUPPORT:im,SYNC_EXTERNAL_STORE:DI()?GI:im,MUTABLE_SOURCE:HI,LEGACY:WI}[Fa().mode](t)}function YT(t){const e=$r(),n=e0(t);return Jv(n,t,e)}function $h(t){const e=$r();return Cn(n=>{Vf(e.current,t,n)},[e,t])}function XI(t){const e=$r();return Cn(()=>{Vf(e.current,t,XT)},[e,t])}function qI(t){return[YT(t),$h(t)]}function YI(t){return[e0(t),$h(t)]}function ZI(){const t=$r();return(e,n={})=>{NI(()=>{t.current.addTransactionMetadata(n),e.forEach((r,i)=>BI(t.current,new rm(i),r))})}}function ZT(t){return ot("recoil_memory_managament_2020")&&Kv(t),im(t)}function KT(t){const e=$r(),n=ZT(t);return Jv(n,t,e)}function KI(t){return[KT(t),$h(t)]}var QI={recoilComponentGetRecoilValueCount_FOR_TESTING:$I,useRecoilInterface:jI,useRecoilState:qI,useRecoilStateLoadable:YI,useRecoilValue:YT,useRecoilValueLoadable:e0,useResetRecoilState:XI,useSetRecoilState:$h,useSetUnvalidatedAtomValues:ZI,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:ZT,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:KT,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:KI};function JI(t,e){const n=new Map;for(const[r,i]of t)e(i,r)&&n.set(r,i);return n}var eN=JI;function tN(t,e){const n=new Set;for(const r of t)e(r)&&n.add(r);return n}var nN=tN;function rN(...t){const e=new Map;for(let n=0;n<t.length;n++){const r=t[n].keys();let i;for(;!(i=r.next()).done;)e.set(i.value,t[n].get(i.value))}return e}var iN=rN;const{batchUpdates:sN}=Uh,{DEFAULT_VALUE:oN,getNode:QT,nodes:aN}=Pn,{useStoreRef:t0}=hi,{AbstractRecoilValue:lN,setRecoilValueLoadable:uN}=jr,{SUSPENSE_TIMEOUT_MS:cN}=Qs,{cloneSnapshot:Bf}=zh,{useCallback:Gh,useEffect:JT,useRef:l1,useState:fN}=qe,{isSSR:u1}=Yv;function Hh(t){const e=t0();JT(()=>e.current.subscribeToTransactions(t).release,[t,e])}function c1(t){const e=t.atomValues.toMap(),n=Uf(eN(e,(r,i)=>{const o=QT(i).persistence_UNSTABLE;return o!=null&&o.type!=="none"&&r.state==="hasValue"}),r=>r.contents);return iN(t.nonvalidatedAtoms.toMap(),n)}function hN(t){Hh(Gh(e=>{let n=e.getState().previousTree;const r=e.getState().currentTree;n||(n=e.getState().currentTree);const i=c1(r),s=c1(n),o=Uf(aN,l=>{var u,c,f,d;return{persistence_UNSTABLE:{type:(u=(c=l.persistence_UNSTABLE)===null||c===void 0?void 0:c.type)!==null&&u!==void 0?u:"none",backButton:(f=(d=l.persistence_UNSTABLE)===null||d===void 0?void 0:d.backButton)!==null&&f!==void 0?f:!1}}}),a=nN(r.dirtyAtoms,l=>i.has(l)||s.has(l));t({atomValues:i,previousAtomValues:s,atomInfo:o,modifiedAtoms:a,transactionMetadata:{...r.transactionMetadata}})},[t]))}function dN(t){Hh(Gh(e=>{const n=Bf(e,"latest"),r=Bf(e,"previous");t({snapshot:n,previousSnapshot:r})},[t]))}function pN(){const t=t0(),[e,n]=fN(()=>Bf(t.current)),r=WT(e),i=l1(),s=l1();if(Hh(Gh(a=>n(Bf(a)),[])),JT(()=>{const a=e.retain();if(i.current&&!u1){var l;window.clearTimeout(i.current),i.current=null,(l=s.current)===null||l===void 0||l.call(s),s.current=null}return()=>{window.setTimeout(a,10)}},[e]),r!==e&&!u1){if(i.current){var o;window.clearTimeout(i.current),i.current=null,(o=s.current)===null||o===void 0||o.call(s),s.current=null}s.current=e.retain(),i.current=window.setTimeout(()=>{var a;i.current=null,(a=s.current)===null||a===void 0||a.call(s),s.current=null},cN)}return e}function e2(t,e){var n;const r=t.getState(),i=(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree,s=e.getStore_INTERNAL().getState().currentTree;sN(()=>{const o=new Set;for(const u of[i.atomValues.keys(),s.atomValues.keys()])for(const c of u){var a,l;((a=i.atomValues.get(c))===null||a===void 0?void 0:a.contents)!==((l=s.atomValues.get(c))===null||l===void 0?void 0:l.contents)&&QT(c).shouldRestoreFromSnapshots&&o.add(c)}o.forEach(u=>{uN(t,new lN(u),s.atomValues.has(u)?yt(s.atomValues.get(u)):oN)}),t.replaceState(u=>({...u,stateID:e.getID()}))})}function gN(){const t=t0();return Gh(e=>e2(t.current,e),[t])}var t2={useRecoilSnapshot:pN,gotoSnapshot:e2,useGotoRecoilSnapshot:gN,useRecoilTransactionObserver:dN,useTransactionObservation_DEPRECATED:hN,useTransactionSubscription_DEPRECATED:Hh};const{peekNodeInfo:mN}=ss,{useStoreRef:vN}=hi;function yN(){const t=vN();return({key:e})=>mN(t.current,t.current.getState().currentTree,e)}var _N=yN;const{reactMode:bN}=Ru,{RecoilRoot:wN,useStoreRef:EN}=hi,{useMemo:SN}=qe;function TN(){bN().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const t=EN().current;return SN(()=>{function e({children:n}){return Oe(wN,{store_INTERNAL:t,children:n})}return e},[t])}var AN=TN;const{loadableWithValue:xN}=xu,{initializeNode:RN}=ss,{DEFAULT_VALUE:CN,getNode:PN}=Pn,{copyTreeState:MN,getRecoilValueAsLoadable:LN,invalidateDownstreams:kN,writeLoadableToTreeState:ON}=jr;function f1(t){return PN(t.key).nodeType==="atom"}class IN{constructor(e,n){Le(this,"_store",void 0),Le(this,"_treeState",void 0),Le(this,"_changes",void 0),Le(this,"get",r=>{if(this._changes.has(r.key))return this._changes.get(r.key);if(!f1(r))throw Ie("Reading selectors within atomicUpdate is not supported");const i=LN(this._store,r,this._treeState);if(i.state==="hasValue")return i.contents;throw i.state==="hasError"?i.contents:Ie(`Expected Recoil atom ${r.key} to have a value, but it is in a loading state.`)}),Le(this,"set",(r,i)=>{if(!f1(r))throw Ie("Setting selectors within atomicUpdate is not supported");if(typeof i=="function"){const s=this.get(r);this._changes.set(r.key,i(s))}else RN(this._store,r.key,"set"),this._changes.set(r.key,i)}),Le(this,"reset",r=>{this.set(r,CN)}),this._store=e,this._treeState=n,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const e=MN(this._treeState);for(const[n,r]of this._changes)ON(e,n,xN(r));return kN(this._store,e),e}}function NN(t){return e=>{t.replaceState(n=>{const r=new IN(t,n);return e(r),r.newTreeState_INTERNAL()})}}var DN={atomicUpdater:NN},FN=DN.atomicUpdater,n2=Object.freeze({__proto__:null,atomicUpdater:FN});function UN(t,e){if(!t)throw new Error(e)}var VN=UN,Rl=VN;const{atomicUpdater:BN}=n2,{batchUpdates:zN}=Uh,{DEFAULT_VALUE:jN}=Pn,{useStoreRef:$N}=hi,{refreshRecoilValue:GN,setRecoilValue:h1}=jr,{cloneSnapshot:HN}=zh,{gotoSnapshot:WN}=t2,{useCallback:XN}=qe;class r2{}const qN=new r2;function i2(t,e,n,r){let i=qN,s;if(zN(()=>{const a="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw Ie(a);const l=mT({...r!=null?r:{},set:(c,f)=>h1(t,c,f),reset:c=>h1(t,c,jN),refresh:c=>GN(t,c),gotoSnapshot:c=>WN(t,c),transact_UNSTABLE:c=>BN(t)(c)},{snapshot:()=>{const c=HN(t);return s=c.retain(),c}}),u=e(l);if(typeof u!="function")throw Ie(a);i=u(...n)}),i instanceof r2&&Rl(!1),vt(i))i.finally(()=>{var a;(a=s)===null||a===void 0||a()});else{var o;(o=s)===null||o===void 0||o()}return i}function YN(t,e){const n=$N();return XN((...r)=>i2(n.current,t,r),e!=null?[...e,n]:void 0)}var s2={recoilCallback:i2,useRecoilCallback:YN};const{useStoreRef:ZN}=hi,{refreshRecoilValue:KN}=jr,{useCallback:QN}=qe;function JN(t){const e=ZN();return QN(()=>{const n=e.current;KN(n,t)},[t,e])}var eD=JN;const{atomicUpdater:tD}=n2,{useStoreRef:nD}=hi,{useMemo:rD}=qe;function iD(t,e){const n=nD();return rD(()=>(...r)=>{tD(n.current)(s=>{t(s)(...r)})},e!=null?[...e,n]:void 0)}var sD=iD;class oD{constructor(e){Le(this,"value",void 0),this.value=e}}var aD={WrappedValue:oD},lD=aD.WrappedValue,o2=Object.freeze({__proto__:null,WrappedValue:lD});const{isFastRefreshEnabled:uD}=Ru;class d1 extends Error{}class cD{constructor(e){var n,r,i;Le(this,"_name",void 0),Le(this,"_numLeafs",void 0),Le(this,"_root",void 0),Le(this,"_onHit",void 0),Le(this,"_onSet",void 0),Le(this,"_mapNodeValue",void 0),this._name=e==null?void 0:e.name,this._numLeafs=0,this._root=null,this._onHit=(n=e==null?void 0:e.onHit)!==null&&n!==void 0?n:()=>{},this._onSet=(r=e==null?void 0:e.onSet)!==null&&r!==void 0?r:()=>{},this._mapNodeValue=(i=e==null?void 0:e.mapNodeValue)!==null&&i!==void 0?i:s=>s}size(){return this._numLeafs}root(){return this._root}get(e,n){var r;return(r=this.getLeafNode(e,n))===null||r===void 0?void 0:r.value}getLeafNode(e,n){if(this._root==null)return;let r=this._root;for(;r;){if(n==null||n.onNodeVisit(r),r.type==="leaf")return this._onHit(r),r;const i=this._mapNodeValue(e(r.nodeKey));r=r.branches.get(i)}}set(e,n,r){const i=()=>{var s,o,a,l;let u,c;for(const[x,S]of e){var f,d,g;const v=this._root;if((v==null?void 0:v.type)==="leaf")throw this.invalidCacheError();const w=u;if(u=w?w.branches.get(c):v,u=(f=u)!==null&&f!==void 0?f:{type:"branch",nodeKey:x,parent:w,branches:new Map,branchKey:c},u.type!=="branch"||u.nodeKey!==x)throw this.invalidCacheError();w==null||w.branches.set(c,u),r==null||(d=r.onNodeVisit)===null||d===void 0||d.call(r,u),c=this._mapNodeValue(S),this._root=(g=this._root)!==null&&g!==void 0?g:u}const y=u?(s=u)===null||s===void 0?void 0:s.branches.get(c):this._root;if(y!=null&&(y.type!=="leaf"||y.branchKey!==c))throw this.invalidCacheError();const m={type:"leaf",value:n,parent:u,branchKey:c};(o=u)===null||o===void 0||o.branches.set(c,m),this._root=(a=this._root)!==null&&a!==void 0?a:m,this._numLeafs++,this._onSet(m),r==null||(l=r.onNodeVisit)===null||l===void 0||l.call(r,m)};try{i()}catch(s){if(s instanceof d1)this.clear(),i();else throw s}}delete(e){const n=this.root();if(!n)return!1;if(e===n)return this._root=null,this._numLeafs=0,!0;let r=e.parent,i=e.branchKey;for(;r;){var s;if(r.branches.delete(i),r===n)return r.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(r.branches.size>0)break;i=(s=r)===null||s===void 0?void 0:s.branchKey,r=r.parent}for(;r!==n;r=r.parent)if(r==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const e=uD()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw Bv(e+(this._name!=null?` - ${this._name}`:"")),new d1}}var fD={TreeCache:cD},hD=fD.TreeCache,a2=Object.freeze({__proto__:null,TreeCache:hD});class dD{constructor(e){var n;Le(this,"_maxSize",void 0),Le(this,"_size",void 0),Le(this,"_head",void 0),Le(this,"_tail",void 0),Le(this,"_map",void 0),Le(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(n=e.mapKey)!==null&&n!==void 0?n:r=>r}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const n=this._keyMapper(e),r=this._map.get(n);if(!!r)return this.set(e,r.value),r.value}set(e,n){const r=this._keyMapper(e);this._map.get(r)&&this.delete(e);const s=this.head(),o={key:e,right:s,left:null,value:n};s?s.left=o:this._tail=o,this._map.set(r,o),this._head=o,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const n=this._keyMapper(e);if(!this._size||!this._map.has(n))return;const r=yt(this._map.get(n)),i=r.right,s=r.left;i&&(i.left=r.left),s&&(s.right=r.right),r===this.head()&&(this._head=i),r===this.tail()&&(this._tail=s),this._map.delete(n),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var pD={LRUCache:dD},gD=pD.LRUCache,l2=Object.freeze({__proto__:null,LRUCache:gD});const{LRUCache:mD}=l2,{TreeCache:vD}=a2;function yD({name:t,maxSize:e,mapNodeValue:n=r=>r}){const r=new mD({maxSize:e}),i=new vD({name:t,mapNodeValue:n,onHit:s=>{r.set(s,!0)},onSet:s=>{const o=r.tail();r.set(s,!0),o&&i.size()>e&&i.delete(o.key)}});return i}var p1=yD;function dr(t,e,n){if(typeof t=="string"&&!t.includes('"')&&!t.includes("\\"))return`"${t}"`;switch(typeof t){case"undefined":return"";case"boolean":return t?"true":"false";case"number":case"symbol":return String(t);case"string":return JSON.stringify(t);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw Ie("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${t.name})__`}if(t===null)return"null";if(typeof t!="object"){var r;return(r=JSON.stringify(t))!==null&&r!==void 0?r:""}if(vt(t))return"__PROMISE__";if(Array.isArray(t))return`[${t.map((i,s)=>dr(i,e,s.toString()))}]`;if(typeof t.toJSON=="function")return dr(t.toJSON(n),e,n);if(t instanceof Map){const i={};for(const[s,o]of t)i[typeof s=="string"?s:dr(s,e)]=o;return dr(i,e,n)}return t instanceof Set?dr(Array.from(t).sort((i,s)=>dr(i,e).localeCompare(dr(s,e))),e,n):Symbol!==void 0&&t[Symbol.iterator]!=null&&typeof t[Symbol.iterator]=="function"?dr(Array.from(t),e,n):`{${Object.keys(t).filter(i=>t[i]!==void 0).sort().map(i=>`${dr(i,e)}:${dr(t[i],e,i)}`).join(",")}}`}function _D(t,e={allowFunctions:!1}){return dr(t,e)}var Wh=_D;const{TreeCache:bD}=a2,Ec={equality:"reference",eviction:"keep-all",maxSize:1/0};function wD({equality:t=Ec.equality,eviction:e=Ec.eviction,maxSize:n=Ec.maxSize}=Ec,r){const i=ED(t);return SD(e,n,i,r)}function ED(t){switch(t){case"reference":return e=>e;case"value":return e=>Wh(e)}throw Ie(`Unrecognized equality policy ${t}`)}function SD(t,e,n,r){switch(t){case"keep-all":return new bD({name:r,mapNodeValue:n});case"lru":return p1({name:r,maxSize:yt(e),mapNodeValue:n});case"most-recent":return p1({name:r,maxSize:1,mapNodeValue:n})}throw Ie(`Unrecognized eviction policy ${t}`)}var TD=wD;function AD(t){return()=>null}var xD={startPerfBlock:AD};const{isLoadable:RD,loadableWithError:Sc,loadableWithPromise:CD,loadableWithValue:vp}=xu,{WrappedValue:u2}=o2,{getNodeLoadable:Tc,peekNodeLoadable:PD,setNodeValue:MD}=ss,{saveDepsToStore:LD}=Cu,{DEFAULT_VALUE:kD,getConfigDeletionHandler:OD,getNode:ID,registerNode:g1}=Pn,{isRecoilValue:ND}=ba,{markRecoilValueModified:m1}=jr,{retainedByOptionWithDefault:DD}=Qs,{recoilCallback:FD}=s2,{startPerfBlock:UD}=xD;class c2{}const cl=new c2,fl=[],Ac=new Map,VD=(()=>{let t=0;return()=>t++})();function f2(t){let e=null;const{key:n,get:r,cachePolicy_UNSTABLE:i}=t,s=t.set!=null?t.set:void 0,o=new Set,a=TD(i!=null?i:{equality:"reference",eviction:"keep-all"},n),l=DD(t.retainedBy_UNSTABLE),u=new Map;let c=0;function f(){return!ot("recoil_memory_managament_2020")||c>0}function d(I){return I.getState().knownSelectors.add(n),c++,()=>{c--}}function g(){return OD(n)!==void 0&&!f()}function y(I,K,Q,be,ue){Be(K,be,ue),m(I,Q)}function m(I,K){ee(I,K)&&Ee(I),S(K,!0)}function x(I,K){ee(I,K)&&(yt(G(I)).stateVersions.clear(),S(K,!1))}function S(I,K){const Q=Ac.get(I);if(Q!=null){for(const be of Q)m1(be,yt(e));K&&Ac.delete(I)}}function v(I,K){let Q=Ac.get(K);Q==null&&Ac.set(K,Q=new Set),Q.add(I)}function w(I,K,Q,be,ue,de){return K.then(Re=>{if(!f())throw Ee(I),cl;const ce=vp(Re);return y(I,Q,ue,ce,be),Re}).catch(Re=>{if(!f())throw Ee(I),cl;if(vt(Re))return R(I,Re,Q,be,ue,de);const ce=Sc(Re);throw y(I,Q,ue,ce,be),Re})}function R(I,K,Q,be,ue,de){return K.then(Re=>{if(!f())throw Ee(I),cl;de.loadingDepKey!=null&&de.loadingDepPromise===K?Q.atomValues.set(de.loadingDepKey,vp(Re)):I.getState().knownSelectors.forEach(je=>{Q.atomValues.delete(je)});const ce=U(I,Q);if(ce&&ce.state!=="loading"){if((ee(I,ue)||G(I)==null)&&m(I,ue),ce.state==="hasValue")return ce.contents;throw ce.contents}if(!ee(I,ue)){const je=H(I,Q);if(je!=null)return je.loadingLoadable.contents}const[ke,at]=C(I,Q,ue);if(ke.state!=="loading"&&y(I,Q,ue,ke,at),ke.state==="hasError")throw ke.contents;return ke.contents}).catch(Re=>{if(Re instanceof c2)throw cl;if(!f())throw Ee(I),cl;const ce=Sc(Re);throw y(I,Q,ue,ce,be),Re})}function L(I,K,Q,be){var ue,de,Re,ce;if(ee(I,be)||K.version===((ue=I.getState())===null||ue===void 0||(de=ue.currentTree)===null||de===void 0?void 0:de.version)||K.version===((Re=I.getState())===null||Re===void 0||(ce=Re.nextTree)===null||ce===void 0?void 0:ce.version)){var ke,at,je;LD(n,Q,I,(ke=(at=I.getState())===null||at===void 0||(je=at.nextTree)===null||je===void 0?void 0:je.version)!==null&&ke!==void 0?ke:I.getState().currentTree.version)}for(const Ze of Q)o.add(Ze)}function C(I,K,Q){const be=UD(n);let ue=!0,de=!0;const Re=()=>{be(),de=!1};let ce,ke=!1,at;const je={loadingDepKey:null,loadingDepPromise:null},Ze=new Map;function xt({key:ft}){const _t=Tc(I,K,ft);switch(Ze.set(ft,_t),ue||(L(I,K,new Set(Ze.keys()),Q),x(I,Q)),_t.state){case"hasValue":return _t.contents;case"hasError":throw _t.contents;case"loading":throw je.loadingDepKey=ft,je.loadingDepPromise=_t.contents,_t.contents}throw Ie("Invalid Loadable state")}const cn=ft=>(..._t)=>{if(de)throw Ie("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return e==null&&Rl(!1),FD(I,ft,_t,{node:e})};try{ce=r({get:xt,getCallback:cn}),ce=ND(ce)?xt(ce):ce,RD(ce)&&(ce.state==="hasError"&&(ke=!0),ce=ce.contents),vt(ce)?ce=w(I,ce,K,Ze,Q,je).finally(Re):Re(),ce=ce instanceof u2?ce.value:ce}catch(ft){ce=ft,vt(ce)?ce=R(I,ce,K,Ze,Q,je).finally(Re):(ke=!0,Re())}return ke?at=Sc(ce):vt(ce)?at=CD(ce):at=vp(ce),ue=!1,Ce(I,Q,Ze),L(I,K,new Set(Ze.keys()),Q),[at,Ze]}function U(I,K){let Q=K.atomValues.get(n);if(Q!=null)return Q;const be=new Set;try{Q=a.get(de=>(typeof de!="string"&&Rl(!1),Tc(I,K,de).contents),{onNodeVisit:de=>{de.type==="branch"&&de.nodeKey!==n&&be.add(de.nodeKey)}})}catch(de){throw Ie(`Problem with cache lookup for selector "${n}": ${de.message}`)}if(Q){var ue;K.atomValues.set(n,Q),L(I,K,be,(ue=G(I))===null||ue===void 0?void 0:ue.executionID)}return Q}function N(I,K){const Q=U(I,K);if(Q!=null)return Ee(I),Q;const be=H(I,K);if(be!=null){var ue;return((ue=be.loadingLoadable)===null||ue===void 0?void 0:ue.state)==="loading"&&v(I,be.executionID),be.loadingLoadable}const de=VD(),[Re,ce]=C(I,K,de);return Re.state==="loading"?(ie(I,de,Re,ce,K),v(I,de)):(Ee(I),Be(K,Re,ce)),Re}function H(I,K){const Q=OT([u.has(I)?[yt(u.get(I))]:[],Ih(Hv(u,([ue])=>ue!==I),([,ue])=>ue)]);function be(ue){for(const[de,Re]of ue)if(!Tc(I,K,de).is(Re))return!0;return!1}for(const ue of Q){if(ue.stateVersions.get(K.version)||!be(ue.depValuesDiscoveredSoFarDuringAsyncWork))return ue.stateVersions.set(K.version,!0),ue;ue.stateVersions.set(K.version,!1)}}function G(I){return u.get(I)}function ie(I,K,Q,be,ue){u.set(I,{depValuesDiscoveredSoFarDuringAsyncWork:be,executionID:K,loadingLoadable:Q,stateVersions:new Map([[ue.version,!0]])})}function Ce(I,K,Q){if(ee(I,K)){const be=G(I);be!=null&&(be.depValuesDiscoveredSoFarDuringAsyncWork=Q)}}function Ee(I){u.delete(I)}function ee(I,K){var Q;return K===((Q=G(I))===null||Q===void 0?void 0:Q.executionID)}function _e(I){return Array.from(I.entries()).map(([K,Q])=>[K,Q.contents])}function Be(I,K,Q){I.atomValues.set(n,K);try{a.set(_e(Q),K)}catch(be){throw Ie(`Problem with setting cache for selector "${n}": ${be.message}`)}}function j(I){if(fl.includes(n)){const K=`Recoil selector has circular dependencies: ${fl.slice(fl.indexOf(n)).join(" \u2192 ")}`;return Sc(Ie(K))}fl.push(n);try{return I()}finally{fl.pop()}}function $(I,K){const Q=K.atomValues.get(n);return Q!=null?Q:a.get(be=>{var ue;return typeof be!="string"&&Rl(!1),(ue=PD(I,K,be))===null||ue===void 0?void 0:ue.contents})}function ae(I,K){return j(()=>N(I,K))}function re(I){I.atomValues.delete(n)}function oe(I,K){e==null&&Rl(!1);for(const be of o){var Q;const ue=ID(be);(Q=ue.clearCache)===null||Q===void 0||Q.call(ue,I,K)}o.clear(),re(K),a.clear(),m1(I,e)}return s!=null?e=g1({key:n,nodeType:"selector",peek:$,get:ae,set:(K,Q,be)=>{let ue=!1;const de=new Map;function Re({key:je}){if(ue)throw Ie("Recoil: Async selector sets are not currently supported.");const Ze=Tc(K,Q,je);if(Ze.state==="hasValue")return Ze.contents;if(Ze.state==="loading"){const xt=`Getting value of asynchronous atom or selector "${je}" in a pending state while setting selector "${n}" is not yet supported.`;throw Ie(xt)}else throw Ze.contents}function ce(je,Ze){if(ue)throw Ie("Recoil: Async selector sets are not currently supported.");const xt=typeof Ze=="function"?Ze(Re(je)):Ze;MD(K,Q,je.key,xt).forEach((ft,_t)=>de.set(_t,ft))}function ke(je){ce(je,kD)}const at=s({set:ce,get:Re,reset:ke},be);if(at!==void 0)throw vt(at)?Ie("Recoil: Async selector sets are not currently supported."):Ie("Recoil: selector set should be a void function.");return ue=!0,de},init:d,invalidate:re,clearCache:oe,shouldDeleteConfigOnRelease:g,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l}):e=g1({key:n,nodeType:"selector",peek:$,get:ae,init:d,invalidate:re,clearCache:oe,shouldDeleteConfigOnRelease:g,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l})}f2.value=t=>new u2(t);var Sa=f2;const{isLoadable:BD,loadableWithError:yp,loadableWithPromise:_p,loadableWithValue:Ro}=xu,{WrappedValue:h2}=o2,{peekNodeInfo:zD}=ss,{DEFAULT_VALUE:Ps,DefaultValue:Ii,getConfigDeletionHandler:d2,registerNode:jD,setConfigDeletionHandler:$D}=Pn,{isRecoilValue:GD}=ba,{getRecoilValueAsLoadable:HD,markRecoilValueModified:WD,setRecoilValue:v1,setRecoilValueLoadable:XD}=jr,{retainedByOptionWithDefault:qD}=Qs,hl=t=>t instanceof h2?t.value:t;function YD(t){const{key:e,persistence_UNSTABLE:n}=t,r=qD(t.retainedBy_UNSTABLE);let i=0;function s(v){return _p(v.then(w=>(o=Ro(w),w)).catch(w=>{throw o=yp(w),w}))}let o=vt(t.default)?s(t.default):BD(t.default)?t.default.state==="loading"?s(t.default.contents):t.default:Ro(hl(t.default));o.contents;let a;const l=new Map;function u(v){return v}function c(v,w){const R=w.then(L=>{var C,U;return((U=((C=v.getState().nextTree)!==null&&C!==void 0?C:v.getState().currentTree).atomValues.get(e))===null||U===void 0?void 0:U.contents)===R&&v1(v,S,L),L}).catch(L=>{var C,U;throw((U=((C=v.getState().nextTree)!==null&&C!==void 0?C:v.getState().currentTree).atomValues.get(e))===null||U===void 0?void 0:U.contents)===R&&XD(v,S,yp(L)),L});return R}function f(v,w,R){var L;i++;const C=()=>{var G;i--,(G=l.get(v))===null||G===void 0||G.forEach(ie=>ie()),l.delete(v)};if(v.getState().knownAtoms.add(e),o.state==="loading"){const G=()=>{var ie;((ie=v.getState().nextTree)!==null&&ie!==void 0?ie:v.getState().currentTree).atomValues.has(e)||WD(v,S)};o.contents.finally(G)}const U=(L=t.effects)!==null&&L!==void 0?L:t.effects_UNSTABLE;if(U!=null){let ee=function(re){if(ie&&re.key===e){const oe=G;return oe instanceof Ii?d(v,w):vt(oe)?_p(oe.then(I=>I instanceof Ii?o.toPromise():I)):Ro(oe)}return HD(v,re)},_e=function(re){return ee(re).toPromise()},Be=function(re){var oe;const I=zD(v,(oe=v.getState().nextTree)!==null&&oe!==void 0?oe:v.getState().currentTree,re.key);return ie&&re.key===e&&!(G instanceof Ii)?{...I,isSet:!0,loadable:ee(re)}:I},G=Ps,ie=!0,Ce=!1,Ee=null;const j=re=>oe=>{if(ie){const I=ee(S),K=I.state==="hasValue"?I.contents:Ps;G=typeof oe=="function"?oe(K):oe,vt(G)&&(G=G.then(Q=>(Ee={effect:re,value:Q},Q)))}else{if(vt(oe))throw Ie("Setting atoms to async values is not implemented.");typeof oe!="function"&&(Ee={effect:re,value:hl(oe)}),v1(v,S,typeof oe=="function"?I=>{const K=hl(oe(I));return Ee={effect:re,value:K},K}:hl(oe))}},$=re=>()=>j(re)(Ps),ae=re=>oe=>{var I;const{release:K}=v.subscribeToTransactions(Q=>{var be;let{currentTree:ue,previousTree:de}=Q.getState();de||(de=ue);const Re=(be=ue.atomValues.get(e))!==null&&be!==void 0?be:o;if(Re.state==="hasValue"){var ce,ke,at,je;const Ze=Re.contents,xt=(ce=de.atomValues.get(e))!==null&&ce!==void 0?ce:o,cn=xt.state==="hasValue"?xt.contents:Ps;((ke=Ee)===null||ke===void 0?void 0:ke.effect)!==re||((at=Ee)===null||at===void 0?void 0:at.value)!==Ze?oe(Ze,cn,!ue.atomValues.has(e)):((je=Ee)===null||je===void 0?void 0:je.effect)===re&&(Ee=null)}},e);l.set(v,[...(I=l.get(v))!==null&&I!==void 0?I:[],K])};for(const re of U)try{const oe=re({node:S,storeID:v.storeID,parentStoreID_UNSTABLE:v.parentStoreID,trigger:R,setSelf:j(re),resetSelf:$(re),onSet:ae(re),getPromise:_e,getLoadable:ee,getInfo_UNSTABLE:Be});if(oe!=null){var N;l.set(v,[...(N=l.get(v))!==null&&N!==void 0?N:[],oe])}}catch(oe){G=oe,Ce=!0}if(ie=!1,!(G instanceof Ii)){var H;const re=Ce?yp(G):vt(G)?_p(c(v,G)):Ro(hl(G));re.contents,w.atomValues.set(e,re),(H=v.getState().nextTree)===null||H===void 0||H.atomValues.set(e,re)}}return C}function d(v,w){var R,L;return(R=(L=w.atomValues.get(e))!==null&&L!==void 0?L:a)!==null&&R!==void 0?R:o}function g(v,w){if(w.atomValues.has(e))return yt(w.atomValues.get(e));if(w.nonvalidatedAtoms.has(e)){if(a!=null)return a;if(n==null)return o;const R=w.nonvalidatedAtoms.get(e),L=n.validator(R,Ps);return a=L instanceof Ii?o:Ro(L),a}else return o}function y(){a=void 0}function m(v,w,R){if(w.atomValues.has(e)){const L=yt(w.atomValues.get(e));if(L.state==="hasValue"&&R===L.contents)return new Map}else if(!w.nonvalidatedAtoms.has(e)&&R instanceof Ii)return new Map;return a=void 0,new Map().set(e,Ro(R))}function x(){return d2(e)!==void 0&&i<=0}const S=jD({key:e,nodeType:"atom",peek:d,get:g,set:m,init:f,invalidate:y,shouldDeleteConfigOnRelease:x,dangerouslyAllowMutability:t.dangerouslyAllowMutability,persistence_UNSTABLE:t.persistence_UNSTABLE?{type:t.persistence_UNSTABLE.type,backButton:t.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return S}function n0(t){const{...e}=t,n="default"in t?t.default:new Promise(()=>{});return GD(n)?ZD({...e,default:n}):YD({...e,default:n})}function ZD(t){const e=n0({...t,default:Ps,persistence_UNSTABLE:t.persistence_UNSTABLE===void 0?void 0:{...t.persistence_UNSTABLE,validator:r=>r instanceof Ii?r:yt(t.persistence_UNSTABLE).validator(r,Ps)},effects:t.effects,effects_UNSTABLE:t.effects_UNSTABLE}),n=Sa({key:`${t.key}__withFallback`,get:({get:r})=>{const i=r(e);return i instanceof Ii?t.default:i},set:({set:r},i)=>r(e,i),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:t.dangerouslyAllowMutability});return $D(n.key,d2(t.key)),n}n0.value=t=>new h2(t);var p2=n0;class KD{constructor(e){var n;Le(this,"_map",void 0),Le(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(n=e==null?void 0:e.mapKey)!==null&&n!==void 0?n:r=>r}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,n){this._map.set(this._keyMapper(e),n)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}}var QD={MapCache:KD},JD=QD.MapCache,e4=Object.freeze({__proto__:null,MapCache:JD});const{LRUCache:y1}=l2,{MapCache:t4}=e4,xc={equality:"reference",eviction:"none",maxSize:1/0};function n4({equality:t=xc.equality,eviction:e=xc.eviction,maxSize:n=xc.maxSize}=xc){const r=r4(t);return i4(e,n,r)}function r4(t){switch(t){case"reference":return e=>e;case"value":return e=>Wh(e)}throw Ie(`Unrecognized equality policy ${t}`)}function i4(t,e,n){switch(t){case"keep-all":return new t4({mapKey:n});case"lru":return new y1({mapKey:n,maxSize:yt(e)});case"most-recent":return new y1({mapKey:n,maxSize:1})}throw Ie(`Unrecognized eviction policy ${t}`)}var g2=n4;const{setConfigDeletionHandler:s4}=Pn;function o4(t){var e,n;const r=g2({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s,o;const a=r.get(i);if(a!=null)return a;const{cachePolicyForParams_UNSTABLE:l,...u}=t,c="default"in t?t.default:new Promise(()=>{}),f=p2({...u,key:`${t.key}__${(s=Wh(i))!==null&&s!==void 0?s:"void"}`,default:typeof c=="function"?c(i):c,retainedBy_UNSTABLE:typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE,effects:typeof t.effects=="function"?t.effects(i):typeof t.effects_UNSTABLE=="function"?t.effects_UNSTABLE(i):(o=t.effects)!==null&&o!==void 0?o:t.effects_UNSTABLE});return r.set(i,f),s4(f.key,()=>{r.delete(i)}),f}}var a4=o4;const{setConfigDeletionHandler:l4}=Pn;let u4=0;function c4(t){var e,n;const r=g2({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s;let o;try{o=r.get(i)}catch(d){throw Ie(`Problem with cache lookup for selector ${t.key}: ${d.message}`)}if(o!=null)return o;const a=`${t.key}__selectorFamily/${(s=Wh(i,{allowFunctions:!0}))!==null&&s!==void 0?s:"void"}/${u4++}`,l=d=>t.get(i)(d),u=t.cachePolicy_UNSTABLE,c=typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE;let f;if(t.set!=null){const d=t.set;f=Sa({key:a,get:l,set:(y,m)=>d(i)(y,m),cachePolicy_UNSTABLE:u,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:c})}else f=Sa({key:a,get:l,cachePolicy_UNSTABLE:u,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:c});return r.set(i,f),l4(f.key,()=>{r.delete(i)}),f}}var os=c4;const f4=os({key:"__constant",get:t=>()=>t,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function h4(t){return f4(t)}var d4=h4;const p4=os({key:"__error",get:t=>()=>{throw Ie(t)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function g4(t){return p4(t)}var m4=g4;function v4(t){return t}var y4=v4;const{loadableWithError:m2,loadableWithPromise:v2,loadableWithValue:y2}=xu;function Xh(t,e){const n=Array(e.length).fill(void 0),r=Array(e.length).fill(void 0);for(const[i,s]of e.entries())try{n[i]=t(s)}catch(o){r[i]=o}return[n,r]}function _4(t){return t!=null&&!vt(t)}function qh(t){return Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(e=>t[e])}function sm(t,e){return Array.isArray(t)?e:Object.getOwnPropertyNames(t).reduce((n,r,i)=>({...n,[r]:e[i]}),{})}function ua(t,e,n){const r=n.map((i,s)=>i==null?y2(e[s]):vt(i)?v2(i):m2(i));return sm(t,r)}function b4(t,e){return e.map((n,r)=>n===void 0?t[r]:n)}const w4=os({key:"__waitForNone",get:t=>({get:e})=>{const n=qh(t),[r,i]=Xh(e,n);return ua(t,r,i)},dangerouslyAllowMutability:!0}),E4=os({key:"__waitForAny",get:t=>({get:e})=>{const n=qh(t),[r,i]=Xh(e,n);return i.some(s=>!vt(s))?ua(t,r,i):new Promise(s=>{for(const[o,a]of i.entries())vt(a)&&a.then(l=>{r[o]=l,i[o]=void 0,s(ua(t,r,i))}).catch(l=>{i[o]=l,s(ua(t,r,i))})})},dangerouslyAllowMutability:!0}),S4=os({key:"__waitForAll",get:t=>({get:e})=>{const n=qh(t),[r,i]=Xh(e,n);if(i.every(o=>o==null))return sm(t,r);const s=i.find(_4);if(s!=null)throw s;return Promise.all(i).then(o=>sm(t,b4(r,o)))},dangerouslyAllowMutability:!0}),T4=os({key:"__waitForAllSettled",get:t=>({get:e})=>{const n=qh(t),[r,i]=Xh(e,n);return i.every(s=>!vt(s))?ua(t,r,i):Promise.all(i.map((s,o)=>vt(s)?s.then(a=>{r[o]=a,i[o]=void 0}).catch(a=>{r[o]=void 0,i[o]=a}):null)).then(()=>ua(t,r,i))},dangerouslyAllowMutability:!0}),A4=os({key:"__noWait",get:t=>({get:e})=>{try{return Sa.value(y2(e(t)))}catch(n){return Sa.value(vt(n)?v2(n):m2(n))}},dangerouslyAllowMutability:!0});var x4={waitForNone:w4,waitForAny:E4,waitForAll:S4,waitForAllSettled:T4,noWait:A4};const{RecoilLoadable:R4}=xu,{DefaultValue:C4}=Pn,{RecoilRoot:P4,useRecoilStoreID:M4}=hi,{isRecoilValue:L4}=ba,{retentionZone:k4}=Dh,{freshSnapshot:O4}=zh,{useRecoilState:I4,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:N4,useRecoilStateLoadable:D4,useRecoilValue:F4,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:U4,useRecoilValueLoadable:V4,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:B4,useResetRecoilState:z4,useSetRecoilState:j4}=QI,{useGotoRecoilSnapshot:$4,useRecoilSnapshot:G4,useRecoilTransactionObserver:H4}=t2,{useRecoilCallback:W4}=s2,{noWait:X4,waitForAll:q4,waitForAllSettled:Y4,waitForAny:Z4,waitForNone:K4}=x4;var r0={DefaultValue:C4,isRecoilValue:L4,RecoilLoadable:R4,RecoilEnv:sT,RecoilRoot:P4,useRecoilStoreID:M4,useRecoilBridgeAcrossReactRoots_UNSTABLE:AN,atom:p2,selector:Sa,atomFamily:a4,selectorFamily:os,constSelector:d4,errorSelector:m4,readOnlySelector:y4,noWait:X4,waitForNone:K4,waitForAny:Z4,waitForAll:q4,waitForAllSettled:Y4,useRecoilValue:F4,useRecoilValueLoadable:V4,useRecoilState:I4,useRecoilStateLoadable:D4,useSetRecoilState:j4,useResetRecoilState:z4,useGetRecoilValueInfo_UNSTABLE:_N,useRecoilRefresher_UNSTABLE:eD,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:B4,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:U4,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:N4,useRecoilCallback:W4,useRecoilTransaction_UNSTABLE:sD,useGotoRecoilSnapshot:$4,useRecoilSnapshot:G4,useRecoilTransactionObserver_UNSTABLE:H4,snapshot_UNSTABLE:O4,useRetain:Kv,retentionZone:k4},vW=r0.RecoilRoot,yW=r0.atom,_W=r0.useRecoilState;const Q4="modulepreload",J4=function(t){return"/"+t},_1={},eF=function(e,n,r){return!n||n.length===0?e():Promise.all(n.map(i=>{if(i=J4(i),i in _1)return;_1[i]=!0;const s=i.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${o}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":Q4,s||(a.as="script",a.crossOrigin=""),a.href=i,document.head.appendChild(a),s)return new Promise((l,u)=>{a.addEventListener("load",l),a.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())},i0=W.exports.createContext(null),bW=t=>{const[e,n]=W.exports.useState({}),r=W.exports.useCallback((s,o="default")=>{n(a=>{if(o==="current")throw new Error("'current' cannot be used as map id");if(a[o])throw new Error(`Multiple maps with the same id: ${o}`);return{...a,[o]:s}})},[]),i=W.exports.useCallback((s="default")=>{n(o=>{if(o[s]){const a={...o};return delete a[s],a}return o})},[]);return Oe(i0.Provider,{value:{maps:e,onMapMount:r,onMapUnmount:i},children:t.children})};function wW(){var t;const e=(t=W.exports.useContext(i0))===null||t===void 0?void 0:t.maps,n=W.exports.useContext(Js);return W.exports.useMemo(()=>({...e,current:n==null?void 0:n.map}),[e,n])}function tF(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}function b1(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function w1(t,e){const n=e.viewState||e;let r=!1;if("longitude"in n&&"latitude"in n){const i=t.center;t.center=new i.constructor(n.longitude,n.latitude),r=r||i!==t.center}if("zoom"in n){const i=t.zoom;t.zoom=n.zoom,r=r||i!==t.zoom}if("bearing"in n){const i=t.bearing;t.bearing=n.bearing,r=r||i!==t.bearing}if("pitch"in n){const i=t.pitch;t.pitch=n.pitch,r=r||i!==t.pitch}return n.padding&&!t.isPaddingEqual(n.padding)&&(r=!0,t.padding=n.padding),r}const nF=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function E1(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const r of t.layers)e[r.id]=r;const n=t.layers.map(r=>{const i=e[r.ref];let s=null;if("interactive"in r&&(s={...r},delete s.interactive),i){s=s||{...r},delete s.ref;for(const o of nF)o in i&&(s[o]=i[o])}return s||r});return{...t,layers:n}}function rF(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,s=Array.isArray(e)?e[1]:e?e.y:0;return n===i&&r===s}function Qn(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Qn(t[n],e[n]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n)if(!e.hasOwnProperty(i)||!Qn(t[i],e[i]))return!1;return!0}return!1}const S1={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},bp={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},T1={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},iF=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],sF=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Ta{constructor(e,n,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=i=>{const s=this.props[T1[i.type]];s&&s(i)},this._onPointerEvent=i=>{(i.type==="mousemove"||i.type==="mouseout")&&this._updateHover(i);const s=this.props[S1[i.type]];if(s){if(this.props.interactiveLayerIds&&i.type!=="mouseover"&&i.type!=="mouseout"){const o=this._hoveredFeatures||this._map.queryRenderedFeatures(i.point,{layers:this.props.interactiveLayerIds});i.features=o}s(i),delete i.features}},this._onCameraEvent=i=>{if(!this._internalUpdate){const s=this.props[bp[i.type]];s&&s(i)}i.type in this._deferredEvents&&(this._deferredEvents[i.type]=!1)},this._MapClass=e,this.props=n,this._initialize(r)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const n=this.props;this.props=e;const r=this._updateSettings(e,n);r&&this._createShadowTransform(this._map);const i=this._updateSize(e),s=this._updateViewState(e,!0);this._updateStyle(e,n),this._updateStyleComponents(e,n),this._updateHandlers(e,n),(r||i||s&&!this._map.isMoving())&&this.redraw()}static reuse(e,n){const r=Ta.savedMaps.pop();if(!r)return null;const i=r.map,s=i.getContainer();for(n.className=s.className;s.childNodes.length>0;)n.appendChild(s.childNodes[0]);i._container=n,r.setProps({...e,styleDiffing:!1}),i.resize();const{initialViewState:o}=e;return o&&(o.bounds?i.fitBounds(o.bounds,{...o.fitBoundsOptions,duration:0}):r._updateViewState(o,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",()=>i.fire("load")),r}_initialize(e){const{props:n}=this,r={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||oF()||null,container:e,style:E1(n.mapStyle)},i=r.initialViewState||r.viewState||r;if(Object.assign(r,{center:[i.longitude||0,i.latitude||0],zoom:i.zoom||0,pitch:i.pitch||0,bearing:i.bearing||0}),n.gl){const u=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=u,n.gl)}const s=new this._MapClass(r);i.padding&&s.setPadding(i.padding),n.cursor&&(s.getCanvas().style.cursor=n.cursor),this._createShadowTransform(s);const o=s._render;s._render=u=>{this._inRender=!0,o.call(s,u),this._inRender=!1};const a=s._renderTaskQueue.run;s._renderTaskQueue.run=u=>{a.call(s._renderTaskQueue,u),this._onBeforeRepaint()},s.on("render",()=>this._onAfterRepaint());const l=s.fire;s.fire=this._fireEvent.bind(this,l),s.on("resize",()=>{this._renderTransform.resize(s.transform.width,s.transform.height)}),s.on("styledata",()=>this._updateStyleComponents(this.props,{})),s.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const u in S1)s.on(u,this._onPointerEvent);for(const u in bp)s.on(u,this._onCameraEvent);for(const u in T1)s.on(u,this._onEvent);this._map=s}recycle(){Ta.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const n=tF(e.transform);e.painter.transform=n,this._renderTransform=n}_updateSize(e){const{viewState:n}=e;if(n){const r=this._map;if(n.width!==r.transform.width||n.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(e,n){if(this._internalUpdate)return!1;const r=this._map,i=this._renderTransform,{zoom:s,pitch:o,bearing:a}=i,l=r.isMoving();l&&(i.cameraElevationReference="sea");const u=w1(i,{...b1(r.transform),...e});if(l&&(i.cameraElevationReference="ground"),u&&n){const c=this._deferredEvents;c.move=!0,c.zoom||(c.zoom=s!==i.zoom),c.rotate||(c.rotate=a!==i.bearing),c.pitch||(c.pitch=o!==i.pitch)}return l||w1(r.transform,e),u}_updateSettings(e,n){const r=this._map;let i=!1;for(const s of iF)s in e&&!Qn(e[s],n[s])&&(i=!0,r[`set${s[0].toUpperCase()}${s.slice(1)}`](e[s]));return i}_updateStyle(e,n){if(e.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=e.cursor),e.mapStyle!==n.mapStyle){const r={diff:e.styleDiffing};return"localIdeographFontFamily"in e&&(r.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(E1(e.mapStyle),r),!0}return!1}_updateStyleComponents(e,n){const r=this._map;let i=!1;return r.style.loaded()&&("light"in e&&!Qn(e.light,n.light)&&(i=!0,r.setLight(e.light)),"fog"in e&&!Qn(e.fog,n.fog)&&(i=!0,r.setFog(e.fog)),"terrain"in e&&!Qn(e.terrain,n.terrain)&&(!e.terrain||r.getSource(e.terrain.source))&&(i=!0,r.setTerrain(e.terrain))),i}_updateHandlers(e,n){const r=this._map;let i=!1;for(const s of sF){const o=e[s];Qn(o,n[s])||(i=!0,o?r[s].enable(o):r[s].disable())}return i}_updateHover(e){var n;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const s=e.type,o=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0;let a;if(s==="mousemove")try{a=this._map.queryRenderedFeatures(e.point,{layers:r.interactiveLayerIds})}catch{a=[]}else a=[];const l=a.length>0;!l&&o&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=a,l&&!o&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=s}else this._hoveredFeatures=null}_fireEvent(e,n,r){const i=this._map,s=i.transform,o=typeof n=="string"?n:n.type;return o==="move"&&this._updateViewState(this.props,!1),o in bp&&(typeof n=="object"&&(n.viewState=b1(s)),this._map.isMoving())?(i.transform=this._renderTransform,e.call(i,n,r),i.transform=s,i):(e.call(i,n,r),i)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const r in this._deferredEvents)this._deferredEvents[r]&&e.fire(r);this._internalUpdate=!1;const n=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=n}}}Ta.savedMaps=[];function oF(){let t=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||process.env.MapboxAccessToken}catch{}try{t=t||process.env.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const aF=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function lF(t,e){if(!t)return null;const n=t.map,r={getMap:()=>n,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:i=>t.transform.locationPoint(e.LngLat.convert(i)),unproject:i=>t.transform.pointLocation(e.Point.convert(i)),queryTerrainElevation:(i,s)=>{const o=n.transform;n.transform=t.transform;const a=n.queryTerrainElevation(i,s);return n.transform=o,a}};for(const i of uF(n))!(i in r)&&!aF.includes(i)&&(r[i]=n[i].bind(n));return r}function uF(t){const e=new Set;let n=t;for(;n;){for(const r of Object.getOwnPropertyNames(n))r[0]!=="_"&&typeof t[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&e.add(r);n=Object.getPrototypeOf(n)}return Array.from(e)}const cF=typeof document<"u"?W.exports.useLayoutEffect:W.exports.useEffect,fF=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function hF(t,e){for(const n of fF)n in e&&(t[n]=e[n]);e.RTLTextPlugin&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(e.RTLTextPlugin,n=>{n&&console.error(n)},!1)}const Js=W.exports.createContext(null),dF={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:t=>console.error(t.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},_2=W.exports.forwardRef((t,e)=>{const n=W.exports.useContext(i0),[r,i]=W.exports.useState(null),s=W.exports.useRef(),{current:o}=W.exports.useRef({mapLib:null,map:null});W.exports.useEffect(()=>{const l=t.mapLib;let u=!0,c;return Promise.resolve(l||eF(()=>import("./maplibre-gl.90ce0c91.js").then(f=>f.m),[])).then(f=>{if(!!u){if(f.Map||(f=f.default),!f||!f.Map)throw new Error("Invalid mapLib");if(f.supported(t))hF(f,t),t.reuseMaps&&(c=Ta.reuse(t,s.current)),c||(c=new Ta(f.Map,t,s.current)),o.map=lF(c,f),o.mapLib=f,i(c),n==null||n.onMapMount(o.map,t.id);else throw new Error("Map is not supported by this browser")}}).catch(f=>{t.onError({type:"error",target:null,originalEvent:null,error:f})}),()=>{u=!1,c&&(n==null||n.onMapUnmount(t.id),t.reuseMaps?c.recycle():c.destroy())}},[]),cF(()=>{r&&r.setProps(t)}),W.exports.useImperativeHandle(e,()=>o.map,[r]);const a=W.exports.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]);return Oe("div",{id:t.id,ref:s,style:a,children:r&&Oe(Js.Provider,{value:o,children:t.children})})});_2.displayName="Map";_2.defaultProps=dF;const pF=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function eo(t,e){if(!t||!e)return;const n=t.style;for(const r in e){const i=e[r];Number.isFinite(i)&&!pF.test(r)?n[r]=`${i}px`:n[r]=i}}const gF={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};function b2(t){const{map:e,mapLib:n}=W.exports.useContext(Js),r=W.exports.useRef({props:t});r.current.props=t;const i=W.exports.useMemo(()=>{let s=!1;W.exports.Children.forEach(t.children,l=>{l&&(s=!0)});const o={...t,element:s?document.createElement("div"):null},a=new n.Marker(o).setLngLat([t.longitude,t.latitude]);return a.getElement().addEventListener("click",l=>{var u,c;(c=(u=r.current.props).onClick)===null||c===void 0||c.call(u,{type:"click",target:a,originalEvent:l})}),a.on("dragstart",l=>{var u,c;const f=l;f.lngLat=i.getLngLat(),(c=(u=r.current.props).onDragStart)===null||c===void 0||c.call(u,f)}),a.on("drag",l=>{var u,c;const f=l;f.lngLat=i.getLngLat(),(c=(u=r.current.props).onDrag)===null||c===void 0||c.call(u,f)}),a.on("dragend",l=>{var u,c;const f=l;f.lngLat=i.getLngLat(),(c=(u=r.current.props).onDragEnd)===null||c===void 0||c.call(u,f)}),a},[]);return W.exports.useEffect(()=>(i.addTo(e.getMap()),()=>{i.remove()}),[]),W.exports.useEffect(()=>{eo(i.getElement(),t.style)},[t.style]),(i.getLngLat().lng!==t.longitude||i.getLngLat().lat!==t.latitude)&&i.setLngLat([t.longitude,t.latitude]),t.offset&&!rF(i.getOffset(),t.offset)&&i.setOffset(t.offset),i.isDraggable()!==t.draggable&&i.setDraggable(t.draggable),i.getRotation()!==t.rotation&&i.setRotation(t.rotation),i.getRotationAlignment()!==t.rotationAlignment&&i.setRotationAlignment(t.rotationAlignment),i.getPitchAlignment()!==t.pitchAlignment&&i.setPitchAlignment(t.pitchAlignment),i.getPopup()!==t.popup&&i.setPopup(t.popup),Ia.exports.createPortal(t.children,i.getElement())}b2.defaultProps=gF;W.exports.memo(b2);function A1(t){return new Set(t?t.trim().split(/\s+/):[])}function mF(t){const{map:e,mapLib:n}=W.exports.useContext(Js),r=W.exports.useMemo(()=>document.createElement("div"),[]),i=W.exports.useRef({props:t});i.current.props=t;const s=W.exports.useMemo(()=>{const o={...t},a=new n.Popup(o).setLngLat([t.longitude,t.latitude]);return a.once("open",l=>{var u,c;(c=(u=i.current.props).onOpen)===null||c===void 0||c.call(u,l)}),a},[]);if(W.exports.useEffect(()=>{const o=a=>{var l,u;(u=(l=i.current.props).onClose)===null||u===void 0||u.call(l,a)};return s.on("close",o),s.setDOMContent(r).addTo(e.getMap()),()=>{s.off("close",o),s.isOpen()&&s.remove()}},[]),W.exports.useEffect(()=>{eo(s.getElement(),t.style)},[t.style]),s.isOpen()&&((s.getLngLat().lng!==t.longitude||s.getLngLat().lat!==t.latitude)&&s.setLngLat([t.longitude,t.latitude]),t.offset&&!Qn(s.options.offset,t.offset)&&s.setOffset(t.offset),(s.options.anchor!==t.anchor||s.options.maxWidth!==t.maxWidth)&&(s.options.anchor=t.anchor,s.setMaxWidth(t.maxWidth)),s.options.className!==t.className)){const o=A1(s.options.className),a=A1(t.className);for(const l of o)a.has(l)||s.removeClassName(l);for(const l of a)o.has(l)||s.addClassName(l);s.options.className=t.className}return Ia.exports.createPortal(t.children,r)}W.exports.memo(mF);function ku(t,e,n,r){const i=W.exports.useContext(Js),s=W.exports.useMemo(()=>t(i),[]);return W.exports.useEffect(()=>{const o=r||n||e,a=typeof e=="function"&&typeof n=="function"?e:null,l=typeof n=="function"?n:typeof e=="function"?e:null,{map:u}=i;return u.hasControl(s)||(u.addControl(s,o==null?void 0:o.position),a&&a(i)),()=>{l&&l(i),u.hasControl(s)&&u.removeControl(s)}},[]),s}function vF(t){const e=ku(({mapLib:n})=>new n.AttributionControl(t),{position:t.position});return W.exports.useEffect(()=>{eo(e._container,t.style)},[t.style]),null}W.exports.memo(vF);function yF(t){const e=ku(({mapLib:n})=>new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return W.exports.useEffect(()=>{eo(e._controlContainer,t.style)},[t.style]),null}W.exports.memo(yF);const w2=W.exports.forwardRef((t,e)=>{const n=W.exports.useRef({props:t}),r=ku(({mapLib:i})=>{const s=new i.GeolocateControl(t),o=s._setupUI;return s._setupUI=a=>{s._container.hasChildNodes()||o(a)},s.on("geolocate",a=>{var l,u;(u=(l=n.current.props).onGeolocate)===null||u===void 0||u.call(l,a)}),s.on("error",a=>{var l,u;(u=(l=n.current.props).onError)===null||u===void 0||u.call(l,a)}),s.on("outofmaxbounds",a=>{var l,u;(u=(l=n.current.props).onOutOfMaxBounds)===null||u===void 0||u.call(l,a)}),s.on("trackuserlocationstart",a=>{var l,u;(u=(l=n.current.props).onTrackUserLocationStart)===null||u===void 0||u.call(l,a)}),s.on("trackuserlocationend",a=>{var l,u;(u=(l=n.current.props).onTrackUserLocationEnd)===null||u===void 0||u.call(l,a)}),s},{position:t.position});return n.current.props=t,W.exports.useImperativeHandle(e,()=>({trigger:()=>r.trigger()}),[]),W.exports.useEffect(()=>{eo(r._container,t.style)},[t.style]),null});w2.displayName="GeolocateControl";W.exports.memo(w2);function _F(t){const e=ku(({mapLib:n})=>new n.NavigationControl(t),{position:t.position});return W.exports.useEffect(()=>{eo(e._container,t.style)},[t.style]),null}W.exports.memo(_F);const bF={unit:"metric",maxWidth:100};function E2(t){const e=ku(({mapLib:n})=>new n.ScaleControl(t),{position:t.position});return(e.options.unit!==t.unit||e.options.maxWidth!==t.maxWidth)&&(e.options.maxWidth=t.maxWidth,e.setUnit(t.unit)),W.exports.useEffect(()=>{eo(e._container,t.style)},[t.style]),null}E2.defaultProps=bF;W.exports.memo(E2);function zf(t,e){if(!t)throw new Error(e)}let wF=0;function EF(t,e,n){if(t.style&&t.style._loaded){const r={...n};return delete r.id,delete r.children,t.addSource(e,r),t.getSource(e)}return null}function SF(t,e,n){zf(e.id===n.id,"source id changed"),zf(e.type===n.type,"source type changed");let r="",i=0;for(const o in e)o!=="children"&&o!=="id"&&!Qn(n[o],e[o])&&(r=o,i++);if(!i)return;const s=e.type;if(s==="geojson")t.setData(e.data);else if(s==="image")t.updateImage({url:e.url,coordinates:e.coordinates});else if((s==="canvas"||s==="video")&&i===1&&r==="coordinates")t.setCoordinates(e.coordinates);else if(s==="vector"&&"setUrl"in t)switch(r){case"url":t.setUrl(e.url);break;case"tiles":t.setTiles(e.tiles);break}else console.warn(`Unable to update <Source> prop: ${r}`)}function EW(t){const e=W.exports.useContext(Js).map.getMap(),n=W.exports.useRef(t),[,r]=W.exports.useState(0),i=W.exports.useMemo(()=>t.id||`jsx-source-${wF++}`,[]);W.exports.useEffect(()=>{if(e){const o=()=>r(a=>a+1);return e.on("styledata",o),o(),()=>{var a;if(e.off("styledata",o),e.style&&e.style._loaded&&e.getSource(i)){const l=(a=e.getStyle())===null||a===void 0?void 0:a.layers;if(l)for(const u of l)u.source===i&&e.removeLayer(u.id);e.removeSource(i)}}}},[e]);let s=e&&e.style&&e.getSource(i);return s?SF(s,t,n.current):s=EF(e,i,t),n.current=t,s&&W.exports.Children.map(t.children,o=>o&&W.exports.cloneElement(o,{source:i}))||null}function TF(t,e,n,r){if(zf(n.id===r.id,"layer id changed"),zf(n.type===r.type,"layer type changed"),n.type==="custom"||r.type==="custom")return;const{layout:i={},paint:s={},filter:o,minzoom:a,maxzoom:l,beforeId:u}=n;if(u!==r.beforeId&&t.moveLayer(e,u),i!==r.layout){const c=r.layout||{};for(const f in i)Qn(i[f],c[f])||t.setLayoutProperty(e,f,i[f]);for(const f in c)i.hasOwnProperty(f)||t.setLayoutProperty(e,f,void 0)}if(s!==r.paint){const c=r.paint||{};for(const f in s)Qn(s[f],c[f])||t.setPaintProperty(e,f,s[f]);for(const f in c)s.hasOwnProperty(f)||t.setPaintProperty(e,f,void 0)}Qn(o,r.filter)||t.setFilter(e,o),(a!==r.minzoom||l!==r.maxzoom)&&t.setLayerZoomRange(e,a,l)}function AF(t,e,n){if(t.style&&t.style._loaded&&(!("source"in n)||t.getSource(n.source))){const r={...n,id:e};delete r.beforeId,t.addLayer(r,n.beforeId)}}let xF=0;function SW(t){const e=W.exports.useContext(Js).map.getMap(),n=W.exports.useRef(t),[,r]=W.exports.useState(0),i=W.exports.useMemo(()=>t.id||`jsx-layer-${xF++}`,[]);if(W.exports.useEffect(()=>{if(e){const o=()=>r(a=>a+1);return e.on("styledata",o),o(),()=>{e.off("styledata",o),e.style&&e.style._loaded&&e.getLayer(i)&&e.removeLayer(i)}}},[e]),e&&e.style&&e.getLayer(i))try{TF(e,i,t,n.current)}catch(o){console.warn(o)}else AF(e,i,t);return n.current=t,null}function RF(t,e,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function CF(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!x1(t[0])||!x1(t[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:t};return RF(r,e,n)}function x1(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function S2(t,e,n){if(t!==null)for(var r,i,s,o,a,l,u,c=0,f=0,d,g=t.type,y=g==="FeatureCollection",m=g==="Feature",x=y?t.features.length:1,S=0;S<x;S++){u=y?t.features[S].geometry:m?t.geometry:t,d=u?u.type==="GeometryCollection":!1,a=d?u.geometries.length:1;for(var v=0;v<a;v++){var w=0,R=0;if(o=d?u.geometries[v]:u,o!==null){l=o.coordinates;var L=o.type;switch(c=n&&(L==="Polygon"||L==="MultiPolygon")?1:0,L){case null:break;case"Point":if(e(l,f,S,w,R)===!1)return!1;f++,w++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],f,S,w,R)===!1)return!1;f++,L==="MultiPoint"&&w++}L==="LineString"&&w++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-c;i++){if(e(l[r][i],f,S,w,R)===!1)return!1;f++}L==="MultiLineString"&&w++,L==="Polygon"&&R++}L==="Polygon"&&w++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(R=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-c;s++){if(e(l[r][i][s],f,S,w,R)===!1)return!1;f++}R++}w++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(S2(o.geometries[r],e,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}var T2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},R1=qe.createContext&&qe.createContext(T2),Ki=globalThis&&globalThis.__assign||function(){return Ki=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ki.apply(this,arguments)},PF=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function A2(t){return t&&t.map(function(e,n){return qe.createElement(e.tag,Ki({key:n},e.attr),A2(e.child))})}function as(t){return function(e){return Oe(MF,{...Ki({attr:Ki({},t.attr)},e),children:A2(t.child)})}}function MF(t){var e=function(n){var r=t.attr,i=t.size,s=t.title,o=PF(t,["attr","size","title"]),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),la("svg",{...Ki({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Ki(Ki({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),children:[s&&Oe("title",{children:s}),t.children]})};return R1!==void 0?Oe(R1.Consumer,{children:function(n){return e(n)}}):e(T2)}function TW(t){return as({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"}}]})(t)}function AW(t){return as({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"}}]})(t)}var x2={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(t,e){(function(n,r){t.exports=r()})(UP,function(){for(var n=function(h,p,_){return p===void 0&&(p=0),_===void 0&&(_=1),h<p?p:h>_?_:h},r=n,i=function(h){h._clipped=!1,h._unclipped=h.slice(0);for(var p=0;p<=3;p++)p<3?((h[p]<0||h[p]>255)&&(h._clipped=!0),h[p]=r(h[p],0,255)):p===3&&(h[p]=r(h[p],0,1));return h},s={},o=0,a=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];o<a.length;o+=1){var l=a[o];s["[object "+l+"]"]=l.toLowerCase()}var u=function(h){return s[Object.prototype.toString.call(h)]||"object"},c=u,f=function(h,p){return p===void 0&&(p=null),h.length>=3?Array.prototype.slice.call(h):c(h[0])=="object"&&p?p.split("").filter(function(_){return h[0][_]!==void 0}).map(function(_){return h[0][_]}):h[0]},d=u,g=function(h){if(h.length<2)return null;var p=h.length-1;return d(h[p])=="string"?h[p].toLowerCase():null},y=Math.PI,m={clip_rgb:i,limit:n,type:u,unpack:f,last:g,PI:y,TWOPI:y*2,PITHIRD:y/3,DEG2RAD:y/180,RAD2DEG:180/y},x={format:{},autodetect:[]},S=m.last,v=m.clip_rgb,w=m.type,R=x,L=function(){for(var p=[],_=arguments.length;_--;)p[_]=arguments[_];var A=this;if(w(p[0])==="object"&&p[0].constructor&&p[0].constructor===this.constructor)return p[0];var k=S(p),O=!1;if(!k){O=!0,R.sorted||(R.autodetect=R.autodetect.sort(function(q,fe){return fe.p-q.p}),R.sorted=!0);for(var P=0,F=R.autodetect;P<F.length;P+=1){var V=F[P];if(k=V.test.apply(V,p),k)break}}if(R.format[k]){var X=R.format[k].apply(null,O?p:p.slice(0,-1));A._rgb=v(X)}else throw new Error("unknown format: "+p);A._rgb.length===3&&A._rgb.push(1)};L.prototype.toString=function(){return w(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var C=L,U=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];return new(Function.prototype.bind.apply(U.Color,[null].concat(h)))};U.Color=C,U.version="2.4.2";var N=U,H=m.unpack,G=Math.max,ie=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];var _=H(h,"rgb"),A=_[0],k=_[1],O=_[2];A=A/255,k=k/255,O=O/255;var P=1-G(A,G(k,O)),F=P<1?1/(1-P):0,V=(1-A-P)*F,X=(1-k-P)*F,q=(1-O-P)*F;return[V,X,q,P]},Ce=ie,Ee=m.unpack,ee=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];h=Ee(h,"cmyk");var _=h[0],A=h[1],k=h[2],O=h[3],P=h.length>4?h[4]:1;return O===1?[0,0,0,P]:[_>=1?0:255*(1-_)*(1-O),A>=1?0:255*(1-A)*(1-O),k>=1?0:255*(1-k)*(1-O),P]},_e=ee,Be=N,j=C,$=x,ae=m.unpack,re=m.type,oe=Ce;j.prototype.cmyk=function(){return oe(this._rgb)},Be.cmyk=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];return new(Function.prototype.bind.apply(j,[null].concat(h,["cmyk"])))},$.format.cmyk=_e,$.autodetect.push({p:2,test:function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];if(h=ae(h,"cmyk"),re(h)==="array"&&h.length===4)return"cmyk"}});var I=m.unpack,K=m.last,Q=function(h){return Math.round(h*100)/100},be=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];var _=I(h,"hsla"),A=K(h)||"lsa";return _[0]=Q(_[0]||0),_[1]=Q(_[1]*100)+"%",_[2]=Q(_[2]*100)+"%",A==="hsla"||_.length>3&&_[3]<1?(_[3]=_.length>3?_[3]:1,A="hsla"):_.length=3,A+"("+_.join(",")+")"},ue=be,de=m.unpack,Re=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];h=de(h,"rgba");var _=h[0],A=h[1],k=h[2];_/=255,A/=255,k/=255;var O=Math.min(_,A,k),P=Math.max(_,A,k),F=(P+O)/2,V,X;return P===O?(V=0,X=Number.NaN):V=F<.5?(P-O)/(P+O):(P-O)/(2-P-O),_==P?X=(A-k)/(P-O):A==P?X=2+(k-_)/(P-O):k==P&&(X=4+(_-A)/(P-O)),X*=60,X<0&&(X+=360),h.length>3&&h[3]!==void 0?[X,V,F,h[3]]:[X,V,F]},ce=Re,ke=m.unpack,at=m.last,je=ue,Ze=ce,xt=Math.round,cn=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];var _=ke(h,"rgba"),A=at(h)||"rgb";return A.substr(0,3)=="hsl"?je(Ze(_),A):(_[0]=xt(_[0]),_[1]=xt(_[1]),_[2]=xt(_[2]),(A==="rgba"||_.length>3&&_[3]<1)&&(_[3]=_.length>3?_[3]:1,A="rgba"),A+"("+_.slice(0,A==="rgb"?3:4).join(",")+")")},ft=cn,_t=m.unpack,Hr=Math.round,ro=function(){for(var h,p=[],_=arguments.length;_--;)p[_]=arguments[_];p=_t(p,"hsl");var A=p[0],k=p[1],O=p[2],P,F,V;if(k===0)P=F=V=O*255;else{var X=[0,0,0],q=[0,0,0],fe=O<.5?O*(1+k):O+k-O*k,J=2*O-fe,ye=A/360;X[0]=ye+1/3,X[1]=ye,X[2]=ye-1/3;for(var me=0;me<3;me++)X[me]<0&&(X[me]+=1),X[me]>1&&(X[me]-=1),6*X[me]<1?q[me]=J+(fe-J)*6*X[me]:2*X[me]<1?q[me]=fe:3*X[me]<2?q[me]=J+(fe-J)*(2/3-X[me])*6:q[me]=J;h=[Hr(q[0]*255),Hr(q[1]*255),Hr(q[2]*255)],P=h[0],F=h[1],V=h[2]}return p.length>3?[P,F,V,p[3]]:[P,F,V,1]},sr=ro,Ut=sr,ls=x,io=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,mi=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,vi=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,so=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,us=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,cs=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,fs=Math.round,hs=function(h){h=h.toLowerCase().trim();var p;if(ls.format.named)try{return ls.format.named(h)}catch{}if(p=h.match(io)){for(var _=p.slice(1,4),A=0;A<3;A++)_[A]=+_[A];return _[3]=1,_}if(p=h.match(mi)){for(var k=p.slice(1,5),O=0;O<4;O++)k[O]=+k[O];return k}if(p=h.match(vi)){for(var P=p.slice(1,4),F=0;F<3;F++)P[F]=fs(P[F]*2.55);return P[3]=1,P}if(p=h.match(so)){for(var V=p.slice(1,5),X=0;X<3;X++)V[X]=fs(V[X]*2.55);return V[3]=+V[3],V}if(p=h.match(us)){var q=p.slice(1,4);q[1]*=.01,q[2]*=.01;var fe=Ut(q);return fe[3]=1,fe}if(p=h.match(cs)){var J=p.slice(1,4);J[1]*=.01,J[2]*=.01;var ye=Ut(J);return ye[3]=+p[4],ye}};hs.test=function(h){return io.test(h)||mi.test(h)||vi.test(h)||so.test(h)||us.test(h)||cs.test(h)};var yi=hs,_i=N,oo=C,ao=x,B=m.type,D=ft,Z=yi;oo.prototype.css=function(h){return D(this._rgb,h)},_i.css=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];return new(Function.prototype.bind.apply(oo,[null].concat(h,["css"])))},ao.format.css=Z,ao.autodetect.push({p:5,test:function(h){for(var p=[],_=arguments.length-1;_-- >0;)p[_]=arguments[_+1];if(!p.length&&B(h)==="string"&&Z.test(h))return"css"}});var se=C,le=N,pe=x,Ae=m.unpack;pe.format.gl=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];var _=Ae(h,"rgba");return _[0]*=255,_[1]*=255,_[2]*=255,_},le.gl=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];return new(Function.prototype.bind.apply(se,[null].concat(h,["gl"])))},se.prototype.gl=function(){var h=this._rgb;return[h[0]/255,h[1]/255,h[2]/255,h[3]]};var Te=m.unpack,Se=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];var _=Te(h,"rgb"),A=_[0],k=_[1],O=_[2],P=Math.min(A,k,O),F=Math.max(A,k,O),V=F-P,X=V*100/255,q=P/(255-V)*100,fe;return V===0?fe=Number.NaN:(A===F&&(fe=(k-O)/V),k===F&&(fe=2+(O-A)/V),O===F&&(fe=4+(A-k)/V),fe*=60,fe<0&&(fe+=360)),[fe,X,q]},Me=Se,rt=m.unpack,Vt=Math.floor,bt=function(){for(var h,p,_,A,k,O,P=[],F=arguments.length;F--;)P[F]=arguments[F];P=rt(P,"hcg");var V=P[0],X=P[1],q=P[2],fe,J,ye;q=q*255;var me=X*255;if(X===0)fe=J=ye=q;else{V===360&&(V=0),V>360&&(V-=360),V<0&&(V+=360),V/=60;var De=Vt(V),ze=V-De,We=q*(1-X),Ke=We+me*(1-ze),Wt=We+me*ze,zt=We+me;switch(De){case 0:h=[zt,Wt,We],fe=h[0],J=h[1],ye=h[2];break;case 1:p=[Ke,zt,We],fe=p[0],J=p[1],ye=p[2];break;case 2:_=[We,zt,Wt],fe=_[0],J=_[1],ye=_[2];break;case 3:A=[We,Ke,zt],fe=A[0],J=A[1],ye=A[2];break;case 4:k=[Wt,We,zt],fe=k[0],J=k[1],ye=k[2];break;case 5:O=[zt,We,Ke],fe=O[0],J=O[1],ye=O[2];break}}return[fe,J,ye,P.length>3?P[3]:1]},Jt=bt,fn=m.unpack,Cr=m.type,or=N,Pr=C,Mr=x,Hu=Me;Pr.prototype.hcg=function(){return Hu(this._rgb)},or.hcg=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];return new(Function.prototype.bind.apply(Pr,[null].concat(h,["hcg"])))},Mr.format.hcg=Jt,Mr.autodetect.push({p:1,test:function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];if(h=fn(h,"hcg"),Cr(h)==="array"&&h.length===3)return"hcg"}});var Ha=m.unpack,ud=m.last,ds=Math.round,cd=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];var _=Ha(h,"rgba"),A=_[0],k=_[1],O=_[2],P=_[3],F=ud(h)||"auto";P===void 0&&(P=1),F==="auto"&&(F=P<1?"rgba":"rgb"),A=ds(A),k=ds(k),O=ds(O);var V=A<<16|k<<8|O,X="000000"+V.toString(16);X=X.substr(X.length-6);var q="0"+ds(P*255).toString(16);switch(q=q.substr(q.length-2),F.toLowerCase()){case"rgba":return"#"+X+q;case"argb":return"#"+q+X;default:return"#"+X}},Wa=cd,Wu=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Xu=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,qu=function(h){if(h.match(Wu)){(h.length===4||h.length===7)&&(h=h.substr(1)),h.length===3&&(h=h.split(""),h=h[0]+h[0]+h[1]+h[1]+h[2]+h[2]);var p=parseInt(h,16),_=p>>16,A=p>>8&255,k=p&255;return[_,A,k,1]}if(h.match(Xu)){(h.length===5||h.length===9)&&(h=h.substr(1)),h.length===4&&(h=h.split(""),h=h[0]+h[0]+h[1]+h[1]+h[2]+h[2]+h[3]+h[3]);var O=parseInt(h,16),P=O>>24&255,F=O>>16&255,V=O>>8&255,X=Math.round((O&255)/255*100)/100;return[P,F,V,X]}throw new Error("unknown hex color: "+h)},lo=qu,Wr=N,bi=C,ps=m.type,gs=x,Xa=Wa;bi.prototype.hex=function(h){return Xa(this._rgb,h)},Wr.hex=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];return new(Function.prototype.bind.apply(bi,[null].concat(h,["hex"])))},gs.format.hex=lo,gs.autodetect.push({p:4,test:function(h){for(var p=[],_=arguments.length-1;_-- >0;)p[_]=arguments[_+1];if(!p.length&&ps(h)==="string"&&[3,4,5,6,7,8,9].indexOf(h.length)>=0)return"hex"}});var fd=m.unpack,Yu=m.TWOPI,uo=Math.min,_n=Math.sqrt,wi=Math.acos,Lr=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];var _=fd(h,"rgb"),A=_[0],k=_[1],O=_[2];A/=255,k/=255,O/=255;var P,F=uo(A,k,O),V=(A+k+O)/3,X=V>0?1-F/V:0;return X===0?P=NaN:(P=(A-k+(A-O))/2,P/=_n((A-k)*(A-k)+(A-O)*(k-O)),P=wi(P),O>k&&(P=Yu-P),P/=Yu),[P*360,X,V]},ar=Lr,ms=m.unpack,bn=m.limit,en=m.TWOPI,co=m.PITHIRD,Xr=Math.cos,fo=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];h=ms(h,"hsi");var _=h[0],A=h[1],k=h[2],O,P,F;return isNaN(_)&&(_=0),isNaN(A)&&(A=0),_>360&&(_-=360),_<0&&(_+=360),_/=360,_<1/3?(F=(1-A)/3,O=(1+A*Xr(en*_)/Xr(co-en*_))/3,P=1-(F+O)):_<2/3?(_-=1/3,O=(1-A)/3,P=(1+A*Xr(en*_)/Xr(co-en*_))/3,F=1-(O+P)):(_-=2/3,P=(1-A)/3,F=(1+A*Xr(en*_)/Xr(co-en*_))/3,O=1-(P+F)),O=bn(k*O*3),P=bn(k*P*3),F=bn(k*F*3),[O*255,P*255,F*255,h.length>3?h[3]:1]},Mn=fo,ho=m.unpack,qa=m.type,Ya=N,po=C,go=x,mo=ar;po.prototype.hsi=function(){return mo(this._rgb)},Ya.hsi=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];return new(Function.prototype.bind.apply(po,[null].concat(h,["hsi"])))},go.format.hsi=Mn,go.autodetect.push({p:2,test:function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];if(h=ho(h,"hsi"),qa(h)==="array"&&h.length===3)return"hsi"}});var lr=m.unpack,hd=m.type,Zu=N,vo=C,Za=x,dd=ce;vo.prototype.hsl=function(){return dd(this._rgb)},Zu.hsl=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];return new(Function.prototype.bind.apply(vo,[null].concat(h,["hsl"])))},Za.format.hsl=sr,Za.autodetect.push({p:2,test:function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];if(h=lr(h,"hsl"),hd(h)==="array"&&h.length===3)return"hsl"}});var pd=m.unpack,E=Math.min,T=Math.max,M=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];h=pd(h,"rgb");var _=h[0],A=h[1],k=h[2],O=E(_,A,k),P=T(_,A,k),F=P-O,V,X,q;return q=P/255,P===0?(V=Number.NaN,X=0):(X=F/P,_===P&&(V=(A-k)/F),A===P&&(V=2+(k-_)/F),k===P&&(V=4+(_-A)/F),V*=60,V<0&&(V+=360)),[V,X,q]},z=M,Y=m.unpack,he=Math.floor,Ne=function(){for(var h,p,_,A,k,O,P=[],F=arguments.length;F--;)P[F]=arguments[F];P=Y(P,"hsv");var V=P[0],X=P[1],q=P[2],fe,J,ye;if(q*=255,X===0)fe=J=ye=q;else{V===360&&(V=0),V>360&&(V-=360),V<0&&(V+=360),V/=60;var me=he(V),De=V-me,ze=q*(1-X),We=q*(1-X*De),Ke=q*(1-X*(1-De));switch(me){case 0:h=[q,Ke,ze],fe=h[0],J=h[1],ye=h[2];break;case 1:p=[We,q,ze],fe=p[0],J=p[1],ye=p[2];break;case 2:_=[ze,q,Ke],fe=_[0],J=_[1],ye=_[2];break;case 3:A=[ze,We,q],fe=A[0],J=A[1],ye=A[2];break;case 4:k=[Ke,ze,q],fe=k[0],J=k[1],ye=k[2];break;case 5:O=[q,ze,We],fe=O[0],J=O[1],ye=O[2];break}}return[fe,J,ye,P.length>3?P[3]:1]},Pt=Ne,It=m.unpack,Ht=m.type,Hn=N,V0=C,B0=x,Vx=z;V0.prototype.hsv=function(){return Vx(this._rgb)},Hn.hsv=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];return new(Function.prototype.bind.apply(V0,[null].concat(h,["hsv"])))},B0.format.hsv=Pt,B0.autodetect.push({p:2,test:function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];if(h=It(h,"hsv"),Ht(h)==="array"&&h.length===3)return"hsv"}});var Ku={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},yo=Ku,Bx=m.unpack,z0=Math.pow,zx=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];var _=Bx(h,"rgb"),A=_[0],k=_[1],O=_[2],P=jx(A,k,O),F=P[0],V=P[1],X=P[2],q=116*V-16;return[q<0?0:q,500*(F-V),200*(V-X)]},gd=function(h){return(h/=255)<=.04045?h/12.92:z0((h+.055)/1.055,2.4)},md=function(h){return h>yo.t3?z0(h,1/3):h/yo.t2+yo.t0},jx=function(h,p,_){h=gd(h),p=gd(p),_=gd(_);var A=md((.4124564*h+.3575761*p+.1804375*_)/yo.Xn),k=md((.2126729*h+.7151522*p+.072175*_)/yo.Yn),O=md((.0193339*h+.119192*p+.9503041*_)/yo.Zn);return[A,k,O]},j0=zx,_o=Ku,$x=m.unpack,Gx=Math.pow,Hx=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];h=$x(h,"lab");var _=h[0],A=h[1],k=h[2],O,P,F,V,X,q;return P=(_+16)/116,O=isNaN(A)?P:P+A/500,F=isNaN(k)?P:P-k/200,P=_o.Yn*yd(P),O=_o.Xn*yd(O),F=_o.Zn*yd(F),V=vd(3.2404542*O-1.5371385*P-.4985314*F),X=vd(-.969266*O+1.8760108*P+.041556*F),q=vd(.0556434*O-.2040259*P+1.0572252*F),[V,X,q,h.length>3?h[3]:1]},vd=function(h){return 255*(h<=.00304?12.92*h:1.055*Gx(h,1/2.4)-.055)},yd=function(h){return h>_o.t1?h*h*h:_o.t2*(h-_o.t0)},$0=Hx,Wx=m.unpack,Xx=m.type,qx=N,G0=C,H0=x,Yx=j0;G0.prototype.lab=function(){return Yx(this._rgb)},qx.lab=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];return new(Function.prototype.bind.apply(G0,[null].concat(h,["lab"])))},H0.format.lab=$0,H0.autodetect.push({p:2,test:function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];if(h=Wx(h,"lab"),Xx(h)==="array"&&h.length===3)return"lab"}});var Zx=m.unpack,Kx=m.RAD2DEG,Qx=Math.sqrt,Jx=Math.atan2,eR=Math.round,tR=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];var _=Zx(h,"lab"),A=_[0],k=_[1],O=_[2],P=Qx(k*k+O*O),F=(Jx(O,k)*Kx+360)%360;return eR(P*1e4)===0&&(F=Number.NaN),[A,P,F]},W0=tR,nR=m.unpack,rR=j0,iR=W0,sR=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];var _=nR(h,"rgb"),A=_[0],k=_[1],O=_[2],P=rR(A,k,O),F=P[0],V=P[1],X=P[2];return iR(F,V,X)},oR=sR,aR=m.unpack,lR=m.DEG2RAD,uR=Math.sin,cR=Math.cos,fR=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];var _=aR(h,"lch"),A=_[0],k=_[1],O=_[2];return isNaN(O)&&(O=0),O=O*lR,[A,cR(O)*k,uR(O)*k]},X0=fR,hR=m.unpack,dR=X0,pR=$0,gR=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];h=hR(h,"lch");var _=h[0],A=h[1],k=h[2],O=dR(_,A,k),P=O[0],F=O[1],V=O[2],X=pR(P,F,V),q=X[0],fe=X[1],J=X[2];return[q,fe,J,h.length>3?h[3]:1]},q0=gR,mR=m.unpack,vR=q0,yR=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];var _=mR(h,"hcl").reverse();return vR.apply(void 0,_)},_R=yR,bR=m.unpack,wR=m.type,Y0=N,Qu=C,_d=x,Z0=oR;Qu.prototype.lch=function(){return Z0(this._rgb)},Qu.prototype.hcl=function(){return Z0(this._rgb).reverse()},Y0.lch=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];return new(Function.prototype.bind.apply(Qu,[null].concat(h,["lch"])))},Y0.hcl=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];return new(Function.prototype.bind.apply(Qu,[null].concat(h,["hcl"])))},_d.format.lch=q0,_d.format.hcl=_R,["lch","hcl"].forEach(function(h){return _d.autodetect.push({p:2,test:function(){for(var p=[],_=arguments.length;_--;)p[_]=arguments[_];if(p=bR(p,h),wR(p)==="array"&&p.length===3)return h}})});var ER={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},K0=ER,SR=C,Q0=x,TR=m.type,Ka=K0,AR=lo,xR=Wa;SR.prototype.name=function(){for(var h=xR(this._rgb,"rgb"),p=0,_=Object.keys(Ka);p<_.length;p+=1){var A=_[p];if(Ka[A]===h)return A.toLowerCase()}return h},Q0.format.named=function(h){if(h=h.toLowerCase(),Ka[h])return AR(Ka[h]);throw new Error("unknown color name: "+h)},Q0.autodetect.push({p:5,test:function(h){for(var p=[],_=arguments.length-1;_-- >0;)p[_]=arguments[_+1];if(!p.length&&TR(h)==="string"&&Ka[h.toLowerCase()])return"named"}});var RR=m.unpack,CR=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];var _=RR(h,"rgb"),A=_[0],k=_[1],O=_[2];return(A<<16)+(k<<8)+O},PR=CR,MR=m.type,LR=function(h){if(MR(h)=="number"&&h>=0&&h<=16777215){var p=h>>16,_=h>>8&255,A=h&255;return[p,_,A,1]}throw new Error("unknown num color: "+h)},kR=LR,OR=N,J0=C,ey=x,IR=m.type,NR=PR;J0.prototype.num=function(){return NR(this._rgb)},OR.num=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];return new(Function.prototype.bind.apply(J0,[null].concat(h,["num"])))},ey.format.num=kR,ey.autodetect.push({p:5,test:function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];if(h.length===1&&IR(h[0])==="number"&&h[0]>=0&&h[0]<=16777215)return"num"}});var DR=N,bd=C,ty=x,ny=m.unpack,ry=m.type,iy=Math.round;bd.prototype.rgb=function(h){return h===void 0&&(h=!0),h===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(iy)},bd.prototype.rgba=function(h){return h===void 0&&(h=!0),this._rgb.slice(0,4).map(function(p,_){return _<3?h===!1?p:iy(p):p})},DR.rgb=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];return new(Function.prototype.bind.apply(bd,[null].concat(h,["rgb"])))},ty.format.rgb=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];var _=ny(h,"rgba");return _[3]===void 0&&(_[3]=1),_},ty.autodetect.push({p:3,test:function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];if(h=ny(h,"rgba"),ry(h)==="array"&&(h.length===3||h.length===4&&ry(h[3])=="number"&&h[3]>=0&&h[3]<=1))return"rgb"}});var Ju=Math.log,FR=function(h){var p=h/100,_,A,k;return p<66?(_=255,A=p<6?0:-155.25485562709179-.44596950469579133*(A=p-2)+104.49216199393888*Ju(A),k=p<20?0:-254.76935184120902+.8274096064007395*(k=p-10)+115.67994401066147*Ju(k)):(_=351.97690566805693+.114206453784165*(_=p-55)-40.25366309332127*Ju(_),A=325.4494125711974+.07943456536662342*(A=p-50)-28.0852963507957*Ju(A),k=255),[_,A,k,1]},sy=FR,UR=sy,VR=m.unpack,BR=Math.round,zR=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];for(var _=VR(h,"rgb"),A=_[0],k=_[2],O=1e3,P=4e4,F=.4,V;P-O>F;){V=(P+O)*.5;var X=UR(V);X[2]/X[0]>=k/A?P=V:O=V}return BR(V)},jR=zR,wd=N,ec=C,Ed=x,$R=jR;ec.prototype.temp=ec.prototype.kelvin=ec.prototype.temperature=function(){return $R(this._rgb)},wd.temp=wd.kelvin=wd.temperature=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];return new(Function.prototype.bind.apply(ec,[null].concat(h,["temp"])))},Ed.format.temp=Ed.format.kelvin=Ed.format.temperature=sy;var GR=m.unpack,Sd=Math.cbrt,HR=Math.pow,WR=Math.sign,XR=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];var _=GR(h,"rgb"),A=_[0],k=_[1],O=_[2],P=[Td(A/255),Td(k/255),Td(O/255)],F=P[0],V=P[1],X=P[2],q=Sd(.4122214708*F+.5363325363*V+.0514459929*X),fe=Sd(.2119034982*F+.6806995451*V+.1073969566*X),J=Sd(.0883024619*F+.2817188376*V+.6299787005*X);return[.2104542553*q+.793617785*fe-.0040720468*J,1.9779984951*q-2.428592205*fe+.4505937099*J,.0259040371*q+.7827717662*fe-.808675766*J]},oy=XR;function Td(h){var p=Math.abs(h);return p<.04045?h/12.92:(WR(h)||1)*HR((p+.055)/1.055,2.4)}var qR=m.unpack,tc=Math.pow,YR=Math.sign,ZR=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];h=qR(h,"lab");var _=h[0],A=h[1],k=h[2],O=tc(_+.3963377774*A+.2158037573*k,3),P=tc(_-.1055613458*A-.0638541728*k,3),F=tc(_-.0894841775*A-1.291485548*k,3);return[255*Ad(4.0767416621*O-3.3077115913*P+.2309699292*F),255*Ad(-1.2684380046*O+2.6097574011*P-.3413193965*F),255*Ad(-.0041960863*O-.7034186147*P+1.707614701*F),h.length>3?h[3]:1]},ay=ZR;function Ad(h){var p=Math.abs(h);return p>.0031308?(YR(h)||1)*(1.055*tc(p,1/2.4)-.055):h*12.92}var KR=m.unpack,QR=m.type,JR=N,ly=C,uy=x,eC=oy;ly.prototype.oklab=function(){return eC(this._rgb)},JR.oklab=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];return new(Function.prototype.bind.apply(ly,[null].concat(h,["oklab"])))},uy.format.oklab=ay,uy.autodetect.push({p:3,test:function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];if(h=KR(h,"oklab"),QR(h)==="array"&&h.length===3)return"oklab"}});var tC=m.unpack,nC=oy,rC=W0,iC=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];var _=tC(h,"rgb"),A=_[0],k=_[1],O=_[2],P=nC(A,k,O),F=P[0],V=P[1],X=P[2];return rC(F,V,X)},sC=iC,oC=m.unpack,aC=X0,lC=ay,uC=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];h=oC(h,"lch");var _=h[0],A=h[1],k=h[2],O=aC(_,A,k),P=O[0],F=O[1],V=O[2],X=lC(P,F,V),q=X[0],fe=X[1],J=X[2];return[q,fe,J,h.length>3?h[3]:1]},cC=uC,fC=m.unpack,hC=m.type,dC=N,cy=C,fy=x,pC=sC;cy.prototype.oklch=function(){return pC(this._rgb)},dC.oklch=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];return new(Function.prototype.bind.apply(cy,[null].concat(h,["oklch"])))},fy.format.oklch=cC,fy.autodetect.push({p:3,test:function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];if(h=fC(h,"oklch"),hC(h)==="array"&&h.length===3)return"oklch"}});var hy=C,gC=m.type;hy.prototype.alpha=function(h,p){return p===void 0&&(p=!1),h!==void 0&&gC(h)==="number"?p?(this._rgb[3]=h,this):new hy([this._rgb[0],this._rgb[1],this._rgb[2],h],"rgb"):this._rgb[3]};var mC=C;mC.prototype.clipped=function(){return this._rgb._clipped||!1};var vs=C,vC=Ku;vs.prototype.darken=function(h){h===void 0&&(h=1);var p=this,_=p.lab();return _[0]-=vC.Kn*h,new vs(_,"lab").alpha(p.alpha(),!0)},vs.prototype.brighten=function(h){return h===void 0&&(h=1),this.darken(-h)},vs.prototype.darker=vs.prototype.darken,vs.prototype.brighter=vs.prototype.brighten;var yC=C;yC.prototype.get=function(h){var p=h.split("."),_=p[0],A=p[1],k=this[_]();if(A){var O=_.indexOf(A)-(_.substr(0,2)==="ok"?2:0);if(O>-1)return k[O];throw new Error("unknown channel "+A+" in mode "+_)}else return k};var bo=C,_C=m.type,bC=Math.pow,wC=1e-7,EC=20;bo.prototype.luminance=function(h){if(h!==void 0&&_C(h)==="number"){if(h===0)return new bo([0,0,0,this._rgb[3]],"rgb");if(h===1)return new bo([255,255,255,this._rgb[3]],"rgb");var p=this.luminance(),_="rgb",A=EC,k=function(P,F){var V=P.interpolate(F,.5,_),X=V.luminance();return Math.abs(h-X)<wC||!A--?V:X>h?k(P,V):k(V,F)},O=(p>h?k(new bo([0,0,0]),this):k(this,new bo([255,255,255]))).rgb();return new bo(O.concat([this._rgb[3]]))}return SC.apply(void 0,this._rgb.slice(0,3))};var SC=function(h,p,_){return h=xd(h),p=xd(p),_=xd(_),.2126*h+.7152*p+.0722*_},xd=function(h){return h/=255,h<=.03928?h/12.92:bC((h+.055)/1.055,2.4)},Ln={},dy=C,py=m.type,nc=Ln,gy=function(h,p,_){_===void 0&&(_=.5);for(var A=[],k=arguments.length-3;k-- >0;)A[k]=arguments[k+3];var O=A[0]||"lrgb";if(!nc[O]&&!A.length&&(O=Object.keys(nc)[0]),!nc[O])throw new Error("interpolation mode "+O+" is not defined");return py(h)!=="object"&&(h=new dy(h)),py(p)!=="object"&&(p=new dy(p)),nc[O](h,p,_).alpha(h.alpha()+_*(p.alpha()-h.alpha()))},my=C,TC=gy;my.prototype.mix=my.prototype.interpolate=function(h,p){p===void 0&&(p=.5);for(var _=[],A=arguments.length-2;A-- >0;)_[A]=arguments[A+2];return TC.apply(void 0,[this,h,p].concat(_))};var vy=C;vy.prototype.premultiply=function(h){h===void 0&&(h=!1);var p=this._rgb,_=p[3];return h?(this._rgb=[p[0]*_,p[1]*_,p[2]*_,_],this):new vy([p[0]*_,p[1]*_,p[2]*_,_],"rgb")};var Rd=C,AC=Ku;Rd.prototype.saturate=function(h){h===void 0&&(h=1);var p=this,_=p.lch();return _[1]+=AC.Kn*h,_[1]<0&&(_[1]=0),new Rd(_,"lch").alpha(p.alpha(),!0)},Rd.prototype.desaturate=function(h){return h===void 0&&(h=1),this.saturate(-h)};var yy=C,_y=m.type;yy.prototype.set=function(h,p,_){_===void 0&&(_=!1);var A=h.split("."),k=A[0],O=A[1],P=this[k]();if(O){var F=k.indexOf(O)-(k.substr(0,2)==="ok"?2:0);if(F>-1){if(_y(p)=="string")switch(p.charAt(0)){case"+":P[F]+=+p;break;case"-":P[F]+=+p;break;case"*":P[F]*=+p.substr(1);break;case"/":P[F]/=+p.substr(1);break;default:P[F]=+p}else if(_y(p)==="number")P[F]=p;else throw new Error("unsupported value for Color.set");var V=new yy(P,k);return _?(this._rgb=V._rgb,this):V}throw new Error("unknown channel "+O+" in mode "+k)}else return P};var xC=C,RC=function(h,p,_){var A=h._rgb,k=p._rgb;return new xC(A[0]+_*(k[0]-A[0]),A[1]+_*(k[1]-A[1]),A[2]+_*(k[2]-A[2]),"rgb")};Ln.rgb=RC;var CC=C,Cd=Math.sqrt,wo=Math.pow,PC=function(h,p,_){var A=h._rgb,k=A[0],O=A[1],P=A[2],F=p._rgb,V=F[0],X=F[1],q=F[2];return new CC(Cd(wo(k,2)*(1-_)+wo(V,2)*_),Cd(wo(O,2)*(1-_)+wo(X,2)*_),Cd(wo(P,2)*(1-_)+wo(q,2)*_),"rgb")};Ln.lrgb=PC;var MC=C,LC=function(h,p,_){var A=h.lab(),k=p.lab();return new MC(A[0]+_*(k[0]-A[0]),A[1]+_*(k[1]-A[1]),A[2]+_*(k[2]-A[2]),"lab")};Ln.lab=LC;var by=C,Eo=function(h,p,_,A){var k,O,P,F;A==="hsl"?(P=h.hsl(),F=p.hsl()):A==="hsv"?(P=h.hsv(),F=p.hsv()):A==="hcg"?(P=h.hcg(),F=p.hcg()):A==="hsi"?(P=h.hsi(),F=p.hsi()):A==="lch"||A==="hcl"?(A="hcl",P=h.hcl(),F=p.hcl()):A==="oklch"&&(P=h.oklch().reverse(),F=p.oklch().reverse());var V,X,q,fe,J,ye;(A.substr(0,1)==="h"||A==="oklch")&&(k=P,V=k[0],q=k[1],J=k[2],O=F,X=O[0],fe=O[1],ye=O[2]);var me,De,ze,We;return!isNaN(V)&&!isNaN(X)?(X>V&&X-V>180?We=X-(V+360):X<V&&V-X>180?We=X+360-V:We=X-V,De=V+_*We):isNaN(V)?isNaN(X)?De=Number.NaN:(De=X,(J==1||J==0)&&A!="hsv"&&(me=fe)):(De=V,(ye==1||ye==0)&&A!="hsv"&&(me=q)),me===void 0&&(me=q+_*(fe-q)),ze=J+_*(ye-J),A==="oklch"?new by([ze,me,De],A):new by([De,me,ze],A)},kC=Eo,wy=function(h,p,_){return kC(h,p,_,"lch")};Ln.lch=wy,Ln.hcl=wy;var OC=C,IC=function(h,p,_){var A=h.num(),k=p.num();return new OC(A+_*(k-A),"num")};Ln.num=IC;var NC=Eo,DC=function(h,p,_){return NC(h,p,_,"hcg")};Ln.hcg=DC;var FC=Eo,UC=function(h,p,_){return FC(h,p,_,"hsi")};Ln.hsi=UC;var VC=Eo,BC=function(h,p,_){return VC(h,p,_,"hsl")};Ln.hsl=BC;var zC=Eo,jC=function(h,p,_){return zC(h,p,_,"hsv")};Ln.hsv=jC;var $C=C,GC=function(h,p,_){var A=h.oklab(),k=p.oklab();return new $C(A[0]+_*(k[0]-A[0]),A[1]+_*(k[1]-A[1]),A[2]+_*(k[2]-A[2]),"oklab")};Ln.oklab=GC;var HC=Eo,WC=function(h,p,_){return HC(h,p,_,"oklch")};Ln.oklch=WC;var Pd=C,XC=m.clip_rgb,Md=Math.pow,Ld=Math.sqrt,kd=Math.PI,Ey=Math.cos,Sy=Math.sin,qC=Math.atan2,YC=function(h,p,_){p===void 0&&(p="lrgb"),_===void 0&&(_=null);var A=h.length;_||(_=Array.from(new Array(A)).map(function(){return 1}));var k=A/_.reduce(function(De,ze){return De+ze});if(_.forEach(function(De,ze){_[ze]*=k}),h=h.map(function(De){return new Pd(De)}),p==="lrgb")return ZC(h,_);for(var O=h.shift(),P=O.get(p),F=[],V=0,X=0,q=0;q<P.length;q++)if(P[q]=(P[q]||0)*_[0],F.push(isNaN(P[q])?0:_[0]),p.charAt(q)==="h"&&!isNaN(P[q])){var fe=P[q]/180*kd;V+=Ey(fe)*_[0],X+=Sy(fe)*_[0]}var J=O.alpha()*_[0];h.forEach(function(De,ze){var We=De.get(p);J+=De.alpha()*_[ze+1];for(var Ke=0;Ke<P.length;Ke++)if(!isNaN(We[Ke]))if(F[Ke]+=_[ze+1],p.charAt(Ke)==="h"){var Wt=We[Ke]/180*kd;V+=Ey(Wt)*_[ze+1],X+=Sy(Wt)*_[ze+1]}else P[Ke]+=We[Ke]*_[ze+1]});for(var ye=0;ye<P.length;ye++)if(p.charAt(ye)==="h"){for(var me=qC(X/F[ye],V/F[ye])/kd*180;me<0;)me+=360;for(;me>=360;)me-=360;P[ye]=me}else P[ye]=P[ye]/F[ye];return J/=A,new Pd(P,p).alpha(J>.99999?1:J,!0)},ZC=function(h,p){for(var _=h.length,A=[0,0,0,0],k=0;k<h.length;k++){var O=h[k],P=p[k]/_,F=O._rgb;A[0]+=Md(F[0],2)*P,A[1]+=Md(F[1],2)*P,A[2]+=Md(F[2],2)*P,A[3]+=F[3]*P}return A[0]=Ld(A[0]),A[1]=Ld(A[1]),A[2]=Ld(A[2]),A[3]>.9999999&&(A[3]=1),new Pd(XC(A))},ur=N,So=m.type,KC=Math.pow,Od=function(h){var p="rgb",_=ur("#ccc"),A=0,k=[0,1],O=[],P=[0,0],F=!1,V=[],X=!1,q=0,fe=1,J=!1,ye={},me=!0,De=1,ze=function(te){if(te=te||["#fff","#000"],te&&So(te)==="string"&&ur.brewer&&ur.brewer[te.toLowerCase()]&&(te=ur.brewer[te.toLowerCase()]),So(te)==="array"){te.length===1&&(te=[te[0],te[0]]),te=te.slice(0);for(var xe=0;xe<te.length;xe++)te[xe]=ur(te[xe]);O.length=0;for(var Ve=0;Ve<te.length;Ve++)O.push(Ve/(te.length-1))}return wn(),V=te},We=function(te){if(F!=null){for(var xe=F.length-1,Ve=0;Ve<xe&&te>=F[Ve];)Ve++;return Ve-1}return 0},Ke=function(te){return te},Wt=function(te){return te},zt=function(te,xe){var Ve,Fe;if(xe==null&&(xe=!1),isNaN(te)||te===null)return _;if(xe)Fe=te;else if(F&&F.length>2){var Xt=We(te);Fe=Xt/(F.length-2)}else fe!==q?Fe=(te-q)/(fe-q):Fe=1;Fe=Wt(Fe),xe||(Fe=Ke(Fe)),De!==1&&(Fe=KC(Fe,De)),Fe=P[0]+Fe*(1-P[0]-P[1]),Fe=Math.min(1,Math.max(0,Fe));var lt=Math.floor(Fe*1e4);if(me&&ye[lt])Ve=ye[lt];else{if(So(V)==="array")for(var Xe=0;Xe<O.length;Xe++){var Qe=O[Xe];if(Fe<=Qe){Ve=V[Xe];break}if(Fe>=Qe&&Xe===O.length-1){Ve=V[Xe];break}if(Fe>Qe&&Fe<O[Xe+1]){Fe=(Fe-Qe)/(O[Xe+1]-Qe),Ve=ur.interpolate(V[Xe],V[Xe+1],Fe,p);break}}else So(V)==="function"&&(Ve=V(Fe));me&&(ye[lt]=Ve)}return Ve},wn=function(){return ye={}};ze(h);var He=function(te){var xe=ur(zt(te));return X&&xe[X]?xe[X]():xe};return He.classes=function(te){if(te!=null){if(So(te)==="array")F=te,k=[te[0],te[te.length-1]];else{var xe=ur.analyze(k);te===0?F=[xe.min,xe.max]:F=ur.limits(xe,"e",te)}return He}return F},He.domain=function(te){if(!arguments.length)return k;q=te[0],fe=te[te.length-1],O=[];var xe=V.length;if(te.length===xe&&q!==fe)for(var Ve=0,Fe=Array.from(te);Ve<Fe.length;Ve+=1){var Xt=Fe[Ve];O.push((Xt-q)/(fe-q))}else{for(var lt=0;lt<xe;lt++)O.push(lt/(xe-1));if(te.length>2){var Xe=te.map(function(Je,et){return et/(te.length-1)}),Qe=te.map(function(Je){return(Je-q)/(fe-q)});Qe.every(function(Je,et){return Xe[et]===Je})||(Wt=function(Je){if(Je<=0||Je>=1)return Je;for(var et=0;Je>=Qe[et+1];)et++;var fr=(Je-Qe[et])/(Qe[et+1]-Qe[et]),Ti=Xe[et]+fr*(Xe[et+1]-Xe[et]);return Ti})}}return k=[q,fe],He},He.mode=function(te){return arguments.length?(p=te,wn(),He):p},He.range=function(te,xe){return ze(te),He},He.out=function(te){return X=te,He},He.spread=function(te){return arguments.length?(A=te,He):A},He.correctLightness=function(te){return te==null&&(te=!0),J=te,wn(),J?Ke=function(xe){for(var Ve=zt(0,!0).lab()[0],Fe=zt(1,!0).lab()[0],Xt=Ve>Fe,lt=zt(xe,!0).lab()[0],Xe=Ve+(Fe-Ve)*xe,Qe=lt-Xe,Je=0,et=1,fr=20;Math.abs(Qe)>.01&&fr-- >0;)(function(){return Xt&&(Qe*=-1),Qe<0?(Je=xe,xe+=(et-xe)*.5):(et=xe,xe+=(Je-xe)*.5),lt=zt(xe,!0).lab()[0],Qe=lt-Xe})();return xe}:Ke=function(xe){return xe},He},He.padding=function(te){return te!=null?(So(te)==="number"&&(te=[te,te]),P=te,He):P},He.colors=function(te,xe){arguments.length<2&&(xe="hex");var Ve=[];if(arguments.length===0)Ve=V.slice(0);else if(te===1)Ve=[He(.5)];else if(te>1){var Fe=k[0],Xt=k[1]-Fe;Ve=QC(0,te,!1).map(function(et){return He(Fe+et/(te-1)*Xt)})}else{h=[];var lt=[];if(F&&F.length>2)for(var Xe=1,Qe=F.length,Je=1<=Qe;Je?Xe<Qe:Xe>Qe;Je?Xe++:Xe--)lt.push((F[Xe-1]+F[Xe])*.5);else lt=k;Ve=lt.map(function(et){return He(et)})}return ur[xe]&&(Ve=Ve.map(function(et){return et[xe]()})),Ve},He.cache=function(te){return te!=null?(me=te,He):me},He.gamma=function(te){return te!=null?(De=te,He):De},He.nodata=function(te){return te!=null?(_=ur(te),He):_},He};function QC(h,p,_){for(var A=[],k=h<p,O=_?k?p+1:p-1:p,P=h;k?P<O:P>O;k?P++:P--)A.push(P);return A}var Qa=C,JC=Od,eP=function(h){for(var p=[1,1],_=1;_<h;_++){for(var A=[1],k=1;k<=p.length;k++)A[k]=(p[k]||0)+p[k-1];p=A}return p},tP=function(h){var p,_,A,k,O,P,F;if(h=h.map(function(J){return new Qa(J)}),h.length===2)p=h.map(function(J){return J.lab()}),O=p[0],P=p[1],k=function(J){var ye=[0,1,2].map(function(me){return O[me]+J*(P[me]-O[me])});return new Qa(ye,"lab")};else if(h.length===3)_=h.map(function(J){return J.lab()}),O=_[0],P=_[1],F=_[2],k=function(J){var ye=[0,1,2].map(function(me){return(1-J)*(1-J)*O[me]+2*(1-J)*J*P[me]+J*J*F[me]});return new Qa(ye,"lab")};else if(h.length===4){var V;A=h.map(function(J){return J.lab()}),O=A[0],P=A[1],F=A[2],V=A[3],k=function(J){var ye=[0,1,2].map(function(me){return(1-J)*(1-J)*(1-J)*O[me]+3*(1-J)*(1-J)*J*P[me]+3*(1-J)*J*J*F[me]+J*J*J*V[me]});return new Qa(ye,"lab")}}else if(h.length>=5){var X,q,fe;X=h.map(function(J){return J.lab()}),fe=h.length-1,q=eP(fe),k=function(J){var ye=1-J,me=[0,1,2].map(function(De){return X.reduce(function(ze,We,Ke){return ze+q[Ke]*Math.pow(ye,fe-Ke)*Math.pow(J,Ke)*We[De]},0)});return new Qa(me,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return k},nP=function(h){var p=tP(h);return p.scale=function(){return JC(p)},p},Id=N,cr=function(h,p,_){if(!cr[_])throw new Error("unknown blend mode "+_);return cr[_](h,p)},Ei=function(h){return function(p,_){var A=Id(_).rgb(),k=Id(p).rgb();return Id.rgb(h(A,k))}},Si=function(h){return function(p,_){var A=[];return A[0]=h(p[0],_[0]),A[1]=h(p[1],_[1]),A[2]=h(p[2],_[2]),A}},rP=function(h){return h},iP=function(h,p){return h*p/255},sP=function(h,p){return h>p?p:h},oP=function(h,p){return h>p?h:p},aP=function(h,p){return 255*(1-(1-h/255)*(1-p/255))},lP=function(h,p){return p<128?2*h*p/255:255*(1-2*(1-h/255)*(1-p/255))},uP=function(h,p){return 255*(1-(1-p/255)/(h/255))},cP=function(h,p){return h===255?255:(h=255*(p/255)/(1-h/255),h>255?255:h)};cr.normal=Ei(Si(rP)),cr.multiply=Ei(Si(iP)),cr.screen=Ei(Si(aP)),cr.overlay=Ei(Si(lP)),cr.darken=Ei(Si(sP)),cr.lighten=Ei(Si(oP)),cr.dodge=Ei(Si(cP)),cr.burn=Ei(Si(uP));for(var fP=cr,Nd=m.type,hP=m.clip_rgb,dP=m.TWOPI,pP=Math.pow,gP=Math.sin,mP=Math.cos,Ty=N,vP=function(h,p,_,A,k){h===void 0&&(h=300),p===void 0&&(p=-1.5),_===void 0&&(_=1),A===void 0&&(A=1),k===void 0&&(k=[0,1]);var O=0,P;Nd(k)==="array"?P=k[1]-k[0]:(P=0,k=[k,k]);var F=function(V){var X=dP*((h+120)/360+p*V),q=pP(k[0]+P*V,A),fe=O!==0?_[0]+V*O:_,J=fe*q*(1-q)/2,ye=mP(X),me=gP(X),De=q+J*(-.14861*ye+1.78277*me),ze=q+J*(-.29227*ye-.90649*me),We=q+J*(1.97294*ye);return Ty(hP([De*255,ze*255,We*255,1]))};return F.start=function(V){return V==null?h:(h=V,F)},F.rotations=function(V){return V==null?p:(p=V,F)},F.gamma=function(V){return V==null?A:(A=V,F)},F.hue=function(V){return V==null?_:(_=V,Nd(_)==="array"?(O=_[1]-_[0],O===0&&(_=_[1])):O=0,F)},F.lightness=function(V){return V==null?k:(Nd(V)==="array"?(k=V,P=V[1]-V[0]):(k=[V,V],P=0),F)},F.scale=function(){return Ty.scale(F)},F.hue(_),F},yP=C,_P="0123456789abcdef",bP=Math.floor,wP=Math.random,EP=function(){for(var h="#",p=0;p<6;p++)h+=_P.charAt(bP(wP()*16));return new yP(h,"hex")},Dd=u,Ay=Math.log,SP=Math.pow,TP=Math.floor,AP=Math.abs,xy=function(h,p){p===void 0&&(p=null);var _={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Dd(h)==="object"&&(h=Object.values(h)),h.forEach(function(A){p&&Dd(A)==="object"&&(A=A[p]),A!=null&&!isNaN(A)&&(_.values.push(A),_.sum+=A,A<_.min&&(_.min=A),A>_.max&&(_.max=A),_.count+=1)}),_.domain=[_.min,_.max],_.limits=function(A,k){return Ry(_,A,k)},_},Ry=function(h,p,_){p===void 0&&(p="equal"),_===void 0&&(_=7),Dd(h)=="array"&&(h=xy(h));var A=h.min,k=h.max,O=h.values.sort(function(Ud,Vd){return Ud-Vd});if(_===1)return[A,k];var P=[];if(p.substr(0,1)==="c"&&(P.push(A),P.push(k)),p.substr(0,1)==="e"){P.push(A);for(var F=1;F<_;F++)P.push(A+F/_*(k-A));P.push(k)}else if(p.substr(0,1)==="l"){if(A<=0)throw new Error("Logarithmic scales are only possible for values > 0");var V=Math.LOG10E*Ay(A),X=Math.LOG10E*Ay(k);P.push(A);for(var q=1;q<_;q++)P.push(SP(10,V+q/_*(X-V)));P.push(k)}else if(p.substr(0,1)==="q"){P.push(A);for(var fe=1;fe<_;fe++){var J=(O.length-1)*fe/_,ye=TP(J);if(ye===J)P.push(O[ye]);else{var me=J-ye;P.push(O[ye]*(1-me)+O[ye+1]*me)}}P.push(k)}else if(p.substr(0,1)==="k"){var De,ze=O.length,We=new Array(ze),Ke=new Array(_),Wt=!0,zt=0,wn=null;wn=[],wn.push(A);for(var He=1;He<_;He++)wn.push(A+He/_*(k-A));for(wn.push(k);Wt;){for(var te=0;te<_;te++)Ke[te]=0;for(var xe=0;xe<ze;xe++)for(var Ve=O[xe],Fe=Number.MAX_VALUE,Xt=void 0,lt=0;lt<_;lt++){var Xe=AP(wn[lt]-Ve);Xe<Fe&&(Fe=Xe,Xt=lt),Ke[Xt]++,We[xe]=Xt}for(var Qe=new Array(_),Je=0;Je<_;Je++)Qe[Je]=null;for(var et=0;et<ze;et++)De=We[et],Qe[De]===null?Qe[De]=O[et]:Qe[De]+=O[et];for(var fr=0;fr<_;fr++)Qe[fr]*=1/Ke[fr];Wt=!1;for(var Ti=0;Ti<_;Ti++)if(Qe[Ti]!==wn[Ti]){Wt=!0;break}wn=Qe,zt++,zt>200&&(Wt=!1)}for(var Ai={},To=0;To<_;To++)Ai[To]=[];for(var Ao=0;Ao<ze;Ao++)De=We[Ao],Ai[De].push(O[Ao]);for(var Yr=[],ys=0;ys<_;ys++)Yr.push(Ai[ys][0]),Yr.push(Ai[ys][Ai[ys].length-1]);Yr=Yr.sort(function(Ud,Vd){return Ud-Vd}),P.push(Yr[0]);for(var Ja=1;Ja<Yr.length;Ja+=2){var _s=Yr[Ja];!isNaN(_s)&&P.indexOf(_s)===-1&&P.push(_s)}}return P},Cy={analyze:xy,limits:Ry},Py=C,xP=function(h,p){h=new Py(h),p=new Py(p);var _=h.luminance(),A=p.luminance();return _>A?(_+.05)/(A+.05):(A+.05)/(_+.05)},My=C,qr=Math.sqrt,Mt=Math.pow,RP=Math.min,CP=Math.max,Ly=Math.atan2,ky=Math.abs,rc=Math.cos,Oy=Math.sin,PP=Math.exp,Iy=Math.PI,MP=function(h,p,_,A,k){_===void 0&&(_=1),A===void 0&&(A=1),k===void 0&&(k=1);var O=function(_s){return 360*_s/(2*Iy)},P=function(_s){return 2*Iy*_s/360};h=new My(h),p=new My(p);var F=Array.from(h.lab()),V=F[0],X=F[1],q=F[2],fe=Array.from(p.lab()),J=fe[0],ye=fe[1],me=fe[2],De=(V+J)/2,ze=qr(Mt(X,2)+Mt(q,2)),We=qr(Mt(ye,2)+Mt(me,2)),Ke=(ze+We)/2,Wt=.5*(1-qr(Mt(Ke,7)/(Mt(Ke,7)+Mt(25,7)))),zt=X*(1+Wt),wn=ye*(1+Wt),He=qr(Mt(zt,2)+Mt(q,2)),te=qr(Mt(wn,2)+Mt(me,2)),xe=(He+te)/2,Ve=O(Ly(q,zt)),Fe=O(Ly(me,wn)),Xt=Ve>=0?Ve:Ve+360,lt=Fe>=0?Fe:Fe+360,Xe=ky(Xt-lt)>180?(Xt+lt+360)/2:(Xt+lt)/2,Qe=1-.17*rc(P(Xe-30))+.24*rc(P(2*Xe))+.32*rc(P(3*Xe+6))-.2*rc(P(4*Xe-63)),Je=lt-Xt;Je=ky(Je)<=180?Je:lt<=Xt?Je+360:Je-360,Je=2*qr(He*te)*Oy(P(Je)/2);var et=J-V,fr=te-He,Ti=1+.015*Mt(De-50,2)/qr(20+Mt(De-50,2)),Ai=1+.045*xe,To=1+.015*xe*Qe,Ao=30*PP(-Mt((Xe-275)/25,2)),Yr=2*qr(Mt(xe,7)/(Mt(xe,7)+Mt(25,7))),ys=-Yr*Oy(2*P(Ao)),Ja=qr(Mt(et/(_*Ti),2)+Mt(fr/(A*Ai),2)+Mt(Je/(k*To),2)+ys*(fr/(A*Ai))*(Je/(k*To)));return CP(0,RP(100,Ja))},Ny=C,LP=function(h,p,_){_===void 0&&(_="lab"),h=new Ny(h),p=new Ny(p);var A=h.get(_),k=p.get(_),O=0;for(var P in A){var F=(A[P]||0)-(k[P]||0);O+=F*F}return Math.sqrt(O)},kP=C,OP=function(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];try{return new(Function.prototype.bind.apply(kP,[null].concat(h))),!0}catch{return!1}},Dy=N,Fy=Od,IP={cool:function(){return Fy([Dy.hsl(180,1,.9),Dy.hsl(250,.7,.4)])},hot:function(){return Fy(["#000","#f00","#ff0","#fff"]).mode("rgb")}},ic={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Fd=0,Uy=Object.keys(ic);Fd<Uy.length;Fd+=1){var Vy=Uy[Fd];ic[Vy.toLowerCase()]=ic[Vy]}var NP=ic,Bt=N;Bt.average=YC,Bt.bezier=nP,Bt.blend=fP,Bt.cubehelix=vP,Bt.mix=Bt.interpolate=gy,Bt.random=EP,Bt.scale=Od,Bt.analyze=Cy.analyze,Bt.contrast=xP,Bt.deltaE=MP,Bt.distance=LP,Bt.limits=Cy.limits,Bt.valid=OP,Bt.scales=IP,Bt.colors=K0,Bt.brewer=NP;var DP=Bt;return DP})})(x2);const xW=x2.exports;function RW(t){return as({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368L144 144m224 0L144 368"}}]})(t)}function CW(t){return as({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"40",d:"M196 220h64v172"}},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"40",d:"M187 396h138"}},{tag:"path",attr:{d:"M256 160a32 32 0 1132-32 32 32 0 01-32 32z"}}]})(t)}function R2(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function om(t,e){return om=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},om(t,e)}function C2(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,om(t,e)}function LF(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function kF(t,e){t.classList?t.classList.add(e):LF(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function C1(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function OF(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=C1(t.className,e):t.setAttribute("class",C1(t.className&&t.className.baseVal||"",e))}const P1={disabled:!1},P2=qe.createContext(null);var M2=function(e){return e.scrollTop},Cl="unmounted",As="exited",xs="entering",Uo="entered",am="exiting",di=function(t){C2(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=As,s.appearStatus=xs):l=Uo:r.unmountOnExit||r.mountOnEnter?l=Cl:l=As,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===Cl?{status:As}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==xs&&o!==Uo&&(s=xs):(o===xs||o===Uo)&&(s=am)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===xs){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:xl.findDOMNode(this);o&&M2(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===As&&this.setState({status:Cl})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[xl.findDOMNode(this),a],u=l[0],c=l[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||P1.disabled){this.safeSetState({status:Uo},function(){s.props.onEntered(u)});return}this.props.onEnter(u,c),this.safeSetState({status:xs},function(){s.props.onEntering(u,c),s.onTransitionEnd(d,function(){s.safeSetState({status:Uo},function(){s.props.onEntered(u,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:xl.findDOMNode(this);if(!s||P1.disabled){this.safeSetState({status:As},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:am},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:As},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:xl.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===Cl)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=R2(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Oe(P2.Provider,{value:null,children:typeof o=="function"?o(i,a):qe.cloneElement(qe.Children.only(o),a)})},e}(qe.Component);di.contextType=P2;di.propTypes={};function Co(){}di.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Co,onEntering:Co,onEntered:Co,onExit:Co,onExiting:Co,onExited:Co};di.UNMOUNTED=Cl;di.EXITED=As;di.ENTERING=xs;di.ENTERED=Uo;di.EXITING=am;const IF=di;var NF=function(e,n){return e&&n&&n.split(" ").forEach(function(r){return kF(e,r)})},wp=function(e,n){return e&&n&&n.split(" ").forEach(function(r){return OF(e,r)})},s0=function(t){C2(e,t);function e(){for(var r,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(a,l){var u=r.resolveArguments(a,l),c=u[0],f=u[1];r.removeClasses(c,"exit"),r.addClass(c,f?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(a,l)},r.onEntering=function(a,l){var u=r.resolveArguments(a,l),c=u[0],f=u[1],d=f?"appear":"enter";r.addClass(c,d,"active"),r.props.onEntering&&r.props.onEntering(a,l)},r.onEntered=function(a,l){var u=r.resolveArguments(a,l),c=u[0],f=u[1],d=f?"appear":"enter";r.removeClasses(c,d),r.addClass(c,d,"done"),r.props.onEntered&&r.props.onEntered(a,l)},r.onExit=function(a){var l=r.resolveArguments(a),u=l[0];r.removeClasses(u,"appear"),r.removeClasses(u,"enter"),r.addClass(u,"exit","base"),r.props.onExit&&r.props.onExit(a)},r.onExiting=function(a){var l=r.resolveArguments(a),u=l[0];r.addClass(u,"exit","active"),r.props.onExiting&&r.props.onExiting(a)},r.onExited=function(a){var l=r.resolveArguments(a),u=l[0];r.removeClasses(u,"exit"),r.addClass(u,"exit","done"),r.props.onExited&&r.props.onExited(a)},r.resolveArguments=function(a,l){return r.props.nodeRef?[r.props.nodeRef.current,a]:[a,l]},r.getClassNames=function(a){var l=r.props.classNames,u=typeof l=="string",c=u&&l?l+"-":"",f=u?""+c+a:l[a],d=u?f+"-active":l[a+"Active"],g=u?f+"-done":l[a+"Done"];return{baseClassName:f,activeClassName:d,doneClassName:g}},r}var n=e.prototype;return n.addClass=function(i,s,o){var a=this.getClassNames(s)[o+"ClassName"],l=this.getClassNames("enter"),u=l.doneClassName;s==="appear"&&o==="done"&&u&&(a+=" "+u),o==="active"&&i&&M2(i),a&&(this.appliedClasses[s][o]=a,NF(i,a))},n.removeClasses=function(i,s){var o=this.appliedClasses[s],a=o.base,l=o.active,u=o.done;this.appliedClasses[s]={},a&&wp(i,a),l&&wp(i,l),u&&wp(i,u)},n.render=function(){var i=this.props;i.classNames;var s=R2(i,["classNames"]);return Oe(IF,{...s,onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited})},e}(qe.Component);s0.defaultProps={classNames:""};s0.propTypes={};const PW=s0;function MW(t){return as({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"}}]})(t)}function LW(t){return as({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(t)}function kW(t){return as({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(t)}function OW(t){return as({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"desc",attr:{},child:[]},{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"8"}},{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"4"}},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"22"}},{tag:"line",attr:{x1:"20",y1:"12",x2:"22",y2:"12"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"4",y2:"12"}}]})(t)}function jf(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const o0=Boolean(typeof process!="object"||String(process)!=="[object process]"||process.browser),M1=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);M1&&parseFloat(M1[1]);const DF="3.2.11";function li(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const rf=typeof process!="object"||String(process)!=="[object process]"||process.browser,FF=typeof window<"u"&&typeof window.orientation<"u",L1=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);L1&&parseFloat(L1[1]);function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class UF{constructor(e,n){b(this,"name",void 0),b(this,"workerThread",void 0),b(this,"isRunning",!0),b(this,"result",void 0),b(this,"_resolve",()=>{}),b(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){li(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){li(this.isRunning),this.isRunning=!1,this._reject(e)}}class Ep{}const Sp=new Map;function VF(t){li(t.source&&!t.url||!t.source&&t.url);let e=Sp.get(t.source||t.url);return e||(t.url&&(e=BF(t.url),Sp.set(t.url,e)),t.source&&(e=L2(t.source),Sp.set(t.source,e))),li(e),e}function BF(t){if(!t.startsWith("http"))return t;const e=zF(t);return L2(e)}function L2(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function zF(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function k2(t,e=!0,n){const r=n||new Set;if(t){if(k1(t))r.add(t);else if(k1(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const i in t)k2(t[i],e,r)}}return n===void 0?Array.from(r):[]}function k1(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const Tp=()=>{};class lm{static isSupported(){return typeof Worker<"u"&&rf||typeof Ep<"u"&&!rf}constructor(e){b(this,"name",void 0),b(this,"source",void 0),b(this,"url",void 0),b(this,"terminated",!1),b(this,"worker",void 0),b(this,"onMessage",void 0),b(this,"onError",void 0),b(this,"_loadableURL","");const{name:n,source:r,url:i}=e;li(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=Tp,this.onError=s=>console.log(s),this.worker=rf?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=Tp,this.onError=Tp,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,n){n=n||k2(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=VF({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new Ep(r,{eval:!1})}else if(this.source)e=new Ep(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class jF{static isSupported(){return lm.isSupported()}constructor(e){b(this,"name","unnamed"),b(this,"source",void 0),b(this,"url",void 0),b(this,"maxConcurrency",1),b(this,"maxMobileConcurrency",1),b(this,"onDebug",()=>{}),b(this,"reuseWorkers",!0),b(this,"props",{}),b(this,"jobQueue",[]),b(this,"idleQueue",[]),b(this,"count",0),b(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e,n=(i,s,o)=>i.done(o),r=(i,s)=>i.error(s)){const i=new Promise(s=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:s}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const r=new UF(n.name,e);e.onMessage=i=>n.onMessage(r,i.type,i.payload),e.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new lm({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return FF?this.maxMobileConcurrency:this.maxConcurrency}}const $F={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Jr{static isSupported(){return lm.isSupported()}static getWorkerFarm(e={}){return Jr._workerFarm=Jr._workerFarm||new Jr({}),Jr._workerFarm.setProps(e),Jr._workerFarm}constructor(e){b(this,"props",void 0),b(this,"workerPools",new Map),this.props={...$F},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:r,url:i}=e;let s=this.workerPools.get(n);return s||(s=new jF({name:n,source:r,url:i}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}b(Jr,"_workerFarm",void 0);const GF="latest";function HF(t,e={}){const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let i=n.workerUrl;if(!i&&t.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){let s=t.version;s==="latest"&&(s=GF);const o=s?"@".concat(s):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(o,"/dist/").concat(r)}return li(i),i}function WF(t,e=DF){li(t,"no worker provided");const n=t.version;return!(!e||!n)}function XF(t,e){return!Jr.isSupported()||!rf&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function qF(t,e,n,r,i){const s=t.id,o=HF(t,n),l=Jr.getWorkerFarm(n).getWorkerPool({name:s,url:o});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const u=await l.startJob("process-on-worker",YF.bind(null,i));return u.postMessage("process",{input:e,options:n,context:r}),await(await u.result).result}async function YF(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:i,input:s,options:o}=r;try{const a=await t(s,o);e.postMessage("done",{id:i,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:i,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function O2(t){return t&&typeof t=="object"&&t.isBuffer}function ZF(t){return O2(t)?new Uint8Array(t.buffer,t.byteOffset,t.length).slice().buffer:t}function I2(t){if(O2(t))return ZF(t);if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function KF(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}function QF(...t){const e=t.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),n=e.reduce((s,o)=>s+o.byteLength,0),r=new Uint8Array(n);let i=0;for(const s of e)r.set(s,i),i+=s.byteLength;return r.buffer}async function JF(t){const e=[];for await(const n of t)e.push(n);return QF(...e)}function O1(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class I1{constructor(e,n){b(this,"name",void 0),b(this,"type",void 0),b(this,"sampleSize",1),b(this,"time",void 0),b(this,"count",void 0),b(this,"samples",void 0),b(this,"lastTiming",void 0),b(this,"lastSampleTime",void 0),b(this,"lastSampleCount",void 0),b(this,"_count",0),b(this,"_time",0),b(this,"_samples",0),b(this,"_startTime",0),b(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=O1(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(O1()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class a0{constructor(e){b(this,"id",void 0),b(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:r}=e;return this.stats[n]||(e instanceof I1?this.stats[n]=e:this.stats[n]=new I1(n,r)),this.stats[n]}}let e5="";const N1={};function t5(t){for(const e in N1)if(t.startsWith(e)){const n=N1[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(e5).concat(t)),t}function n5(t){const e=t&&t.lastIndexOf("/");return e>=0?t.substr(e+1):""}const r5=t=>typeof t=="boolean",$l=t=>typeof t=="function",Ou=t=>t!==null&&typeof t=="object",D1=t=>Ou(t)&&t.constructor==={}.constructor,i5=t=>t&&typeof t[Symbol.iterator]=="function",s5=t=>t&&typeof t[Symbol.asyncIterator]=="function",Ua=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,Va=t=>typeof Blob<"u"&&t instanceof Blob,o5=t=>t&&typeof t=="object"&&t.isBuffer,a5=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||Ou(t)&&$l(t.tee)&&$l(t.cancel)&&$l(t.getReader),l5=t=>Ou(t)&&$l(t.read)&&$l(t.pipe)&&r5(t.readable),N2=t=>a5(t)||l5(t),u5=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,c5=/^([-\w.]+\/[-\w.+]+)/;function f5(t){const e=c5.exec(t);return e?e[1]:t}function F1(t){const e=u5.exec(t);return e?e[1]:""}const h5=/\?.*/;function Yh(t){if(Ua(t)){const e=Ap(t.url||""),n=t.headers.get("content-type")||"";return{url:e,type:f5(n)||F1(e)}}return Va(t)?{url:Ap(t.name||""),type:t.type||""}:typeof t=="string"?{url:Ap(t),type:F1(t)}:{url:"",type:""}}function d5(t){return Ua(t)?t.headers["content-length"]||-1:Va(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}function Ap(t){return t.replace(h5,"")}async function D2(t){if(Ua(t))return t;const e={},n=d5(t);n>=0&&(e["content-length"]=String(n));const{url:r,type:i}=Yh(t);i&&(e["content-type"]=i);const s=await m5(t);s&&(e["x-first-bytes"]=s),typeof t=="string"&&(t=new TextEncoder().encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:r}),o}async function p5(t){if(!t.ok){const e=await g5(t);throw new Error(e)}}async function g5(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}async function m5(t){if(typeof t=="string")return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=s=>{var o;return r(s==null||(o=s.target)===null||o===void 0?void 0:o.result)},i.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5),r=v5(n);return"data:base64,".concat(r)}return null}function v5(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}async function U1(t,e){if(typeof t=="string"){t=t5(t);let n=e;return e!=null&&e.fetch&&typeof(e==null?void 0:e.fetch)!="function"&&(n=e.fetch),await fetch(t,n)}return await D2(t)}function F2(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&Boolean(process.versions.electron))return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function pi(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||F2()}const sf={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},Rc=sf.window||sf.self||sf.global,dl=sf.process||{},U2=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";pi();const xp=globalThis;function V2(t){if(!t&&!pi())return"Node";if(F2(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i?"IE":xp.chrome?"Chrome":xp.safari?"Safari":xp.mozInnerScreenX?"Firefox":"Unknown"}function y5(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class _5{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";b(this,"storage",void 0),b(this,"id",void 0),b(this,"config",{}),this.storage=y5(r),this.id=e,this.config={},Object.assign(this.config,n),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){return this.config={},this.updateConfiguration(e)}updateConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}return this}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function b5(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function w5(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function Rp(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let $f;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})($f||($f={}));function V1(t){return typeof t=="string"?$f[t.toUpperCase()]||$f.WHITE:t}function E5(t,e,n){return!pi&&typeof t=="string"&&(e&&(e=V1(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=V1(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function S5(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const i of r)typeof t[i]=="function"&&(e.find(s=>i===s)||(t[i]=t[i].bind(t)))}function Gf(t,e){if(!t)throw new Error(e||"Assertion failed")}function Po(){let t;if(pi&&"performance"in Rc){var e,n;t=Rc==null||(e=Rc.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in dl){var r;const i=dl==null||(r=dl.hrtime)===null||r===void 0?void 0:r.call(dl);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const Mo={debug:pi&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},T5={enabled:!0,level:0};function qn(){}const B1={},z1={once:!0};class Iu{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};b(this,"id",void 0),b(this,"VERSION",U2),b(this,"_startTs",Po()),b(this,"_deltaTs",Po()),b(this,"_storage",void 0),b(this,"userData",{}),b(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this._storage=new _5("__probe-".concat(this.id,"__"),T5),this.userData={},this.timeStamp("".concat(this.id," started")),S5(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Po()-this._startTs).toPrecision(10))}getDelta(){return Number((Po()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:e}),this}setLevel(e){return this._storage.updateConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.updateConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){Gf(e,n)}warn(e){return this._getLogFunction(0,e,Mo.warn,arguments,z1)}error(e){return this._getLogFunction(0,e,Mo.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Mo.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Mo.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return this._getLogFunction(e,n,Mo.debug||Mo.info,arguments,z1)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||qn,r&&[r],{tag:C5(n)}):qn}image(e){let{logLevel:n,priority:r,image:i,message:s="",scale:o=1}=e;return this._shouldLog(n||r)?pi?R5({image:i,message:s,scale:o}):x5({image:i,message:s,scale:o}):qn}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||qn)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=j1({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||qn)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=B2(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=j1({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,Gf(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Po();const o=s.tag||s.message;if(s.once)if(!B1[o])B1[o]=Po();else return qn;return n=A5(this.id,s.message,s),r.bind(console,n,...s.args)}return qn}}b(Iu,"VERSION",U2);function B2(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Gf(Number.isFinite(e)&&e>=0),e}function j1(t){const{logLevel:e,message:n}=t;t.logLevel=B2(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return Gf(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function A5(t,e,n){if(typeof e=="string"){const r=n.time?w5(b5(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=E5(e,n.color,n.background)}return e}function x5(t){let{image:e,message:n="",scale:r=1}=t;return(void 0)({image:e,message:n,scale:r}),qn}function R5(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const s=new Image;return s.onload=()=>{const o=Rp(s,n,r);console.log(...o)},s.src=e,qn}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...Rp(e,n,r)),qn;if(i.toLowerCase()==="canvas"){const s=new Image;return s.onload=()=>console.log(...Rp(s,n,r)),s.src=e.toDataURL(),qn}return qn}function C5(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const $1=new Iu({id:"loaders.gl"});class P5{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class M5{constructor(){b(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}}const z2={fetch:null,mimeType:void 0,nothrow:!1,log:new M5,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:o0,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},L5={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function j2(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const $2=()=>{const t=j2();return t.globalOptions=t.globalOptions||{...z2},t.globalOptions};function k5(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],O5(t,n),N5(e,t,r)}function G2(t,e){const n=$2(),r=t||n;return typeof r.fetch=="function"?r.fetch:Ou(r.fetch)?i=>U1(i,r):e!=null&&e.fetch?e==null?void 0:e.fetch:U1}function O5(t,e){G1(t,null,z2,L5,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},s=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};G1(r,n.id,i,s,e)}}function G1(t,e,n,r,i){const s=e||"Top level",o=e?"".concat(e,"."):"";for(const a in t){const l=!e&&Ou(t[a]),u=a==="baseUri"&&!e,c=a==="workerUrl"&&e;if(!(a in n)&&!u&&!c){if(a in r)$1.warn("".concat(s," loader option '").concat(o).concat(a,"' no longer supported, use '").concat(r[a],"'"))();else if(!l){const f=I5(a,i);$1.warn("".concat(s," loader option '").concat(o).concat(a,"' not recognized. ").concat(f))()}}}}function I5(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const s in i.options){if(t===s)return"Did you mean '".concat(i.id,".").concat(s,"'?");const o=s.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(s,"'?"))}return r}function N5(t,e,n){const i={...t.options||{}};return D5(i,n),i.log===null&&(i.log=new P5),H1(i,$2()),H1(i,e),i}function H1(t,e){for(const n in e)if(n in e){const r=e[n];D1(r)&&D1(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function D5(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function l0(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function u0(t){var e,n;jf(t,"null loader"),jf(l0(t),"invalid loader");let r;return Array.isArray(t)&&(r=t[1],t=t[0],t={...t,options:{...t.options,...r}}),((e=t)!==null&&e!==void 0&&e.parseTextSync||(n=t)!==null&&n!==void 0&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const H2=()=>{const t=j2();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function F5(t){const e=H2();t=Array.isArray(t)?t:[t];for(const n of t){const r=u0(n);e.find(i=>r===i)||e.unshift(r)}}function U5(){return H2()}const V5=new Iu({id:"loaders.gl"}),B5=/\.([^.]+)$/;async function z5(t,e=[],n,r){if(!W2(t))return null;let i=W1(t,e,{...n,nothrow:!0},r);if(i)return i;if(Va(t)&&(t=await t.slice(0,10).arrayBuffer(),i=W1(t,e,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error(X2(t));return i}function W1(t,e=[],n,r){if(!W2(t))return null;if(e&&!Array.isArray(e))return u0(e);let i=[];e&&(i=i.concat(e)),n!=null&&n.ignoreRegisteredLoaders||i.push(...U5()),$5(i);const s=j5(t,i,n,r);if(!s&&!(n!=null&&n.nothrow))throw new Error(X2(t));return s}function j5(t,e,n,r){const{url:i,type:s}=Yh(t),o=i||(r==null?void 0:r.url);let a=null,l="";if(n!=null&&n.mimeType&&(a=Cp(e,n==null?void 0:n.mimeType),l="match forced by supplied MIME type ".concat(n==null?void 0:n.mimeType)),a=a||G5(e,o),l=l||(a?"matched url ".concat(o):""),a=a||Cp(e,s),l=l||(a?"matched MIME type ".concat(s):""),a=a||W5(e,t),l=l||(a?"matched initial data ".concat(q2(t)):""),a=a||Cp(e,n==null?void 0:n.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(s):""),l){var u;V5.log(1,"selectLoader selected ".concat((u=a)===null||u===void 0?void 0:u.name,": ").concat(l,"."))}return a}function W2(t){return!(t instanceof Response&&t.status===204)}function X2(t){const{url:e,type:n}=Yh(t);let r="No valid loader found (";r+=e?"".concat(n5(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const i=t?q2(t):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function $5(t){for(const e of t)u0(e)}function G5(t,e){const n=e&&B5.exec(e),r=n&&n[1];return r?H5(t,r):null}function H5(t,e){e=e.toLowerCase();for(const n of t)for(const r of n.extensions)if(r.toLowerCase()===e)return n;return null}function Cp(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function W5(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(X5(e,n))return n}else if(ArrayBuffer.isView(e)){if(X1(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&X1(e,0,n))return n;return null}function X5(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function X1(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>q5(t,e,n,i))}function q5(t,e,n,r){if(r instanceof ArrayBuffer)return KF(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":const i=um(t,e,r.length);return r===i;default:return!1}}function q2(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?um(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?um(t,0,e):""}function um(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let s=0;s<n;s++)i+=String.fromCharCode(r.getUint8(e+s));return i}const Y5=256*1024;function*Z5(t,e){const n=(e==null?void 0:e.chunkSize)||Y5;let r=0;const i=new TextEncoder;for(;r<t.length;){const s=Math.min(t.length-r,n),o=t.slice(r,r+s);r+=s,yield i.encode(o)}}const K5=256*1024;function*Q5(t,e={}){const{chunkSize:n=K5}=e;let r=0;for(;r<t.byteLength;){const i=Math.min(t.byteLength-r,n),s=new ArrayBuffer(i),o=new Uint8Array(t,r,i);new Uint8Array(s).set(o),r+=i,yield s}}const J5=1024*1024;async function*e6(t,e){const n=(e==null?void 0:e.chunkSize)||J5;let r=0;for(;r<t.size;){const i=r+n,s=await t.slice(r,i).arrayBuffer();r=i,yield s}}function q1(t,e){return o0?t6(t,e):n6(t)}async function*t6(t,e){const n=t.getReader();let r;try{for(;;){const i=r||n.read();e!=null&&e._streamReadAhead&&(r=n.read());const{done:s,value:o}=await i;if(s)return;yield I2(o)}}catch{n.releaseLock()}}async function*n6(t,e){for await(const n of t)yield I2(n)}function r6(t,e){if(typeof t=="string")return Z5(t,e);if(t instanceof ArrayBuffer)return Q5(t,e);if(Va(t))return e6(t,e);if(N2(t))return q1(t,e);if(Ua(t))return q1(t.body,e);throw new Error("makeIterator")}const Y2="Cannot convert supplied data type";function i6(t,e,n){if(e.text&&typeof t=="string")return t;if(o5(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const i=t.byteLength||t.length;return(t.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+i)),r}throw new Error(Y2)}async function s6(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return i6(t,e);if(Va(t)&&(t=await D2(t)),Ua(t)){const i=t;return await p5(i),e.binary?await i.arrayBuffer():await i.text()}if(N2(t)&&(t=r6(t,n)),i5(t)||s5(t))return JF(t);throw new Error(Y2)}function o6(t,e,n=null){if(n)return n;const r={fetch:G2(e,t),...t};return Array.isArray(r.loaders)||(r.loaders=null),r}function a6(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:null}async function c0(t,e,n,r){li(!r||typeof r=="object"),e&&!Array.isArray(e)&&!l0(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};const{url:i}=Yh(t),o=a6(e,r),a=await z5(t,o,n);return a?(n=k5(n,a,o,i),r=o6({url:i,parse:c0,loaders:o},n,r),await l6(a,t,n,r)):null}async function l6(t,e,n,r){if(WF(t),Ua(e)){const i=e,{ok:s,redirected:o,status:a,statusText:l,type:u,url:c}=i,f=Object.fromEntries(i.headers.entries());r.response={headers:f,ok:s,redirected:o,status:a,statusText:l,type:u,url:c}}if(e=await s6(e,t,n),t.parseTextSync&&typeof e=="string")return n.dataType="text",t.parseTextSync(e,n,r,t);if(XF(t,n))return await qF(t,e,n,r,c0);if(t.parseText&&typeof e=="string")return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw li(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}async function cm(t,e,n,r){!Array.isArray(e)&&!l0(e)&&(n=e,e=void 0);const i=G2(n);let s=t;return typeof t=="string"&&(s=await i(t)),Va(t)&&(s=await i(t)),await c0(s,e,n)}const u6="3.2.11",{_parseImageNode:c6}=globalThis,fm=typeof Image<"u",hm=typeof ImageBitmap<"u",f6=Boolean(c6),dm=o0?!0:f6;function h6(t){switch(t){case"auto":return hm||fm||dm;case"imagebitmap":return hm;case"image":return fm;case"data":return dm;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function d6(){if(hm)return"imagebitmap";if(fm)return"image";if(dm)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function p6(t){const e=m6(t);if(!e)throw new Error("Not an image");return e}function g6(t){switch(p6(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function m6(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const v6=/^data:image\/svg\+xml/,y6=/\.svg((\?|#).*)?$/;function f0(t){return t&&(v6.test(t)||y6.test(t))}function _6(t,e){if(f0(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(r))}return Z2(t,e)}function Z2(t,e){if(f0(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function K2(t,e,n){const r=_6(t,n),i=self.URL||self.webkitURL,s=typeof r!="string"&&i.createObjectURL(r);try{return await b6(s||r,e)}finally{s&&i.revokeObjectURL(s)}}async function b6(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,i)=>{try{n.onload=()=>r(n),n.onerror=s=>i(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){i(s)}})}const w6={};let Y1=!0;async function E6(t,e,n){let r;f0(n)?r=await K2(t,e,n):r=Z2(t,n);const i=e&&e.imagebitmap;return await S6(r,i)}async function S6(t,e=null){if((T6(e)||!Y1)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),Y1=!1}return await createImageBitmap(t)}function T6(t){for(const e in t||w6)return!1;return!0}const Ur=!1,Gl=!0;function Q2(t){const e=Nu(t);return A6(e)||C6(e)||x6(e)||R6(e)}function A6(t){const e=Nu(t);return e.byteLength>=24&&e.getUint32(0,Ur)===2303741511?{mimeType:"image/png",width:e.getUint32(16,Ur),height:e.getUint32(20,Ur)}:null}function x6(t){const e=Nu(t);return e.byteLength>=10&&e.getUint32(0,Ur)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,Gl),height:e.getUint16(8,Gl)}:null}function R6(t){const e=Nu(t);return e.byteLength>=14&&e.getUint16(0,Ur)===16973&&e.getUint32(2,Gl)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Gl),height:e.getUint32(22,Gl)}:null}function C6(t){const e=Nu(t);if(!(e.byteLength>=3&&e.getUint16(0,Ur)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:i}=P6();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,Ur);if(i.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,Ur),width:e.getUint16(s+7,Ur)};if(!r.has(o))return null;s+=2,s+=e.getUint16(s,Ur)}return null}function P6(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function Nu(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function M6(t,e){const{mimeType:n}=Q2(t)||{},r=globalThis._parseImageNode;return jf(r),await r(t,n)}async function L6(t,e,n){e=e||{};const i=(e.image||{}).type||"auto",{url:s}=n||{},o=k6(i);let a;switch(o){case"imagebitmap":a=await E6(t,e,s);break;case"image":a=await K2(t,e,s);break;case"data":a=await M6(t);break;default:jf(!1)}return i==="data"&&(a=g6(a)),a}function k6(t){switch(t){case"auto":case"data":return d6();default:return h6(t),t}}const O6=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],I6=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],N6={image:{type:"auto",decode:!0}},D6={id:"image",module:"images",name:"Images",version:u6,mimeTypes:I6,extensions:O6,parse:L6,tests:[t=>Boolean(Q2(new DataView(t)))],options:N6},it=new Iu({id:"deck"});let pm={};function F6(t){pm=t}function on(t,e,n,r){it.level>0&&pm[t]&&pm[t].call(null,e,n,r)}function U6(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const V6={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:U6,parseTextSync:JSON.parse},Hl="8.8.16",of=globalThis.deck&&globalThis.deck.VERSION;if(of&&of!==Hl)throw new Error("deck.gl - multiple versions detected: ".concat(of," vs ").concat(Hl));of||(it.log(1,"deck.gl ".concat(Hl))(),globalThis.deck={...globalThis.deck,VERSION:Hl,version:Hl,log:it,_registerLoggers:F6},F5([V6,[D6,{imagebitmap:{premultiplyAlpha:"none"}}]]));const B6=globalThis.deck,we=new Iu({id:"luma.gl"});function dn(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const z6="Invalid WebGLRenderingContext",j6="Requires WebGL2";function Zh(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&Number.isFinite(t._version))}function $e(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&t._version===2)}function $6(t){return $e(t)?t:null}function Kh(t){return dn(Zh(t),z6),t}function gn(t){return dn($e(t),j6),t}const Pl={};function G6(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}function H6(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)}function W6(t,e){Pl[t]=!0,e!==void 0&&G6(e)}function X6(t){const e=t.getError;t.getError=function(){let r;do r=e.apply(t),r!==0&&(Pl[r]=!0);while(r!==0);for(r in Pl)if(Pl[r])return delete Pl[r],parseInt(r,10);return 0}}const Du=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const i=new t.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};Du.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};Du.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const to=function(e){const n=this;this.gl=e,X6(e);const r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:n.currentArrayBuffer=o;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=o;break}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const l=n.currentVertexArrayObject.attribs[s];switch(o){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,l,u,c){const f=n.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,s);const d=f.attribs[s];return d.buffer=n.currentArrayBuffer,d.size=o,d.type=a,d.normalized=l,d.stride=u,d.offset=c,d.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{H6("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};to.prototype.VERTEX_ARRAY_BINDING_OES=34229;to.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let r=0;r<this.vertexArrayObjects.length;++r)this.vertexArrayObjects.isAlive=!1;const n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new Du(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};to.prototype.createVertexArrayOES=function(){const e=new Du(this);return this.vertexArrayObjects.push(e),e};to.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};to.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof Du&&e.hasBeenBound&&e.ext===this)};to.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive){W6(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const r=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(i===s)return;(!i||s.elementArrayBuffer!==i.elementArrayBuffer)&&r.bindBuffer.call(n,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(i?i.maxAttrib:0,s.maxAttrib);for(let l=0;l<=a;l++){const u=s.attribs[l],c=i?i.attribs[l]:null;if((!i||u.enabled!==c.enabled)&&(u.enabled?r.enableVertexAttribArray.call(n,l):r.disableVertexAttribArray.call(n,l)),u.enabled){let f=!1;(!i||u.buffer!==c.buffer)&&(o!==u.buffer&&(r.bindBuffer.call(n,34962,u.buffer),o=u.buffer),f=!0),(f||u.cached!==c.cached)&&r.vertexAttribPointer.call(n,l,u.size,u.type,u.normalized,u.stride,u.offset)}}this.currentArrayBuffer!==o&&r.bindBuffer.call(n,34962,this.currentArrayBuffer)};function q6(t){if(typeof t.createVertexArray=="function")return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const i=e.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const n=t.getExtension;t.getExtension=function(i){const s=n.call(this,i);return s||(i!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new to(this)),this.__OESVertexArrayObject))}}const Z1="OES_element_index",K1="WEBGL_draw_buffers",Y6="EXT_disjoint_timer_query",Z6="EXT_disjoint_timer_query_webgl2",K6="EXT_texture_filter_anisotropic",Q1="WEBGL_debug_renderer_info",Q6=35723,J6=4352,eU=36795,tU=34047,nU=37445,rU=37446,ut=t=>$e(t)?void 0:0,iU={[3074]:t=>$e(t)?void 0:36064,[Q6]:t=>$e(t)?void 0:J6,[35977]:ut,[32937]:ut,[eU]:(t,e)=>{const n=$e(t)?t.getExtension(Z6):t.getExtension(Y6);return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},[nU]:(t,e)=>{const n=t.getExtension(Q1);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[rU]:(t,e)=>{const n=t.getExtension(Q1);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[tU]:(t,e)=>{const n=t.luma.extensions[K6];return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},[32883]:ut,[35071]:ut,[37447]:ut,[36063]:(t,e)=>{if(!$e(t)){const n=t.getExtension(K1);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},[35379]:ut,[35374]:ut,[35377]:ut,[34852]:t=>{if(!$e(t)){const e=t.getExtension(K1);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},[36203]:t=>t.getExtension(Z1)?2147483647:65535,[33001]:t=>t.getExtension(Z1)?16777216:65535,[33e3]:t=>16777216,[37157]:ut,[35373]:ut,[35657]:ut,[36183]:ut,[37137]:ut,[34045]:ut,[35978]:ut,[35979]:ut,[35968]:ut,[35376]:ut,[35375]:ut,[35659]:ut,[37154]:ut,[35371]:ut,[35658]:ut,[35076]:ut,[35077]:ut,[35380]:ut};function sU(t,e,n){const r=iU[n],i=typeof r=="function"?r(t,e,n):r;return i!==void 0?i:e(n)}const oU="OES_vertex_array_object",J2="ANGLE_instanced_arrays",aU="WEBGL_draw_buffers",lU="EXT_disjoint_timer_query",uU="EXT_texture_filter_anisotropic",cU="VertexArray requires WebGL2 or OES_vertex_array_object extension";function fU(t,e){return{webgl2:$e(t),ext:t.getExtension(e)}}const eA={[oU]:{meta:{suffix:"OES"},createVertexArray:()=>{dn(!1,cU)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[J2]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){dn(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[aU]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{dn(!1)}},[lU]:{meta:{suffix:"EXT"},createQuery:()=>{dn(!1)},deleteQuery:()=>{dn(!1)},beginQuery:()=>{dn(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},Pp={readBuffer:(t,e,n)=>{$e(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:i,ext:s}=fU(t,J2);let o;switch(r){case 35069:o=i?void 0:!1;break;case 35070:o=!i&&!s?0:void 0;break}return o!==void 0?o:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!$e(t))switch(r){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>{if(!$e(t))switch(i){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,i)},getTexParameter(t,e,n,r){switch(r){case 34046:const{extensions:i}=t.luma,s=i[uU];r=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return e(n,r)},getParameter:sU,hint(t,e,n,r){return e(n,r)}};function hU(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(q6(t),dU(t),gU(t,eA),pU(t,{target:e,target2:t}),e.polyfilled=!0),t}globalThis.polyfillContext=hU;function dU(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}function pU(t,e){let{target:n,target2:r}=e;Object.keys(Pp).forEach(i=>{if(typeof Pp[i]=="function"){const s=t[i]?t[i].bind(t):()=>{},o=Pp[i].bind(null,t,s);n[i]=o,r[i]=o}})}function gU(t,e){for(const n of Object.getOwnPropertyNames(e))n!=="overrides"&&mU(t,{extension:n,target:t.luma,target2:t})}function mU(t,e){let{extension:n,target:r,target2:i}=e;const s=eA[n];dn(s);const{meta:o={}}=s,{suffix:a=""}=o,l=t.getExtension(n);for(const u of Object.keys(s)){const c="".concat(u).concat(a);let f=null;u==="meta"||typeof t[u]=="function"||(l&&typeof l[c]=="function"?f=function(){return l[c](...arguments)}:typeof s[u]=="function"&&(f=s[u].bind(r))),f&&(r[u]=f,i[u]=f)}}const h0={[3042]:!1,[32773]:new Float32Array([0,0,0,0]),[32777]:32774,[34877]:32774,[32969]:1,[32968]:0,[32971]:1,[32970]:0,[3106]:new Float32Array([0,0,0,0]),[3107]:[!0,!0,!0,!0],[2884]:!1,[2885]:1029,[2929]:!1,[2931]:1,[2932]:513,[2928]:new Float32Array([0,1]),[2930]:!0,[3024]:!0,[36006]:null,[2886]:2305,[33170]:4352,[2849]:1,[32823]:!1,[32824]:0,[10752]:0,[32938]:1,[32939]:!1,[3089]:!1,[3088]:new Int32Array([0,0,1024,1024]),[2960]:!1,[2961]:0,[2968]:4294967295,[36005]:4294967295,[2962]:519,[2967]:0,[2963]:4294967295,[34816]:519,[36003]:0,[36004]:4294967295,[2964]:7680,[2965]:7680,[2966]:7680,[34817]:7680,[34818]:7680,[34819]:7680,[2978]:[0,0,1024,1024],[3333]:4,[3317]:4,[37440]:!1,[37441]:!1,[37443]:37444,[35723]:4352,[36010]:null,[35977]:!1,[3330]:0,[3332]:0,[3331]:0,[3314]:0,[32878]:0,[3316]:0,[3315]:0,[32877]:0},Ri=(t,e,n)=>e?t.enable(n):t.disable(n),J1=(t,e,n)=>t.hint(n,e),kn=(t,e,n)=>t.pixelStorei(n,e),vU=(t,e)=>{const n=$e(t)?36009:36160;return t.bindFramebuffer(n,e)},yU=(t,e)=>t.bindFramebuffer(36008,e);function pl(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const _U={[3042]:Ri,[32773]:(t,e)=>t.blendColor(...e),[32777]:"blendEquation",[34877]:"blendEquation",[32969]:"blendFunc",[32968]:"blendFunc",[32971]:"blendFunc",[32970]:"blendFunc",[3106]:(t,e)=>t.clearColor(...e),[3107]:(t,e)=>t.colorMask(...e),[2884]:Ri,[2885]:(t,e)=>t.cullFace(e),[2929]:Ri,[2931]:(t,e)=>t.clearDepth(e),[2932]:(t,e)=>t.depthFunc(e),[2928]:(t,e)=>t.depthRange(...e),[2930]:(t,e)=>t.depthMask(e),[3024]:Ri,[35723]:J1,[36006]:vU,[2886]:(t,e)=>t.frontFace(e),[33170]:J1,[2849]:(t,e)=>t.lineWidth(e),[32823]:Ri,[32824]:"polygonOffset",[10752]:"polygonOffset",[35977]:Ri,[32938]:"sampleCoverage",[32939]:"sampleCoverage",[3089]:Ri,[3088]:(t,e)=>t.scissor(...e),[2960]:Ri,[2961]:(t,e)=>t.clearStencil(e),[2968]:(t,e)=>t.stencilMaskSeparate(1028,e),[36005]:(t,e)=>t.stencilMaskSeparate(1029,e),[2962]:"stencilFuncFront",[2967]:"stencilFuncFront",[2963]:"stencilFuncFront",[34816]:"stencilFuncBack",[36003]:"stencilFuncBack",[36004]:"stencilFuncBack",[2964]:"stencilOpFront",[2965]:"stencilOpFront",[2966]:"stencilOpFront",[34817]:"stencilOpBack",[34818]:"stencilOpBack",[34819]:"stencilOpBack",[2978]:(t,e)=>t.viewport(...e),[3333]:kn,[3317]:kn,[37440]:kn,[37441]:kn,[37443]:kn,[3330]:kn,[3332]:kn,[3331]:kn,[36010]:yU,[3314]:kn,[32878]:kn,[3316]:kn,[3315]:kn,[32877]:kn,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=pl(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=pl(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=pl(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=pl(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=pl(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function Tt(t,e,n){return e[t]!==void 0?e[t]:n[t]}const bU={blendEquation:(t,e,n)=>t.blendEquationSeparate(Tt(32777,e,n),Tt(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Tt(32969,e,n),Tt(32968,e,n),Tt(32971,e,n),Tt(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Tt(32824,e,n),Tt(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Tt(32938,e,n),Tt(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Tt(2962,e,n),Tt(2967,e,n),Tt(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Tt(34816,e,n),Tt(36003,e,n),Tt(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Tt(2964,e,n),Tt(2965,e,n),Tt(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Tt(34817,e,n),Tt(34818,e,n),Tt(34819,e,n))},eb={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({[36006]:n,[36010]:n});case 36009:return t({[36006]:n});case 36008:return t({[36010]:n});default:return null}},blendColor:(t,e,n,r,i)=>t({[32773]:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({[32777]:e,[34877]:e}),blendEquationSeparate:(t,e,n)=>t({[32777]:e,[34877]:n}),blendFunc:(t,e,n)=>t({[32969]:e,[32968]:n,[32971]:e,[32970]:n}),blendFuncSeparate:(t,e,n,r,i)=>t({[32969]:e,[32968]:n,[32971]:r,[32970]:i}),clearColor:(t,e,n,r,i)=>t({[3106]:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({[2931]:e}),clearStencil:(t,e)=>t({[2961]:e}),colorMask:(t,e,n,r,i)=>t({[3107]:[e,n,r,i]}),cullFace:(t,e)=>t({[2885]:e}),depthFunc:(t,e)=>t({[2932]:e}),depthRange:(t,e,n)=>t({[2928]:new Float32Array([e,n])}),depthMask:(t,e)=>t({[2930]:e}),frontFace:(t,e)=>t({[2886]:e}),lineWidth:(t,e)=>t({[2849]:e}),polygonOffset:(t,e,n)=>t({[32824]:e,[10752]:n}),sampleCoverage:(t,e,n)=>t({[32938]:e,[32939]:n}),scissor:(t,e,n,r,i)=>t({[3088]:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({[2968]:e,[36005]:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({[2962]:e,[2967]:n,[2963]:r,[34816]:e,[36003]:n,[36004]:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:r,[e===1028?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({[2964]:e,[2965]:n,[2966]:r,[34817]:e,[34818]:n,[34819]:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:r,[e===1028?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({[2978]:[e,n,r,i]})},Or=(t,e)=>t.isEnabled(e),tb={[3042]:Or,[2884]:Or,[2929]:Or,[3024]:Or,[32823]:Or,[32926]:Or,[32928]:Or,[3089]:Or,[2960]:Or,[35977]:Or};function tA(t){for(const e in t)return!1;return!0}function wU(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}function nb(t,e){const n=t[e].bind(t);t[e]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in t.state.cache?t.state.enable?t.state.cache[i]:n(...arguments):n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function EU(t,e,n){const r=t[e].bind(t);t[e]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const{valueChanged:l,oldValue:u}=n(t.state._updateCache,...o);return l&&r(...o),u},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function SU(t){const e=t.useProgram.bind(t);t.useProgram=function(r){t.state.program!==r&&(e(r),t.state.program=r)}}class TU{constructor(e){let{copyState:n=!1,log:r=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?xU(e):Object.assign({},h0),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){dn(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];ui(this.gl,e),this.stateStack.pop()}_updateCache(e){let n=!1,r;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){dn(s!==void 0);const o=e[s],a=this.cache[s];wU(o,a)||(n=!0,r=a,i&&!(s in i)&&(i[s]=a),this.cache[s]=o)}return{valueChanged:n,oldValue:r}}}function nA(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:n=!0,copyState:r}=e;if(dn(r!==void 0),!t.state){const{polyfillContext:i}=globalThis;i&&i(t),t.state=new TU(t,{copyState:r}),SU(t);for(const s in eb){const o=eb[s];EU(t,s,o)}nb(t,"getParameter"),nb(t,"isEnabled")}return t.state.enable=n,t}function AU(t){t.state||nA(t,{copyState:!1}),t.state.push()}function rb(t){dn(t.state),t.state.pop()}function ui(t,e){if(dn(Zh(t),"setParameters requires a WebGL context"),tA(e))return;const n={};for(const i in e){const s=Number(i),o=_U[i];o&&(typeof o=="string"?n[o]=!0:o(t,e[i],s))}const r=t.state&&t.state.cache;if(r)for(const i in n){const s=bU[i];s(t,e,r)}}function xU(t,e){if(e=e||h0,typeof e=="number"){const i=e,s=tb[i];return s?s(t,i):t.getParameter(i)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const i of n){const s=tb[i];r[i]=s?s(t,Number(i)):t.getParameter(Number(i))}return r}function RU(t){ui(t,h0)}function tr(t,e,n){if(tA(e))return n(t);const{nocatch:r=!0}=e;AU(t),ui(t,e);let i;if(r)i=n(t),rb(t);else try{i=n(t)}finally{rb(t)}return i}function Aa(t){const{luma:e}=t;if(t.canvas&&e){const{clientWidth:n}=e.canvasSizeInfo;return n?t.drawingBufferWidth/n:1}return 1}function Mp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=Aa(t),i=t.drawingBufferWidth,s=t.drawingBufferHeight;return PU(e,r,i,s,n)}function CU(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function PU(t,e,n,r,i){const s=ib(t[0],e,n);let o=sb(t[1],e,r,i),a=ib(t[0]+1,e,n);const l=a===n-1?a:a-1;a=sb(t[1]+1,e,r,i);let u;return i?(a=a===0?a:a+1,u=o,o=a):u=a===r-1?a:a-1,{x:s,y:o,width:Math.max(l-s+1,1),height:Math.max(u-o+1,1)}}function ib(t,e,n){return Math.min(Math.round(t*e),n-1)}function sb(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const d0=pi(),MU=d0&&typeof document<"u",rA={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function iA(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};dn(d0,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},rA,t);const{width:e,height:n}=t;function r(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}t.onError=r;let i;const{canvas:s}=t,o=IU({canvas:s,width:e,height:n,onError:r});return i=OU(o,t),i?(i=p0(i,t),NU(i),i):null}function p0(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||DU(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},rA,e);const{manageState:n,debug:r}=e;return n&&nA(t,{copyState:!1,log:function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return we.log(1,...s)()}}),d0&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),we.level=Math.max(we.level,1)):we.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function LU(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),i=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),s=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:s||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function kU(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.canvas){const r=CU(e.useDevicePixels);FU(t,r,e);return}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}function OU(t,e){const{onError:n}=e;let r=null;const i=l=>r=l.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),s&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(o&&!s?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function IU(t){let{canvas:e,width:n=800,height:r=600,onError:i}=t,s;return typeof e=="string"?(MU&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(e,"' before page was loaded")),s=document.getElementById(e)):e?s=e:(s=document.createElement("canvas"),s.id="lumagl-canvas",s.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",s.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",document.body.insertBefore(s,document.body.firstChild)),s}function NU(t){const e=$e(t)?"WebGL2":"WebGL1",n=LU(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";we.info(1,"".concat(e).concat(i," context ").concat(r))()}function DU(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}function FU(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;(!r||!i)&&(we.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const s=t.luma.canvasSizeInfo;if(s.clientWidth!==r||s.clientHeight!==i||s.devicePixelRatio!==e){let o=e;const a=Math.floor(r*o),l=Math.floor(i*o);t.canvas.width=a,t.canvas.height=l,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==l)&&(we.warn("Device pixel ratio clamped")(),o=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*o),t.canvas.height=Math.floor(i*o)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}const Wl="8.5.17",UU="set luma.log.level=1 (or higher) to trace rendering";class VU{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new a0({id:e})),this.stats.get(e)}}const Os=new VU;if(globalThis.luma&&globalThis.luma.VERSION!==Wl)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Wl));globalThis.luma||(pi()&&we.log(1,"luma.gl ".concat(Wl," - ").concat(UU))(),globalThis.luma=globalThis.luma||{VERSION:Wl,version:Wl,log:we,stats:Os,globals:{modules:{},nodeIO:{}}});function BU(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function zU(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}function ge(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function Lp(t,e){if(typeof e!="string")return e;const n=Number(e);if(!isNaN(n))return n;e=e.replace(/^.*\./,"");const r=t[e];return ge(r!==void 0,"Accessing undefined constant GL.".concat(e)),r}function Qi(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}const kp={};function Ws(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";kp[t]=kp[t]||1;const e=kp[t]++;return"".concat(t,"-").concat(e)}function ob(t){return ge(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function xa(t){let e=!0;for(const n in t){e=!1;break}return e}function sA(t,e,n,r){const i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(t);r.forEach(o=>{s.methodName||(s[o]=()=>{throw we.removed("Calling removed method ".concat(e,".").concat(o,": "),i)(),new Error(o)})})}const Lo="Resource subclass must define virtual methods";class gi{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Kh(e);const{id:r,userData:i={}}=n;this.gl=e,this.gl2=e,this.id=r||Ws(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(r=>r.delete()),this}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof e!="function")return this._bindHandle(e),this;let n;return this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e=Lp(this.gl,e),ge(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=$e(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const a=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return s?l:a}}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:n,keys:r}=e,i=this.constructor.PARAMETERS||{},s=$e(this.gl),o={},a=n||Object.keys(i);for(const l of a){const u=i[l];if(u&&(!("webgl2"in u)||s)&&(!("extension"in u)||this.gl.getExtension(u.extension))){const f=r?Qi(this.gl,l):l;o[f]=this.getParameter(l,e),r&&u.type==="GLenum"&&(o[f]=Qi(this.gl,o[f]))}}return o}setParameter(e,n){e=Lp(this.gl,e),ge(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=$e(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(n=Lp(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,r){return sA(this,e,n,r)}initialize(e){}_createHandle(){throw new Error(Lo)}_deleteHandle(){throw new Error(Lo)}_bindHandle(e){throw new Error(Lo)}_getOptsFromHandle(){throw new Error(Lo)}_getParameter(e,n){throw new Error(Lo)}_setParameter(e,n){throw new Error(Lo)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=Os.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];Os.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id)}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const i=Os.get("Memory Usage".concat(r));i.get("GPU Memory").addCount(e),i.get("".concat(n," Memory")).addCount(e),this.byteLength=e}_trackDeallocatedMemory(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id)}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=Os.get("Memory Usage".concat(n));r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(e," Memory")).subtractCount(this.byteLength),this.byteLength=0}}const jU="Failed to deduce GL constant from typed array";function gm(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(jU)}}function hu(t){let{clamped:e=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function $U(t){let{data:e,width:n,height:r,bytesPerPixel:i=4,temp:s}=t;const o=n*i;s=s||new Uint8Array(o);for(let a=0;a<r/2;++a){const l=a*o,u=(r-a-1)*o;s.set(e.subarray(l,l+o)),e.copyWithin(l,u,u+o),e.set(s,u)}}function GU(t){let{data:e,width:n,height:r}=t;const i=Math.round(n/2),s=Math.round(r/2),o=new Uint8Array(i*s*4);for(let a=0;a<s;a++)for(let l=0;l<i;l++)for(let u=0;u<4;u++)o[(a*i+l)*4+u]=e[(a*2*n+l*2)*4+u];return{data:o,width:i,height:s}}function mm(t,e,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:s={}}=n;for(const a in r)if(a in e){const u=r[a]?"".concat(t,".").concat(r[a]):"N/A";we.removed("".concat(t,".").concat(a),u)()}for(const a in i)if(a in e){const l=i[a];we.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(l))()}let o=null;for(const a in s)if(a in e){const l=s[a];we.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(l))(),o=o||Object.assign({},e),o[l]=e[a],delete o[a]}return o||e}const HU={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},WU={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Fn{static getBytesPerElement(e){return hu(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return ge(e.size),hu(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return new Fn(HU,...n)}constructor(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Fn.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Fn.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=mm("Accessor",e,WU),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}}const ab=10,oA={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},XU={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:oA},qU={removedProps:oA};class st extends gi{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Fn.getBytesPerElement(e))}getVertexCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Fn.getBytesPerVertex(e))}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=mm("Buffer",e,XU),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=mm("Buffer",e,qU),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new Fn(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:r=0,srcOffset:i=0}=e,s=e.byteLength||e.length;ge(n);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),i!==0||s!==void 0?(gn(this.gl),this.gl.bufferSubData(this.target,r,n,i,s)):this.gl.bufferSubData(o,r,n),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:r=0,writeOffset:i=0,size:s}=e;const{gl:o}=this;return gn(o),o.bindBuffer(36662,n.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,r,i,s),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:r=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};gn(this.gl);const s=hu(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(n),a=r;let l,u;e?(u=e.length,l=u-a):(l=Math.min(o,i||o),u=a+l);const c=Math.min(o,l);return i=i||c,ge(i<=c),e=e||new s(u),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,r,i),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:r=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?i!==void 0?this.gl.bindBufferRange(e,n,this.handle,r,i):(ge(r===0),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(ab,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.byteLength+n;ge(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,this.usage),this.gl.bufferSubData(i,n,e),this.gl.bindBuffer(i,null),this.debugData=e.slice(0,ab),this.bytesUsed=r,this._trackAllocatedMemory(r);const s=gm(e);return ge(s),this.setAccessor(new Fn(this.accessor,{type:s})),this}_setByteLength(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;ge(e>=0),this._trackDeallocatedMemory();let r=e;e===0&&(r=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,n),this.gl.bindBuffer(i,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const n=hu(this.accessor.type||5126,{clamped:!1}),r=e/n.BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(e){this.accessor.type||this.setAccessor(new Fn(this.accessor,{type:gm(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return we.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return we.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return we.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return we.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Fn(this.accessor,e),this}}const g0={[6407]:{dataFormat:6407,types:[5121,33635]},[6408]:{dataFormat:6408,types:[5121,32819,32820]},[6406]:{dataFormat:6406,types:[5121]},[6409]:{dataFormat:6409,types:[5121]},[6410]:{dataFormat:6410,types:[5121]},[33326]:{dataFormat:6403,types:[5126],gl2:!0},[33328]:{dataFormat:33319,types:[5126],gl2:!0},[34837]:{dataFormat:6407,types:[5126],gl2:!0},[34836]:{dataFormat:6408,types:[5126],gl2:!0}},aA={[6403]:1,[36244]:1,[33319]:2,[33320]:2,[6407]:3,[36248]:3,[6408]:4,[36249]:4,[6402]:1,[34041]:1,[6406]:1,[6409]:1,[6410]:2},lA={[5126]:4,[5125]:4,[5124]:4,[5123]:2,[5122]:2,[5131]:2,[5120]:1,[5121]:1};function YU(t,e){const n=g0[e];if(!n)return!1;if(n.gl1===void 0&&n.gl2===void 0)return!0;const r=$e(t)&&n.gl2||n.gl1;return typeof r=="string"?t.getExtension(r):r}function ZU(t,e){const n=g0[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}const KU=[9729,9728],lb=globalThis.WebGLBuffer||function(){};class Ra extends gi{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:r,linearFiltering:i}=n;let s=!0;return r&&(s=s&&YU(e,r),s=s&&(!i||ZU(e,r))),s}constructor(e,n){const{id:r=Ws("texture"),handle:i,target:s}=n;super(e,{id:r,handle:i}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(v=>this.initialize(Object.assign({},e,{pixels:v,data:v}))),this;const r=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(r&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:i=null,format:s=6408,border:o=0,recreate:a=!1,parameters:l={},pixelStore:u={},textureUnit:c=void 0}=e;n||(n=i);let{width:f,height:d,dataFormat:g,type:y,compressed:m=!1,mipmaps:x=!0}=e;const{depth:S=0}=e;return{width:f,height:d,compressed:m,dataFormat:g,type:y}=this._deduceParameters({format:s,type:y,dataFormat:g,compressed:m,data:n,width:f,height:d}),this.width=f,this.height=d,this.depth=S,this.format=s,this.type=y,this.dataFormat=g,this.border=o,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),x&&this._isNPOT()&&(we.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),x=!1,this._updateForNPOT(l)),this.mipmaps=x,this.setImageData({data:n,width:f,height:d,depth:S,format:s,type:y,dataFormat:g,border:o,mipmaps:x,parameters:u,compressed:m}),x&&this.generateMipmap(),this.setParameters(l),a&&(this.data=n),r&&(this._video={video:n,parameters:l,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:r}=this._video;if(r===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:r,mipmaps:i=!1}=e;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(we.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),tr(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:r=null,level:i=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:l={}}=e;let{data:u=null,type:c=this.type,width:f=this.width,height:d=this.height,dataFormat:g=this.dataFormat,compressed:y=!1}=e;u||(u=r),{type:c,dataFormat:g,compressed:y,width:f,height:d}=this._deduceParameters({format:s,type:c,dataFormat:g,compressed:y,data:u,width:f,height:d});const{gl:m}=this;m.bindTexture(this.target,this.handle);let x=null;({data:u,dataType:x}=this._getDataType({data:u,compressed:y}));let S,v=0;if(tr(this.gl,l,()=>{switch(x){case"null":m.texImage2D(n,i,s,f,d,o,g,c,u);break;case"typed-array":m.texImage2D(n,i,s,f,d,o,g,c,u,a);break;case"buffer":S=gn(m),S.bindBuffer(35052,u.handle||u),S.texImage2D(n,i,s,f,d,o,g,c,a),S.bindBuffer(35052,null);break;case"browser-object":$e(m)?m.texImage2D(n,i,s,f,d,o,g,c,u):m.texImage2D(n,i,s,g,c,u);break;case"compressed":for(const[w,R]of u.entries())m.compressedTexImage2D(n,w,R.format,R.width,R.height,o,R.data),v+=R.levelSize;break;default:ge(!1,"Unknown image data type")}}),x==="compressed")this._trackAllocatedMemory(v,"Texture");else if(u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const w=aA[this.dataFormat]||4,R=lA[this.type]||1;this._trackAllocatedMemory(this.width*this.height*w*R,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:r=null,data:i=null,x:s=0,y:o=0,width:a=this.width,height:l=this.height,level:u=0,format:c=this.format,type:f=this.type,dataFormat:d=this.dataFormat,compressed:g=!1,offset:y=0,border:m=this.border,parameters:x={}}=e;if({type:f,dataFormat:d,compressed:g,width:a,height:l}=this._deduceParameters({format:c,type:f,dataFormat:d,compressed:g,data:i,width:a,height:l}),ge(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=r),i&&i.data){const S=i;i=S.data,a=S.shape[0],l=S.shape[1]}i instanceof st&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),tr(this.gl,x,()=>{if(g)this.gl.compressedTexSubImage2D(n,u,s,o,a,l,c,i);else if(i===null)this.gl.texSubImage2D(n,u,s,o,a,l,d,f,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(n,u,s,o,a,l,d,f,i,y);else if(i instanceof lb){const S=gn(this.gl);S.bindBuffer(35052,i),S.texSubImage2D(n,u,s,o,a,l,d,f,y),S.bindBuffer(35052,null)}else $e(this.gl)?gn(this.gl).texSubImage2D(n,u,s,o,a,l,d,f,i):this.gl.texSubImage2D(n,u,s,o,d,f,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return we.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:r=!1}=e;return r?{data:n,dataType:"compressed"}:n===null?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof st?{data:n.handle,dataType:"buffer"}:n instanceof lb?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:r}=e;let{width:i,height:s,dataFormat:o,type:a,compressed:l}=e;const u=g0[n];return o=o||u&&u.dataFormat,a=a||u&&u.types[0],l=l||u&&u.compressed,{width:i,height:s}=this._deduceImageSize(r,i,s),{dataFormat:o,type:a,compressed:l,width:i,height:s,format:n,data:r}}_deduceImageSize(e,n,r){let i;return typeof ImageData<"u"&&e instanceof ImageData?i={width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?i={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement?i={width:e.width,height:e.height}:typeof ImageBitmap<"u"&&e instanceof ImageBitmap?i={width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?i={width:e.videoWidth,height:e.videoHeight}:e?i={width:n,height:r}:i={width:n>=0?n:1,height:r>=0?r:1},ge(i,"Could not deduced texture size"),ge(n===void 0||i.width===n,"Deduced texture width does not match supplied width"),ge(r===void 0||i.height===r,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:ge(!1);break;default:this.gl.texParameteri(this.target,e,n);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return $e(this.gl)||!this.width||!this.height?!1:!ob(this.width)||!ob(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:KU.indexOf(n)===-1&&(n=9729);break;case 10242:case 10243:n!==33071&&(n=33071);break}return n}}let QU="";function JU(t,e){return ge(typeof t=="string"),t=QU+t,new Promise((n,r)=>{try{const i=new Image;i.onload=()=>n(i),i.onerror=()=>r(new Error("Could not load image ".concat(t,"."))),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(i){r(i)}})}class jn extends Ra{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return Ra.isSupported(e,n)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Kh(e),(n instanceof Promise||typeof n=="string")&&(n={data:n}),typeof n.data=="string"&&(n=Object.assign({},n,{data:JU(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const vm=[34069,34070,34071,34072,34073,34074];class uA extends Ra{get[Symbol.toStringTag](){return"TextureCube"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Kh(e),super(e,Object.assign({},n,{target:34067})),this.initialize(n),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:n=!0,parameters:r={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,n&&this.generateMipmap(e),this.setParameters(r)}),this}subImage(e){let{face:n,data:r,x:i=0,y:s=0,mipmapLevel:o=0}=e;return this._subImage({target:n,data:r,x:i,y:s,mipmapLevel:o})}async setCubeMapImageData(e){let{width:n,height:r,pixels:i,data:s,border:o=0,format:a=6408,type:l=5121}=e;const{gl:u}=this,c=i||s,f=await Promise.all(vm.map(d=>{const g=c[d];return Promise.all(Array.isArray(g)?g:[g])}));this.bind(),vm.forEach((d,g)=>{f[g].length>1&&this.opts.mipmaps!==!1&&we.warn("".concat(this.id," has mipmap and multiple LODs."))(),f[g].forEach((y,m)=>{n&&r?u.texImage2D(d,m,a,n,r,o,a,l,y):u.texImage2D(d,m,a,a,l,y)})}),this.unbind()}setImageDataForFace(e){const{face:n,width:r,height:i,pixels:s,data:o,border:a=0,format:l=6408,type:u=5121}=e,{gl:c}=this,f=s||o;return this.bind(),f instanceof Promise?f.then(d=>this.setImageDataForFace(Object.assign({},e,{face:n,data:d,pixels:d}))):this.width||this.height?c.texImage2D(n,0,l,r,i,a,l,u,f):c.texImage2D(n,0,l,l,u,f),this}}uA.FACES=vm;class eV extends Ra{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return $e(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};gn(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:r=6408,width:i,height:s,depth:o=1,border:a=0,format:l,type:u=5121,offset:c=0,data:f,parameters:d={}}=e;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),tr(this.gl,d,()=>{ArrayBuffer.isView(f)&&this.gl.texImage3D(this.target,n,r,i,s,o,a,l,u,f),f instanceof st&&(this.gl.bindBuffer(35052,f.handle),this.gl.texImage3D(this.target,n,r,i,s,o,a,l,u,c))}),f&&f.byteLength)this._trackAllocatedMemory(f.byteLength,"Texture");else{const g=aA[this.dataFormat]||4,y=lA[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*g*y,"Texture")}return this.loaded=!0,this}}const bs="EXT_color_buffer_float",ub={[33189]:{bpp:2},[33190]:{gl2:!0,bpp:3},[36012]:{gl2:!0,bpp:4},[36168]:{bpp:1},[34041]:{bpp:4},[35056]:{gl2:!0,bpp:4},[36013]:{gl2:!0,bpp:5},[32854]:{bpp:2},[36194]:{bpp:2},[32855]:{bpp:2},[33321]:{gl2:!0,bpp:1},[33330]:{gl2:!0,bpp:1},[33329]:{gl2:!0,bpp:1},[33332]:{gl2:!0,bpp:2},[33331]:{gl2:!0,bpp:2},[33334]:{gl2:!0,bpp:4},[33333]:{gl2:!0,bpp:4},[33323]:{gl2:!0,bpp:2},[33336]:{gl2:!0,bpp:2},[33335]:{gl2:!0,bpp:2},[33338]:{gl2:!0,bpp:4},[33337]:{gl2:!0,bpp:4},[33340]:{gl2:!0,bpp:8},[33339]:{gl2:!0,bpp:8},[32849]:{gl2:!0,bpp:3},[32856]:{gl2:!0,bpp:4},[32857]:{gl2:!0,bpp:4},[36220]:{gl2:!0,bpp:4},[36238]:{gl2:!0,bpp:4},[36975]:{gl2:!0,bpp:4},[36214]:{gl2:!0,bpp:8},[36232]:{gl2:!0,bpp:8},[36226]:{gl2:!0,bpp:16},[36208]:{gl2:!0,bpp:16},[33325]:{gl2:bs,bpp:2},[33327]:{gl2:bs,bpp:4},[34842]:{gl2:bs,bpp:8},[33326]:{gl2:bs,bpp:4},[33328]:{gl2:bs,bpp:8},[34836]:{gl2:bs,bpp:16},[35898]:{gl2:bs,bpp:4}};function tV(t,e,n){const r=n[e];if(!r)return!1;const i=$e(t)&&r.gl2||r.gl1;return typeof i=="string"?t.getExtension(i):i}class Qo extends gi{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!n||tV(e,n,ub)}static getSamplesForFormat(e,n){let{format:r}=n;return e.getInternalformatParameter(36161,r,32937)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:r=1,height:i=1,samples:s=0}=e;return ge(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),s!==0&&$e(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,n,r,i):this.gl.renderbufferStorage(36161,n,r,i),this.format=n,this.width=r,this.height=i,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*ub[this.format].bpp),this}resize(e){let{width:n,height:r}=e;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const nV=256,rV=1024,iV=16384,cb=6144,fb=6145,hb=6146,db=34041,cA="clear: bad arguments";function m0(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s={};e&&(s.framebuffer=e);let o=0;n&&(o|=iV,n!==!0&&(s.clearColor=n)),r&&(o|=nV,r!==!0&&(s.clearDepth=r)),i&&(o|=rV,r!==!0&&(s.clearStencil=r)),ge(o!==0,cA),tr(t,s,()=>{t.clear(o)})}function sV(t){let{framebuffer:e=null,buffer:n=cb,drawBuffer:r=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};gn(t),tr(t,{framebuffer:e},()=>{switch(n){case cb:switch(i.constructor){case Int32Array:t.clearBufferiv(n,r,i);break;case Uint32Array:t.clearBufferuiv(n,r,i);break;case Float32Array:default:t.clearBufferfv(n,r,i)}break;case fb:t.clearBufferfv(fb,0,[i]);break;case hb:t.clearBufferiv(hb,0,[i]);break;case db:const[s,o]=i;t.clearBufferfi(db,0,s,o);break;default:ge(!1,cA)}})}function oV(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return ge(!1),0}}function Qh(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:l,sourceType:u}=e;const{framebuffer:c,deleteFramebuffer:f}=aV(t);ge(c);const{gl:d,handle:g,attachments:y}=c;a=a||c.width,l=l||c.height,s===36064&&g===null&&(s=1028),ge(y[s]),u=u||y[s].type,o=lV(o,u,i,a,l),u=u||gm(o);const m=d.bindFramebuffer(36160,g);return d.readPixels(n,r,a,l,i,u,o),d.bindFramebuffer(36160,m||null),f&&c.delete(),o}function pb(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=Qh(t,{sourceAttachment:e}),{width:i,height:s}=t;for(;s>n;)({data:r,width:i,height:s}=GU({data:r,width:i,height:s}));$U({data:r,width:i,height:s});const o=document.createElement("canvas");o.width=i,o.height=s;const a=o.getContext("2d"),l=a.createImageData(i,s);return l.data.set(r),a.putImageData(l,0,0),o.toDataURL()}function aV(t){return t instanceof Ot?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:yV(t),deleteFramebuffer:!0}}function lV(t,e,n,r,i){if(t)return t;e=e||5121;const s=hu(e,{clamped:!1}),o=oV(n);return new s(r*i*o)}const gt={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function uV(t){const e=new jn(t,{format:6408,type:5126,dataFormat:6408}),n=new Ot(t,{id:"test-framebuffer",check:!1,attachments:{[36064]:e}}),r=n.getStatus();return e.delete(),n.delete(),r===36053}const fA={[gt.WEBGL2]:[!1,!0],[gt.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[gt.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[gt.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[gt.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[gt.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[gt.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[gt.FLOAT_BLEND]:["EXT_float_blend"],[gt.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[gt.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[gt.TEXTURE_FLOAT]:["OES_texture_float",!0],[gt.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[gt.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[gt.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[gt.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[gt.COLOR_ATTACHMENT_RGBA32F]:[uV,"EXT_color_buffer_float"],[gt.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[gt.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[gt.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[gt.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[gt.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[gt.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},cV=2;function fV(t,e){return hA(t,e)}function hA(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>dA(t,n))}function hV(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in fA)t.luma.caps[e]===void 0&&(t.luma.caps[e]=dA(t,e));return t.luma.caps}function dA(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=dV(t,e)),t.luma.caps[e]||we.log(cV,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}function dV(t,e){const n=fA[e];ge(n,e);let r;const i=$e(t)&&n[1]||n[0];if(typeof i=="function")r=i(t);else if(Array.isArray(i)){r=!0;for(const s of i)r=r&&Boolean(t.getExtension(s))}else typeof i=="string"?r=Boolean(t.getExtension(i)):typeof i=="boolean"?r=i:ge(!1);return r}const gb="Multiple render targets not supported";class Ot extends gi{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:r,colorBufferHalfFloat:i}=n;let s=!0;return r&&(s=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),i&&(s=s&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new Ot(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=gn(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=gn(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:r=1,attachments:i=null,color:s=!0,depth:o=!0,stencil:a=!1,check:l=!0,readBuffer:u=void 0,drawBuffers:c=void 0}=e;if(ge(n>=0&&r>=0,"Width and height need to be integers"),this.width=n,this.height=r,i)for(const f in i){const d=i[f];(Array.isArray(d)?d[0]:d).resize({width:n,height:r})}else i=this._createDefaultAttachments(s,o,a,n,r);this.update({clearAttachments:!0,attachments:i,readBuffer:u,drawBuffers:c}),i&&l&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:r,drawBuffers:i,clearAttachments:s=!1,resizeAttachments:o=!0}=e;this.attach(n,{clearAttachments:s,resizeAttachments:o});const{gl:a}=this,l=a.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),a.bindFramebuffer(36160,l||null),this}resize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:n,height:r}=e;if(this.handle===null)return ge(n===void 0&&r===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;n===void 0&&(n=this.gl.drawingBufferWidth),r===void 0&&(r=this.gl.drawingBufferHeight),n!==this.width&&r!==this.height&&we.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(r))();for(const i in this.attachments)this.attachments[i].resize({width:n,height:r});return this.width=n,this.height=r,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:r=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};n&&Object.keys(this.attachments).forEach(o=>{i[o]=null}),Object.assign(i,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in i){ge(o!==void 0,"Misspelled framebuffer binding point?");const a=Number(o),l=i[a];let u=l;if(!u)this._unattach(a);else if(u instanceof Qo)this._attachRenderbuffer({attachment:a,renderbuffer:u});else if(Array.isArray(l)){const[c,f=0,d=0]=l;u=c,this._attachTexture({attachment:a,texture:c,layer:f,level:d})}else this._attachTexture({attachment:a,texture:u,layer:0,level:0});r&&u&&u.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const e=this.getStatus();if(e!==36053)throw new Error(gV(e));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),r}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:n,depth:r,stencil:i,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(n||r||i)&&m0(this.gl,{color:n,depth:r,stencil:i}),s.forEach((a,l)=>{sV(this.gl,{drawBuffer:l,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return we.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return we.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return we.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return we.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return we.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return we.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:r=0,y:i=0,width:s,height:o}=e;const a=gn(this.gl),l=a.bindFramebuffer(36008,this.handle);return r===0&&i===0&&s===void 0&&o===void 0?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,r,i,s,o),a.bindFramebuffer(36008,l),this}getAttachmentParameter(e,n,r){let i=this._getAttachmentParameterFallback(n);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),r&&i>1e3&&(i=Qi(this.gl,i)),i}getAttachmentParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const s of r){const o=n?Qi(this.gl,s):s;i[o]=this.getAttachmentParameter(e,s,n)}return i}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=Object.keys(this.attachments),r={};for(const i of n){const s=Number(i),o=e?Qi(this.gl,s):s;r[o]=this.getAttachmentParameters(s,e)}return r}show(){return typeof window<"u"&&window.open(pb(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e>we.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const r=pb(this,{targetMaxHeight:100});return we.image({logLevel:e,message:n,image:r},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,r,i,s){let o=null;return e&&(o=o||{},o[36064]=new jn(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:s,mipmaps:!1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.ownResources.push(o[36064])),n&&r?(o=o||{},o[33306]=new Qo(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(o[33306])):n?(o=o||{},o[36096]=new Qo(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:s}),this.ownResources.push(o[36096])):r&&ge(!1),o}_unattach(e){const n=this.attachments[e];!n||(n instanceof Qo?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:r}=e;const{gl:i}=this;i.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}_attachTexture(e){let{attachment:n=36064,texture:r,layer:i,level:s}=e;const{gl:o}=this;switch(o.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:gn(o).framebufferTextureLayer(36160,n,r.target,s,i);break;case 34067:const l=pV(i);o.framebufferTexture2D(36160,n,l,r.handle,s);break;case 3553:o.framebufferTexture2D(36160,n,3553,r.handle,s);break;default:ge(!1,"Illegal texture type")}o.bindTexture(r.target,null),this.attachments[n]=r}_setReadBuffer(e){const n=$6(this.gl);n?n.readBuffer(e):ge(e===36064||e===1029,gb),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,r=gn(n);if(r)r.drawBuffers(e);else{const i=n.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(e):ge(e.length===1&&(e[0]===36064||e[0]===1029),gb)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=hV(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return!n.WEBGL2&&!n.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}function pV(t){return t<34069?t+34069:t}function gV(t){return(Ot.STATUS||{})[t]||"Framebuffer error ".concat(t)}const mV=[36049,36048,33296,33298,33299,33300,33301,33302,33303];Ot.ATTACHMENT_PARAMETERS=mV;function vV(t,e){ge(t instanceof jn||t instanceof uA||t instanceof eV);const n=t.constructor,{gl:r,width:i,height:s,format:o,type:a,dataFormat:l,border:u,mipmaps:c}=t,f=Object.assign({width:i,height:s,format:o,type:a,dataFormat:l,border:u,mipmaps:c},e);return new n(r,f)}function yV(t,e){const{gl:n,width:r,height:i,id:s}=t;return new Ot(n,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:r,height:i,attachments:{[36064]:t}}))}function af(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}const _V=35632,bV=35633;function wV(t){switch(t){case _V:return"fragment";case bV:return"vertex";default:return"unknown type"}}function EV(t,e,n,r){const i=t.split(/\r?\n/),s={},o={},a=r||af(e)||"(unnamed)",l="".concat(wV(n)," shader ").concat(a);for(let c=0;c<i.length;c++){const f=i[c];if(f.length<=1)continue;const d=f.split(":"),g=d[0],y=parseInt(d[2],10);if(isNaN(y))throw new Error("GLSL compilation error in ".concat(l,": ").concat(t));g!=="WARNING"?s[y]=f:o[y]=f}const u=SV(e);return{shaderName:l,errors:mb(s,u),warnings:mb(o,u)}}function mb(t,e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if(!(!t[r+3]&&!t[r+2]&&!t[r+1])&&(n+="".concat(i,`
`),t[r+1])){const s=t[r+1],o=s.split(":",3),a=o[0],l=parseInt(o[1],10)||0,u=s.substring(o.join(":").length+1).trim();n+=pA("^^^ ".concat(a,": ").concat(u,`

`),l)}}return n}function SV(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((s,o)=>{const a=String(o+e),l=a.length;return pA(a,i-l)+n+s})}function pA(t,e){let n="";for(let r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}function gA(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&n[0]==="#version"){const r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}const TV="Shader: GLSL source code must be a JavaScript string";class du extends gi{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return ge(!1),"unknown"}}constructor(e,n){Kh(e),ge(typeof n.source=="string",TV);const r=af(n.source,null)||n.id||Ws("unnamed ".concat(du.getTypeName(n.shaderType)));super(e,{id:r}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const r=af(n,null);r&&(this.id=Ws(r)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(du.getTypeName(this.shaderType),":").concat(this.id)}getName(){return af(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(e.startsWith("#version ")||(e=`#version 100
`.concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const r=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:s,warnings:o}=EV(r,this.source,this.shaderType,this.id);throw we.error("GLSL compilation errors in ".concat(i,`
`).concat(s))(),we.warn("GLSL compilation warnings in ".concat(i,`
`).concat(o))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class Op extends du{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class Ip extends du{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const AV={[5126]:ht.bind(null,"uniform1fv",On,1,rn),[35664]:ht.bind(null,"uniform2fv",On,2,rn),[35665]:ht.bind(null,"uniform3fv",On,3,rn),[35666]:ht.bind(null,"uniform4fv",On,4,rn),[5124]:ht.bind(null,"uniform1iv",Ci,1,rn),[35667]:ht.bind(null,"uniform2iv",Ci,2,rn),[35668]:ht.bind(null,"uniform3iv",Ci,3,rn),[35669]:ht.bind(null,"uniform4iv",Ci,4,rn),[35670]:ht.bind(null,"uniform1iv",Ci,1,rn),[35671]:ht.bind(null,"uniform2iv",Ci,2,rn),[35672]:ht.bind(null,"uniform3iv",Ci,3,rn),[35673]:ht.bind(null,"uniform4iv",Ci,4,rn),[35674]:ht.bind(null,"uniformMatrix2fv",On,4,Zr),[35675]:ht.bind(null,"uniformMatrix3fv",On,9,Zr),[35676]:ht.bind(null,"uniformMatrix4fv",On,16,Zr),[35678]:qt,[35680]:qt,[5125]:ht.bind(null,"uniform1uiv",Cc,1,rn),[36294]:ht.bind(null,"uniform2uiv",Cc,2,rn),[36295]:ht.bind(null,"uniform3uiv",Cc,3,rn),[36296]:ht.bind(null,"uniform4uiv",Cc,4,rn),[35685]:ht.bind(null,"uniformMatrix2x3fv",On,6,Zr),[35686]:ht.bind(null,"uniformMatrix2x4fv",On,8,Zr),[35687]:ht.bind(null,"uniformMatrix3x2fv",On,6,Zr),[35688]:ht.bind(null,"uniformMatrix3x4fv",On,12,Zr),[35689]:ht.bind(null,"uniformMatrix4x2fv",On,8,Zr),[35690]:ht.bind(null,"uniformMatrix4x3fv",On,12,Zr),[35678]:qt,[35680]:qt,[35679]:qt,[35682]:qt,[36289]:qt,[36292]:qt,[36293]:qt,[36298]:qt,[36299]:qt,[36300]:qt,[36303]:qt,[36306]:qt,[36307]:qt,[36308]:qt,[36311]:qt},xV={},RV={},CV={},vb=[0];function v0(t,e,n,r){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(vb[0]=t,t=vb);const i=t.length;if(i%e&&we.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let s=r[i];s||(s=new n(i),r[i]=s);for(let o=0;o<i;o++)s[o]=t[o];return s}function On(t,e){return v0(t,e,Float32Array,xV)}function Ci(t,e){return v0(t,e,Int32Array,RV)}function Cc(t,e){return v0(t,e,Uint32Array,CV)}function yb(t,e,n){const r=AV[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function PV(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/,n=t.match(e);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:Boolean(n[2])}}function MV(t,e,n){for(const r in t){const i=t[r];if((!n||Boolean(n[r]))&&!LV(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}return!0}function LV(t){return Array.isArray(t)||ArrayBuffer.isView(t)?OV(t):isFinite(t)||t===!0||t===!1||t instanceof Ra||t instanceof Qo?!0:t instanceof Ot?Boolean(t.texture):!1}function kV(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let i=0,s=n.length;i<s;++i)r[i]=n[i]}else t[e]=n.slice();else t[e]=n}function OV(t){if(t.length===0)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}function qt(){let t=null;return(e,n,r)=>{const i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function ht(t,e,n,r){let i=null,s=null;return(o,a,l)=>{const u=e(l,n),c=u.length;let f=!1;if(i===null)i=new Float32Array(c),s=c,f=!0;else{ge(s===c,"Uniform length cannot change.");for(let d=0;d<c;++d)if(u[d]!==i[d]){f=!0;break}}return f&&(r(o,t,a,u),i.set(u)),f}}function rn(t,e,n,r){t[e](n,r)}function Zr(t,e,n,r){t[e](n,!1,r)}const IV=5120,NV=5121,DV=5122,FV=5123,_b=0,Pc=1,UV=2,VV=3,Mc=4,BV=5,zV=6,Nt=5126,jV=35664,$V=35665,GV=35666,gl=5124,HV=35667,WV=35668,XV=35669,ml=5125,qV=36294,YV=36295,ZV=36296,KV=35670,QV=35671,JV=35672,eB=35673,tB=35674,nB=35675,rB=35676,iB=35685,sB=35686,oB=35687,aB=35688,lB=35689,uB=35690,ym={[Nt]:[Nt,1,"float"],[jV]:[Nt,2,"vec2"],[$V]:[Nt,3,"vec3"],[GV]:[Nt,4,"vec4"],[gl]:[gl,1,"int"],[HV]:[gl,2,"ivec2"],[WV]:[gl,3,"ivec3"],[XV]:[gl,4,"ivec4"],[ml]:[ml,1,"uint"],[qV]:[ml,2,"uvec2"],[YV]:[ml,3,"uvec3"],[ZV]:[ml,4,"uvec4"],[KV]:[Nt,1,"bool"],[QV]:[Nt,2,"bvec2"],[JV]:[Nt,3,"bvec3"],[eB]:[Nt,4,"bvec4"],[tB]:[Nt,8,"mat2"],[iB]:[Nt,8,"mat2x3"],[sB]:[Nt,8,"mat2x4"],[nB]:[Nt,12,"mat3"],[oB]:[Nt,12,"mat3x2"],[aB]:[Nt,12,"mat3x4"],[rB]:[Nt,16,"mat4"],[lB]:[Nt,16,"mat4x2"],[uB]:[Nt,16,"mat4x3"]};function cB(t){switch(t){case _b:return _b;case Pc:return Pc;case VV:return Pc;case UV:return Pc;case Mc:return Mc;case BV:return Mc;case zV:return Mc;default:return ge(!1),0}}function bb(t){const e=ym[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function mA(t,e){switch(t){case IV:case NV:case DV:case FV:t=Nt;break}for(const n in ym){const[r,i,s]=ym[n];if(r===t&&i===e)return{glType:n,name:s}}return null}class fB{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,r=n.getProgramParameter(e.handle,35721);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=n.getActiveAttrib(e.handle,i),l=n.getAttribLocation(e.handle,s);l>=0&&this._addAttribute(l,s,o,a)}this.attributeInfos.sort((i,s)=>i.location-s.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!$e(n))return;const r=n.getProgramParameter(e.handle,35971);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=n.getTransformFeedbackVarying(e.handle,i);this._addVarying(i,s,o,a)}this.varyingInfos.sort((i,s)=>i.location-s.location)}_addAttribute(e,n,r,i){const{type:s,components:o}=bb(r),a={type:s,size:i*o};this._inferProperties(e,n,a);const l={location:e,name:n,accessor:new Fn(a)};this.attributeInfos.push(l),this.attributeInfosByLocation[e]=l,this.attributeInfosByName[l.name]=l}_inferProperties(e,n,r){/instance/i.test(n)&&(r.divisor=1)}_addVarying(e,n,r,i){const{type:s,components:o}=bb(r),a=new Fn({type:s,size:i*o}),l={location:e,name:n,accessor:a};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const wb=4,hB=35981,dB=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class vA extends gi{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",dB),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:n,vs:r,fs:i,varyings:s,bufferMode:o=hB}=e;return this.hash=n||"",this.vs=typeof r=="string"?new Op(this.gl,{id:"".concat(e.id,"-vs"),source:r}):r,this.fs=typeof i=="string"?new Ip(this.gl,{id:"".concat(e.id,"-fs"),source:i}):i,ge(this.vs instanceof Op),ge(this.fs instanceof Ip),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(gn(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new fB(this),this.setProps(e)}delete(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:r=4,vertexCount:i,offset:s=0,start:o,end:a,isIndexed:l=!1,indexType:u=5123,instanceCount:c=0,isInstanced:f=c>0,vertexArray:d=null,transformFeedback:g,framebuffer:y,parameters:m={},uniforms:x,samplers:S}=e;if((x||S)&&(we.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(x||{})),we.priority>=n){const v=y?y.id:"default",w="mode=".concat(Qi(this.gl,r)," verts=").concat(i," ")+"instances=".concat(c," indexType=").concat(Qi(this.gl,u)," ")+"isInstanced=".concat(f," isIndexed=").concat(l," ")+"Framebuffer=".concat(v);we.log(n,w)()}return ge(d),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||f&&c===0?!1:(d.bindForDraw(i,c,()=>{if(y!==void 0&&(m=Object.assign({},m,{framebuffer:y})),g){const v=cB(r);g.begin(v)}this._bindTextures(),tr(this.gl,m,()=>{l&&f?this.gl2.drawElementsInstanced(r,i,u,s,c):l&&$e(this.gl)&&!isNaN(o)&&!isNaN(a)?this.gl2.drawRangeElements(r,o,a,i,u,s):l?this.gl.drawElements(r,i,u,s):f?this.gl2.drawArraysInstanced(r,s,i,c):this.gl.drawArrays(r,s,i)}),g&&g.end()}),!0)}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};we.priority>=2&&MV(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const r=e[n],i=this._uniformSetters[n];if(i){let s=r,o=!1;if(s instanceof Ot&&(s=s.texture),s instanceof Ra)if(o=this.uniforms[n]!==r,o){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:l}=i;a.bind(l),s=l,this._textureUniforms[n]=a}else s=i.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(i(s)||o)&&kV(this.uniforms,n,r)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const r=this._textureUniforms[n];r.update(),e=e&&r.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const n=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(n)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),r={};for(const i of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new Op({handle:i});break;case 35632:r.fs=new Ip({handle:i});break}return r}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=Ws(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),we.time(wb,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),we.timeEnd(wb,"linkProgram for ".concat(this._getName()))(),e.debug||we.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const r=this.gl.getActiveUniform(this.handle,n),{name:i}=PV(r.name);let s=e.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=yb(e,s,r),r.size>1)for(let o=0;o<r.size;o++)s=e.getUniformLocation(this.handle,"".concat(i,"[").concat(o,"]")),this._uniformSetters["".concat(i,"[").concat(o,"]")]=yb(e,s,r)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}const pB=34918,gB=34919,mB=35007,vB=36795,yB=35976,_B=35887,bB=36202;class Hf extends gi{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const r=$e(e),i=hA(e,gt.TIMER_QUERY);let s=r||i;for(const o of n)switch(o){case"queries":s=s&&r;break;case"timers":s=s&&i;break;default:ge(!1)}return s}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(mB)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(e?bB:_B)}beginTransformFeedbackQuery(){return this.begin(yB)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,gB);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(vB)}getResult(){return this.gl2.getQueryParameter(this.handle,pB)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((r,i)=>{const s=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):n++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return Hf.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class yA extends gi{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return $e(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};gn(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,xa(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const r=this._getVaryingIndex(e),{buffer:i,byteSize:s,byteOffset:o}=this._getBufferParams(n);return r<0?(this.unused[e]=i,we.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[r]=n,this.bindOnUse||this._bindBuffer(r,i,o,s),this)}begin(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,r,i;return e instanceof st?i=e:(i=e.buffer,r=e.byteSize,n=e.byteOffset),(n!==void 0||r!==void 0)&&(n=n||0,r=r||i.byteLength-n),{buffer:i,byteOffset:n,byteSize:r}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:r,byteOffset:i}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,i,r)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const s=n&&n.handle;return!s||i===void 0?this.gl.bindBufferBase(35982,e,s):this.gl.bindBufferRange(35982,e,s,r,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}let Lc=null;function wB(t){return(!Lc||Lc.byteLength<t)&&(Lc=new ArrayBuffer(t)),Lc}function EB(t,e){const n=wB(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function SB(t){let{target:e,source:n,start:r=0,count:i=1}=t;const s=n.length,o=i*s;let a=0;for(let l=r;a<s;a++)e[l++]=n[a];for(;a<o;)a<o-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+o-a),a=o);return e}const TB="elements must be GL.ELEMENT_ARRAY_BUFFER";class In extends gi{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?$e(e)||V2()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new In(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return In.MAX_ATTRIBUTES=In.MAX_ATTRIBUTES||e.getParameter(34921),In.MAX_ATTRIBUTES}static setConstant(e,n,r){switch(r.constructor){case Float32Array:In._setConstantFloatArray(e,n,r);break;case Int32Array:In._setConstantIntArray(e,n,r);break;case Uint32Array:In._setConstantUintArray(e,n,r);break;default:ge(!1)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;super(e,Object.assign({},n,{id:r})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return In.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return ge(!e||e.target===34963,TB),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,r){if(n.target===34963)return this.setElementBuffer(n,r);const{size:i,type:s,stride:o,offset:a,normalized:l,integer:u,divisor:c}=r,{gl:f,gl2:d}=this;return e=Number(e),this.bind(()=>{f.bindBuffer(34962,n.handle),u?(ge($e(f)),d.vertexAttribIPointer(e,i,s,o,a)):f.vertexAttribPointer(e,i,s,l,o,a),f.enableVertexAttribArray(e),d.vertexAttribDivisor(e,c||0)}),this}enable(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!n&&e===0&&!In.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const r=this._normalizeConstantArrayValue(n),i=r.byteLength*e,s=r.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new st(this.gl,i),o=o||this.buffer.reallocate(i),o=o||!this._compareConstantArrayValues(r,this.bufferValue),o){const a=EB(n.constructor,s);SB({target:a,source:r,start:0,count:s}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==n[r])return!1;return!0}static _setConstantFloatArray(e,n,r){switch(r.length){case 1:e.vertexAttrib1fv(n,r);break;case 2:e.vertexAttrib2fv(n,r);break;case 3:e.vertexAttrib3fv(n,r);break;case 4:e.vertexAttrib4fv(n,r);break;default:ge(!1)}}static _setConstantIntArray(e,n,r){switch(ge($e(e)),r.length){case 1:e.vertexAttribI1iv(n,r);break;case 2:e.vertexAttribI2iv(n,r);break;case 3:e.vertexAttribI3iv(n,r);break;case 4:e.vertexAttribI4iv(n,r);break;default:ge(!1)}}static _setConstantUintArray(e,n,r){switch(ge($e(e)),r.length){case 1:e.vertexAttribI1uiv(n,r);break;case 2:e.vertexAttribI2uiv(n,r);break;case 3:e.vertexAttribI3uiv(n,r);break;case 4:e.vertexAttribI4uiv(n,r);break;default:ge(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:r}=n;return ge(Number.isFinite(r)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(r,e);default:return this.gl.getVertexAttrib(r,e)}})}}const AB="VertexArray: attributes must be Buffers or constants (i.e. typed array)",xB=/^(.+)__LOCATION_([0-9]+)$/,RB=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class CB{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new In(e),sA(this,"VertexArray","v6.0",RB),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e){const r=e[n];this._setAttribute(n,r)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n.target===34963)return this.setElementBuffer(n,r);const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,n.accessor,r);return i>=0&&(this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,n,s)),this}setConstant(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},r));return i>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new st(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof st&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof st&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,r){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),i=r()}),i}_resolveLocationAndAccessor(e,n,r,i){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=n,we.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),s;const l=this._getAttributeInfo(a||o);if(!l)return s;const u=this.accessors[o]||{},c=Fn.resolve(l.accessor,u,r,i),{size:f,type:d}=c;return ge(Number.isFinite(f)&&Number.isFinite(d)),{location:o,accessor:c}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const r=xB.exec(e),i=r?r[1]:e,s=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+s,name:i}:{location:-1}}_setAttribute(e,n){if(n instanceof st)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof st){const r=n[0],i=n[1];this.setBuffer(e,r,i)}else if(ArrayBuffer.isView(n)||Array.isArray(n)){const r=n;this.setConstant(e,r)}else if(n.buffer instanceof st){const r=n;this.setBuffer(e,r.buffer,r)}else throw new Error(AB)}_setConstantAttributes(e,n){const r=Math.max(e|0,n|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,r);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)i=this.values[s],ArrayBuffer.isView(i)&&this._setConstantAttribute(s,i)}_setConstantAttributeZero(e,n){if(In.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}const r=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(e,n){In.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const r=this.values[n],i=this.accessors[n];if(!r)return;const{divisor:s}=i,o=s>0;if(e.isInstanced=e.isInstanced||o,r instanceof st){const a=r;if(o){const l=a.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,l)}else{const l=a.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,l)}}}setElements(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return we.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function PB(t,e){const{maxElts:n=16,size:r=1}=e;let i="[";for(let o=0;o<t.length&&o<n;++o)o>0&&(i+=",".concat(o%r===0?" ":"")),i+=pu(t[o],e);const s=t.length>n?"...":"]";return"".concat(i).concat(s)}function pu(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=1e-16,{isInteger:r=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return PB(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return r?"0":"0.";if(r||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const i=t.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function Eb(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:i=!1}=t;ge(n);const s=".*_.*",o=".*Matrix",a=n._uniformSetters,l={},u=Object.keys(a).sort();let c=0;for(const g of u)!g.match(s)&&!g.match(o)&&Np({table:l,header:e,uniforms:r,uniformName:g,undefinedOnly:i})&&c++;for(const g of u)g.match(o)&&Np({table:l,header:e,uniforms:r,uniformName:g,undefinedOnly:i})&&c++;for(const g of u)l[g]||Np({table:l,header:e,uniforms:r,uniformName:g,undefinedOnly:i})&&c++;let f=0;const d={};if(!i)for(const g in r){const y=r[g];l[g]||(f++,d[g]={Type:"NOT USED: ".concat(y),[e]:pu(y)})}return{table:l,count:c,unusedTable:d,unusedCount:f}}function Np(t){let{table:e,header:n,uniforms:r,uniformName:i,undefinedOnly:s}=t;const o=r[i],a=MB(o);return!s||!a?(e[i]={[n]:a?pu(o):"N/A","Uniform Type":a?o:"NOT PROVIDED"},!0):!1}function MB(t){return t!=null}function LB(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=Sb(e,e.elements,null,n));const i=e.values;for(const s in i){const o=e._getAttributeInfo(s);if(o){let a="".concat(s,": ").concat(o.name);const l=e.accessors[o.location];l&&(a="".concat(s,": ").concat(kB(o.name,l))),r[a]=Sb(e,i[s],l,n)}}return r}function Sb(t,e,n,r){const{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let s="NOT PROVIDED",o=1,a=0,l=0,u,c,f;if(n&&(s=n.type,o=n.size,s=String(s).replace("Array",""),u=s.indexOf("nt")!==-1),e instanceof st){const d=e,{data:g,changed:y}=d.getDebugData();c=y?"*":"",f=g,l=d.byteLength,a=l/g.BYTES_PER_ELEMENT/o;let m;if(n){const x=n.divisor>0;m="".concat(x?"I ":"P "," ").concat(a," (x").concat(o,"=").concat(l," bytes ").concat(Qi(i,s),")")}else u=!0,m="".concat(l," bytes");return{[r]:"".concat(c).concat(pu(f,{size:o,isInteger:u})),"Format ":m}}return f=e,o=e.length,s=String(e.constructor.name).replace("Array",""),u=s.indexOf("nt")!==-1,{[r]:"".concat(pu(f,{size:o,isInteger:u})," (constant)"),"Format ":"".concat(o,"x").concat(s," (constant)")}}function kB(t,e){const{type:n,size:r}=e,i=mA(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function OB(t){const e={},n="Accessors for ".concat(t.id);for(const r of t.attributeInfos)if(r){const i=Tb(r);e["in ".concat(i)]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const i=Tb(r);e["out ".concat(i)]={[n]:JSON.stringify(r.accessor)}}return e}function Tb(t){const{type:e,size:n}=t.accessor,r=mA(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}const Ab=pi()&&typeof document<"u";let IB=0;class NB{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:n=x=>iA(x),onAddHTML:r=null,onInitialize:i=()=>{},onRender:s=()=>{},onFinalize:o=()=>{},onError:a,gl:l=null,glOptions:u={},debug:c=!1,createFramebuffer:f=!1,autoResizeViewport:d=!0,autoResizeDrawingBuffer:g=!0,stats:y=Os.get("animation-loop-".concat(IB++))}=e;let{useDevicePixels:m=!0}=e;"useDevicePixelRatio"in e&&(we.deprecated("useDevicePixelRatio","useDevicePixels")(),m=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:r,onInitialize:i,onRender:s,onFinalize:o,onError:a,gl:l,glOptions:u,debug:c,createFramebuffer:f},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=y,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:d,autoResizeDrawingBuffer:g,useDevicePixels:m}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return ge(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=Hf.isSupported(this.gl,["timers"])?new Hf(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(r=>{this._running&&(this._addCallbackData(r||{}),r!==!1&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=document.getElementById(e);return r?Number(r.value):n}setViewParameters(){return we.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=Ab?new Promise((e,n)=>{if(Ab&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):zU(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):BU(e)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?p0(this.props.gl,e):this.onCreateContext(e),!Zh(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");RU(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const r=this.props.onAddHTML(n);r&&(n.innerHTML=r)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let r=1;const{canvas:i}=this.gl;return i&&i.clientHeight?r=i.clientWidth/i.clientHeight:e>0&&n>0&&(r=e/n),{width:e,height:n,aspect:r}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&kU(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new Ot(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}const Fu="vs",y0="fs";function Bn(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const Dp={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function DB(t){const e={};for(const n in t){const r=t[n],i=FB(r);e[n]=i}return e}function FB(t){let e=xb(t);return e==="object"?t?"type"in t?Object.assign({},t,Dp[t.type]):"value"in t?(e=xb(t.value),Object.assign({type:e},t,Dp[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},Dp[e])}function xb(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const UB="vs",VB="fs";class Rb{constructor(e){let{name:n,vs:r,fs:i,dependencies:s=[],uniforms:o,getUniforms:a,deprecations:l=[],defines:u={},inject:c={},vertexShader:f,fragmentShader:d}=e;Bn(typeof n=="string"),this.name=n,this.vs=r||f,this.fs=i||d,this.getModuleUniforms=a,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(l),this.defines=u,this.injections=BB(c),o&&(this.uniforms=DB(o))}getModuleSource(e){let n;switch(e){case UB:n=this.vs||"";break;case VB:n=this.fs||"";break;default:Bn(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(n,"// END MODULE_").concat(this.name,`

`)}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(r=>{r.regex.test(e)&&(r.deprecated?n.deprecated(r.old,r.new)():n.removed(r.old,r.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{switch(n.type){case"function":n.regex=new RegExp("\\b".concat(n.old,"\\("));break;default:n.regex=new RegExp("".concat(n.type," ").concat(n.old,";"))}}),e}_defaultGetUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={},r=this.uniforms;for(const i in r){const s=r[i];i in e&&!s.private?(s.validate&&Bn(s.validate(e[i],s),"".concat(this.name,": invalid ").concat(i)),n[i]=e[i]):n[i]=s.value}return n}}function BB(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];const i=n.slice(0,2);typeof r=="string"&&(r={order:0,injection:r}),e[i][n]=r}return e}function zB(t){return jB(bA(t))}function jB(t){const e={},n={};return _A({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((r,i)=>n[i]-n[r]).map(r=>e[r])}function _A(t){let{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)r[s.name]=s,(i[s.name]===void 0||i[s.name]<n)&&(i[s.name]=n);for(const s of e)s.dependencies&&_A({modules:s.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function bA(t,e){return t.map(n=>(n instanceof Rb||(Bn(typeof n!="string","Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),Bn(n.name,"shader module has no name"),n=new Rb(n),n.dependencies=bA(n.dependencies)),n))}function $B(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=typeof window<"u"?window.navigator||{}:{},n=t.userAgent||e.userAgent||"",r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i}const GB=7936,HB=7937,WB=7938,XB=35724,_0={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Rs={};Object.keys(_0).forEach(t=>{Rs[t]=t});function qB(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&t._version===2)}function YB(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||GB),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||HB);return{gpuVendor:ZB(n,r),vendor:n,renderer:r,version:t.getParameter(WB),shadingLanguageVersion:t.getParameter(XB)}}function ZB(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const Fp={};function Cb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=_0[e];if(Bn(r,e),!$B(n))return!0;if(e in Fp)return Fp[e];const i=r[0],s=n.behavior||"enable",o="#extension GL_".concat(i," : ").concat(s,`
void main(void) {}`),a=t.createShader(35633);t.shaderSource(a,o),t.compileShader(a);const l=t.getShaderParameter(a,35713);return t.deleteShader(a),Fp[e]=l,l}function KB(t,e){const n=_0[e];Bn(n,e);const r=qB(t)&&n[1]||n[0],i=typeof r=="string"?Boolean(t.getExtension(r)):r;return Bn(i===!1||i===!0),i}function kc(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>KB(t,n))}function QB(t){switch(YB(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function JB(t,e,n){let r=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return kc(t,Rs.GLSL_FRAG_DEPTH)&&(r+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),kc(t,Rs.GLSL_DERIVATIVES)&&Cb(t,Rs.GLSL_DERIVATIVES)&&(r+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),kc(t,Rs.GLSL_FRAG_DATA)&&Cb(t,Rs.GLSL_FRAG_DATA,{behavior:"require"})&&(r+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),kc(t,Rs.GLSL_TEXTURE_LOD)&&(r+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),r}const ez=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,tz=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,nz={[Fu]:ez,[y0]:tz},lf="__LUMA_INJECT_DECLARATIONS__",Pb=/void\s+main\s*\([^)]*\)\s*\{\n?/,Mb=/}\n?[^{}]*$/,Up=[];function Lb(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=e===Fu;for(const s in n){const o=n[s];o.sort((l,u)=>l.order-u.order),Up.length=o.length;for(let l=0,u=o.length;l<u;++l)Up[l]=o[l].injection;const a="".concat(Up.join(`
`),`
`);switch(s){case"vs:#decl":i&&(t=t.replace(lf,a));break;case"vs:#main-start":i&&(t=t.replace(Pb,l=>l+a));break;case"vs:#main-end":i&&(t=t.replace(Mb,l=>a+l));break;case"fs:#decl":i||(t=t.replace(lf,a));break;case"fs:#main-start":i||(t=t.replace(Pb,l=>l+a));break;case"fs:#main-end":i||(t=t.replace(Mb,l=>a+l));break;default:t=t.replace(s,l=>l+a)}}return t=t.replace(lf,""),r&&(t=t.replace(/\}\s*$/,s=>s+nz[e])),t}function _m(t){const e={};return Bn(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const r in n)e[r]=e[r]?"".concat(e[r],`
`).concat(n[r]):n[r]}),e}function Ca(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const wA=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],rz=[...wA,[Ca("attribute"),"in $1"],[Ca("varying"),"out $1"]],iz=[...wA,[Ca("varying"),"in $1"]],EA=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],sz=[...EA,[Ca("in"),"attribute $1"],[Ca("out"),"varying $1"]],oz=[...EA,[Ca("in"),"varying $1"]],bm="gl_FragColor",wm=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,az=/void\s+main\s*\([^)]*\)\s*\{\n?/;function lz(t,e,n){switch(e){case 300:return n?Wf(t,rz):uz(t);case 100:return n?Wf(t,sz):cz(t);default:throw new Error("unknown GLSL version ".concat(e))}}function Wf(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}function uz(t){t=Wf(t,iz);const e=t.match(wm);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(bm,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(az,r=>"out vec4 ".concat(n,`;
`).concat(r)).replace(new RegExp("\\b".concat(bm,"\\b"),"g"),n)}return t}function cz(t){t=Wf(t,oz);const e=t.match(wm);if(e){const n=e[1];t=t.replace(wm,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),bm)}return t}const fz=`

`.concat(lf,`

`),SA={[Fu]:"vertex",[y0]:"fragment"},hz=`precision highp float;

`;function dz(t,e){const{vs:n,fs:r}=e,i=zB(e.modules||[]);return{gl:t,vs:kb(t,Object.assign({},e,{source:n,type:Fu,modules:i})),fs:kb(t,Object.assign({},e,{source:r,type:y0,modules:i})),getUniforms:pz(i)}}function kb(t,e){let{id:n,source:r,type:i,modules:s,defines:o={},hookFunctions:a=[],inject:l={},transpileToGLSL100:u=!1,prologue:c=!0,log:f}=e;Bn(typeof r=="string","shader source must be a string");const d=i===Fu,g=r.split(`
`);let y=100,m="",x=r;g[0].indexOf("#version ")===0?(y=300,m=g[0],x=g.slice(1).join(`
`)):m="#version ".concat(y);const S={};s.forEach(U=>{Object.assign(S,U.getDefines())}),Object.assign(S,o);let v=c?"".concat(m,`
`).concat(mz({id:n,source:r,type:i}),`
`).concat(gz({type:i}),`
`).concat(QB(t),`
`).concat(JB(t),`
`).concat(vz(S),`
`).concat(d?"":hz,`
`):"".concat(m,`
`);const w=_z(a),R={},L={},C={};for(const U in l){const N=typeof l[U]=="string"?{injection:l[U],order:0}:l[U],H=U.match(/^(v|f)s:(#)?([\w-]+)$/);if(H){const G=H[2],ie=H[3];G?ie==="decl"?L[U]=[N]:C[U]=[N]:R[U]=[N]}else C[U]=[N]}for(const U of s){f&&U.checkDeprecations(x,f),v+=U.getModuleSource(i,y);const H=U.injections[i];for(const G in H){const ie=G.match(/^(v|f)s:#([\w-]+)$/);if(ie){const Ee=ie[2]==="decl"?L:C;Ee[G]=Ee[G]||[],Ee[G].push(H[G])}else R[G]=R[G]||[],R[G].push(H[G])}}return v+=fz,v=Lb(v,i,L),v+=yz(w[i],R),v+=x,v=Lb(v,i,C),v=lz(v,u?100:y,d),v}function pz(t){return function(n){const r={};for(const i of t){const s=i.getUniforms(n,r);Object.assign(r,s)}return r}}function gz(t){let{type:e}=t;return`
#define SHADER_TYPE_`.concat(SA[e].toUpperCase(),`
`)}function mz(t){let{id:e,source:n,type:r}=t;return e&&typeof e=="string"&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(e,"_").concat(SA[r],`

`):""}function vz(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,n="";for(const r in t){e===0&&(n+=`
// APPLICATION DEFINES
`),e++;const i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],`
`))}return e===0&&(n+=`
`),n}function yz(t,e){let n="";for(const r in t){const i=t[r];if(n+="void ".concat(i.signature,` {
`),i.header&&(n+="  ".concat(i.header)),e[r]){const s=e[r];s.sort((o,a)=>o.order-a.order);for(const o of s)n+="  ".concat(o.injection,`
`)}i.footer&&(n+="  ".concat(i.footer)),n+=`}
`}return n}function _z(t){const e={vs:{},fs:{}};return t.forEach(n=>{let r;typeof n!="string"?(r=n,n=r.hook):r={},n=n.trim();const[i,s]=n.split(":"),o=n.replace(/\(.+/,"");e[i][o]=Object.assign(r,{signature:s})}),e}const bz="void main() {gl_FragColor = vec4(0);}",TA=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,wz=`#version 300 es
`.concat(TA);function AA(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,i,s]=n;if(!e.includes(r)||!i||!s)return null;const o=s.split(";")[0];return{qualifier:r,type:i,name:o}}function xA(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:e=100,input:n,inputType:r,output:i}=t;if(!n)return e===300?wz:e>300?"#version ".concat(e,`
`).concat(TA):bz;const s=Tz(n,r);return e>=300?"#version ".concat(e," ").concat(e===300?"es":"",`
in `).concat(r," ").concat(n,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(s,`;
}`):"varying ".concat(r," ").concat(n,`;
void main() {
  gl_FragColor = `).concat(s,`;
}`)}function Ez(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Bn(!1),null}}function Sz(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Bn(!1),null}}function Tz(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Bn(!1),null}}const Az=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,xz={name:"fp32",vs:Az,fs:null};function Ob(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}const Rz=1/Math.PI*180,Cz=1/180*Math.PI,Tn={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function RA(t,{precision:e=Tn.precision}={}){return t=Pz(t),"".concat(parseFloat(t.toPrecision(e)))}function Pa(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Oc(t,e){return b0(t,n=>n*Cz,e)}function ko(t,e){return b0(t,n=>n*Rz,e)}function Ct(t,e,n){return b0(t,r=>Math.max(e,Math.min(n,r)))}function Xf(t,e,n){return Pa(t)?t.map((r,i)=>Xf(r,e[i],n)):n*e+(1-n)*t}function ri(t,e,n){const r=Tn.EPSILON;n&&(Tn.EPSILON=n);try{if(t===e)return!0;if(Pa(t)&&Pa(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!ri(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=Tn.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{Tn.EPSILON=r}}function Pz(t){return Math.round(t/Tn.EPSILON)*Tn.EPSILON}function Mz(t){return t.clone?t.clone():new Array(t.length)}function b0(t,e,n){if(Pa(t)){const r=t;n=n||Mz(r);for(let i=0;i<n.length&&i<r.length;++i)n[i]=e(t[i],i,n);return n}return e(t)}function Lz(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}class CA extends Lz(Array){clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Pa(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Tn)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+RA(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!ri(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){if(r===void 0)return this.lerp(this,e,n);for(let i=0;i<this.ELEMENTS;++i){const s=e[i];this[i]=s+r*(n[i]-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(Tn.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}get elements(){return this}}function kz(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function Dn(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function Vp(t,e,n=""){if(Tn.debug&&!kz(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}class Oz extends CA{get x(){return this[0]}set x(e){this[0]=Dn(e)}get y(){return this[1]}set y(e){this[1]=Dn(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){const i=this[r]-e[r];n+=i*i}return Dn(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return Dn(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Ob(e>=0&&e<this.ELEMENTS,"index is out of range"),Dn(this[e])}setComponent(e,n){return Ob(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var uf=1e-6,Ma=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Iz(){var t=new Ma(2);return Ma!=Float32Array&&(t[0]=0,t[1]=0),t}function qf(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function PA(t,e){return t[0]=-e[0],t[1]=-e[1],t}function MA(t,e,n,r){var i=e[0],s=e[1];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t}function Nz(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}(function(){var t=Iz();return function(e,n,r,i,s,o){var a,l;for(n||(n=2),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}})();function Dz(t,e,n){const r=e[0],i=e[1],s=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/s,t[1]=(n[1]*r+n[5]*i)/s,t}function LA(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s||1;return t[0]=(n[0]*r+n[4]*i+n[8]*s)/o,t[1]=(n[1]*r+n[5]*i+n[9]*s)/o,t[2]=(n[2]*r+n[6]*i+n[10]*s)/o,t}function Fz(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t}function Uz(){var t=new Ma(3);return Ma!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function kA(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Vz(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Bz(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function zz(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function jz(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function $z(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=i*l-s*a,t[1]=s*o-r*l,t[2]=r*a-i*o,t}function Gz(t,e,n,r){var i=e[0],s=e[1],o=e[2];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t[2]=o+r*(n[2]-o),t}function OA(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/o,t}function Hz(t,e,n){var r=e[0],i=e[1],s=e[2];return t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8],t}function Wz(t,e,n){var r=n[0],i=n[1],s=n[2],o=n[3],a=e[0],l=e[1],u=e[2],c=i*u-s*l,f=s*a-r*u,d=r*l-i*a,g=i*d-s*f,y=s*c-r*d,m=r*f-i*c,x=o*2;return c*=x,f*=x,d*=x,g*=2,y*=2,m*=2,t[0]=a+c+g,t[1]=l+f+y,t[2]=u+d+m,t}function Xz(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function qz(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function Yz(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function Zz(t,e){var n=t[0],r=t[1],i=t[2],s=e[0],o=e[1],a=e[2],l=Math.sqrt(n*n+r*r+i*i),u=Math.sqrt(s*s+o*o+a*a),c=l*u,f=c&&jz(t,e)/c;return Math.acos(Math.min(Math.max(f,-1),1))}var IA=Vz,Kz=kA,Bp=Bz;(function(){var t=Uz();return function(e,n,r,i,s,o){var a,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();const zp=[0,0,0];let Ic;class ir extends Oz{static get ZERO(){return Ic||(Ic=new ir(0,0,0),Object.freeze(Ic)),Ic}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&Pa(e)?this.copy(e):(Tn.debug&&(Dn(e),Dn(n),Dn(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Tn.debug&&(Dn(e.x),Dn(e.y),Dn(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Dn(e)}angle(e){return Zz(this,e)}cross(e){return $z(this,this,e),this.check()}rotateX({radians:e,origin:n=zp}){return Xz(this,this,n,e),this.check()}rotateY({radians:e,origin:n=zp}){return qz(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=zp}){return Yz(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return OA(this,this,e),this.check()}transformAsVector(e){return LA(this,this,e),this.check()}transformByMatrix3(e){return Hz(this,this,e),this.check()}transformByMatrix2(e){return Fz(this,this,e),this.check()}transformByQuaternion(e){return Wz(this,this,e),this.check()}}class Qz extends CA{toString(){let e="[";if(Tn.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=" ".concat(this[r*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=Dn(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)n[i]=this[r+i];return n}setColumn(e,n){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)this[r+i]=n[i];return this}}function Jz(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function e8(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Em(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=e[9],d=e[10],g=e[11],y=e[12],m=e[13],x=e[14],S=e[15],v=n*a-r*o,w=n*l-i*o,R=n*u-s*o,L=r*l-i*a,C=r*u-s*a,U=i*u-s*l,N=c*m-f*y,H=c*x-d*y,G=c*S-g*y,ie=f*x-d*m,Ce=f*S-g*m,Ee=d*S-g*x,ee=v*Ee-w*Ce+R*ie+L*G-C*H+U*N;return ee?(ee=1/ee,t[0]=(a*Ee-l*Ce+u*ie)*ee,t[1]=(i*Ce-r*Ee-s*ie)*ee,t[2]=(m*U-x*C+S*L)*ee,t[3]=(d*C-f*U-g*L)*ee,t[4]=(l*G-o*Ee-u*H)*ee,t[5]=(n*Ee-i*G+s*H)*ee,t[6]=(x*R-y*U-S*w)*ee,t[7]=(c*U-d*R+g*w)*ee,t[8]=(o*Ce-a*G+u*N)*ee,t[9]=(r*G-n*Ce-s*N)*ee,t[10]=(y*C-m*R+S*v)*ee,t[11]=(f*R-c*C-g*v)*ee,t[12]=(a*H-o*ie-l*N)*ee,t[13]=(n*ie-r*H+i*N)*ee,t[14]=(m*w-y*L-x*v)*ee,t[15]=(c*L-f*w+d*v)*ee,t):null}function t8(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],g=t[12],y=t[13],m=t[14],x=t[15],S=e*o-n*s,v=e*a-r*s,w=e*l-i*s,R=n*a-r*o,L=n*l-i*o,C=r*l-i*a,U=u*y-c*g,N=u*m-f*g,H=u*x-d*g,G=c*m-f*y,ie=c*x-d*y,Ce=f*x-d*m;return S*Ce-v*ie+w*G+R*H-L*N+C*U}function Fs(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=e[9],g=e[10],y=e[11],m=e[12],x=e[13],S=e[14],v=e[15],w=n[0],R=n[1],L=n[2],C=n[3];return t[0]=w*r+R*a+L*f+C*m,t[1]=w*i+R*l+L*d+C*x,t[2]=w*s+R*u+L*g+C*S,t[3]=w*o+R*c+L*y+C*v,w=n[4],R=n[5],L=n[6],C=n[7],t[4]=w*r+R*a+L*f+C*m,t[5]=w*i+R*l+L*d+C*x,t[6]=w*s+R*u+L*g+C*S,t[7]=w*o+R*c+L*y+C*v,w=n[8],R=n[9],L=n[10],C=n[11],t[8]=w*r+R*a+L*f+C*m,t[9]=w*i+R*l+L*d+C*x,t[10]=w*s+R*u+L*g+C*S,t[11]=w*o+R*c+L*y+C*v,w=n[12],R=n[13],L=n[14],C=n[15],t[12]=w*r+R*a+L*f+C*m,t[13]=w*i+R*l+L*d+C*x,t[14]=w*s+R*u+L*g+C*S,t[15]=w*o+R*c+L*y+C*v,t}function Yf(t,e,n){var r=n[0],i=n[1],s=n[2],o,a,l,u,c,f,d,g,y,m,x,S;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],l=e[2],u=e[3],c=e[4],f=e[5],d=e[6],g=e[7],y=e[8],m=e[9],x=e[10],S=e[11],t[0]=o,t[1]=a,t[2]=l,t[3]=u,t[4]=c,t[5]=f,t[6]=d,t[7]=g,t[8]=y,t[9]=m,t[10]=x,t[11]=S,t[12]=o*r+c*i+y*s+e[12],t[13]=a*r+f*i+m*s+e[13],t[14]=l*r+d*i+x*s+e[14],t[15]=u*r+g*i+S*s+e[15]),t}function w0(t,e,n){var r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function n8(t,e,n,r){var i=r[0],s=r[1],o=r[2],a=Math.hypot(i,s,o),l,u,c,f,d,g,y,m,x,S,v,w,R,L,C,U,N,H,G,ie,Ce,Ee,ee,_e;return a<uf?null:(a=1/a,i*=a,s*=a,o*=a,l=Math.sin(n),u=Math.cos(n),c=1-u,f=e[0],d=e[1],g=e[2],y=e[3],m=e[4],x=e[5],S=e[6],v=e[7],w=e[8],R=e[9],L=e[10],C=e[11],U=i*i*c+u,N=s*i*c+o*l,H=o*i*c-s*l,G=i*s*c-o*l,ie=s*s*c+u,Ce=o*s*c+i*l,Ee=i*o*c+s*l,ee=s*o*c-i*l,_e=o*o*c+u,t[0]=f*U+m*N+w*H,t[1]=d*U+x*N+R*H,t[2]=g*U+S*N+L*H,t[3]=y*U+v*N+C*H,t[4]=f*G+m*ie+w*Ce,t[5]=d*G+x*ie+R*Ce,t[6]=g*G+S*ie+L*Ce,t[7]=y*G+v*ie+C*Ce,t[8]=f*Ee+m*ee+w*_e,t[9]=d*Ee+x*ee+R*_e,t[10]=g*Ee+S*ee+L*_e,t[11]=y*Ee+v*ee+C*_e,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function NA(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[4],o=e[5],a=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+u*r,t[5]=o*i+c*r,t[6]=a*i+f*r,t[7]=l*i+d*r,t[8]=u*i-s*r,t[9]=c*i-o*r,t[10]=f*i-a*r,t[11]=d*i-l*r,t}function r8(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],u=e[8],c=e[9],f=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-u*r,t[1]=o*i-c*r,t[2]=a*i-f*r,t[3]=l*i-d*r,t[8]=s*r+u*i,t[9]=o*r+c*i,t[10]=a*r+f*i,t[11]=l*r+d*i,t}function DA(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],u=e[4],c=e[5],f=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+u*r,t[1]=o*i+c*r,t[2]=a*i+f*r,t[3]=l*i+d*r,t[4]=u*i-s*r,t[5]=c*i-o*r,t[6]=f*i-a*r,t[7]=d*i-l*r,t}function i8(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,u=n*o,c=r*o,f=r*a,d=i*o,g=i*a,y=i*l,m=s*o,x=s*a,S=s*l;return t[0]=1-f-y,t[1]=c+S,t[2]=d-x,t[3]=0,t[4]=c-S,t[5]=1-u-y,t[6]=g+m,t[7]=0,t[8]=d+x,t[9]=g-m,t[10]=1-u-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function s8(t,e,n,r,i,s,o){var a=1/(n-e),l=1/(i-r),u=1/(s-o);return t[0]=s*2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*l,t[10]=(o+s)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*u,t[15]=0,t}function o8(t,e,n,r,i){var s=1/Math.tan(e/2),o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}var a8=o8;function l8(t,e,n,r,i,s,o){var a=1/(e-n),l=1/(r-i),u=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*l,t[14]=(o+s)*u,t[15]=1,t}var u8=l8;function c8(t,e,n,r){var i,s,o,a,l,u,c,f,d,g,y=e[0],m=e[1],x=e[2],S=r[0],v=r[1],w=r[2],R=n[0],L=n[1],C=n[2];return Math.abs(y-R)<uf&&Math.abs(m-L)<uf&&Math.abs(x-C)<uf?Jz(t):(c=y-R,f=m-L,d=x-C,g=1/Math.hypot(c,f,d),c*=g,f*=g,d*=g,i=v*d-w*f,s=w*c-S*d,o=S*f-v*c,g=Math.hypot(i,s,o),g?(g=1/g,i*=g,s*=g,o*=g):(i=0,s=0,o=0),a=f*o-d*s,l=d*i-c*o,u=c*s-f*i,g=Math.hypot(a,l,u),g?(g=1/g,a*=g,l*=g,u*=g):(a=0,l=0,u=0),t[0]=i,t[1]=a,t[2]=c,t[3]=0,t[4]=s,t[5]=l,t[6]=f,t[7]=0,t[8]=o,t[9]=u,t[10]=d,t[11]=0,t[12]=-(i*y+s*m+o*x),t[13]=-(a*y+l*m+u*x),t[14]=-(c*y+f*m+d*x),t[15]=1,t)}function f8(){var t=new Ma(4);return Ma!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function FA(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Ba(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,t}(function(){var t=f8();return function(e,n,r,i,s,o){var a,l;for(n||(n=4),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}})();var Sm;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(Sm||(Sm={}));const h8=45*Math.PI/180,d8=1,jp=.1,$p=500,p8=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class un extends Qz{static get IDENTITY(){return m8()}static get ZERO(){return g8()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return Sm}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,r,i,s,o,a,l,u,c,f,d,g,y,m,x){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=u,this[9]=c,this[10]=f,this[11]=d,this[12]=g,this[13]=y,this[14]=m,this[15]=x,this.check()}setRowMajor(e,n,r,i,s,o,a,l,u,c,f,d,g,y,m,x){return this[0]=e,this[1]=s,this[2]=u,this[3]=g,this[4]=n,this[5]=o,this[6]=c,this[7]=y,this[8]=r,this[9]=a,this[10]=f,this[11]=m,this[12]=i,this[13]=l,this[14]=d,this[15]=x,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(p8)}fromObject(e){return this.check()}fromQuaternion(e){return i8(this,e),this.check()}frustum(e){const{left:n,right:r,bottom:i,top:s,near:o=jp,far:a=$p}=e;return a===1/0?v8(this,n,r,i,s,o):s8(this,n,r,i,s,o,a),this.check()}lookAt(e){const{eye:n,center:r=[0,0,0],up:i=[0,1,0]}=e;return c8(this,n,r,i),this.check()}ortho(e){const{left:n,right:r,bottom:i,top:s,near:o=jp,far:a=$p}=e;return u8(this,n,r,i,s,o,a),this.check()}orthographic(e){const{fovy:n=h8,aspect:r=d8,focalDistance:i=1,near:s=jp,far:o=$p}=e;Ib(n);const a=n/2,l=i*Math.tan(a),u=l*r;return this.ortho({left:-u,right:u,bottom:-l,top:l,near:s,far:o})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:r=1,near:i=.1,far:s=500}=e;return Ib(n),a8(this,n,r,i,s),this.check()}determinant(){return t8(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*i,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*i,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return e8(this,this),this.check()}invert(){return Em(this,this),this.check()}multiplyLeft(e){return Fs(this,e,this),this.check()}multiplyRight(e){return Fs(this,this,e),this.check()}rotateX(e){return NA(this,this,e),this.check()}rotateY(e){return r8(this,this,e),this.check()}rotateZ(e){return DA(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return n8(this,this,e,n),this.check()}scale(e){return w0(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return Yf(this,this,e),this.check()}transform(e,n){return e.length===4?(n=Ba(n||[-0,-0,-0,-0],e,this),Vp(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:r}=e;let i;switch(r){case 2:i=Nz(n||[-0,-0],e,this);break;case 3:i=OA(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Vp(i,e.length),i}transformAsVector(e,n){let r;switch(e.length){case 2:r=Dz(n||[-0,-0],e,this);break;case 3:r=LA(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Vp(r,e.length),r}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,r){return this.identity().translate([e,n,r])}}let Nc,Dc;function g8(){return Nc||(Nc=new un([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Nc)),Nc}function m8(){return Dc||(Dc=new un,Object.freeze(Dc)),Dc}function Ib(t){if(t>Math.PI*2)throw Error("expected radians")}function v8(t,e,n,r,i,s){const o=2*s/(n-e),a=2*s/(i-r),l=(n+e)/(n-e),u=(i+r)/(i-r),c=-1,f=-1,d=-2*s;return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=0,t[13]=0,t[14]=d,t[15]=0,t}const Nb=1e-6,y8=6371e3;class Jh{constructor({phi:e=0,theta:n=0,radius:r=1,bearing:i,pitch:s,altitude:o,radiusScale:a=y8}={}){b(this,"phi",void 0),b(this,"theta",void 0),b(this,"radius",void 0),b(this,"radiusScale",void 0),this.phi=e,this.theta=n,this.radius=r||o||1,this.radiusScale=a||1,i!==void 0&&(this.bearing=i),s!==void 0&&(this.pitch=s),this.check()}toString(){return this.formatString(Tn)}formatString({printTypes:e=!1}){const n=RA;return"".concat(e?"Spherical":"","[rho:").concat(n(this.radius),",theta:").concat(n(this.theta),",phi:").concat(n(this.phi),"]")}equals(e){return ri(this.radius,e.radius)&&ri(this.theta,e.theta)&&ri(this.phi,e.phi)}exactEquals(e){return this.radius===e.radius&&this.theta===e.theta&&this.phi===e.phi}get bearing(){return 180-ko(this.phi)}set bearing(e){this.phi=Math.PI-Oc(e)}get pitch(){return ko(this.theta)}set pitch(e){this.theta=Oc(e)}get longitude(){return ko(this.phi)}get latitude(){return ko(this.theta)}get lng(){return ko(this.phi)}get lat(){return ko(this.theta)}get z(){return(this.radius-1)*this.radiusScale}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this.check()}clone(){return new Jh().copy(this)}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this.check()}fromLngLatZ([e,n,r]){return this.radius=1+r/this.radiusScale,this.phi=Oc(n),this.theta=Oc(e),this.check()}fromVector3(e){return this.radius=kA(e),this.radius>0&&(this.theta=Math.atan2(e[0],e[1]),this.phi=Math.acos(Ct(e[2]/this.radius,-1,1))),this.check()}toVector3(){return new ir(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}makeSafe(){return this.phi=Math.max(Nb,Math.min(Math.PI-Nb,this.phi)),this}check(){if(!Number.isFinite(this.phi)||!Number.isFinite(this.theta)||!(this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}}const _8=new Uint8Array([0,255,255,255]),b8={pickingSelectedColor:null,pickingHighlightColor:_8,pickingActive:!1,pickingAttribute:!1};function w8(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b8;const e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,r=>r/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return t.pickingActive!==void 0&&(e.picking_uActive=Boolean(t.pickingActive),e.picking_uAttribute=Boolean(t.pickingAttribute)),e}const E8=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,S8=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,T8={name:"picking",vs:E8,fs:S8,getUniforms:w8},A8=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,x8={name:"transform",vs:A8,fs:null};class Uu{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new Uu(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:n="",fs:r="",defines:i={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:l=!1}=e,u=this._getModuleList(e.modules),c=this._getHash(n),f=this._getHash(r),d=u.map(w=>this._getHash(w.name)).sort(),g=o.map(w=>this._getHash(w)),y=Object.keys(i).sort(),m=Object.keys(s).sort(),x=[],S=[];for(const w of y)x.push(this._getHash(w)),x.push(this._getHash(i[w]));for(const w of m)S.push(this._getHash(w)),S.push(this._getHash(s[w]));const v="".concat(c,"/").concat(f,"D").concat(x.join("/"),"M").concat(d.join("/"),"I").concat(S.join("/"),"V").concat(g.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(l?"T":"");if(!this._programCache[v]){const w=dz(this.gl,{vs:n,fs:r,modules:u,inject:s,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[v]=new vA(this.gl,{hash:v,vs:w.vs,fs:w.fs,varyings:o,bufferMode:a}),this._getUniforms[v]=w.getUniforms||(R=>{}),this._useCounts[v]=0}return this._useCounts[v]++,this._programCache[v]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,this._useCounts[n]===0&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),r={};let i=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],l=a.name;n[i++]=a,r[l]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],l=a.name;r[l]||(n[i++]=a,r[l]=!0)}return n.length=i,n}}const R8={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function C8(t,e,n){const r={};let i=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=P8(s,n);if(s==="indices")i=o;else if(o.constant)r[a]=o.value;else{const l=o.value,u={...o};delete u.value,r[a]=[new st(t,l),u],M8(s,u)}}if(i){const s=i.value||i;ge(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};r.indices=[new st(t,{data:s,target:34963}),o]}return r}function P8(t,e){const{attributeMap:n=R8}=e||{};return n&&n[t]||t}function M8(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors";break}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break}ge(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const Oo=2,L8=1e4,k8="Model needs drawMode and vertexCount",Db=()=>{},O8={};class I8{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:r=Ws("model")}=n;ge(Zh(e)),this.id=r,this.gl=e,this.id=n.id||Ws("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||Uu.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},ge(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),k8)}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return ge(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return ge(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=C8(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(xa(e))return this;const n={};for(const r in e){const i=e[r];n[r]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(n),this}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return m0(this.program.gl,e),this}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:r,uniforms:i={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=e;this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(i);let u;we.priority>=Oo&&(u=this._logDrawCallStart(Oo));const c=this.vertexArray.getDrawParams(),{isIndexed:f=c.isIndexed,indexType:d=c.indexType,indexOffset:g=c.indexOffset,vertexArrayInstanced:y=c.isInstanced}=this.props;y&&!this.isInstanced&&we.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:m,instanceCount:x}=this,{onBeforeRender:S=Db,onAfterRender:v=Db}=this.props;S(),this.program.setUniforms(this.uniforms);const w=this.program.draw(Object.assign(O8,e,{logPriority:u,uniforms:null,framebuffer:r,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:o,isIndexed:f,indexType:d,isInstanced:m,instanceCount:x,offset:f?g:0}));return v(),we.priority>=Oo&&this._logDrawCallEnd(u,l,r),w}transform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:n=!0,feedbackBuffers:r,unbindModels:i=[]}=e;let{parameters:s}=e;r&&this._setFeedbackBuffers(r),n&&(s=Object.assign({},s,{[35977]:n})),i.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{i.forEach(o=>o.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return we.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:r,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:u,transpileToGLSL100:c}=this.programProps;n=this.programManager.get({vs:r,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:u,transpileToGLSL100:c}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}ge(n instanceof vA,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new CB(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof st&&n.delete()}}_setAnimationProps(e){this.animated&&ge(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(xa(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new yA(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:L8;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),we.group(Oo,">>> DRAWING MODEL ".concat(this.id),{collapsed:we.level<=2})(),e}_logDrawCallEnd(e,n,r,i){if(e===void 0)return;const s=LB({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:l}=Eb({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),{table:u,count:c}=Eb({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});c>0&&we.log("MISSING UNIFORMS",Object.keys(u))(),l>0&&we.log("UNUSED UNIFORMS",Object.keys(a))();const f=OB(this.vertexArray.configuration);we.table(e,s)(),we.table(e,o)(),we.table(e+1,f)(),i&&i.log({logLevel:Oo,message:"Rendered to ".concat(i.id)}),we.groupEnd(Oo)()}}class N8{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:r,transformFeedback:i}=n;return{attributes:Object.assign({},r,e.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],r=e?n[e]:null;return r?r instanceof st?r:r.buffer:null}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:n}=e,r=this.getBuffer(n);return r?r.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&ge($e(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const s=this.feedbackMap[i];i in n&&(r[s]=i)}Object.assign(r,e.feedbackBuffers);for(const i in r){const s=r[i];if(typeof s=="string"){const o=n[s],{byteLength:a,usage:l,accessor:u}=o;r[i]=this._createNewBuffer(i,{byteLength:a,usage:l,accessor:u})}}return r}_setupBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}_setupTransformFeedback(e,n){let{model:r}=n;const{program:i}=r;e.transformFeedback=new yA(this.gl,{program:i,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:r}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(const i in this.feedbackMap){const s=this.feedbackMap[i];n[i]=e.feedbackBuffers[s],r[s]=e.sourceBuffers[i],ge(r[s]instanceof st)}return{sourceBuffers:n,feedbackBuffers:r}}_createNewBuffer(e,n){const r=new st(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}}const D8="transform_uSampler_",Zf="transform_uSize_",Fb="transform_position";function F8(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:r,targetTexture:i}=t,o=Object.keys(n).length,a=null;const l={};let u=e,c={};if(o>0||r){const f=u.split(`
`),d=f.slice();if(f.forEach((g,y,m)=>{if(o>0){const x=j8(g,n);if(x){const{updatedLine:S,inject:v}=x;d[y]=S,c=_m([c,v]),Object.assign(l,x.samplerTextureMap),o--}}r&&!a&&(a=z8(g,r))}),r){ge(i);const g="".concat(Zf).concat(r),y="uniform vec2 ".concat(g,`;
`),m="     vec2 ".concat(Fb," = transform_getPos(").concat(g,`);
     gl_Position = vec4(`).concat(Fb,`, 0, 1.);
`);c=_m([c,{"vs:#decl":y,"vs:#main-start":m}])}u=d.join(`
`)}return{vs:u,targetTextureType:a,inject:c,samplerTextureMap:l}}function U8(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t;const i={};let s,o;n&&({width:s,height:o}=r,i["".concat(Zf).concat(n)]=[s,o]);for(const a in e)({width:s,height:o}=e[a]),i["".concat(Zf).concat(a)]=[s,o];return i}function V8(t){return AA(t,["attribute","in"])}function B8(t){const e="".concat(D8).concat(t),n="".concat(Zf).concat(t),r="  uniform sampler2D ".concat(e,`;
  uniform vec2 `).concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}function z8(t,e){const n=AA(t,["varying","out"]);return n&&n.name===e?n.type:null}function j8(t,e){const n={},r=V8(t);if(!r)return null;const{type:i,name:s}=r;if(s&&e[s]){const o="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:l,uniformDeclerations:u}=B8(s),c=Ez(i),f="  ".concat(i," ").concat(s," = transform_getInput(").concat(a,", ").concat(l,").").concat(c,`;
`);return n[a]=s,{updatedLine:o,inject:{"vs:#decl":u,"vs:#main-start":f},samplerTextureMap:n}}return null}const $8={[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},G8="transform_output";class H8{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,sourceTextures:r,framebuffer:i,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),l=Object.assign({},e.parameters);let u=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const f in this.samplerTextureMap){const d=this.samplerTextureMap[f];a[f]=r[d]}this._setSourceTextureParameters();const c=U8({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,c)}return this.hasTargetTexture&&(u=!1,l.viewport=[0,0,i.width,i.height]),{attributes:o,framebuffer:i,uniforms:a,discard:u,parameters:l}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],r=Qh(n);if(!e)return r;const i=r.constructor,s=Sz(this.targetTextureType),o=new i(r.length*s/4);let a=0;for(let l=0;l<r.length;l+=4)for(let u=0;u<s;u++)o[a++]=r[l+u];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:r}=e;this._swapTexture=r,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:r}=e;if(r instanceof jn)return r;const i=n[r];return i?(this._targetRefTexName=r,this._createNewTexture(i)):null}_setupTextures(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:r={},_targetTexture:i}=e,s=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:r,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((r,i,s)=>{s[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new st(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:r}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}_updateBinding(e,n){const{sourceBuffers:r,sourceTextures:i,targetTexture:s}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,r),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:l}=e;l?(l.update({attachments:{[36064]:s},resizeAttachments:!1}),l.resize({width:o,height:a})):e.framebuffer=new Ot(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{[36064]:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const r in n)n[r].setParameters($8)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);n[this._swapTexture]=e.targetTexture;const r=e.sourceTextures[this._swapTexture];return{sourceTextures:n,targetTexture:r}}_createNewTexture(e){const n=vV(e,{parameters:{[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},pixelStore:{[37440]:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:n,targetTexture:r}=this.bindings[this.currentIndex],{vs:i,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:l}=F8({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),u=_m([e.inject||{},a]);this.targetTextureType=o,this.samplerTextureMap=l;const c=e._fs||xA({version:gA(i),input:this.targetTextureVarying,inputType:o,output:G8}),f=this.hasSourceTextures||this.targetTextureVarying?[x8].concat(e.modules||[]):e.modules;return{vs:i,fs:c,modules:f,uniforms:s,inject:u}}}class E0{static isSupported(e){return $e(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:r}=this;e&&e.delete(),n&&n.delete(),r&&r.delete()}run(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:n=!0}=e,r=this._updateDrawOptions(e);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=e||r.swap();ge(e,"Nothing to swap")}getBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n){const i=r.getData(e);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)r.update(e)}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new I8(n,Object.assign({},e,{fs:e.fs||xA({version:gA(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=i.updateModelProps(n);return n}_buildResourceTransforms(e,n){W8(n)&&(this.bufferTransform=new N8(e,n)),X8(n)&&(this.textureTransform=new H8(e,n)),ge(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=Object.assign(n,i.getDrawOptions(n));return n}}function W8(t){return!!(!xa(t.feedbackBuffers)||!xa(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function X8(t){return!!(!xa(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}let q8=1,Y8=1;class UA{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:r=Number.POSITIVE_INFINITY,rate:i=1,repeat:s=1}=e,o=q8++,a={time:0,delay:n,duration:r,rate:i,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[n,r]of this.animations)r.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const i of n)this._setChannelTime(i,this.time);const r=this.animations.values();for(const i of r){const{animation:s,channel:o}=i;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const r=Y8++;return this.animations.set(r,{animation:e,channel:n}),e.setTime(this.getTime(n)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const r=n-e.delay,i=e.duration*e.repeat;r>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}const VA="#define SMOOTH_EDGE_RADIUS 0.5",Z8=`
`.concat(VA,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),K8=`
`.concat(VA,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),Q8={name:"geometry",vs:Z8,fs:K8},tt={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(tt,"IDENTITY",{get:()=>(it.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const _r={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Ub={common:0,meters:1,pixels:2},Vb={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},Vu={DRAW:"draw",MASK:"mask"},J8=Object.keys(tt).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(tt[t],";")).join(""),ej=Object.keys(_r).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(_r[t],";")).join(""),tj=Object.keys(Ub).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(Ub[t],";")).join(""),nj="".concat(J8,`
`).concat(ej,`
`).concat(tj,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0; // meters
const float GLOBE_RADIUS = 256.0;

// returns an adjustment factor for uCommonUnitsPerMeter
float project_size_at_latitude(float lat) {
  float y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {

    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear
    // Adjust by 1 / cos(latitude)
    // If geometry.position (vertex in common space) is populated, use it
    // Otherwise use geometry.worldPosition (anchor in world space)
    
    if (geometry.position.w == 0.0) {
      return project_size_at_latitude(geometry.worldPosition.y);
    }

    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)
    // Taylor series of 1 / cos(latitude)
    // Max error < 0.003
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

float project_size_at_latitude(float meters, float lat) {
  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}

//
// Scaling offsets - scales meters to "world distance"
// Note the scalar version of project_size is for scaling the z component only
//
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}

// Get rotation matrix that aligns the z axis with the given up vector
// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  // Tangent on XY plane
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}

//
// Projecting normal - transform deltas from current coordinate system to
// normals in the worldspace
//
vec3 project_normal(vec3 vector) {
  // Apply model matrix
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}

//
// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]
//
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}

//
// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)
//
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;

  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size_at_latitude(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        // Too far from the projection center for offset mode to be accurate
        // Only use high parts
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.
    position_world.xyz -= project_uCoordinateOrigin;
  }

  // Translation is already added to the high parts
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}

//
// Projects from common space coordinates to clip space.
// Uses project_uViewProjectionMatrix
//
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}

// Returns a clip space offset that corresponds to a given number of screen pixels
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  // UNIT_PIXELS
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function rj(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function ed(t){let e={},n;return r=>{for(const i in r)if(!rj(r[i],e[i])){n=t(r),e=r;break}return n}}const Bb=[0,0,0,0],ij=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],BA=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],sj=[0,0,0],zA=[0,0,0],oj=ed(uj);function jA(t,e,n=zA){n.length<3&&(n=[n[0],n[1],0]);let r=n,i,s=!0;switch(e===tt.LNGLAT_OFFSETS||e===tt.METER_OFFSETS?i=n:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case _r.WEB_MERCATOR:(e===tt.LNGLAT||e===tt.CARTESIAN)&&(i=[0,0,0],s=!1);break;case _r.WEB_MERCATOR_AUTO_OFFSET:e===tt.LNGLAT?r=i:e===tt.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case _r.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case _r.GLOBE:s=!1,i=null;break;default:s=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:s}}function aj(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:s,viewProjectionMatrix:o}=t,a=Bb,l=Bb,u=t.cameraPosition;const{geospatialOrigin:c,shaderCoordinateOrigin:f,offsetMode:d}=jA(t,e,n);return d&&(l=t.projectPosition(c||f),u=[u[0]-l[0],u[1]-l[1],u[2]-l[2]],l[3]=1,a=Ba([],l,o),s=r||s,o=Fs([],i,s),o=Fs([],o,ij)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:l,cameraPosCommon:u,shaderCoordinateOrigin:f,geospatialOrigin:c}}function lj({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=tt.DEFAULT,coordinateOrigin:i=zA,autoWrapLongitude:s=!1}){r===tt.DEFAULT&&(r=t.isGeospatial?tt.LNGLAT:tt.CARTESIAN);const o=oj({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return o.project_uWrapLongitude=s,o.project_uModelMatrix=n||BA,o}function uj({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:i,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:l,geospatialOrigin:u}=aj(t,n,r),c=t.getDistanceScales(),f=[t.width*e,t.height*e],d=Ba([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,g={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:o.slice(0,3),project_uCenter:i,project_uPseudoMeters:Boolean(t._pseudoMeters),project_uViewportSize:f,project_uDevicePixelRatio:e,project_uFocalDistance:d,project_uCommonUnitsPerMeter:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:sj,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:BA,project_uCameraPosition:a};if(u){const y=t.getDistanceScales(u);switch(n){case tt.METER_OFFSETS:g.project_uCommonUnitsPerWorldUnit=y.unitsPerMeter,g.project_uCommonUnitsPerWorldUnit2=y.unitsPerMeter2;break;case tt.LNGLAT:case tt.LNGLAT_OFFSETS:t._pseudoMeters||(g.project_uCommonUnitsPerMeter=y.unitsPerMeter),g.project_uCommonUnitsPerWorldUnit=y.unitsPerDegree,g.project_uCommonUnitsPerWorldUnit2=y.unitsPerDegree2;break;case tt.CARTESIAN:g.project_uCommonUnitsPerWorldUnit=[1,1,y.unitsPerMeter[2]],g.project_uCommonUnitsPerWorldUnit2=[0,0,y.unitsPerMeter2[2]];break}}return g}const cj={};function fj(t=cj){return"viewport"in t?lj(t):{}}const $A={name:"project",dependencies:[xz,Q8],vs:nj,getUniforms:fj};function hj(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function ca(t,e){const n=Ba([],e,t);return FA(n,n,1/n[3]),n}function zb(t,e){const n=t%e;return n<0?e+n:n}function Tm(t,e,n){return t<e?e:t>n?n:t}function dj(t){return Math.log(t)*Math.LOG2E}const S0=Math.log2||dj;function ci(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const br=Math.PI,GA=br/4,Sr=br/180,Am=180/br,gu=512,xm=4003e4,Fc=85.051129,pj=1.5;function gj(t){return S0(t)}function Kf(t){const[e,n]=t;ci(Number.isFinite(e)),ci(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=e*Sr,i=n*Sr,s=gu*(r+br)/(2*br),o=gu*(br+Math.log(Math.tan(GA+i*.5)))/(2*br);return[s,o]}function La(t){const[e,n]=t,r=e/gu*(2*br)-br,i=2*(Math.atan(Math.exp(n/gu*(2*br)-br))-GA);return[r*Am,i*Am]}function HA(t){const{latitude:e}=t;ci(Number.isFinite(e));const n=Math.cos(e*Sr);return gj(xm*n)-9}function Rm(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;ci(Number.isFinite(e)&&Number.isFinite(n));const i=gu,s=Math.cos(e*Sr),o=i/360,a=o/s,l=i/xm/s,u={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[o,a,l],degreesPerUnit:[1/o,1/a,1/l]};if(r){const c=Sr*Math.tan(e*Sr)/s,f=o*c/2,d=i/xm*c,g=d/a*l;u.unitsPerDegree2=[0,f,d],u.unitsPerMeter2=[g,0,g]}return u}function WA(t,e){const[n,r,i]=t,[s,o,a]=e,{unitsPerMeter:l,unitsPerMeter2:u}=Rm({longitude:n,latitude:r,highPrecision:!0}),c=Kf(t);c[0]+=s*(l[0]+u[0]*o),c[1]+=o*(l[1]+u[1]*o);const f=La(c),d=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[f[0],f[1],d]:f}function mj(t){const{height:e,pitch:n,bearing:r,altitude:i,scale:s,center:o}=t,a=hj();Yf(a,a,[0,0,-i]),NA(a,a,-n*Sr),DA(a,a,r*Sr);const l=s/e;return w0(a,a,[l,l,l]),o&&Yf(a,a,zz([],o)),a}function vj(t){const{width:e,height:n,altitude:r,pitch:i=0,offset:s,center:o,scale:a,nearZMultiplier:l=1,farZMultiplier:u=1}=t;let{fovy:c=Qf(pj)}=t;r!==void 0&&(c=Qf(r));const f=c*Sr,d=i*Sr,g=T0(c);let y=g;o&&(y+=o[2]*a/Math.cos(d)/n);const m=f*(.5+(s?s[1]:0)/n),x=Math.sin(m)*y/Math.sin(Tm(Math.PI/2-d-m,.01,Math.PI-.01)),S=Math.sin(d)*x+y,v=y*10,w=Math.min(S*u,v);return{fov:f,aspect:e/n,focalDistance:g,near:l,far:w}}function Qf(t){return 2*Math.atan(.5/t)*Am}function T0(t){return .5/Math.tan(.5*t*Sr)}function XA(t,e){const[n,r,i=0]=t;return ci(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),ca(e,[n,r,i,1])}function Bu(t,e,n=0){const[r,i,s]=t;if(ci(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(s))return ca(e,[r,i,s,1]);const o=ca(e,[r,i,0,1]),a=ca(e,[r,i,1,1]),l=o[2],u=a[2],c=l===u?0:((n||0)-l)/(u-l);return MA([],o,a,c)}function qA(t){const{width:e,height:n,bounds:r,minExtent:i=0,maxZoom:s=24,offset:o=[0,0]}=t,[[a,l],[u,c]]=r,f=yj(t.padding),d=Kf([a,Tm(c,-Fc,Fc)]),g=Kf([u,Tm(l,-Fc,Fc)]),y=[Math.max(Math.abs(g[0]-d[0]),i),Math.max(Math.abs(g[1]-d[1]),i)],m=[e-f.left-f.right-Math.abs(o[0])*2,n-f.top-f.bottom-Math.abs(o[1])*2];ci(m[0]>0&&m[1]>0);const x=m[0]/y[0],S=m[1]/y[1],v=(f.right-f.left)/2/x,w=(f.top-f.bottom)/2/S,R=[(g[0]+d[0])/2+v,(g[1]+d[1])/2+w],L=La(R),C=Math.min(s,S0(Math.abs(Math.min(x,S))));return ci(Number.isFinite(C)),{longitude:L[0],latitude:L[1],zoom:C}}function yj(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(ci(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const jb=Math.PI/180;function _j(t,e=0){const{width:n,height:r,unproject:i}=t,s={targetZ:e},o=i([0,r],s),a=i([n,r],s);let l,u;const c=t.fovy?.5*t.fovy*jb:Math.atan(.5/t.altitude),f=(90-t.pitch)*jb;return c>f-.01?(l=$b(t,0,e),u=$b(t,n,e)):(l=i([0,0],s),u=i([n,0],s)),[o,a,u,l]}function $b(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=ca(r,[e,0,1,1]),s=ca(r,[e,t.height,1,1]),a=(n*t.distanceScales.unitsPerMeter[2]-i[2])/(s[2]-i[2]),l=MA([],i,s,a),u=La(l);return u.push(n),u}const Gb=512;function bj(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:i,latitude:s,zoom:o,bearing:a=0}=t;(i<-180||i>180)&&(i=zb(i+180,360)-180),(a<-180||a>180)&&(a=zb(a+180,360)-180);const l=S0(n/Gb);if(o<=l)o=l,s=0;else{const u=n/2/Math.pow(2,o),c=La([0,u])[1];if(s<c)s=c;else{const f=La([0,Gb-u])[1];s>f&&(s=f)}}return{width:e,height:n,longitude:i,latitude:s,zoom:o,pitch:r,bearing:a}}const wj=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,Ej=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,Sj=ed(Cj),Tj=ed(Pj),Aj=[0,0,0,1],xj=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function Rj(t,e){const[n,r,i]=t,s=Bu([n,r,i],e);return Number.isFinite(i)?s:[s[0],s[1],0]}function Cj({viewport:t,center:e}){return new un(t.viewProjectionMatrix).invert().transform(e)}function Pj({viewport:t,shadowMatrices:e}){const n=[],r=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,s=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(o=>Rj(o,r));for(const o of e){const a=o.clone().translate(new ir(t.center).negate()),l=s.map(c=>a.transform(c)),u=new un().ortho({left:Math.min(...l.map(c=>c[0])),right:Math.max(...l.map(c=>c[0])),bottom:Math.min(...l.map(c=>c[1])),top:Math.max(...l.map(c=>c[1])),near:Math.min(...l.map(c=>-c[2])),far:Math.max(...l.map(c=>-c[2]))});n.push(u.multiplyRight(o))}return n}function Mj(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||Aj,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},i=Sj({viewport:t.viewport,center:e.project_uCenter}),s=[],o=Tj({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const l=o[a],u=l.clone().translate(new ir(t.viewport.center).negate());e.project_uCoordinateSystem===tt.LNGLAT&&e.project_uProjectionMode===_r.WEB_MERCATOR?(o[a]=u,s[a]=i):(o[a]=l.clone().multiplyRight(xj),s[a]=u.transform(i))}for(let a=0;a<o.length;a++)r["shadow_uViewProjectionMatrices[".concat(a,"]")]=o[a],r["shadow_uProjectCenters[".concat(a,"]")]=s[a],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(a)]=t.shadowMaps[a]:r["shadow_uShadowMap".concat(a)]=t.dummyShadowMap;return r}const Gp={name:"shadow",dependencies:[$A],vs:wj,fs:Ej,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?Mj(t,e):{}};({...T8});const Lj=[$A],kj=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function Oj(t){const e=Uu.getDefaultProgramManager(t);for(const n of Lj)e.addDefaultModule(n);for(const n of kj)e.addShaderHook(n);return e}const Ij=[255,255,255],Nj=1;let Dj=0;class Fj{constructor(e={}){b(this,"id",void 0),b(this,"color",void 0),b(this,"intensity",void 0),b(this,"type","ambient");const{color:n=Ij}=e,{intensity:r=Nj}=e;this.id=e.id||"ambient-".concat(Dj++),this.color=n,this.intensity=r}}const Uj=[255,255,255],Vj=1,Bj=[0,0,-1];let zj=0;class Hb{constructor(e={}){b(this,"id",void 0),b(this,"color",void 0),b(this,"intensity",void 0),b(this,"type","directional"),b(this,"direction",void 0),b(this,"shadow",void 0);const{color:n=Uj}=e,{intensity:r=Vj}=e,{direction:i=Bj}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(zj++),this.color=n,this.intensity=r,this.type="directional",this.direction=new ir(i).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class jj{constructor(e,n={id:"pass"}){b(this,"id",void 0),b(this,"gl",void 0),b(this,"props",void 0);const{id:r}=n;this.id=r,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class td extends jj{constructor(...e){super(...e),b(this,"_lastRenderIndex",-1)}render(e){const n=this.gl;return ui(n,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:r,viewports:i,views:s,onViewportActive:o,clearStack:a=!0,clearCanvas:l=!0}=e;e.pass=e.pass||"unknown";const u=this.gl;l&&Gj(u),a&&(this._lastRenderIndex=-1);const c=[];for(const f of i){const d=s&&s[f.id];o(f);const g=this._getDrawLayerParams(f,e),y=f.subViewports||[f];for(const m of y){const x=this._drawLayersInViewport(u,{target:n,moduleParameters:r,viewport:m,view:d,pass:e.pass,layers:e.layers},g);c.push(x)}}return c}_getDrawLayerParams(e,{layers:n,pass:r,layerFilter:i,cullRect:s,effects:o,moduleParameters:a}){const l=[],u=YA(this._lastRenderIndex+1),c={layer:n[0],viewport:e,isPicking:r.startsWith("picking"),renderPass:r,cullRect:s},f={};for(let d=0;d<n.length;d++){const g=n[d],y=this._shouldDrawLayer(g,c,i,f),m={shouldDrawLayer:y};y&&(m.layerRenderIndex=u(g,y),m.moduleParameters=this._getModuleParameters(g,o,r,a),m.layerParameters=this.getLayerParameters(g,d,e)),l[d]=m}return l}_drawLayersInViewport(e,{layers:n,moduleParameters:r,pass:i,target:s,viewport:o,view:a},l){const u=$j(e,{moduleParameters:r,target:s,viewport:o});if(a&&a.props.clear){const f=a.props.clear===!0?{color:!0,depth:!0}:a.props.clear;tr(e,{scissorTest:!0,scissor:u},()=>m0(e,f))}const c={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};ui(e,{viewport:u});for(let f=0;f<n.length;f++){const d=n[f],{shouldDrawLayer:g,layerRenderIndex:y,moduleParameters:m,layerParameters:x}=l[f];if(g&&d.props.pickable&&c.pickableCount++,d.isComposite)c.compositeCount++;else if(g){c.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,y),m.viewport=o;try{d._drawLayer({moduleParameters:m,uniforms:{layerIndex:y},parameters:x})}catch(S){d.raiseError(S,"drawing ".concat(d," to ").concat(i))}}}return c}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,r){return e.props.parameters}_shouldDrawLayer(e,n,r,i){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(n))return!1;n.layer=o,o=o.parent}if(r){const a=n.layer.id;if(a in i||(i[a]=r(n)),!i[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,r,i){var s;const o=Object.assign(Object.create(((s=e.internalState)===null||s===void 0?void 0:s.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Aa(this.gl)});if(n)for(const l of n){var a;Object.assign(o,(a=l.getModuleParameters)===null||a===void 0?void 0:a.call(l,e))}return Object.assign(o,this.getModuleParameters(e,n),i)}}function YA(t=0,e={}){const n={},r=(i,s)=>{const o=i.props._offset,a=i.id,l=i.parent&&i.parent.id;let u;if(l&&!(l in e)&&r(i.parent,!1),l in n){const c=n[l]=n[l]||YA(e[l],e);u=c(i,s),n[a]=c}else Number.isFinite(o)?(u=o+(e[l]||0),n[a]=null):u=t;return s&&u>=t&&(t=u+1),e[a]=u,u};return r}function $j(t,{moduleParameters:e,target:n,viewport:r}){const i=n&&n.id!=="default-framebuffer",s=e&&e.devicePixelRatio||Aa(t),o=i?n.height:t.drawingBufferHeight,a=r;return[a.x*s,o-(a.y+a.height)*s,a.width*s,a.height*s]}function Gj(t){const e=t.drawingBufferWidth,n=t.drawingBufferHeight;ui(t,{viewport:[0,0,e,n]}),t.clear(16640)}class Hj extends td{constructor(e,n){super(e,n),b(this,"shadowMap",void 0),b(this,"depthBuffer",void 0),b(this,"fbo",void 0),this.shadowMap=new jn(e,{width:1,height:1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.depthBuffer=new Qo(e,{format:33189,width:1,height:1}),this.fbo=new Ot(e,{id:"shadowmap",width:1,height:1,attachments:{[36064]:this.shadowMap,[36096]:this.depthBuffer}})}render(e){const n=this.fbo;tr(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const r=e.viewports[0],i=Aa(this.gl),s=r.width*i,o=r.height*i;(s!==n.width||o!==n.height)&&n.resize({width:s,height:o}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const Wj={color:[255,255,255],intensity:1},Wb=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],Xj=[0,0,0,200/255];class ZA{constructor(e={}){b(this,"id","lighting-effect"),b(this,"props",null),b(this,"shadowColor",Xj),b(this,"shadow",void 0),b(this,"ambientLight",null),b(this,"directionalLights",[]),b(this,"pointLights",[]),b(this,"shadowPasses",[]),b(this,"shadowMaps",[]),b(this,"dummyShadowMap",null),b(this,"programManager",void 0),b(this,"shadowMatrices",void 0);for(const n in e){const r=e[n];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow)}preRender(e,{layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o}){if(!!this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=Uu.getDefaultProgramManager(e),Gp&&this.programManager.addDefaultModule(Gp)),this.dummyShadowMap||(this.dummyShadowMap=new jn(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(r=>r.getProjectedLight({layer:e})),pointLights:this.pointLights.map(r=>r.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(Gp),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const r=new un().lookAt({eye:new ir(n.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const r=new Hj(e);this.shadowPasses[n]=r,this.shadowMaps[n]=r.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:r}=this;!e&&n.length===0&&r.length===0&&(this.ambientLight=new Fj(Wj),this.directionalLights.push(new Hb(Wb[0]),new Hb(Wb[1])))}}class qj{constructor(e={}){b(this,"_pool",[]),b(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:r=1,type:i,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:l}){const u=i||e&&e.constructor||Float32Array,c=n*r+s;if(ArrayBuffer.isView(e)){if(c<=e.length)return e;if(c*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new u(e.buffer,0,c)}let f=1/0;l&&(f=l*r+s);const d=this._allocate(u,c,a,f);return e&&o?d.set(e):a||d.fill(0,0,4),this._release(e),d}release(e){this._release(e)}_allocate(e,n,r,i){let s=Math.max(Math.ceil(n*this.opts.overAlloc),1);s>i&&(s=i);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,l=o.findIndex(u=>u.byteLength>=a);if(l>=0){const u=new e(o.splice(l,1)[0],0,s);return r&&u.fill(0),u}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:r}=e,{byteLength:i}=r,s=n.findIndex(o=>o.byteLength>=i);s<0?n.push(r):(s>0||n.length<this.opts.poolSize)&&n.splice(s,0,r),n.length>this.opts.poolSize&&n.shift()}}const mu=new qj;function Ml(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Jf(t,e){const n=t%e;return n<0?e+n:n}function Yj(t){return[t[12],t[13],t[14]]}function Zj(t){return{left:Io(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Io(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Io(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Io(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Io(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Io(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const Xb=new ir;function Io(t,e,n,r){Xb.set(t,e,n);const i=Xb.len();return{distance:r/i,normal:new ir(-t/i,-e/i,-n/i)}}function Kj(t){return t-Math.fround(t)}let vl;function Hp(t,e){const{size:n=1,startIndex:r=0}=e,i=e.endIndex!==void 0?e.endIndex:t.length,s=(i-r)/n;vl=mu.allocate(vl,s,{type:Float32Array,size:n*2});let o=r,a=0;for(;o<i;){for(let l=0;l<n;l++){const u=t[o++];vl[a+l]=u,vl[a+l+n]=Kj(u)}a+=n*2}return vl.subarray(0,s*n*2)}const Qj=Math.PI/180,Jj=Ml(),qb=[0,0,0],e9={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function t9({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:i,padding:s,near:o,far:a}){const l=t/e,u=n?new un().orthographic({fovy:r,aspect:l,focalDistance:i,near:o,far:a}):new un().perspective({fovy:r,aspect:l,near:o,far:a});if(s){const{left:c=0,right:f=0,top:d=0,bottom:g=0}=s,y=Ct((c+t-f)/2,0,t)-t/2,m=Ct((d+e-g)/2,0,e)-e/2;u[8]-=y*2/t,u[9]+=m*2/e}return u}class Gr{constructor(e={}){b(this,"id",void 0),b(this,"x",void 0),b(this,"y",void 0),b(this,"width",void 0),b(this,"height",void 0),b(this,"isGeospatial",void 0),b(this,"zoom",void 0),b(this,"focalDistance",void 0),b(this,"position",void 0),b(this,"modelMatrix",void 0),b(this,"distanceScales",void 0),b(this,"scale",void 0),b(this,"center",void 0),b(this,"cameraPosition",void 0),b(this,"projectionMatrix",void 0),b(this,"viewMatrix",void 0),b(this,"viewMatrixUncentered",void 0),b(this,"viewMatrixInverse",void 0),b(this,"viewProjectionMatrix",void 0),b(this,"pixelProjectionMatrix",void 0),b(this,"pixelUnprojectionMatrix",void 0),b(this,"resolution",void 0),b(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.distanceScales=e.distanceScales||e9,this.focalDistance=e.focalDistance||1,this.position=e.position||qb,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:r}=e;this.isGeospatial=Number.isFinite(r)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?_r.WEB_MERCATOR:_r.WEB_MERCATOR_AUTO_OFFSET:_r.IDENTITY}equals(e){return e instanceof Gr?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&ri(e.projectionMatrix,this.projectionMatrix)&&ri(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const r=this.projectPosition(e),i=XA(r,this.pixelProjectionMatrix),[s,o]=i,a=n?o:this.height-o;return e.length===2?[s,a]:[s,a,i[2]]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[i,s,o]=e,a=n?s:this.height-s,l=r&&r*this.distanceScales.unitsPerMeter[2],u=Bu([i,a,o],this.pixelUnprojectionMatrix,l),[c,f,d]=this.unprojectPosition(u);return Number.isFinite(o)?[c,f,d]:Number.isFinite(r)?[c,f,r]:[c,f]}projectPosition(e){const[n,r]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,r,i]}unprojectPosition(e){const[n,r]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,r,i]}projectFlat(e){if(this.isGeospatial){const n=Kf(e);return n[1]=Ct(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?La(e):e}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,0],n),i=this.unproject([this.width,0],n),s=this.unproject([0,this.height],n),o=this.unproject([this.width,this.height],n);return[Math.min(r[0],i[0],s[0],o[0]),Math.min(r[1],i[1],s[1],o[1]),Math.max(r[0],i[0],s[0],o[0]),Math.max(r[1],i[1],s[1],o[1])]}getDistanceScales(e){return e?Rm({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:r=1,height:i=1}){return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,Zj(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,r=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=HA({latitude:r})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||Rm({latitude:r,longitude:n}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:s,modelMatrix:o}=e;let a=qb;if(s&&(a=o?new un(o).transformAsVector(s,[]):s),this.isGeospatial){const l=this.projectPosition([n,r,0]);this.center=new ir(a).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:n=Jj,projectionMatrix:r=null,orthographic:i=!1,fovyRadians:s,fovy:o=75,near:a=.1,far:l=1e3,padding:u=null,focalDistance:c=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new un().multiplyRight(n).translate(new ir(this.center).negate()),this.projectionMatrix=r||t9({width:this.width,height:this.height,orthographic:i,fovyRadians:s||o*Qj,focalDistance:c,padding:u,near:a,far:l});const f=Ml();Fs(f,f,this.projectionMatrix),Fs(f,f,this.viewMatrix),this.viewProjectionMatrix=f,this.viewMatrixInverse=Em([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=Yj(this.viewMatrixInverse);const d=Ml(),g=Ml();w0(d,d,[this.width/2,-this.height/2,1]),Yf(d,d,[1,-1,0]),Fs(g,d,this.viewProjectionMatrix),this.pixelProjectionMatrix=g,this.pixelUnprojectionMatrix=Em(Ml(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||it.warn("Pixel project matrix not invertible")()}}b(Gr,"displayName","Viewport");const n9=512,r9=4003e4,i9=Math.PI/180;function Yb(t){const e=Math.cos(t*i9);return n9/r9/e}class ts extends Gr{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:i=0,pitch:s=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:l=1.01,orthographic:u=!1,projectionMatrix:c,repeat:f=!1,worldOffset:d=0,legacyMeterSizes:g=!1}=e;let{width:y,height:m,altitude:x=1.5}=e;const S=Math.pow(2,i);y=y||1,m=m||1;let v,w=null;c?(x=c[5]/2,v=Qf(x)):(e.fovy?(v=e.fovy,x=T0(v)):v=Qf(x),w=vj({width:y,height:m,pitch:s,fovy:v,nearZMultiplier:a,farZMultiplier:l}));let R=mj({height:m,pitch:s,bearing:o,scale:S,altitude:x});d&&(R=new un().translate([512*d,0,0]).multiplyLeft(R)),super({...e,width:y,height:m,viewMatrix:R,longitude:r,latitude:n,zoom:i,...w,fovy:v,focalDistance:x}),b(this,"longitude",void 0),b(this,"latitude",void 0),b(this,"pitch",void 0),b(this,"bearing",void 0),b(this,"altitude",void 0),b(this,"fovy",void 0),b(this,"orthographic",void 0),b(this,"_subViewports",void 0),b(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=r,this.zoom=i,this.pitch=s,this.bearing=o,this.altitude=x,this.fovy=v,this.orthographic=u,this._subViewports=f?[]:null,this._pseudoMeters=g,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let i=n;i<=r;i++){const s=i?new ts({...this,worldOffset:i}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,r]=this.projectFlat(e),i=(e[2]||0)*Yb(e[1]);return[n,r,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,r]=this.unprojectFlat(e),i=(e[2]||0)/Yb(r);return[n,r,i]}addMetersToLngLat(e,n){return WA(e,n)}panByPosition(e,n){const r=Bu(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=qf([],i,PA([],r)),o=qf([],this.center,s),[a,l]=this.unprojectFlat(o);return{longitude:a,latitude:l}}getBounds(e={}){const n=_j(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:r,height:i}=this,{longitude:s,latitude:o,zoom:a}=qA({width:r,height:i,bounds:e,...n});return new ts({width:r,height:i,longitude:s,latitude:o,zoom:a})}}b(ts,"displayName","WebMercatorViewport");function Wp(t,e,n=!1){const r=e.projectPosition(t);if(n&&e instanceof ts){const[i,s,o=0]=t,a=e.getDistanceScales([i,s]);r[2]=o*a.unitsPerMeter[2]}return r}function s9(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:i,fromCoordinateSystem:s,fromCoordinateOrigin:o}=t;return i===tt.DEFAULT&&(i=e.isGeospatial?tt.LNGLAT:tt.CARTESIAN),s===void 0&&(s=i),o===void 0&&(o=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:s,fromCoordinateOrigin:o}}function KA(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:i,offsetMode:s}){let[o,a,l=0]=t;switch(n&&([o,a,l]=Ba([],[o,a,l,1],n)),r){case tt.LNGLAT:return Wp([o,a,l],e,s);case tt.LNGLAT_OFFSETS:return Wp([o+i[0],a+i[1],l+(i[2]||0)],e,s);case tt.METER_OFFSETS:return Wp(WA(i,[o,a,l]),e,s);case tt.CARTESIAN:default:return e.isGeospatial?[o+i[0],a+i[1],l+i[2]]:e.projectPosition([o,a,l])}}function o9(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=s9(e),{geospatialOrigin:l,shaderCoordinateOrigin:u,offsetMode:c}=jA(n,r,i),f=KA(t,{viewport:n,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:c});if(c){const d=n.projectPosition(l||u);IA(f,f,d)}return f}const Vo={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},eh=Symbol.for("component"),fa=Symbol.for("asyncPropDefaults"),Xs=Symbol.for("asyncPropOriginal"),Bi=Symbol.for("asyncPropResolved");function A0(t,e=()=>!0){return Array.isArray(t)?QA(t,e,[]):e(t)?[t]:[]}function QA(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?QA(i,e,n):e(i)&&n.push(i)}return n}function a9({target:t,source:e,start:n=0,count:r=1}){const i=e.length,s=r*i;let o=0;for(let a=n;o<i;o++)t[a++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(n+o,n,n+o),o*=2):(t.copyWithin(n+o,n,n+s-o),o=s);return t}class l9{constructor(e,n,r){b(this,"id",void 0),b(this,"context",void 0),b(this,"isLoaded",void 0),b(this,"persistent",void 0),b(this,"_loadCount",0),b(this,"_subscribers",new Set),b(this,"_data",void 0),b(this,"_loader",void 0),b(this,"_error",void 0),b(this,"_content",void 0),this.id=e,this.context=r,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const r=++this._loadCount;let i=e;typeof e=="string"&&(i=cm(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class u9{constructor({gl:e,protocol:n}){b(this,"protocol",void 0),b(this,"_context",void 0),b(this,"_resources",void 0),b(this,"_consumers",void 0),b(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:r=!1,persistent:i=!0}){let s=this._resources[e];s?s.setData(n,r):(s=new l9(e,n,this._context),this._resources[e]=s),s.persistent=i}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const r in n){const i=n[r],s=this._resources[i.resourceId];s&&s.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:r,requestId:i="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(e=e.replace(o,""),s[e]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(r,i,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,r,i){const s=this._consumers,o=s[e]=s[e]||{},a=o[n]||{},l=a.resourceId&&this._resources[a.resourceId];l&&(l.unsubscribe(a),this.prune()),r&&(o[n]=a,a.onChange=i,a.resourceId=r.id,r.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const c9="layerManager.setLayers",f9="layerManager.activateViewport";class h9{constructor(e,{deck:n,stats:r,viewport:i,timeline:s}={}){b(this,"layers",void 0),b(this,"context",void 0),b(this,"resourceManager",void 0),b(this,"_lastRenderedLayers",[]),b(this,"_needsRedraw",!1),b(this,"_needsUpdate",!1),b(this,"_nextLayers",null),b(this,"_debug",!1),b(this,"activateViewport",o=>{on(f9,this,o),o&&(this.context.viewport=o)}),this.layers=[],this.resourceManager=new u9({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&Oj(e),stats:r||new a0({id:"deck.gl"}),viewport:i||new Gr({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new UA,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const i=r.getNeedsRedraw(e);n=n||i}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(r=>n.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){on(c9,this,n,e),this._lastRenderedLayers=e;const r=A0(e,Boolean);for(const i of r)i.context=this.context;this._updateLayers(this.layers,r)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,r){r.raiseError(n,"".concat(e," of ").concat(r))}_updateLayers(e,n){const r={};for(const o of e)r[o.id]?it.warn("Multiple old layers with same id ".concat(o.id))():r[o.id]=o;const i=[];this._updateSublayersRecursively(n,r,i),this._finalizeOldLayers(r);let s=!1;for(const o of i)if(o.hasUniformTransition()){s="Uniform transition in ".concat(o);break}this._needsUpdate=s,this.layers=i}_updateSublayersRecursively(e,n,r){for(const i of e){i.context=this.context;const s=n[i.id];s===null&&it.warn("Multiple new layers with same id ".concat(i.id))(),n[i.id]=null;let o=null;try{this._debug&&s!==i&&i.validateProps(),s?(this._transferLayerState(s,i),this._updateLayer(i)):this._initializeLayer(i),r.push(i),o=i.isComposite?i.getSubLayers():null}catch(a){this._handleError("matching",a,i)}o&&this._updateSublayersRecursively(o,n,r)}}_finalizeOldLayers(e){for(const n in e){const r=e[n];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=Vo.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=Vo.MATCHED,n!==e&&(e.lifecycle=Vo.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=Vo.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=Vo.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function no(t,e){if(t===e)return!0;if(!t||!e)return!1;for(const n in t){const r=t[n],i=e[n];if(!(r===i||Array.isArray(r)&&Array.isArray(i)&&no(r,i)))return!1}return!0}class d9{constructor(e){b(this,"width",void 0),b(this,"height",void 0),b(this,"views",void 0),b(this,"viewState",void 0),b(this,"controllers",void 0),b(this,"timeline",void 0),b(this,"_viewports",void 0),b(this,"_viewportMap",void 0),b(this,"_isUpdating",void 0),b(this,"_needsRedraw",void 0),b(this,"_needsUpdate",void 0),b(this,"_eventManager",void 0),b(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n=typeof e=="string"?this.getView(e):e,r=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,n){const r=this.getViewports(),i={x:e[0],y:e[1]};for(let s=r.length-1;s>=0;--s){const o=r[s];if(o.containsPixel(i)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=A0(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!no(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):it.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){const r=n.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var o;return(o=this.getView(e.id))===null||o===void 0?void 0:o.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,n,r,i){const s=e.controller;if(s){const o={...n,...s,id:e.id,x:r.x,y:r.y,width:r.width,height:r.height};return i||(i=this._createController(e,o)),i&&i.setProps(o),i}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let r=!1;for(let i=e.length;i--;){const s=e[i],o=this.getViewState(s),a=s.makeViewport({viewState:o,width:this.width,height:this.height});let l=n[s.id];const u=Boolean(s.controller);u&&!l&&(r=!0),(r||!u)&&l&&(l.finalize(),l=null),this.controllers[s.id]=this._updateController(s,o,a,l),this._viewports.unshift(a)}for(const i in n){const s=n[i];s&&!this.controllers[i]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((r,i)=>!e[i].equals(n[i]))}}const p9=/([0-9]+\.?[0-9]*)(%|px)/;function Pi(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=p9.exec(t);if(e&&e.length>=3){const n=e[2]==="%",r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function Mi(t,e){return t.relative?Math.round(t.position*e):t.position}function Zt(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class zr{constructor(e){b(this,"id",void 0),b(this,"viewportInstance",void 0),b(this,"_x",void 0),b(this,"_y",void 0),b(this,"_width",void 0),b(this,"_height",void 0),b(this,"_padding",void 0),b(this,"props",void 0);const{id:n,x:r=0,y:i=0,width:s="100%",height:o="100%",padding:a=null,viewportInstance:l}=e||{};Zt(!l||l instanceof Gr),this.viewportInstance=l,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=Pi(r),this._y=Pi(i),this._width=Pi(s),this._height=Pi(o),this._padding=a&&{left:Pi(a.left||0),right:Pi(a.right||0),top:Pi(a.top||0),bottom:Pi(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance?this.viewportInstance.equals(e.viewportInstance):!1:this.ViewportType===e.ViewportType&&no(this.props,e.props)}makeViewport({width:e,height:n,viewState:r}){if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const i=this.getDimensions({width:e,height:n});return new this.ViewportType({...r,...this.props,...i})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const r in this.props.viewState)r!=="id"&&(n[r]=this.props.viewState[r]);return n}return e}getDimensions({width:e,height:n}){const r={x:Mi(this._x,e),y:Mi(this._y,n),width:Mi(this._width,e),height:Mi(this._height,n)};return this._padding&&(r.padding={left:Mi(this._padding.left,e),top:Mi(this._padding.top,n),right:Mi(this._padding.right,e),bottom:Mi(this._padding.bottom,n)}),r}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class zu{constructor(e){b(this,"_inProgress",void 0),b(this,"_handle",void 0),b(this,"_timeline",void 0),b(this,"time",void 0),b(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,r;this.cancel(),this.settings=e,this._inProgress=!0,(n=(r=this.settings).onStart)===null||n===void 0||n.call(r,this)}end(){if(this._inProgress){var e,n;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(e=(n=this.settings).onEnd)===null||e===void 0||e.call(n,this)}}cancel(){if(this._inProgress){var e,n;(e=(n=this.settings).onInterrupt)===null||e===void 0||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:r,settings:i}=this;this._handle=r.addChannel({delay:r.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(e=(n=this.settings).onUpdate)===null||e===void 0||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const Zb=()=>{},Cm={BREAK:1,SNAP_TO_END:2,IGNORE:3},g9=t=>t,m9=Cm.BREAK;class v9{constructor(e){b(this,"getControllerState",void 0),b(this,"props",void 0),b(this,"propsInTransition",void 0),b(this,"transition",void 0),b(this,"onViewStateChange",void 0),b(this,"onStateChange",void 0),b(this,"_onTransitionUpdate",n=>{const{time:r,settings:{interpolator:i,startProps:s,endProps:o,duration:a,easing:l}}=n,u=l(r/a),c=i.interpolateProps(s,o,u);this.propsInTransition=this.getControllerState({...this.props,...c}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new zu(e.timeline),this.onViewStateChange=e.onViewStateChange||Zb,this.onStateChange=e.onStateChange||Zb}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const r=this.props;if(this.props=e,!r||this._shouldIgnoreViewportChange(r,e))return!1;if(this._isTransitionEnabled(e)){let i=r;if(this.transition.inProgress){const{interruption:s,endProps:o}=this.transition.settings;i={...r,...s===Cm.SNAP_TO_END?o:this.propsInTransition||r}}this._triggerTransition(i,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:r}=e;return(n>0||n==="auto")&&Boolean(r)}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===Cm.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const r=this.getControllerState(e),i=this.getControllerState(n).shortestPathFrom(r),s=n.transitionInterpolator,o=s.getDuration?s.getDuration(e,n):n.transitionDuration;if(o===0)return;const a=s.initializeProps(e,i);this.propsInTransition={};const l={duration:o,easing:n.transitionEasing||g9,interpolator:s,interruption:n.transitionInterruption||m9,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(n)}}}class y9{constructor(e){b(this,"_propsToCompare",void 0),b(this,"_propsToExtract",void 0),b(this,"_requiredProps",void 0);const{compare:n,extract:r,required:i}=e;this._propsToCompare=n,this._propsToExtract=r||n,this._requiredProps=i}arePropsEqual(e,n){for(const r of this._propsToCompare)if(!(r in e)||!(r in n)||!ri(e[r],n[r]))return!1;return!0}initializeProps(e,n){const r={},i={};for(const s of this._propsToExtract)(s in e||s in n)&&(r[s]=e[s],i[s]=n[s]);return this._checkRequiredProps(r),this._checkRequiredProps(i),{start:r,end:i}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){!this._requiredProps||this._requiredProps.forEach(n=>{const r=e[n];Zt(Number.isFinite(r)||Array.isArray(r),"".concat(n," is required for transition"))})}}const _9=["longitude","latitude","zoom","bearing","pitch"],b9=["longitude","latitude","zoom"];class za extends y9{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,r=Array.isArray(e)?{}:e;r.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:_9,required:b9},super(r.transitionProps),b(this,"opts",void 0),this.opts=r}initializeProps(e,n){const r=super.initializeProps(e,n),{makeViewport:i,around:s}=this.opts;if(i&&s){const o=i(e),a=i(n),l=o.unproject(s);r.start.around=s,Object.assign(r.end,{around:a.project(l),aroundPosition:l,width:n.width,height:n.height})}return r}interpolateProps(e,n,r){const i={};for(const s of this._propsToExtract)i[s]=Xf(e[s]||0,n[s]||0,r);if(n.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...n,...i});Object.assign(i,s.panByPosition(n.aroundPosition,Xf(e.around,n.around,r)))}return i}}const Li={transitionDuration:0},w9=300,Uc=t=>1-(1-t)*(1-t),No={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},ws={};class ju{constructor(e){b(this,"props",void 0),b(this,"state",{}),b(this,"transitionManager",void 0),b(this,"eventManager",void 0),b(this,"onViewStateChange",void 0),b(this,"onStateChange",void 0),b(this,"makeViewport",void 0),b(this,"_controllerState",void 0),b(this,"_events",{}),b(this,"_interactionState",{isDragging:!1}),b(this,"_customEvents",[]),b(this,"_eventStartBlocked",null),b(this,"_panMove",!1),b(this,"invertPan",!1),b(this,"dragMode","rotate"),b(this,"inertia",0),b(this,"scrollZoom",!0),b(this,"dragPan",!0),b(this,"dragRotate",!0),b(this,"doubleClickZoom",!0),b(this,"touchZoom",!0),b(this,"touchRotate",!1),b(this,"keyboard",!0),this.transitionManager=new v9({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;(e=this.eventManager)===null||e===void 0||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return n?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:r}=this.props,{offsetCenter:i}=e;return[i.x-n,i.y-r]}isPointInBounds(e,n){const{width:r,height:i}=this.props;if(n&&n.handled)return!1;const s=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return s&&n&&n.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:n}=e;return Boolean(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?w9:0;const{scrollZoom:r=!0,dragPan:i=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:l=!1,keyboard:u=!0}=e,c=Boolean(this.onViewStateChange);this.toggleEvents(No.WHEEL,c&&r),this.toggleEvents(No.PAN,c&&(i||s)),this.toggleEvents(No.PINCH,c&&(a||l)),this.toggleEvents(No.TRIPLE_PAN,c&&l),this.toggleEvents(No.DOUBLE_TAP,c&&o),this.toggleEvents(No.KEYBOARD,c&&u),this.scrollZoom=r,this.dragPan=i,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=l,this.keyboard=u}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(r=>{this._events[r]!==n&&(this._events[r]=n,n?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,n=null,r={}){const i={...e.getViewportProps(),...n},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(r),s){const o=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(r=!r);const i=this.controllerState[r?"panStart":"rotateStart"]({pos:n});return this._panMove=r,this.updateViewport(i,Li,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),r=this.controllerState.pan({pos:n});return this.updateViewport(r,Li,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Uc},{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),r=this.controllerState.rotate({pos:n});return this.updateViewport(r,Li,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Uc},{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const{speed:r=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*r)));s<0&&o!==0&&(o=1/o);const a=this.controllerState.zoom({pos:n,scale:o});return this.updateViewport(a,{...this._getTransitionProps({around:n}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.rotateStart({pos:n});return this.updateViewport(r,Li,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const r=this.controllerState.rotate({pos:n});return this.updateViewport(r,Li,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const r=this.getCenter(e),i=[r[0],r[1]+=e.velocityY*n/2],s=this.controllerState.rotate({pos:i});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Uc},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return ws._startPinchRotation=e.rotation,ws._lastPinchEvent=e,this.updateViewport(r,Li,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:r}=e,i=this.getCenter(e);n=n.zoom({pos:i,scale:r})}if(this.touchRotate){const{rotation:r}=e;n=n.rotate({deltaAngleX:ws._startPinchRotation-r})}return this.updateViewport(n,Li,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),ws._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:r}=ws;if(this.touchZoom&&n&&r&&e.scale!==r.scale){const i=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),l=Math.pow(2,o+a*n/2);s=s.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:i}),transitionDuration:n,transitionEasing:Uc},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return ws._startPinchRotation=null,ws._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:n,scale:r?.5:2});return this.updateViewport(i,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:i,rotateSpeedX:s,rotateSpeedY:o}=this.keyboard===!0?{}:this.keyboard,{controllerState:a}=this;let l;const u={};switch(e.srcEvent.code){case"Minus":l=n?a.zoomOut(r).zoomOut(r):a.zoomOut(r),u.isZooming=!0;break;case"Equal":l=n?a.zoomIn(r).zoomIn(r):a.zoomIn(r),u.isZooming=!0;break;case"ArrowLeft":n?(l=a.rotateLeft(s),u.isRotating=!0):(l=a.moveLeft(i),u.isPanning=!0);break;case"ArrowRight":n?(l=a.rotateRight(s),u.isRotating=!0):(l=a.moveRight(i),u.isPanning=!0);break;case"ArrowUp":n?(l=a.rotateUp(o),u.isRotating=!0):(l=a.moveUp(i),u.isPanning=!0);break;case"ArrowDown":n?(l=a.rotateDown(o),u.isRotating=!0):(l=a.moveDown(i),u.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),u),!0}_getTransitionProps(e){const{transition:n}=this;return!n||!n.transitionInterpolator?Li:e?{...n,transitionInterpolator:new za({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}}class x0{constructor(e,n){b(this,"_viewportProps",void 0),b(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const Kb=5,E9=1.2;class JA extends x0{constructor(e){const{width:n,height:r,latitude:i,longitude:s,zoom:o,bearing:a=0,pitch:l=0,altitude:u=1.5,position:c=[0,0,0],maxZoom:f=20,minZoom:d=0,maxPitch:g=60,minPitch:y=0,startPanLngLat:m,startZoomLngLat:x,startRotatePos:S,startBearing:v,startPitch:w,startZoom:R,normalize:L=!0}=e;Zt(Number.isFinite(s)),Zt(Number.isFinite(i)),Zt(Number.isFinite(o)),super({width:n,height:r,latitude:i,longitude:s,zoom:o,bearing:a,pitch:l,altitude:u,maxZoom:f,minZoom:d,maxPitch:g,minPitch:y,normalize:L,position:c},{startPanLngLat:m,startZoomLngLat:x,startRotatePos:S,startBearing:v,startPitch:w,startZoom:R}),b(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startBearing:s,startPitch:o}=this.getState();if(!i||s===void 0||o===void 0)return this;let a;return e?a=this._getNewRotation(e,i,o,s):a={bearing:s+n,pitch:o+r},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomLngLat:s}=this.getState();if(s||(i=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const{maxZoom:o,minZoom:a}=this.getViewportProps();let l=i+Math.log2(r);l=Ct(l,a,o);const u=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...u.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{bearing:i,longitude:s}=r;return Math.abs(i-n.bearing)>180&&(r.bearing=i<0?i+360:i-360),Math.abs(s-n.longitude)>180&&(r.longitude=s<0?s+360:s-360),r}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i}=e;e.zoom=Ct(i,r,n);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=Ct(a,o,s);const{normalize:l=!0}=e;return l&&Object.assign(e,bj(e)),e}_zoomFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.zoom({pos:[n/2,r/2],scale:e})}_panFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,r,i){const s=e[0]-n[0],o=e[1]-n[1],a=e[1],l=n[1],{width:u,height:c}=this.getViewportProps(),f=s/u;let d=0;o>0?Math.abs(c-l)>Kb&&(d=o/(l-c)*E9):o<0&&l>Kb&&(d=1-a/l),d=Ct(d,-1,1);const{minPitch:g,maxPitch:y}=this.getViewportProps(),m=i+180*f;let x=r;return d>0?x=r+d*(y-r):d<0&&(x=r-d*(g-r)),{pitch:x,bearing:m}}}class S9 extends ju{constructor(...e){super(...e),b(this,"ControllerState",JA),b(this,"transition",{transitionDuration:300,transitionInterpolator:new za({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),b(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class ex extends zr{get ViewportType(){return ts}get ControllerType(){return S9}}b(ex,"displayName","MapView");class T9 extends td{constructor(e,n){super(e,n),b(this,"maskMap",void 0),b(this,"fbo",void 0);const{mapSize:r=2048}=n;this.maskMap=new jn(e,{width:r,height:r,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.fbo=new Ot(e,{id:"maskmap",width:r,height:r,attachments:{[36064]:this.maskMap}})}render(e){const n=this.gl,r=[!1,!1,!1,!1];return r[e.channel]=!0,tr(n,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:r,depthTest:!1},()=>super.render({...e,target:this.fbo,pass:"mask"}))}shouldDrawLayer(e){return e.props.operation===Vu.MASK}delete(){this.fbo.delete(),this.maskMap.delete()}}const A9=new un().lookAt({eye:[0,0,1]});function x9({width:t,height:e,near:n,far:r,padding:i}){let s=-t/2,o=t/2,a=-e/2,l=e/2;if(i){const{left:u=0,right:c=0,top:f=0,bottom:d=0}=i,g=Ct((u+t-c)/2,0,t)-t/2,y=Ct((f+e-d)/2,0,e)-e/2;s-=g,o-=g,a+=y,l+=y}return new un().ortho({left:s,right:o,bottom:a,top:l,near:n,far:r})}class R9 extends Gr{constructor(e){const{width:n,height:r,near:i=.1,far:s=1e3,zoom:o=0,target:a=[0,0,0],padding:l=null,flipY:u=!0}=e,c=Array.isArray(o)?o[0]:o,f=Array.isArray(o)?o[1]:o,d=Math.min(c,f),g=Math.pow(2,d);let y;if(c!==f){const m=Math.pow(2,c),x=Math.pow(2,f);y={unitsPerMeter:[m/g,x/g,1],metersPerUnit:[g/m,g/x,1]}}super({...e,longitude:void 0,position:a,viewMatrix:A9.clone().scale([g,g*(u?-1:1),g]),projectionMatrix:x9({width:n||1,height:r||1,padding:l,near:i,far:s}),zoom:d,distanceScales:y})}projectFlat([e,n]){const{unitsPerMeter:r}=this.distanceScales;return[e*r[0],n*r[1]]}unprojectFlat([e,n]){const{metersPerUnit:r}=this.distanceScales;return[e*r[0],n*r[1]]}panByPosition(e,n){const r=Bu(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=qf([],i,PA([],r)),o=qf([],this.center,s);return{target:this.unprojectFlat(o)}}}class tx extends x0{constructor(e){const{width:n,height:r,rotationX:i=0,rotationOrbit:s=0,target:o=[0,0,0],zoom:a=0,minRotationX:l=-90,maxRotationX:u=90,minZoom:c=-1/0,maxZoom:f=1/0,startPanPosition:d,startRotatePos:g,startRotationX:y,startRotationOrbit:m,startZoomPosition:x,startZoom:S}=e;super({width:n,height:r,rotationX:i,rotationOrbit:s,target:o,zoom:a,minRotationX:l,maxRotationX:u,minZoom:c,maxZoom:f},{startPanPosition:d,startRotatePos:g,startRotationX:y,startRotationOrbit:m,startZoomPosition:x,startZoom:S}),b(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:n}){const r=this.getState().startPanPosition||n;if(!r)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startRotationX:s,startRotationOrbit:o}=this.getState(),{width:a,height:l}=this.getViewportProps();if(!i||s===void 0||o===void 0)return this;let u;if(e){let c=(e[0]-i[0])/a;const f=(e[1]-i[1])/l;(s<-90||s>90)&&(c*=-1),u={rotationX:s+f*180,rotationOrbit:o+c*180}}else u={rotationX:s+r,rotationOrbit:o+n};return this._getUpdatedState(u)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{rotationOrbit:i}=r;return Math.abs(i-n.rotationOrbit)>180&&(r.rotationOrbit=i<0?i+360:i-360),r}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomPosition:s}=this.getState();if(s||(i=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const o=this._calculateNewZoom({scale:r,startZoom:i}),a=this.makeViewport({...this.getViewportProps(),zoom:o});return this._getUpdatedState({zoom:o,...a.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:r,minZoom:i}=this.getViewportProps();n===void 0&&(n=this.getViewportProps().zoom);const s=n+Math.log2(e);return Ct(s,i,r)}_panFromCenter(e){const{width:n,height:r,target:i}=this.getViewportProps();return this.pan({startPosition:i,pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i,maxRotationX:s,minRotationX:o,rotationOrbit:a}=e;return e.zoom=Array.isArray(i)?[Ct(i[0],r,n),Ct(i[1],r,n)]:Ct(i,r,n),e.rotationX=Ct(e.rotationX,o,s),(a<-180||a>180)&&(e.rotationOrbit=Jf(a+180,360)-180),e}}class C9 extends ju{constructor(...e){super(...e),b(this,"ControllerState",tx),b(this,"transition",{transitionDuration:300,transitionInterpolator:new za({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}class P9 extends tx{constructor(e){super(e),b(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:r,minZoom:i}=this.getViewportProps();n===void 0&&(n=this.getViewportProps().zoom);let s=Math.log2(e);if(Array.isArray(n)){let[o,a]=n;switch(this.zoomAxis){case"X":o=Ct(o+s,i,r);break;case"Y":a=Ct(a+s,i,r);break;default:let l=Math.min(o+s,a+s);l<i&&(s+=i-l),l=Math.max(o+s,a+s),l>r&&(s+=r-l),o+=s,a+=s}return[o,a]}return Ct(n+s,i,r)}}class M9 extends ju{constructor(...e){super(...e),b(this,"ControllerState",P9),b(this,"transition",{transitionDuration:300,transitionInterpolator:new za(["target","zoom"])}),b(this,"dragMode","pan")}_onPanRotate(){return!1}}class nx extends zr{get ViewportType(){return R9}get ControllerType(){return M9}}b(nx,"displayName","OrthographicView");function L9({layers:t,viewport:e}){let n=null;for(const s of t){const o=s.getBounds();o&&(n?(n[0]=Math.min(n[0],o[0][0]),n[1]=Math.min(n[1],o[0][1]),n[2]=Math.max(n[2],o[1][0]),n[3]=Math.max(n[3],o[1][1])):n=[o[0][0],o[0][1],o[1][0],o[1][1]])}const r=e.getBounds();if(!n)return r;const i=O9(r);return n[2]-n[0]<i[2]-i[0]||n[3]-n[1]<i[3]-i[1]||(n[0]=Math.max(n[0],i[0]),n[1]=Math.max(n[1],i[1]),n[2]=Math.min(n[2],i[2]),n[3]=Math.min(n[3],i[3])),n}function k9({bounds:t,viewport:e,width:n,height:r}){if(t[2]<=t[0]||t[3]<=t[1])return null;const i=1;if(n-=i*2,r-=i*2,e instanceof ts){const{longitude:a,latitude:l,zoom:u}=qA({width:n,height:r,bounds:[[t[0],t[1]],[t[2],t[3]]],maxZoom:20});return new ts({longitude:a,latitude:l,zoom:u,x:i,y:i,width:n,height:r})}const s=[(t[0]+t[2])/2,(t[1]+t[3])/2,0],o=Math.min(20,n/(t[2]-t[0]),r/(t[3]-t[1]));return new nx({x:i,y:i}).makeViewport({width:n,height:r,viewState:{target:s,zoom:Math.log2(o)}})}function O9(t){const e={x:t[2]-t[0],y:t[3]-t[1]},n={x:t[0]+.5*e.x,y:t[1]+.5*e.y};return[n.x-e.x,n.y-e.y,n.x+e.x,n.y+e.y]}class I9{constructor(){b(this,"id","mask-effect"),b(this,"props",null),b(this,"useInPicking",!0),b(this,"dummyMaskMap",void 0),b(this,"channels",[]),b(this,"masks",null),b(this,"maskPass",void 0),b(this,"maskMap",void 0),b(this,"lastViewport",void 0)}preRender(e,{layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o}){this.dummyMaskMap||(this.dummyMaskMap=new jn(e,{width:1,height:1}));const a=n.filter(f=>f.props.visible&&f.props.operation===Vu.MASK);if(a.length===0){this.masks=null,this.channels.length=0;return}this.masks={},this.maskPass||(this.maskPass=new T9(e,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const l=this._sortMaskChannels(a),u=i[0],c=!this.lastViewport||!this.lastViewport.equals(u);for(const f in l)this._renderChannel(l[f],{layerFilter:r,onViewportActive:s,views:o,viewport:u,viewportChanged:c})}_renderChannel(e,{layerFilter:n,onViewportActive:r,views:i,viewport:s,viewportChanged:o}){const a=this.channels[e.index];if(!a)return;const l=e===a||a.layers.length!==e.layers.length||e.layerBounds.some((u,c)=>u!==a.layerBounds[c]);if(e.bounds=a.bounds,e.maskBounds=a.maskBounds,this.channels[e.index]=e,(l||o)&&(this.lastViewport=s,e.bounds=L9({layers:e.layers,viewport:s}),l||!ri(e.bounds,a.bounds))){const{maskPass:u,maskMap:c}=this,f=k9({bounds:e.bounds,viewport:s,width:c.width,height:c.height});e.maskBounds=f?f.getBounds():[0,0,1,1],u.render({pass:"mask",channel:e.index,layers:e.layers,layerFilter:n,viewports:f?[f]:[],onViewportActive:r,views:i,moduleParameters:{devicePixelRatio:1}})}this.masks[e.id]={index:e.index,bounds:e.maskBounds,coordinateOrigin:e.coordinateOrigin,coordinateSystem:e.coordinateSystem}}_sortMaskChannels(e){const n={};let r=0;for(const i of e){const{id:s}=i.root;let o=n[s];if(!o){if(++r>4){it.warn("Too many mask layers. The max supported is 4")();continue}o={id:s,index:this.channels.findIndex(a=>(a==null?void 0:a.id)===s),layers:[],layerBounds:[],coordinateOrigin:i.root.props.coordinateOrigin,coordinateSystem:i.root.props.coordinateSystem},n[s]=o}o.layers.push(i),o.layerBounds.push(i.getBounds())}for(let i=0;i<4;i++){const s=this.channels[i];(!s||!(s.id in n))&&(this.channels[i]=null)}for(const i in n){const s=n[i];s.index<0&&(s.index=this.channels.findIndex(o=>!o),this.channels[s.index]=s)}return n}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const N9=new ZA;class D9{constructor(){b(this,"effects",void 0),b(this,"_internalEffects",void 0),b(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!no(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._internalEffects=e.slice(),this._internalEffects.push(new I9),e.some(n=>n instanceof ZA)||this._internalEffects.push(N9)}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}}class F9 extends td{shouldDrawLayer(e){return e.props.operation===Vu.DRAW}}const Qb={blendFunc:[1,0,32771,0],blendEquation:32774};class rx extends td{constructor(...e){super(...e),b(this,"pickZ",void 0),b(this,"_colors",null)}render(e){return e.pickingFBO?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:l,width:u,height:c},cullRect:f,effects:d,pass:g="picking",pickZ:y}){const m=this.gl;this.pickZ=y;const x=y?null:{byLayer:new Map,byAlpha:[]};this._colors=x;const S=tr(m,{scissorTest:!0,scissor:[a,l,u,c],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...Qb,blend:!y},()=>super.render({target:o,layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,cullRect:f,effects:d==null?void 0:d.filter(w=>w.useInPicking),pass:g}));return this._colors=null,{decodePickingColor:x&&V9.bind(null,x),stats:S}}shouldDrawLayer(e){return e.props.pickable&&e.props.operation===Vu.DRAW}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,r){const i={...e.props.parameters};return this._colors?(Object.assign(i,Qb),i.blend=!0,i.blendColor=U9(this._colors,e,r)):i.blend=!1,i}}function U9(t,e,n){const{byLayer:r,byAlpha:i}=t;let s,o=r.get(e);return o?(o.viewports.push(n),s=o.a):(s=r.size+1,s<=255?(o={a:s,layer:e,viewports:[n]},r.set(e,o),i[s]=o):(it.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}function V9(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const B9="deckRenderer.renderLayers";class z9{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new F9(e),this.pickLayersPass=new rx(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=e.layerFilter||this.layerFilter,e.effects=e.effects||[],e.target=e.target||Ot.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const r=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,i=n.render({...e,target:r});this._postRender(e.effects,e),this.renderCount++,on(B9,this,i,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){let r=null;for(const i of e)i.preRender(this.gl,n),i.postRender&&(r=i);r&&this._resizeRenderBuffers(),this.lastPostProcessEffect=r}_resizeRenderBuffers(){const{renderBuffers:e}=this;e.length===0&&e.push(new Ot(this.gl),new Ot(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:r}=this,i={inputBuffer:r[0],swapBuffer:r[1],target:null};for(const s of e)if(s.postRender){if(s===this.lastPostProcessEffect){i.target=n.target,s.postRender(this.gl,i);break}const o=s.postRender(this.gl,i);i.inputBuffer=o,i.swapBuffer=o===r[0]?r[1]:r[0]}}}const j9={pickedColor:null,pickedObjectIndex:-1};function $9({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:i,deviceRect:s}){const{x:o,y:a,width:l,height:u}=s;let c=i*i,f=-1,d=0;for(let g=0;g<u;g++){const y=g+a-r,m=y*y;if(m>c)d+=4*l;else for(let x=0;x<l;x++){if(t[d+3]-1>=0){const v=x+o-n,w=v*v+m;w<=c&&(c=w,f=d)}d+=4}}if(f>=0){const g=t.slice(f,f+4),y=e(g);if(y){const m=Math.floor(f/4/l),x=f/4-m*l;return{...y,pickedColor:g,pickedX:o+x,pickedY:a+m}}it.error("Picked non-existent layer. Is picking buffer corrupt?")()}return j9}function G9({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const s=t.slice(r,r+4),o=s.join(",");if(!n.has(o)){const a=e(s);a?n.set(o,{...a,color:s}):it.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function ix({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:i,z:s}){let o=e[0];e.length>1&&(o=W9((t==null?void 0:t.pickedViewports)||e,{x:r,y:i}));let a;if(o){const l=[r-o.x,i-o.y];s!==void 0&&(l[2]=s),a=o.unproject(l)}return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:r,y:i,pixel:[r,i],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function H9(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,l=o?[o]:[];if(r==="hover"){const f=n.index,d=n.layerId,g=o?o.props.id:null;if(g!==d||a!==f){if(g!==d){const y=i.find(m=>m.props.id===d);y&&l.unshift(y)}n.layerId=g,n.index=a,n.info=null}}const u=ix(t),c=new Map;return c.set(null,u),l.forEach(f=>{let d={...u};f===o&&(d.color=s,d.index=a,d.picked=!0),d=sx({layer:f,info:d,mode:r});const g=d.layer;f===o&&r==="hover"&&(n.info=d),c.set(g.id,d),r==="hover"&&g.updateAutoHighlight(d)}),c}function sx({layer:t,info:e,mode:n}){for(;t&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}function W9(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}class X9{constructor(e){b(this,"gl",void 0),b(this,"pickingFBO",void 0),b(this,"depthFBO",void 0),b(this,"pickLayersPass",void 0),b(this,"layerFilter",void 0),b(this,"lastPickedInfo",void 0),b(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new rx(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:r,viewports:i},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,l=o?r.find(d=>d.id===o):null,u=a&&i.find(d=>d.id===a)||i[0],c=u&&u.unproject([e-u.x,n-u.y]);return{...s,...{x:e,y:n,viewport:u,coordinate:c,layer:l}}}_resizeBuffer(){var e,n;const{gl:r}=this;if(!this.pickingFBO&&(this.pickingFBO=new Ot(r),Ot.isSupported(r,{colorBufferFloat:!0}))){const i=new Ot(r);i.attach({[36064]:new jn(r,{format:$e(r)?34836:6408,type:5126})}),this.depthFBO=i}(e=this.pickingFBO)===null||e===void 0||e.resize({width:r.canvas.width,height:r.canvas.height}),(n=this.depthFBO)===null||n===void 0||n.resize({width:r.canvas.width,height:r.canvas.height})}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(r=>r.isPickable()&&!r.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:r,x:i,y:s,radius:o=0,depth:a=1,mode:l="query",unproject3D:u,onViewportActive:c,effects:f}){const d=this._getPickable(e),g=Aa(this.gl);if(!d)return{result:[],emptyInfo:ix({viewports:r,x:i,y:s,pixelRatio:g})};this._resizeBuffer();const y=Mp(this.gl,[i,s],!0),m=[y.x+Math.floor(y.width/2),y.y+Math.floor(y.height/2)],x=Math.round(o*g),{width:S,height:v}=this.pickingFBO,w=this._getPickingRect({deviceX:m[0],deviceY:m[1],deviceRadius:x,deviceWidth:S,deviceHeight:v}),R={x:i-o,y:s-o,width:o*2+1,height:o*2+1};let L;const C=[],U=new Set;for(let N=0;N<a;N++){let H;if(w){const ie=this._drawAndSample({layers:d,views:n,viewports:r,onViewportActive:c,deviceRect:w,cullRect:R,effects:f,pass:"picking:".concat(l)});H=$9({...ie,deviceX:m[0],deviceY:m[1],deviceRadius:x,deviceRect:w})}else H={pickedColor:null,pickedObjectIndex:-1};let G;H.pickedLayer&&u&&this.depthFBO&&(G=this._drawAndSample({layers:[H.pickedLayer],views:n,viewports:r,onViewportActive:c,deviceRect:{x:H.pickedX,y:H.pickedY,width:1,height:1},cullRect:R,effects:f,pass:"picking:".concat(l,":z")},!0).pickedColors[0]),H.pickedLayer&&N+1<a&&(U.add(H.pickedLayer),H.pickedLayer.disablePickingIndex(H.pickedObjectIndex)),L=H9({pickInfo:H,lastPickedInfo:this.lastPickedInfo,mode:l,layers:d,viewports:r,x:i,y:s,z:G,pixelRatio:g});for(const ie of L.values())ie.layer&&C.push(ie);if(!H.pickedColor)break}for(const N of U)N.restorePickingColors();return{result:C,emptyInfo:L.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:r,x:i,y:s,width:o=1,height:a=1,mode:l="query",maxObjects:u=null,onViewportActive:c,effects:f}){const d=this._getPickable(e);if(!d)return[];this._resizeBuffer();const g=Aa(this.gl),y=Mp(this.gl,[i,s],!0),m=y.x,x=y.y+y.height,S=Mp(this.gl,[i+o,s+a],!0),v=S.x+S.width,w=S.y,R={x:m,y:w,width:v-m,height:x-w},L=this._drawAndSample({layers:d,views:n,viewports:r,onViewportActive:c,deviceRect:R,cullRect:{x:i,y:s,width:o,height:a},effects:f,pass:"picking:".concat(l)}),C=G9(L),U=new Map,N=Number.isFinite(u);for(let H=0;H<C.length&&!(N&&u&&U.size>=u);H++){const G=C[H];let ie={color:G.pickedColor,layer:null,index:G.pickedObjectIndex,picked:!0,x:i,y:s,pixelRatio:g};ie=sx({layer:G.pickedLayer,info:ie,mode:l}),U.has(ie.object)||U.set(ie.object,ie)}return Array.from(U.values())}_drawAndSample({layers:e,views:n,viewports:r,onViewportActive:i,deviceRect:s,cullRect:o,effects:a,pass:l},u=!1){const c=u?this.depthFBO:this.pickingFBO,{decodePickingColor:f}=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:c,deviceRect:s,cullRect:o,effects:a,pass:l,pickZ:u}),{x:d,y:g,width:y,height:m}=s,x=new(u?Float32Array:Uint8Array)(y*m*4);return Qh(c,{sourceX:d,sourceY:g,sourceWidth:y,sourceHeight:m,target:x}),{pickedColors:x,decodePickingColor:f}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:s}){const o=Math.max(0,e-r),a=Math.max(0,n-r),l=Math.min(i,e+r+1)-o,u=Math.min(s,n+r+1)-a;return l<=0||u<=0?null:{x:o,y:a,width:l,height:u}}}const q9={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class Y9{constructor(e){b(this,"el",null),b(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,q9),n.appendChild(this.el))}setTooltip(e,n,r){const i=this.el;if(!!i){if(typeof e=="string")i.innerText=e;else if(e)e.text&&(i.innerText=e.text),e.html&&(i.innerHTML=e.html),e.className&&(i.className=e.className),Object.assign(i.style,e.style);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(n,"px, ").concat(r,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}var ja={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,n,r,i){var s=["","webkit","Moz","MS","ms","o"],o=n.createElement("div"),a="function",l=Math.round,u=Math.abs,c=Date.now;function f(E,T,M){return setTimeout(w(E,M),T)}function d(E,T,M){return Array.isArray(E)?(g(E,M[T],M),!0):!1}function g(E,T,M){var z;if(!!E)if(E.forEach)E.forEach(T,M);else if(E.length!==i)for(z=0;z<E.length;)T.call(M,E[z],z,E),z++;else for(z in E)E.hasOwnProperty(z)&&T.call(M,E[z],z,E)}function y(E,T,M){var z="DEPRECATED METHOD: "+T+`
`+M+` AT 
`;return function(){var Y=new Error("get-stack-trace"),he=Y&&Y.stack?Y.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Ne=e.console&&(e.console.warn||e.console.log);return Ne&&Ne.call(e.console,z,he),E.apply(this,arguments)}}var m;typeof Object.assign!="function"?m=function(T){if(T===i||T===null)throw new TypeError("Cannot convert undefined or null to object");for(var M=Object(T),z=1;z<arguments.length;z++){var Y=arguments[z];if(Y!==i&&Y!==null)for(var he in Y)Y.hasOwnProperty(he)&&(M[he]=Y[he])}return M}:m=Object.assign;var x=y(function(T,M,z){for(var Y=Object.keys(M),he=0;he<Y.length;)(!z||z&&T[Y[he]]===i)&&(T[Y[he]]=M[Y[he]]),he++;return T},"extend","Use `assign`."),S=y(function(T,M){return x(T,M,!0)},"merge","Use `assign`.");function v(E,T,M){var z=T.prototype,Y;Y=E.prototype=Object.create(z),Y.constructor=E,Y._super=z,M&&m(Y,M)}function w(E,T){return function(){return E.apply(T,arguments)}}function R(E,T){return typeof E==a?E.apply(T&&T[0]||i,T):E}function L(E,T){return E===i?T:E}function C(E,T,M){g(G(T),function(z){E.addEventListener(z,M,!1)})}function U(E,T,M){g(G(T),function(z){E.removeEventListener(z,M,!1)})}function N(E,T){for(;E;){if(E==T)return!0;E=E.parentNode}return!1}function H(E,T){return E.indexOf(T)>-1}function G(E){return E.trim().split(/\s+/g)}function ie(E,T,M){if(E.indexOf&&!M)return E.indexOf(T);for(var z=0;z<E.length;){if(M&&E[z][M]==T||!M&&E[z]===T)return z;z++}return-1}function Ce(E){return Array.prototype.slice.call(E,0)}function Ee(E,T,M){for(var z=[],Y=[],he=0;he<E.length;){var Ne=T?E[he][T]:E[he];ie(Y,Ne)<0&&z.push(E[he]),Y[he]=Ne,he++}return M&&(T?z=z.sort(function(It,Ht){return It[T]>Ht[T]}):z=z.sort()),z}function ee(E,T){for(var M,z,Y=T[0].toUpperCase()+T.slice(1),he=0;he<s.length;){if(M=s[he],z=M?M+Y:T,z in E)return z;he++}return i}var _e=1;function Be(){return _e++}function j(E){var T=E.ownerDocument||E;return T.defaultView||T.parentWindow||e}var $=/mobile|tablet|ip(ad|hone|od)|android/i,ae="ontouchstart"in e,re=ee(e,"PointerEvent")!==i,oe=ae&&$.test(navigator.userAgent),I="touch",K="pen",Q="mouse",be="kinect",ue=25,de=1,Re=2,ce=4,ke=8,at=1,je=2,Ze=4,xt=8,cn=16,ft=je|Ze,_t=xt|cn,Hr=ft|_t,ro=["x","y"],sr=["clientX","clientY"];function Ut(E,T){var M=this;this.manager=E,this.callback=T,this.element=E.element,this.target=E.options.inputTarget,this.domHandler=function(z){R(E.options.enable,[E])&&M.handler(z)},this.init()}Ut.prototype={handler:function(){},init:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(j(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&U(this.element,this.evEl,this.domHandler),this.evTarget&&U(this.target,this.evTarget,this.domHandler),this.evWin&&U(j(this.element),this.evWin,this.domHandler)}};function ls(E){var T,M=E.options.inputClass;return M?T=M:re?T=Se:oe?T=or:ae?T=Ha:T=se,new T(E,io)}function io(E,T,M){var z=M.pointers.length,Y=M.changedPointers.length,he=T&de&&z-Y===0,Ne=T&(ce|ke)&&z-Y===0;M.isFirst=!!he,M.isFinal=!!Ne,he&&(E.session={}),M.eventType=T,mi(E,M),E.emit("hammer.input",M),E.recognize(M),E.session.prevInput=M}function mi(E,T){var M=E.session,z=T.pointers,Y=z.length;M.firstInput||(M.firstInput=us(T)),Y>1&&!M.firstMultiple?M.firstMultiple=us(T):Y===1&&(M.firstMultiple=!1);var he=M.firstInput,Ne=M.firstMultiple,Pt=Ne?Ne.center:he.center,It=T.center=cs(z);T.timeStamp=c(),T.deltaTime=T.timeStamp-he.timeStamp,T.angle=_i(Pt,It),T.distance=yi(Pt,It),vi(M,T),T.offsetDirection=hs(T.deltaX,T.deltaY);var Ht=fs(T.deltaTime,T.deltaX,T.deltaY);T.overallVelocityX=Ht.x,T.overallVelocityY=Ht.y,T.overallVelocity=u(Ht.x)>u(Ht.y)?Ht.x:Ht.y,T.scale=Ne?ao(Ne.pointers,z):1,T.rotation=Ne?oo(Ne.pointers,z):0,T.maxPointers=M.prevInput?T.pointers.length>M.prevInput.maxPointers?T.pointers.length:M.prevInput.maxPointers:T.pointers.length,so(M,T);var Hn=E.element;N(T.srcEvent.target,Hn)&&(Hn=T.srcEvent.target),T.target=Hn}function vi(E,T){var M=T.center,z=E.offsetDelta||{},Y=E.prevDelta||{},he=E.prevInput||{};(T.eventType===de||he.eventType===ce)&&(Y=E.prevDelta={x:he.deltaX||0,y:he.deltaY||0},z=E.offsetDelta={x:M.x,y:M.y}),T.deltaX=Y.x+(M.x-z.x),T.deltaY=Y.y+(M.y-z.y)}function so(E,T){var M=E.lastInterval||T,z=T.timeStamp-M.timeStamp,Y,he,Ne,Pt;if(T.eventType!=ke&&(z>ue||M.velocity===i)){var It=T.deltaX-M.deltaX,Ht=T.deltaY-M.deltaY,Hn=fs(z,It,Ht);he=Hn.x,Ne=Hn.y,Y=u(Hn.x)>u(Hn.y)?Hn.x:Hn.y,Pt=hs(It,Ht),E.lastInterval=T}else Y=M.velocity,he=M.velocityX,Ne=M.velocityY,Pt=M.direction;T.velocity=Y,T.velocityX=he,T.velocityY=Ne,T.direction=Pt}function us(E){for(var T=[],M=0;M<E.pointers.length;)T[M]={clientX:l(E.pointers[M].clientX),clientY:l(E.pointers[M].clientY)},M++;return{timeStamp:c(),pointers:T,center:cs(T),deltaX:E.deltaX,deltaY:E.deltaY}}function cs(E){var T=E.length;if(T===1)return{x:l(E[0].clientX),y:l(E[0].clientY)};for(var M=0,z=0,Y=0;Y<T;)M+=E[Y].clientX,z+=E[Y].clientY,Y++;return{x:l(M/T),y:l(z/T)}}function fs(E,T,M){return{x:T/E||0,y:M/E||0}}function hs(E,T){return E===T?at:u(E)>=u(T)?E<0?je:Ze:T<0?xt:cn}function yi(E,T,M){M||(M=ro);var z=T[M[0]]-E[M[0]],Y=T[M[1]]-E[M[1]];return Math.sqrt(z*z+Y*Y)}function _i(E,T,M){M||(M=ro);var z=T[M[0]]-E[M[0]],Y=T[M[1]]-E[M[1]];return Math.atan2(Y,z)*180/Math.PI}function oo(E,T){return _i(T[1],T[0],sr)+_i(E[1],E[0],sr)}function ao(E,T){return yi(T[0],T[1],sr)/yi(E[0],E[1],sr)}var B={mousedown:de,mousemove:Re,mouseup:ce},D="mousedown",Z="mousemove mouseup";function se(){this.evEl=D,this.evWin=Z,this.pressed=!1,Ut.apply(this,arguments)}v(se,Ut,{handler:function(T){var M=B[T.type];M&de&&T.button===0&&(this.pressed=!0),M&Re&&T.which!==1&&(M=ce),this.pressed&&(M&ce&&(this.pressed=!1),this.callback(this.manager,M,{pointers:[T],changedPointers:[T],pointerType:Q,srcEvent:T}))}});var le={pointerdown:de,pointermove:Re,pointerup:ce,pointercancel:ke,pointerout:ke},pe={2:I,3:K,4:Q,5:be},Ae="pointerdown",Te="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Ae="MSPointerDown",Te="MSPointerMove MSPointerUp MSPointerCancel");function Se(){this.evEl=Ae,this.evWin=Te,Ut.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}v(Se,Ut,{handler:function(T){var M=this.store,z=!1,Y=T.type.toLowerCase().replace("ms",""),he=le[Y],Ne=pe[T.pointerType]||T.pointerType,Pt=Ne==I,It=ie(M,T.pointerId,"pointerId");he&de&&(T.button===0||Pt)?It<0&&(M.push(T),It=M.length-1):he&(ce|ke)&&(z=!0),!(It<0)&&(M[It]=T,this.callback(this.manager,he,{pointers:M,changedPointers:[T],pointerType:Ne,srcEvent:T}),z&&M.splice(It,1))}});var Me={touchstart:de,touchmove:Re,touchend:ce,touchcancel:ke},rt="touchstart",Vt="touchstart touchmove touchend touchcancel";function bt(){this.evTarget=rt,this.evWin=Vt,this.started=!1,Ut.apply(this,arguments)}v(bt,Ut,{handler:function(T){var M=Me[T.type];if(M===de&&(this.started=!0),!!this.started){var z=Jt.call(this,T,M);M&(ce|ke)&&z[0].length-z[1].length===0&&(this.started=!1),this.callback(this.manager,M,{pointers:z[0],changedPointers:z[1],pointerType:I,srcEvent:T})}}});function Jt(E,T){var M=Ce(E.touches),z=Ce(E.changedTouches);return T&(ce|ke)&&(M=Ee(M.concat(z),"identifier",!0)),[M,z]}var fn={touchstart:de,touchmove:Re,touchend:ce,touchcancel:ke},Cr="touchstart touchmove touchend touchcancel";function or(){this.evTarget=Cr,this.targetIds={},Ut.apply(this,arguments)}v(or,Ut,{handler:function(T){var M=fn[T.type],z=Pr.call(this,T,M);!z||this.callback(this.manager,M,{pointers:z[0],changedPointers:z[1],pointerType:I,srcEvent:T})}});function Pr(E,T){var M=Ce(E.touches),z=this.targetIds;if(T&(de|Re)&&M.length===1)return z[M[0].identifier]=!0,[M,M];var Y,he,Ne=Ce(E.changedTouches),Pt=[],It=this.target;if(he=M.filter(function(Ht){return N(Ht.target,It)}),T===de)for(Y=0;Y<he.length;)z[he[Y].identifier]=!0,Y++;for(Y=0;Y<Ne.length;)z[Ne[Y].identifier]&&Pt.push(Ne[Y]),T&(ce|ke)&&delete z[Ne[Y].identifier],Y++;if(!!Pt.length)return[Ee(he.concat(Pt),"identifier",!0),Pt]}var Mr=2500,Hu=25;function Ha(){Ut.apply(this,arguments);var E=w(this.handler,this);this.touch=new or(this.manager,E),this.mouse=new se(this.manager,E),this.primaryTouch=null,this.lastTouches=[]}v(Ha,Ut,{handler:function(T,M,z){var Y=z.pointerType==I,he=z.pointerType==Q;if(!(he&&z.sourceCapabilities&&z.sourceCapabilities.firesTouchEvents)){if(Y)ud.call(this,M,z);else if(he&&cd.call(this,z))return;this.callback(T,M,z)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function ud(E,T){E&de?(this.primaryTouch=T.changedPointers[0].identifier,ds.call(this,T)):E&(ce|ke)&&ds.call(this,T)}function ds(E){var T=E.changedPointers[0];if(T.identifier===this.primaryTouch){var M={x:T.clientX,y:T.clientY};this.lastTouches.push(M);var z=this.lastTouches,Y=function(){var he=z.indexOf(M);he>-1&&z.splice(he,1)};setTimeout(Y,Mr)}}function cd(E){for(var T=E.srcEvent.clientX,M=E.srcEvent.clientY,z=0;z<this.lastTouches.length;z++){var Y=this.lastTouches[z],he=Math.abs(T-Y.x),Ne=Math.abs(M-Y.y);if(he<=Hu&&Ne<=Hu)return!0}return!1}var Wa=ee(o.style,"touchAction"),Wu=Wa!==i,Xu="compute",qu="auto",lo="manipulation",Wr="none",bi="pan-x",ps="pan-y",gs=Yu();function Xa(E,T){this.manager=E,this.set(T)}Xa.prototype={set:function(E){E==Xu&&(E=this.compute()),Wu&&this.manager.element.style&&gs[E]&&(this.manager.element.style[Wa]=E),this.actions=E.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var E=[];return g(this.manager.recognizers,function(T){R(T.options.enable,[T])&&(E=E.concat(T.getTouchAction()))}),fd(E.join(" "))},preventDefaults:function(E){var T=E.srcEvent,M=E.offsetDirection;if(this.manager.session.prevented){T.preventDefault();return}var z=this.actions,Y=H(z,Wr)&&!gs[Wr],he=H(z,ps)&&!gs[ps],Ne=H(z,bi)&&!gs[bi];if(Y){var Pt=E.pointers.length===1,It=E.distance<2,Ht=E.deltaTime<250;if(Pt&&It&&Ht)return}if(!(Ne&&he)&&(Y||he&&M&ft||Ne&&M&_t))return this.preventSrc(T)},preventSrc:function(E){this.manager.session.prevented=!0,E.preventDefault()}};function fd(E){if(H(E,Wr))return Wr;var T=H(E,bi),M=H(E,ps);return T&&M?Wr:T||M?T?bi:ps:H(E,lo)?lo:qu}function Yu(){if(!Wu)return!1;var E={},T=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(M){E[M]=T?e.CSS.supports("touch-action",M):!0}),E}var uo=1,_n=2,wi=4,Lr=8,ar=Lr,ms=16,bn=32;function en(E){this.options=m({},this.defaults,E||{}),this.id=Be(),this.manager=null,this.options.enable=L(this.options.enable,!0),this.state=uo,this.simultaneous={},this.requireFail=[]}en.prototype={defaults:{},set:function(E){return m(this.options,E),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(E){if(d(E,"recognizeWith",this))return this;var T=this.simultaneous;return E=fo(E,this),T[E.id]||(T[E.id]=E,E.recognizeWith(this)),this},dropRecognizeWith:function(E){return d(E,"dropRecognizeWith",this)?this:(E=fo(E,this),delete this.simultaneous[E.id],this)},requireFailure:function(E){if(d(E,"requireFailure",this))return this;var T=this.requireFail;return E=fo(E,this),ie(T,E)===-1&&(T.push(E),E.requireFailure(this)),this},dropRequireFailure:function(E){if(d(E,"dropRequireFailure",this))return this;E=fo(E,this);var T=ie(this.requireFail,E);return T>-1&&this.requireFail.splice(T,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(E){return!!this.simultaneous[E.id]},emit:function(E){var T=this,M=this.state;function z(Y){T.manager.emit(Y,E)}M<Lr&&z(T.options.event+co(M)),z(T.options.event),E.additionalEvent&&z(E.additionalEvent),M>=Lr&&z(T.options.event+co(M))},tryEmit:function(E){if(this.canEmit())return this.emit(E);this.state=bn},canEmit:function(){for(var E=0;E<this.requireFail.length;){if(!(this.requireFail[E].state&(bn|uo)))return!1;E++}return!0},recognize:function(E){var T=m({},E);if(!R(this.options.enable,[this,T])){this.reset(),this.state=bn;return}this.state&(ar|ms|bn)&&(this.state=uo),this.state=this.process(T),this.state&(_n|wi|Lr|ms)&&this.tryEmit(T)},process:function(E){},getTouchAction:function(){},reset:function(){}};function co(E){return E&ms?"cancel":E&Lr?"end":E&wi?"move":E&_n?"start":""}function Xr(E){return E==cn?"down":E==xt?"up":E==je?"left":E==Ze?"right":""}function fo(E,T){var M=T.manager;return M?M.get(E):E}function Mn(){en.apply(this,arguments)}v(Mn,en,{defaults:{pointers:1},attrTest:function(E){var T=this.options.pointers;return T===0||E.pointers.length===T},process:function(E){var T=this.state,M=E.eventType,z=T&(_n|wi),Y=this.attrTest(E);return z&&(M&ke||!Y)?T|ms:z||Y?M&ce?T|Lr:T&_n?T|wi:_n:bn}});function ho(){Mn.apply(this,arguments),this.pX=null,this.pY=null}v(ho,Mn,{defaults:{event:"pan",threshold:10,pointers:1,direction:Hr},getTouchAction:function(){var E=this.options.direction,T=[];return E&ft&&T.push(ps),E&_t&&T.push(bi),T},directionTest:function(E){var T=this.options,M=!0,z=E.distance,Y=E.direction,he=E.deltaX,Ne=E.deltaY;return Y&T.direction||(T.direction&ft?(Y=he===0?at:he<0?je:Ze,M=he!=this.pX,z=Math.abs(E.deltaX)):(Y=Ne===0?at:Ne<0?xt:cn,M=Ne!=this.pY,z=Math.abs(E.deltaY))),E.direction=Y,M&&z>T.threshold&&Y&T.direction},attrTest:function(E){return Mn.prototype.attrTest.call(this,E)&&(this.state&_n||!(this.state&_n)&&this.directionTest(E))},emit:function(E){this.pX=E.deltaX,this.pY=E.deltaY;var T=Xr(E.direction);T&&(E.additionalEvent=this.options.event+T),this._super.emit.call(this,E)}});function qa(){Mn.apply(this,arguments)}v(qa,Mn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Wr]},attrTest:function(E){return this._super.attrTest.call(this,E)&&(Math.abs(E.scale-1)>this.options.threshold||this.state&_n)},emit:function(E){if(E.scale!==1){var T=E.scale<1?"in":"out";E.additionalEvent=this.options.event+T}this._super.emit.call(this,E)}});function Ya(){en.apply(this,arguments),this._timer=null,this._input=null}v(Ya,en,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[qu]},process:function(E){var T=this.options,M=E.pointers.length===T.pointers,z=E.distance<T.threshold,Y=E.deltaTime>T.time;if(this._input=E,!z||!M||E.eventType&(ce|ke)&&!Y)this.reset();else if(E.eventType&de)this.reset(),this._timer=f(function(){this.state=ar,this.tryEmit()},T.time,this);else if(E.eventType&ce)return ar;return bn},reset:function(){clearTimeout(this._timer)},emit:function(E){this.state===ar&&(E&&E.eventType&ce?this.manager.emit(this.options.event+"up",E):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function po(){Mn.apply(this,arguments)}v(po,Mn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Wr]},attrTest:function(E){return this._super.attrTest.call(this,E)&&(Math.abs(E.rotation)>this.options.threshold||this.state&_n)}});function go(){Mn.apply(this,arguments)}v(go,Mn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:ft|_t,pointers:1},getTouchAction:function(){return ho.prototype.getTouchAction.call(this)},attrTest:function(E){var T=this.options.direction,M;return T&(ft|_t)?M=E.overallVelocity:T&ft?M=E.overallVelocityX:T&_t&&(M=E.overallVelocityY),this._super.attrTest.call(this,E)&&T&E.offsetDirection&&E.distance>this.options.threshold&&E.maxPointers==this.options.pointers&&u(M)>this.options.velocity&&E.eventType&ce},emit:function(E){var T=Xr(E.offsetDirection);T&&this.manager.emit(this.options.event+T,E),this.manager.emit(this.options.event,E)}});function mo(){en.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}v(mo,en,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[lo]},process:function(E){var T=this.options,M=E.pointers.length===T.pointers,z=E.distance<T.threshold,Y=E.deltaTime<T.time;if(this.reset(),E.eventType&de&&this.count===0)return this.failTimeout();if(z&&Y&&M){if(E.eventType!=ce)return this.failTimeout();var he=this.pTime?E.timeStamp-this.pTime<T.interval:!0,Ne=!this.pCenter||yi(this.pCenter,E.center)<T.posThreshold;this.pTime=E.timeStamp,this.pCenter=E.center,!Ne||!he?this.count=1:this.count+=1,this._input=E;var Pt=this.count%T.taps;if(Pt===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=ar,this.tryEmit()},T.interval,this),_n):ar}return bn},failTimeout:function(){return this._timer=f(function(){this.state=bn},this.options.interval,this),bn},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ar&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function lr(E,T){return T=T||{},T.recognizers=L(T.recognizers,lr.defaults.preset),new vo(E,T)}lr.VERSION="2.0.7",lr.defaults={domEvents:!1,touchAction:Xu,enable:!0,inputTarget:null,inputClass:null,preset:[[po,{enable:!1}],[qa,{enable:!1},["rotate"]],[go,{direction:ft}],[ho,{direction:ft},["swipe"]],[mo],[mo,{event:"doubletap",taps:2},["tap"]],[Ya]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var hd=1,Zu=2;function vo(E,T){this.options=m({},lr.defaults,T||{}),this.options.inputTarget=this.options.inputTarget||E,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=E,this.input=ls(this),this.touchAction=new Xa(this,this.options.touchAction),Za(this,!0),g(this.options.recognizers,function(M){var z=this.add(new M[0](M[1]));M[2]&&z.recognizeWith(M[2]),M[3]&&z.requireFailure(M[3])},this)}vo.prototype={set:function(E){return m(this.options,E),E.touchAction&&this.touchAction.update(),E.inputTarget&&(this.input.destroy(),this.input.target=E.inputTarget,this.input.init()),this},stop:function(E){this.session.stopped=E?Zu:hd},recognize:function(E){var T=this.session;if(!T.stopped){this.touchAction.preventDefaults(E);var M,z=this.recognizers,Y=T.curRecognizer;(!Y||Y&&Y.state&ar)&&(Y=T.curRecognizer=null);for(var he=0;he<z.length;)M=z[he],T.stopped!==Zu&&(!Y||M==Y||M.canRecognizeWith(Y))?M.recognize(E):M.reset(),!Y&&M.state&(_n|wi|Lr)&&(Y=T.curRecognizer=M),he++}},get:function(E){if(E instanceof en)return E;for(var T=this.recognizers,M=0;M<T.length;M++)if(T[M].options.event==E)return T[M];return null},add:function(E){if(d(E,"add",this))return this;var T=this.get(E.options.event);return T&&this.remove(T),this.recognizers.push(E),E.manager=this,this.touchAction.update(),E},remove:function(E){if(d(E,"remove",this))return this;if(E=this.get(E),E){var T=this.recognizers,M=ie(T,E);M!==-1&&(T.splice(M,1),this.touchAction.update())}return this},on:function(E,T){if(E!==i&&T!==i){var M=this.handlers;return g(G(E),function(z){M[z]=M[z]||[],M[z].push(T)}),this}},off:function(E,T){if(E!==i){var M=this.handlers;return g(G(E),function(z){T?M[z]&&M[z].splice(ie(M[z],T),1):delete M[z]}),this}},emit:function(E,T){this.options.domEvents&&dd(E,T);var M=this.handlers[E]&&this.handlers[E].slice();if(!(!M||!M.length)){T.type=E,T.preventDefault=function(){T.srcEvent.preventDefault()};for(var z=0;z<M.length;)M[z](T),z++}},destroy:function(){this.element&&Za(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Za(E,T){var M=E.element;if(!!M.style){var z;g(E.options.cssProps,function(Y,he){z=ee(M.style,he),T?(E.oldCssProps[z]=M.style[z],M.style[z]=Y):M.style[z]=E.oldCssProps[z]||""}),T||(E.oldCssProps={})}}function dd(E,T){var M=n.createEvent("Event");M.initEvent(E,!0,!0),M.gesture=T,T.target.dispatchEvent(M)}m(lr,{INPUT_START:de,INPUT_MOVE:Re,INPUT_END:ce,INPUT_CANCEL:ke,STATE_POSSIBLE:uo,STATE_BEGAN:_n,STATE_CHANGED:wi,STATE_ENDED:Lr,STATE_RECOGNIZED:ar,STATE_CANCELLED:ms,STATE_FAILED:bn,DIRECTION_NONE:at,DIRECTION_LEFT:je,DIRECTION_RIGHT:Ze,DIRECTION_UP:xt,DIRECTION_DOWN:cn,DIRECTION_HORIZONTAL:ft,DIRECTION_VERTICAL:_t,DIRECTION_ALL:Hr,Manager:vo,Input:Ut,TouchAction:Xa,TouchInput:or,MouseInput:se,PointerEventInput:Se,TouchMouseInput:Ha,SingleTouchInput:bt,Recognizer:en,AttrRecognizer:Mn,Tap:mo,Pan:ho,Swipe:go,Pinch:qa,Rotate:po,Press:Ya,on:C,off:U,each:g,merge:S,extend:x,assign:m,inherit:v,bindFn:w,prefixed:ee});var pd=typeof e<"u"?e:typeof self<"u"?self:{};pd.Hammer=lr,typeof i=="function"&&i.amd?i(function(){return lr}):t.exports?t.exports=lr:e[r]=lr})(window,document,"Hammer")})(ja);const Z9=ja.exports,Ir=FP({__proto__:null,default:Z9},[ja.exports]),ox=1,ax=2,Pm=4,K9={mousedown:ox,mousemove:ax,mouseup:Pm};function Q9(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function J9(t){const e=t.prototype.handler;t.prototype.handler=function(r){const i=this.store;r.button>0&&r.type==="pointerdown"&&(Q9(i,s=>s.pointerId===r.pointerId)||i.push(r)),e.call(this,r)}}function e7(t){t.prototype.handler=function(n){let r=K9[n.type];r&ox&&n.button>=0&&(this.pressed=!0),r&ax&&n.which===0&&(r=Pm),this.pressed&&(r&Pm&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}J9(ja.exports.PointerEventInput);e7(ja.exports.MouseInput);const t7=ja.exports.Manager;class nd{constructor(e,n,r){this.element=e,this.callback=n,this.options={enable:!0,...r}}}const n7=Ir?[[Ir.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Ir.Rotate,{enable:!1}],[Ir.Pinch,{enable:!1}],[Ir.Swipe,{enable:!1}],[Ir.Pan,{threshold:0,enable:!1}],[Ir.Press,{enable:!1}],[Ir.Tap,{event:"doubletap",taps:2,enable:!1}],[Ir.Tap,{event:"anytap",enable:!1}],[Ir.Tap,{enable:!1}]]:null,Jb={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},r7={doubletap:["tap"]},i7={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},R0={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},s7={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},ew={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},o7=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Jo=typeof window<"u"?window:global;let Mm=!1;try{const t={get passive(){return Mm=!0,!0}};Jo.addEventListener("test",null,t),Jo.removeEventListener("test",null)}catch{Mm=!1}const a7=o7.indexOf("firefox")!==-1,{WHEEL_EVENTS:l7}=R0,tw="wheel",nw=4.000244140625,u7=40,c7=.25;class f7 extends nd{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{if(!this.options.enable)return;let s=i.deltaY;Jo.WheelEvent&&(a7&&i.deltaMode===Jo.WheelEvent.DOM_DELTA_PIXEL&&(s/=Jo.devicePixelRatio),i.deltaMode===Jo.WheelEvent.DOM_DELTA_LINE&&(s*=u7)),s!==0&&s%nw===0&&(s=Math.floor(s/nw)),i.shiftKey&&s&&(s=s*c7),this.callback({type:tw,center:{x:i.clientX,y:i.clientY},delta:-s,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(l7),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,Mm?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===tw&&(this.options.enable=n)}}const{MOUSE_EVENTS:h7}=R0,rw="pointermove",iw="pointerover",sw="pointerout",ow="pointerenter",aw="pointerleave";class d7 extends nd{constructor(e,n,r){super(e,n,r),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(h7),this.events.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===rw&&(this.enableMoveEvent=n),e===iw&&(this.enableOverEvent=n),e===sw&&(this.enableOutEvent=n),e===ow&&(this.enableEnterEvent=n),e===aw&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit(iw,e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit(sw,e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit(ow,e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit(aw,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.which===0&&(this.pressed=!1),this.pressed||this._emit(rw,e);break;case"mouseup":this.pressed=!1;break}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:p7}=R0,lw="keydown",uw="keyup";class g7 extends nd{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{const s=i.target||i.srcElement;s.tagName==="INPUT"&&s.type==="text"||s.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:lw,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:uw,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(p7),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===lw&&(this.enableDownEvent=n),e===uw&&(this.enableUpEvent=n)}}const cw="contextmenu";class m7 extends nd{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{!this.options.enable||this.callback({type:cw,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===cw&&(this.options.enable=n)}}const Lm=1,th=2,km=4,v7={pointerdown:Lm,pointermove:th,pointerup:km,mousedown:Lm,mousemove:th,mouseup:km},y7=1,_7=2,b7=3,w7=0,E7=1,S7=2,T7=1,A7=2,x7=4;function R7(t){const e=v7[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r,which:i}=t.srcEvent;let s=!1,o=!1,a=!1;return e===km||e===th&&!Number.isFinite(n)?(s=i===y7,o=i===_7,a=i===b7):e===th?(s=Boolean(n&T7),o=Boolean(n&x7),a=Boolean(n&A7)):e===Lm&&(s=r===w7,o=r===E7,a=r===S7),{leftButton:s,middleButton:o,rightButton:a}}function C7(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,s=r.height/e.offsetHeight||1,o={x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/s};return{center:n,offsetCenter:o}}const Xp={srcElement:"root",priority:0};class P7{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const r=this._normalizeEvent(n);let i=n.srcEvent.target;for(;i&&i!==r.rootElement;){if(this._emit(r,i),r.handled)return;i=i.parentNode}this._emit(r,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,r,i=!1,s=!1){const{handlers:o,handlersByElement:a}=this;let l=Xp;typeof r=="string"||r&&r.addEventListener?l={...Xp,srcElement:r}:r&&(l={...Xp,...r});let u=a.get(l.srcElement);u||(u=[],a.set(l.srcElement,u));const c={type:e,handler:n,srcElement:l.srcElement,priority:l.priority};i&&(c.once=!0),s&&(c.passive=!0),o.push(c),this._active=this._active||!c.passive;let f=u.length-1;for(;f>=0&&!(u[f].priority>=c.priority);)f--;u.splice(f+1,0,c)}remove(e,n){const{handlers:r,handlersByElement:i}=this;for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.type===e&&o.handler===n){r.splice(s,1);const a=i.get(o.srcElement);a.splice(a.indexOf(o),1),a.length===0&&i.delete(o.srcElement)}}this._active=r.some(s=>!s.passive)}_emit(e,n){const r=this.handlersByElement.get(n);if(r){let i=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,i=!0},a=[];for(let l=0;l<r.length;l++){const{type:u,handler:c,once:f}=r[l];if(c({...e,type:u,stopPropagation:s,stopImmediatePropagation:o}),f&&a.push(r[l]),i)break}for(let l=0;l<a.length;l++){const{type:u,handler:c}=a[l];this.remove(u,c)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...R7(e),...C7(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const M7={events:null,recognizers:null,recognizerOptions:{},Manager:t7,touchAction:"none",tabIndex:0};class L7{constructor(e=null,n){this._onBasicInput=i=>{const{srcEvent:s}=i,o=i7[s.type];o&&this.manager.emit(o,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...M7,...n},this.events=new Map,this.setElement(e);const{events:r}=this.options;r&&this.on(r)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this,r=n.Manager;this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||n7}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(Jb).forEach(i=>{const s=this.manager.get(i);s&&Jb[i].forEach(o=>{s.recognizeWith(o)})});for(const i in n.recognizerOptions){const s=this.manager.get(i);if(s){const o=n.recognizerOptions[i];delete o.enable,s.set(o)}}this.wheelInput=new f7(e,this._onOtherEvent,{enable:!1}),this.moveInput=new d7(e,this._onOtherEvent,{enable:!1}),this.keyInput=new g7(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new m7(e,this._onOtherEvent,{enable:!1});for(const[i,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(i,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,r){this._addEventHandler(e,n,r,!1)}once(e,n,r){this._addEventHandler(e,n,r,!0)}watch(e,n,r){this._addEventHandler(e,n,r,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:r}=this;if(!r)return;const i=r.get(e);if(i&&i.options.enable!==n){i.set({enable:n});const s=r7[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=r.get(o);n?(a.requireFailure(e),i.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,r,i,s){if(typeof e!="string"){r=n;for(const c in e)this._addEventHandler(c,e[c],r,i,s);return}const{manager:o,events:a}=this,l=ew[e]||e;let u=a.get(l);u||(u=new P7(this),a.set(l,u),u.recognizerName=s7[l]||l,o&&o.on(l,u.handleEvent)),u.add(e,n,r,i,s),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:r}=this,i=ew[e]||e,s=r.get(i);if(!!s&&(s.remove(e,n),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const l of r.values())if(l.recognizerName===o&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}}function Es(){}const k7=({isDragging:t})=>t?"grabbing":"grab",lx={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Es,onResize:Es,onViewStateChange:Es,onInteractionStateChange:Es,onBeforeRender:Es,onAfterRender:Es,onLoad:Es,onError:t=>it.error(t.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:k7,getTooltip:null,debug:!1,drawPickingColors:!1};class rd{constructor(e){b(this,"props",void 0),b(this,"width",0),b(this,"height",0),b(this,"userData",{}),b(this,"canvas",null),b(this,"viewManager",null),b(this,"layerManager",null),b(this,"effectManager",null),b(this,"deckRenderer",null),b(this,"deckPicker",null),b(this,"eventManager",null),b(this,"tooltip",null),b(this,"metrics",void 0),b(this,"animationLoop",void 0),b(this,"stats",void 0),b(this,"viewState",void 0),b(this,"cursorState",void 0),b(this,"_needsRedraw",void 0),b(this,"_pickRequest",void 0),b(this,"_lastPointerDownInfo",null),b(this,"_metricsCounter",void 0),b(this,"_onPointerMove",n=>{const{_pickRequest:r}=this;if(n.type==="pointerleave")r.x=-1,r.y=-1,r.radius=0;else{if(n.leftButton||n.rightButton)return;{const i=n.offsetCenter;if(!i)return;r.x=i.x,r.y=i.y,r.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=n}),b(this,"_onEvent",n=>{const r=Vb[n.type],i=n.offsetCenter;if(!r||!i||!this.layerManager)return;const s=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:s,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:a}=o,l=a&&(a[r.handler]||a.props[r.handler]),u=this.props[r.handler];let c=!1;l&&(c=l.call(a,o,n)),!c&&u&&u(o,n)}),b(this,"_onPointerDown",n=>{const r=n.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:r.x,y:r.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...lx,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&it.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),V2()==="IE"&&it.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new a0({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&mu.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,r,i,s,o,a;if(this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(e=this.layerManager)===null||e===void 0||e.finalize(),this.layerManager=null,(n=this.viewManager)===null||n===void 0||n.finalize(),this.viewManager=null,(r=this.effectManager)===null||r===void 0||r.finalize(),this.effectManager=null,(i=this.deckRenderer)===null||i===void 0||i.finalize(),this.deckRenderer=null,(s=this.deckPicker)===null||s===void 0||s.finalize(),this.deckPicker=null,(o=this.eventManager)===null||o===void 0||o.destroy(),this.eventManager=null,(a=this.tooltip)===null||a===void 0||a.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var l;(l=this.canvas.parentElement)===null||l===void 0||l.removeChild(this.canvas),this.canvas=null}}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&it.removed("onLayerHover","onHover")(),"onLayerClick"in e&&it.removed("onLayerClick","onClick")(),e.initialViewState&&!no(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return n=n||r||i||s||o,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return Zt(this.viewManager),this.viewManager.views}getViewports(e){return Zt(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_pick(e,n,r){Zt(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(n).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...r});return i.get(n).timeEnd(),s}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),Zt(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:r}=e;if(n||n===0){const s=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=s}if(r||r===0){var i;const s=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.position=((i=e.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){const{canvas:e}=this;if(!e)return;const n=e.clientWidth||e.width,r=e.clientHeight||e.height;if(n!==this.width||r!==this.height){var i;this.width=n,this.height=r,(i=this.viewManager)===null||i===void 0||i.setProps({width:n,height:r}),this.props.onResize({width:n,height:r})}}_createAnimationLoop(e){const{width:n,height:r,gl:i,glOptions:s,debug:o,onError:a,onBeforeRender:l,onAfterRender:u,useDevicePixels:c}=e;return new NB({width:n,height:r,useDevicePixels:c,autoResizeViewport:!1,gl:i,onCreateContext:f=>iA({...s,...f,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:f=>this._setGLContext(f.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:u,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new ex({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:r,emptyInfo:i}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=r.length>0;let s=i,o=!1;for(const a of r){var n;s=a,o=((n=a.layer)===null||n===void 0?void 0:n.onHover(a,e.event))||o}if(!o&&this.props.onHover&&this.props.onHover(s,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(s);this.tooltip.setTooltip(a,s.x,s.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,p0(e,{enable:!0,copyState:!0})),this.tooltip=new Y9(this.canvas),ui(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new UA;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new L7(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in Vb)this.eventManager.on(i,this._onEvent);this.viewManager=new d9({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new h9(e,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new D9,this.deckRenderer=new z9(e),this.deckPicker=new X9(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:r}=this.layerManager.context;ui(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:r})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),it.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const r=Os.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}b(rd,"defaultProps",lx);b(rd,"VERSION",B6.VERSION);class qp{constructor(e,n){b(this,"opts",void 0),b(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:r}=this.source,{size:i}=n;let s=r;if(r&&r.length!==i){s=new Float32Array(i);const o=n.elementOffset||0;for(let a=0;a<i;++a)s[a]=r[o+a]}return s}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function O7(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function cf(t){return t.stride||t.size*t.bytesPerElement}function ux(t,e){e.offset&&it.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=cf(t),r=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,s=r*n+i*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:n}}function I7(t,e){const n=ux(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class N7{constructor(e,n,r){b(this,"gl",void 0),b(this,"id",void 0),b(this,"size",void 0),b(this,"settings",void 0),b(this,"value",void 0),b(this,"doublePrecision",void 0),b(this,"_buffer",void 0),b(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const i=n.logicalType||n.type,s=i===5130;let{defaultValue:o}=n;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0);let a;s?a=5126:!i&&n.isIndexed?a=e&&fV(e,gt.ELEMENT_INDEX_UINT32)?5125:5123:a=i||5126;let l=O7(i||a||5126);this.doublePrecision=s,s&&n.fp64===!1&&(l=Float32Array),this.value=null,this.settings={...n,defaultType:l,defaultValue:o,logicalType:i,type:a,size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...r,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new st(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*cf(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),mu.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const r={},i=this.value instanceof Float64Array,s=I7(this.getAccessor(),n||{});return r[e]=new qp(this,s.high),r["".concat(e,"64Low")]=i?new qp(this,s.low):new Float32Array(this.size),r}if(n){const r=ux(this.getAccessor(),n);return{[e]:new qp(this,r)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:r,size:i}=this,s=r*i;if(n&&s&&n.length>=s){const o=new Array(i).fill(1/0),a=new Array(i).fill(-1/0);for(let l=0;l<s;)for(let u=0;u<i;u++){const c=n[l++];c<o[u]&&(o[u]=c),c>a[u]&&(a[u]=c)}e=[o,a]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let r;ArrayBuffer.isView(e)?r={value:e}:e instanceof st?r={buffer:e}:r=e;const i={...this.settings,...r};if(n.bufferAccessor=i,n.bounds=null,r.constant){let s=r.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),!(!n.constant||!this._areValuesEqual(s,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=s}else if(r.buffer){const s=r.buffer;n.externalBuffer=s,n.constant=!1,this.value=r.value||null;const o=r.value instanceof Float64Array;i.type=r.type||s.accessor.type,i.bytesPerElement=s.accessor.BYTES_PER_ELEMENT*(o?2:1),i.stride=cf(i)}else if(r.value){this._checkExternalBuffer(r);let s=r.value;n.externalBuffer=null,n.constant=!1,this.value=s,i.bytesPerElement=s.BYTES_PER_ELEMENT,i.stride=cf(i);const{buffer:o,byteOffset:a}=this;this.doublePrecision&&s instanceof Float64Array&&(s=Hp(s,i));const l=s.byteLength+a+i.stride*2;o.byteLength<l&&o.reallocate(l),o.setAccessor(null),o.subData({data:s,offset:a}),i.type=r.type||o.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:r=0,endOffset:i}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?Hp(n,{size:this.size,startIndex:r,endIndex:i}):n.subarray(r,i),offset:r*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:r}=this,i=r.allocatedValue,s=mu.allocate(i,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=s;const{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),n&&i&&o.subData({data:i instanceof Float64Array?Hp(i,this):i,offset:a})),r.allocatedValue=s,r.constant=!1,r.externalBuffer=null,r.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const r=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=n.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof r)&&this.settings.normalized&&!("normalized"in e)&&it.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,r){const{defaultValue:i,size:s}=this.settings;if(Number.isFinite(e))return n[r]=e,n;if(!e)return n[r]=i[0],n;switch(s){case 4:n[r+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:n[r+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:n[r+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:n[r+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let o=s;for(;--o>=0;)n[r+o]=Number.isFinite(e[o])?e[o]:i[o]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:r}=this;for(let i=0;i<r;i++)if(e[i]!==n[i])return!1;return!0}}const fw=[],hw=[];function D7(t,e=0,n=1/0){let r=fw;const i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?r=t:t.length>0&&(hw.length=t.length,r=hw):r=fw,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function cx(t){return t&&t[Symbol.asyncIterator]}function F7(t,e){const{size:n,stride:r,offset:i,startIndices:s,nested:o}=e,a=t.BYTES_PER_ELEMENT,l=r?r/a:n,u=i?i/a:0,c=Math.floor((t.length-u)/l);return(f,{index:d,target:g})=>{if(!s){const S=d*l+u;for(let v=0;v<n;v++)g[v]=t[S+v];return g}const y=s[d],m=s[d+1]||c;let x;if(o){x=new Array(m-y);for(let S=y;S<m;S++){const v=S*l+u;g=new Array(n);for(let w=0;w<n;w++)g[w]=t[v+w];x[S-y]=g}}else if(l===n)x=t.subarray(y*n+u,m*n+u);else{x=new t.constructor((m-y)*n);let S=0;for(let v=y;v<m;v++){const w=v*l+u;for(let R=0;R<n;R++)x[S++]=t[w+R]}}return x}}const U7=[],ff=[[0,1/0]];function V7(t,e){if(t===ff||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],r=t.length;let i=0;for(let s=0;s<r;s++){const o=t[s];o[1]<e[0]?(n.push(o),i=s+1):o[0]>e[1]?n.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return n.splice(i,0,e),n}function Yp(t){const{source:e,target:n,start:r=0,size:i,getData:s}=t,o=t.end||n.length,a=e.length,l=o-r;if(a>l){n.set(e.subarray(0,l),r);return}if(n.set(e,r),!s)return;let u=a;for(;u<l;){const c=s(u,e);for(let f=0;f<i;f++)n[r+u]=c[f]||0,u++}}function B7({source:t,target:e,size:n,getData:r,sourceStartIndices:i,targetStartIndices:s}){if(!Array.isArray(s))return Yp({source:t,target:e,size:n,getData:r}),e;let o=0,a=0;const l=r&&((c,f)=>r(c+a,f)),u=Math.min(i.length,s.length);for(let c=1;c<u;c++){const f=i[c]*n,d=s[c]*n;Yp({source:t.subarray(o,f),target:e,start:a,end:d,size:n,getData:l}),o=f,a=d}return a<e.length&&Yp({source:[],target:e,start:a,size:n,getData:l}),e}const z7={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function fx(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...z7[n],...e,...t,type:n}}function hx(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function dx(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function px(t){t.push(t.shift())}function C0(t,e){const{doublePrecision:n,settings:r,value:i,size:s}=t,o=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*s)*o}function gx({buffer:t,numInstances:e,attribute:n,fromLength:r,fromStartIndices:i,getData:s=o=>o}){const o=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*o,l=n.byteOffset,u=n.startIndices,c=i&&u,f=C0(n,e),d=n.isConstant;if(!c&&r>=f)return;const g=d?n.value:n.getBuffer().getData({srcByteOffset:l});if(n.settings.normalized&&!d){const S=s;s=(v,w)=>n.normalizeConstant(S(v,w))}const y=d?(S,v)=>s(g,v):(S,v)=>s(g.subarray(S,S+a),v),m=t.getData({length:r}),x=new Float32Array(f);B7({source:m,target:x,sourceStartIndices:i,targetStartIndices:u,size:a,getData:y}),t.byteLength<x.byteLength+l&&t.reallocate(x.byteLength+l),t.subData({data:x,offset:l})}class P0 extends N7{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:ff}),b(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,r=this.settings.transition,i=Array.isArray(n)?e[n.find(s=>e[s])]:e[n];return fx(i,r)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:r=0,endRow:i=1/0}=n;this.state.updateRanges=V7(this.state.updateRanges,[r,i])}else this.state.updateRanges=ff}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=U7}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate(e,n.updateRanges!==ff),!0):!1}updateBuffer({numInstances:e,data:n,props:r,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let l=!0;if(o){for(const[u,c]of s)o.call(i,this,{data:n,startRow:u,endRow:c,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[u,c]of s){const f=Number.isFinite(u)?this.getVertexOffset(u):0,d=Number.isFinite(c)?this.getVertexOffset(c):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:f,endOffset:d})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:r,settings:i}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),i.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const o=e;Zt(ArrayBuffer.isView(o.value),"invalid ".concat(i.accessor));const a=Boolean(o.size)&&o.size!==this.size;return r.binaryAccessor=F7(o.value,{size:o.size||this.size,stride:o.stride,offset:o.offset,startIndices:n,nested:a}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?n[e]:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const r in e)Object.assign(n,super.getShaderAttributes(r,e[r]));return n}_autoUpdater(e,{data:n,startRow:r,endRow:i,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:l,value:u,size:c,startIndices:f}=e,{accessor:d,transform:g}=a,y=l.binaryAccessor||(typeof d=="function"?d:s[d]);Zt(typeof y=="function",'accessor "'.concat(d,'" is not a function'));let m=e.getVertexOffset(r);const{iterable:x,objectInfo:S}=D7(n,r,i);for(const v of x){S.index++;let w=y(v,S);if(g&&(w=g.call(this,w)),f){const R=(S.index<f.length-1?f[S.index+1]:o)-f[S.index];if(w&&Array.isArray(w[0])){let L=m;for(const C of w)e._normalizeValue(C,u,L),L+=c}else w&&w.length>c?u.set(w,m):(e._normalizeValue(w,S.target,0),a9({target:u,source:S.target,start:m,count:R}));m+=R*c}else e._normalizeValue(w,u,m),m+=c}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let r=!0;switch(n){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class j7{constructor({gl:e,attribute:n,timeline:r}){b(this,"gl",void 0),b(this,"type","interpolation"),b(this,"attributeInTransition",void 0),b(this,"settings",void 0),b(this,"attribute",void 0),b(this,"transition",void 0),b(this,"currentStartIndices",void 0),b(this,"currentLength",void 0),b(this,"transform",void 0),b(this,"buffers",void 0),this.gl=e,this.transition=new zu(r),this.attribute=n,this.attributeInTransition=new P0(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=G7(e,n);const i={byteLength:0,usage:35050};this.buffers=[new st(e,i),new st(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0){this.transition.cancel();return}this.settings=e;const{gl:r,buffers:i,attribute:s}=this;px(i);const o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)gx({buffer:a,...o});this.currentStartIndices=s.startIndices,this.currentLength=C0(s,n),this.attributeInTransition.setData({buffer:i[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:i[0],aTo:hx(r,s)},feedbackBuffers:{vCurrent:i[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:r}=this.settings,{time:i}=this.transition;let s=i/n;r&&(s=r(s)),this.transform.run({uniforms:{time:s}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}}const $7=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function G7(t,e){const n=dx(e.size);return new E0(t,{vs:$7,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}class H7{constructor({gl:e,attribute:n,timeline:r}){b(this,"gl",void 0),b(this,"type","spring"),b(this,"attributeInTransition",void 0),b(this,"settings",void 0),b(this,"attribute",void 0),b(this,"transition",void 0),b(this,"currentStartIndices",void 0),b(this,"currentLength",void 0),b(this,"texture",void 0),b(this,"framebuffer",void 0),b(this,"transform",void 0),b(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new zu(r),this.attribute=n,this.attributeInTransition=new P0(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=X7(e),this.framebuffer=q7(e,this.texture),this.transform=W7(e,n,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new st(e,i),new st(e,i),new st(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){const{gl:r,buffers:i,attribute:s}=this,o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)gx({buffer:a,...o});this.settings=e,this.currentStartIndices=s.startIndices,this.currentLength=C0(s,n),this.attributeInTransition.setData({buffer:i[1],value:s.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:hx(r,s)}})}update(){const{buffers:e,transform:n,framebuffer:r,transition:i}=this;if(!i.update())return!1;const o=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:o.stiffness,damping:o.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),px(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),Qh(r)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function W7(t,e,n){const r=dx(e.size);return new E0(t,{framebuffer:n,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}function X7(t){return new jn(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function q7(t,e){return new Ot(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{[36064]:e}})}const Y7={interpolation:j7,spring:H7};class Z7{constructor(e,{id:n,timeline:r}){b(this,"id",void 0),b(this,"isSupported",void 0),b(this,"gl",void 0),b(this,"timeline",void 0),b(this,"transitions",void 0),b(this,"needsRedraw",void 0),b(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=E0.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:r}){this.numInstances=r||1;for(const i in e){const s=e[i],o=s.getTransitionSetting(n);!o||this._updateAttribute(i,s,o)}for(const i in this.transitions){const s=e[i];(!s||!s.getTransitionSetting(n))&&this._removeTransition(i)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const r=this.transitions[n];r.inProgress&&(e[n]=r.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,r){const i=this.transitions[e];let s=!i||i.type!==r.type;if(s){if(!this.isSupported){it.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}i&&this._removeTransition(e);const o=Y7[r.type];o?this.transitions[e]=new o({attribute:n,timeline:this.timeline,gl:this.gl}):(it.error("unsupported transition type '".concat(r.type,"'"))(),s=!1)}(s||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const dw="attributeManager.invalidate",K7="attributeManager.updateStart",Q7="attributeManager.updateEnd",J7="attribute.updateStart",e$="attribute.allocate",t$="attribute.updateEnd";class n${constructor(e,{id:n="attribute-manager",stats:r,timeline:i}={}){b(this,"id",void 0),b(this,"gl",void 0),b(this,"attributes",void 0),b(this,"updateTriggers",void 0),b(this,"needsRedraw",void 0),b(this,"userData",void 0),b(this,"stats",void 0),b(this,"attributeTransitionManager",void 0),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new Z7(e,{id:"".concat(n,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const r=this._invalidateTrigger(e,n);on(dw,this,e,r)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);on(dw,this,"all")}update({data:e,numInstances:n,startIndices:r=null,transitions:i,props:s={},buffers:o={},context:a={}}){let l=!1;on(K7,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const u in this.attributes){const c=this.attributes[u],f=c.settings.accessor;c.startIndices=r,c.numInstances=n,s[u]&&it.removed("props.".concat(u),"data.attributes.".concat(u))(),c.setExternalBuffer(o[u])||c.setBinaryValue(typeof f=="string"?o[f]:void 0,e.startIndices)||typeof f=="string"&&!o[f]&&c.setConstantValue(s[f])||c.needsUpdate()&&(l=!0,this._updateAttribute({attribute:c,numInstances:n,data:e,props:s,context:a})),this.needsRedraw=this.needsRedraw||c.needsRedraw()}l&&on(Q7,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:r}=this,i={...r.getAttributes()};for(const s in n){const o=n[s];o.needsRedraw(e)&&!r.hasAttribute(s)&&(i[s]=o)}return i}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const r={};for(const i in e)n[i]||Object.assign(r,e[i].getShaderAttributes());return r}_add(e,n={}){for(const r in e){const i=e[r];this.attributes[r]=this._createAttribute(r,i,n)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,r){const i={...n,id:e,size:n.isIndexed&&1||n.size||1,divisor:r.instanced?1:n.divisor||0};return new P0(this.gl,i)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:r,updateTriggers:i}=this,s=i[e];return s&&s.forEach(o=>{const a=r[o];a&&a.setNeedsUpdate(a.id,n)}),s}_updateAttribute(e){const{attribute:n,numInstances:r}=e;if(on(J7,n),n.constant){n.setConstantValue(n.value);return}n.allocate(r)&&on(e$,n,r),n.updateBuffer(e)&&(this.needsRedraw=!0,on(t$,n,r))}}class r$ extends zu{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:r,duration:i,easing:s}}=this,o=s(e/i);this._value=Xf(n,r,o)}}const pw=1e-5;function gw(t,e,n,r,i){const s=e-t,a=(n-e)*i,l=-s*r;return a+l+s+e}function i$(t,e,n,r,i){if(Array.isArray(n)){const s=[];for(let o=0;o<n.length;o++)s[o]=gw(t[o],e[o],n[o],r,i);return s}return gw(t,e,n,r,i)}function mw(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}class s$ extends zu{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:r,stiffness:i}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=i$(s,o,n,r,i);const l=mw(a,n),u=mw(a,o);l<pw&&u<pw&&(a=n,this.end()),this._prevValue=o,this._currValue=a}}const o$={interpolation:r$,spring:s$};class a${constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,r,i){const{transitions:s}=this;if(s.has(e)){const l=s.get(e),{value:u=l.settings.fromValue}=l;n=u,this.remove(e)}if(i=fx(i),!i)return;const o=o$[i.type];if(!o){it.error("unsupported transition type '".concat(i.type,"'"))();return}const a=new o(this.timeline);a.start({...i,fromValue:n,toValue:r}),s.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,r]of this.transitions)r.update(),e[n]=r.value,r.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function l$(t){const e=M0(t);for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}function u$(t,e){const n=mx({newProps:t,oldProps:e,propTypes:M0(t),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=f$(t,e);let i=!1;return r||(i=h$(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:d$(t,e),transitionsChanged:c$(t,e)}}function c$(t,e){if(!t.transitions)return!1;const n={},r=M0(t);let i=!1;for(const s in t.transitions){const o=r[s],a=o&&o.type;(a==="number"||a==="color"||a==="array")&&Om(t[s],e[s],o)&&(n[s]=!0,i=!0)}return i?n:!1}function mx({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:i="props"}){if(e===t)return!1;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(i," changed shallowly");for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return"".concat(i,".").concat(s," added");const o=Om(t[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return"".concat(i,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){const o=Om(t[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}}return!1}function Om(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals,r&&!r.call(t,e))?"changed deeply":!r&&e!==t?"changed shallowly":null}function f$(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&i&&(n=i(t.data,e.data)||n),n}function h$(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&vw(t,e,"all"))return{all:!0};const n={};let r=!1;for(const i in t.updateTriggers)i!=="all"&&vw(t,e,i)&&(n[i]=!0,r=!0);return r?n:!1}function d$(t,e){if(e===null)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function vw(t,e,n){let r=t.updateTriggers[n];r=r==null?{}:r;let i=e.updateTriggers[n];return i=i==null?{}:i,mx({oldProps:i,newProps:r,triggerName:n})}function M0(t){const e=t[eh],n=e&&e.constructor;return n?n._propTypes:{}}const p$="count(): argument not an object",g$="count(): argument not a container";function m$(t){if(!y$(t))throw new Error(p$);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(v$(t))return Object.keys(t).length;throw new Error(g$)}function v$(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function y$(t){return t!==null&&typeof t=="object"}function _$(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){const r=n.modules.findIndex(i=>i.name==="project32");r>=0&&n.modules.splice(r,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const r={...t.inject};for(const i in e.inject)r[i]=(r[i]||"")+e.inject[i];n.inject=r}return n}const b$={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071},Im={};function w$(t,e){const n=t.context&&t.context.gl;if(!n||!e)return null;if(e instanceof jn)return e;e.constructor&&e.constructor.name!=="Object"&&(e={data:e});let r=null;e.compressed&&(r={[10241]:e.data.length>1?9985:9729});const i=new jn(n,{...e,parameters:{...b$,...r,...t.props.textureParameters}});return Im[i.id]=!0,i}function E$(t){!t||!(t instanceof jn)||Im[t.id]&&(t.delete(),delete Im[t.id])}const S$={boolean:{validate(t,e){return!0},equal(t,e,n){return Boolean(t)===Boolean(e)}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||vu(t)&&(t.length===3||t.length===4)},equal(t,e,n){return Zp(t,e)}},accessor:{validate(t,e){const n=nh(t);return n==="function"||n===nh(e.value)},equal(t,e,n){return typeof e=="function"?!0:Zp(t,e)}},array:{validate(t,e){return e.optional&&!t||vu(t)},equal(t,e,n){return n.compare?Zp(t,e):t===e}},object:{equal(t,e,n){return n.compare?no(t,e):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare||t===e}},data:{transform:(t,e,n)=>{const{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>w$(n,t),release:t=>{E$(t)}}};function Zp(t,e){if(t===e)return!0;if(!vu(t)||!vu(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function T$(t){const e={},n={},r={};for(const[i,s]of Object.entries(t)){const o=s==null?void 0:s.deprecatedFor;if(o)r[i]=Array.isArray(o)?o:[o];else{const a=A$(i,s);e[i]=a,n[i]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function A$(t,e){switch(nh(e)){case"object":return yl(t,e);case"array":return yl(t,{type:"array",value:e,compare:!1});case"boolean":return yl(t,{type:"boolean",value:e});case"number":return yl(t,{type:"number",value:e});case"function":return yl(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function yl(t,e){return"type"in e?{name:t,...S$[e.type],...e}:"value"in e?{name:t,type:nh(e.value),...e}:{name:t,type:"object",value:e}}function vu(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function nh(t){return vu(t)?"array":t===null?"null":typeof t}function x$(t,e){const n=vx(t.constructor),r=Object.create(n);r[eh]=t,r[Xs]={},r[Bi]={};for(let i=0;i<e.length;++i){const s=e[i];for(const o in s)r[o]=s[o]}return Object.freeze(r),r}function vx(t){const e=rh(t,"_mergedDefaultProps");return e||(R$(t),t._mergedDefaultProps)}function R$(t){if(!t.prototype)return;const n=Object.getPrototypeOf(t),r=vx(n),i=rh(t,"defaultProps")||{},s=T$(i),o=C$(s.defaultProps,r,t),a={...n._propTypes,...s.propTypes};M$(o,a);const l={...n._deprecatedProps,...s.deprecatedProps};P$(o,l),t._mergedDefaultProps=o,t._propTypes=a,t._deprecatedProps=l}function C$(t,e,n){const r=Object.create(null);Object.assign(r,e,t);const i=k$(n);return delete t.id,Object.defineProperties(r,{id:{writable:!0,value:i}}),r}function P$(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(r){const i="".concat(this.id,": ").concat(n);for(const s of e[n])yx(this,s)||(this[s]=r);it.deprecated(i,e[n].join("/"))()}})}function M$(t,e){const n={},r={};for(const i in e){const s=e[i],{name:o,value:a}=s;s.async&&(n[o]=a,r[o]=L$(o))}t[fa]=n,t[Xs]={},Object.defineProperties(t,r)}function L$(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||cx(e)?this[Xs][t]=e:this[Bi][t]=e},get(){if(this[Bi]){if(t in this[Bi])return this[Bi][t]||this[fa][t];if(t in this[Xs]){const e=this[eh]&&this[eh].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[fa][t]}}return this[fa][t]}}}function yx(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function rh(t,e){return yx(t,e)&&t[e]}function k$(t){const e=rh(t,"layerName")||rh(t,"componentName");return e||it.once(0,"".concat(t.name,".componentName not specified"))(),e||t.name}let O$=0;class L0{constructor(...e){b(this,"id",void 0),b(this,"props",void 0),b(this,"count",void 0),this.props=x$(this,e),this.id=this.props.id,this.count=O$++}clone(e){const{props:n}=this,r={};for(const i in n[fa])i in n[Bi]?r[i]=n[Bi][i]:i in n[Xs]&&(r[i]=n[Xs][i]);return new this.constructor({...n,...r,...e})}}b(L0,"componentName","Component");b(L0,"defaultProps",{});const I$=Object.freeze({});class N${constructor(e){b(this,"component",void 0),b(this,"onAsyncPropUpdated",void 0),b(this,"asyncProps",void 0),b(this,"oldProps",void 0),b(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||I$}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return Boolean(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){const n=e[Bi]||{},r=e[Xs]||e,i=e[fa]||{};for(const s in n){const o=n[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o),n[s]=this.getAsyncProp(s)}for(const s in r){const o=r[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(!!this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(cx(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const r=this.asyncProps[e];return n===r.resolvedValue||n===r.lastValue?!1:(r.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const r=this.asyncProps[e];r&&(n=this._postProcessValue(r,n),r.resolvedValue=n,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(e,n,r){const i=this.asyncProps[e];i&&r>=i.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=n,i.resolvedLoadCount=r,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const r=this.asyncProps[e];if(r){r.pendingLoadCount++;const i=r.pendingLoadCount;n.then(s=>{s=this._postProcessValue(r,s),this._setAsyncPropValue(e,s,i),this._onResolve(e,s)}).catch(s=>{this._onError(e,s)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const r=this.asyncProps[e];if(!r)return;r.pendingLoadCount++;const i=r.pendingLoadCount;let s=[],o=0;for await(const a of n){const{dataTransform:l}=this.component.props;l?s=l(a,s):s=s.concat(a),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:o,endRow:s.length}]}),o=s.length,this._setAsyncPropValue(e,s,i)}this._onResolve(e,s)}_postProcessValue(e,n){const r=e.type;return r&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(n,r,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const i=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class D$ extends N${constructor({attributeManager:e,layer:n}){super(n),b(this,"attributeManager",void 0),b(this,"needsRedraw",void 0),b(this,"needsUpdate",void 0),b(this,"subLayers",void 0),b(this,"usesPickingColorCache",void 0),b(this,"changeFlags",void 0),b(this,"viewport",void 0),b(this,"uniformTransitions",void 0),b(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}_fetch(e,n){const r=this.component.props.fetch;return r?r(n,{propName:e,layer:this.layer}):super._fetch(e,n)}_onResolve(e,n){const r=this.component.props.onDataLoad;e==="data"&&r&&r(n,{propName:e,layer:this.layer})}_onError(e,n){this.layer.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const F$="layer.changeFlag",U$="layer.initialize",V$="layer.update",B$="layer.finalize",z$="layer.matched",yw=2**24-1,j$=Object.freeze([]),$$=ed(({oldViewport:t,viewport:e})=>t.equals(e));let Nr=new Uint8ClampedArray(0);const G$={data:{type:"data",value:j$,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:i,signal:s})=>{const{resourceManager:o}=n.context;if(i=i||n.getLoadOptions(),r=r||n.props.loaders,s){var a;i={...i,fetch:{...(a=i)===null||a===void 0?void 0:a.fetch,signal:s}}}let l=o.contains(t);return!l&&!i&&(o.add({resourceId:t,data:cm(t,r),persistent:!1}),l=!0),l?o.subscribe({resourceId:t,onChange:u=>{var c;return(c=n.internalState)===null||c===void 0?void 0:c.reloadAsyncProp(e,u)},consumerId:n.id,requestId:e}):cm(t,r,i)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:Vu.DRAW,onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:tt.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class id extends L0{constructor(...e){super(...e),b(this,"internalState",null),b(this,"lifecycle",Vo.NO_STATE),b(this,"context",void 0),b(this,"state",void 0),b(this,"parent",null)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){Zt(this.internalState);const n=this.internalState.viewport||this.context.viewport,r=KA(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,s,o]=XA(r,n.pixelProjectionMatrix);return e.length===2?[i,s]:[i,s,o]}unproject(e){return Zt(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){Zt(this.internalState);const r=this.internalState.viewport||this.context.viewport;return o9(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===tt.DEFAULT||e===tt.LNGLAT||e===tt.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){Zt(e instanceof Uint8Array);const[n,r,i]=e;return n+r*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:m$(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;const n=this.getAttributeManager();if(!n)return null;const{positions:r,instancePositions:i}=n.attributes;return(e=r||i)===null||e===void 0?void 0:e.getBounds()}getShaders(e){for(const n of this.props.extensions)e=_$(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:r}=e.changeFlags;if(r&&n)if(Array.isArray(r))for(const l of r)n.invalidateAll(l);else n.invalidateAll();const{props:i,oldProps:s}=e,o=Number.isInteger(s.highlightedObjectIndex)||s.pickable,a=Number.isInteger(i.highlightedObjectIndex)||i.pickable;if(o!==a&&n){const{pickingColors:l,instancePickingColors:u}=n.attributes,c=l||u;c&&(a&&c.constant&&(c.constant=!1,n.invalidate(c.id)),!c.value&&!a&&(c.constant=!0,c.value=[0,0,0]))}}finalizeState(e){for(const r of this.getModels())r.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e,mode:n,sourceLayer:r}){const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(e,n){var r,i;if(n&&(e.message="".concat(n,": ").concat(e.message)),!((r=(i=this.props).onError)!==null&&r!==void 0&&r.call(i,e))){var s,o;(s=this.context)===null||s===void 0||(o=s.onError)===null||o===void 0||o.call(s,e,this)}}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)===null||e===void 0?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!$$({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();!n||(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,r=this.getNumInstances(),i=this.getStartIndices();e.update({data:n.data,numInstances:r,startIndices:i,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),r=Object.create(this.props);for(const i in n)Object.defineProperty(r,i,{value:n[i]});return r}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const r=Math.floor(Nr.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>yw&&it.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Nr=mu.allocate(Nr,n,{size:3,copy:!0,maxCount:Math.max(n,yw)});const i=Math.floor(Nr.length/3),s=[];for(let o=r;o<i;o++)this.encodePickingColor(o,s),Nr[o*3+0]=s[0],Nr[o*3+1]=s[1],Nr[o*3+2]=s[2]}e.value=Nr.subarray(0,n*3)}_setModelAttributes(e,n){const r=this.getAttributeManager(),i=e.userData.excludeAttributes||{},s=r.getShaderAttributes(n,i);e.setAttributes(s)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r;if(!i)return;const s=i.getVertexOffset(e),o=i.getVertexOffset(e+1);i.buffer.subData({data:new Uint8Array(o-s),offset:s})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;!r||(this.internalState.usesPickingColorCache&&r.value.buffer!==Nr.buffer&&(r.value=Nr.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0}))}_initialize(){Zt(!this.internalState),Zt(Number.isFinite(this.props.coordinateSystem)),on(U$,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new D$({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(it.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.layer=this,this.internalState.uniformTransitions=new a$(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){on(z$,this,this===e);const{state:n,internalState:r}=e;this!==e&&(this.internalState=r,this.internalState.layer=this,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(on(V$,this,e),!e)return;const n=this.props,r=this.context,i=this.internalState,s=r.viewport,o=this._updateUniformTransition();i.propsInTransition=o,r.viewport=i.viewport||s,this.props=o;try{const a=this._getUpdateParams(),l=this.getModels();if(r.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const c of this.props.extensions)c.updateState.call(this,a,c);const u=this.getModels()[0]!==l[0];this._postUpdate(a,u)}finally{r.viewport=s,this.props=n,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){on(B$,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:r={}}){this._updateAttributeTransition();const i=this.props,s=this.context;this.props=this.internalState.propsInTransition||i;const o=this.props.opacity;n.opacity=Math.pow(o,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,l=a&&a(n)||[0,0];ui(s.gl,{polygonOffset:l}),tr(s.gl,r,()=>{const u={moduleParameters:e,uniforms:n,parameters:r,context:s};for(const c of this.props.extensions)c.draw.call(this,u,c);this.draw(u)})}finally{this.props=i}}getChangeFlags(){var e;return(e=this.internalState)===null||e===void 0?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const i in e)if(e[i]){let s=!1;switch(i){case"dataChanged":const o=e[i],a=n[i];o&&Array.isArray(a)&&(n.dataChanged=Array.isArray(o)?a.concat(o):o,s=!0);default:n[i]||(n[i]=e[i],s=!0)}s&&on(F$,this,i,e)}const r=Boolean(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=r,n.somethingChanged=r||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const r=u$(e,n);if(r.updateTriggersChanged)for(const s in r.updateTriggersChanged)r.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(r.transitionsChanged)for(const s in r.transitionsChanged){var i;this.internalState.uniformTransitions.add(s,n[s],e[s],(i=e.transitions)===null||i===void 0?void 0:i[s])}return this.setChangeFlags(r)}validateProps(){l$(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(n.pickingHighlightColor=r(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new n$(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:r,oldProps:i}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:s}=this.state;s==null||s.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:a,highlightColor:l}=r;if(n||i.autoHighlight!==o||i.highlightedObjectIndex!==a||i.highlightColor!==l){const u={};o||(u.pickingSelectedColor=null),Array.isArray(l)&&(u.pickingHighlightColor=l),Number.isInteger(a)&&(u.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(u)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;const r=this.getAttributeManager(),i=r?r.getNeedsRedraw(e):!1;return n=n||i,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}b(id,"defaultProps",G$);b(id,"layerName","Layer");const H$="compositeLayer.renderLayers";class W$ extends id{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:r}=this.props;return r&&r[e]&&r[e].type||n}getSubLayerRow(e,n,r){return e.__source={parent:this,object:n,index:r},e}getSubLayerAccessor(e){if(typeof e=="function"){const n={index:-1,data:this.props.data,target:[]};return(r,i)=>r&&r.__source?(n.index=r.__source.index,e(r.__source.object,n)):e(r,i)}return e}getSubLayerProps(e={}){var n;const{opacity:r,pickable:i,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:f,coordinateOrigin:d,wrapLongitude:g,positionFormat:y,modelMatrix:m,extensions:x,fetch:S,operation:v,_subLayerProps:w}=this.props,R={id:"",updateTriggers:{},opacity:r,pickable:i,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:f,coordinateOrigin:d,wrapLongitude:g,positionFormat:y,modelMatrix:m,extensions:x,fetch:S,operation:v},L=w&&e.id&&w[e.id],C=L&&L.updateTriggers,U=e.id||"sublayer";if(L){const N=this.constructor._propTypes,H=e.type?e.type._propTypes:{};for(const G in L){const ie=H[G]||N[G];ie&&ie.type==="accessor"&&(L[G]=this.getSubLayerAccessor(L[G]))}}Object.assign(R,e,L),R.id="".concat(this.props.id,"-").concat(U),R.updateTriggers={all:(n=this.props.updateTriggers)===null||n===void 0?void 0:n.all,...e.updateTriggers,...C};for(const N of x){const H=N.getSubLayerProps.call(this,N);H&&Object.assign(R,H,{updateTriggers:Object.assign(R.updateTriggers,H.updateTriggers)})}return R}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let r=this.internalState.subLayers;const i=!r||this.needsUpdate();if(i){const s=this.renderLayers();r=A0(s,Boolean),this.internalState.subLayers=r}on(H$,this,i,r);for(const s of r)s.parent=this}}b(W$,"layerName","CompositeLayer");const Vc=Math.PI/180,_w=180/Math.PI,hf=6370972,ea=256;function X$(){const t=ea/hf,e=Math.PI/180*ea;return{unitsPerMeter:[t,t,t],unitsPerMeter2:[0,0,0],metersPerUnit:[1/t,1/t,1/t],unitsPerDegree:[e,e,t],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/e,1/e,1/t]}}class q$ extends Gr{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:i=0,nearZMultiplier:s=.1,farZMultiplier:o=2,resolution:a=10}=e;let{height:l,altitude:u=1.5}=e;l=l||1,u=Math.max(.75,u);const c=new un().lookAt({eye:[0,-u,0],up:[0,0,1]}),f=Math.pow(2,i);c.rotateX(n*Vc),c.rotateZ(-r*Vc),c.scale(f/l);const d=Math.atan(.5/u),g=ea*2*f/l;super({...e,height:l,viewMatrix:c,longitude:r,latitude:n,zoom:i,distanceScales:X$(),fovyRadians:d*2,focalDistance:u,near:s,far:Math.min(2,1/g+1)*u*o}),b(this,"longitude",void 0),b(this,"latitude",void 0),b(this,"resolution",void 0),this.latitude=n,this.longitude=r,this.resolution=a}get projectionMode(){return _r.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,this.height/2],n),i=this.unproject([this.width/2,0],n),s=this.unproject([this.width,this.height/2],n),o=this.unproject([this.width/2,this.height],n);return s[0]<this.longitude&&(s[0]+=360),r[0]>this.longitude&&(r[0]-=360),[Math.min(r[0],s[0],i[0],o[0]),Math.min(r[1],s[1],i[1],o[1]),Math.max(r[0],s[0],i[0],o[0]),Math.max(r[1],s[1],i[1],o[1])]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[i,s,o]=e,a=n?s:this.height-s,{pixelUnprojectionMatrix:l}=this;let u;if(Number.isFinite(o))u=Kp(l,[i,a,o,1]);else{const g=Kp(l,[i,a,-1,1]),y=Kp(l,[i,a,1,1]),m=((r||0)/hf+1)*ea,x=Bp(IA([],g,y)),S=Bp(g),v=Bp(y),w=(4*S*v-(x-S-v)**2)/16,R=4*w/x,L=Math.sqrt(S-R),C=Math.sqrt(Math.max(0,m*m-R)),U=(L-C)/Math.sqrt(x);u=Gz([],g,y,U)}const[c,f,d]=this.unprojectPosition(u);return Number.isFinite(o)?[c,f,d]:Number.isFinite(r)?[c,f,r]:[c,f]}projectPosition(e){const[n,r,i=0]=e,s=n*Vc,o=r*Vc,a=Math.cos(o),l=(i/hf+1)*ea;return[Math.sin(s)*a*l,-Math.cos(s)*a*l,Math.sin(o)*l]}unprojectPosition(e){const[n,r,i]=e,s=Kz(e),o=Math.asin(i/s),l=Math.atan2(n,-r)*_w,u=o*_w,c=(s/ea-1)*hf;return[l,u,c]}projectFlat(e){return e}unprojectFlat(e){return e}panByPosition(e,n){const r=this.unproject(n);return{longitude:e[0]-r[0]+this.longitude,latitude:e[1]-r[1]+this.latitude}}}function Kp(t,e){const n=Ba([],e,t);return FA(n,n,1/n[3]),n}const Qp=Math.PI/180;function Y$({height:t,focalDistance:e,orbitAxis:n,rotationX:r,rotationOrbit:i,zoom:s}){const o=n==="Z"?[0,0,1]:[0,1,0],a=n==="Z"?[0,-e,0]:[0,0,e],l=new un().lookAt({eye:a,up:o});l.rotateX(r*Qp),n==="Z"?l.rotateZ(i*Qp):l.rotateY(i*Qp);const u=Math.pow(2,s)/t;return l.scale(u),l}class Z$ extends Gr{constructor(e){const{height:n,projectionMatrix:r,fovy:i=50,orbitAxis:s="Z",target:o=[0,0,0],rotationX:a=0,rotationOrbit:l=0,zoom:u=0}=e,c=r?r[5]/2:T0(i);super({...e,longitude:void 0,viewMatrix:Y$({height:n||1,focalDistance:c,orbitAxis:s,rotationX:a,rotationOrbit:l,zoom:u}),fovy:i,focalDistance:c,position:o,zoom:u}),b(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:n=!0}={}){const[r,i,s=this.projectedCenter[2]]=e,o=n?i:this.height-i,[a,l,u]=Bu([r,o,s],this.pixelUnprojectionMatrix);return[a,l,u]}panByPosition(e,n){const r=this.project(e),i=[this.width/2+r[0]-n[0],this.height/2+r[1]-n[1],this.projectedCenter[2]];return{target:this.unproject(i)}}}class K$ extends Gr{constructor(e){const{longitude:n,latitude:r,modelMatrix:i,bearing:s=0,pitch:o=0,up:a=[0,0,1]}=e,u=new Jh({bearing:s,pitch:o===-90?1e-4:90+o}).toVector3().normalize(),c=i?new un(i).transformAsVector(u):u,f=Number.isFinite(r)?HA({latitude:r}):0,d=Math.pow(2,f),g=new un().lookAt({eye:[0,0,0],center:c,up:a}).scale(d);super({...e,zoom:f,viewMatrix:g}),b(this,"longitude",void 0),b(this,"latitude",void 0),this.latitude=r,this.longitude=n}}const _l=20;class k0 extends x0{constructor(e){const{width:n,height:r,position:i=[0,0,0],bearing:s=0,pitch:o=0,longitude:a=null,latitude:l=null,maxPitch:u=90,minPitch:c=-90,startRotatePos:f,startBearing:d,startPitch:g,startZoomPosition:y}=e;super({width:n,height:r,position:i,bearing:s,pitch:o,longitude:a,latitude:l,maxPitch:u,minPitch:c},{startRotatePos:f,startBearing:d,startPitch:g,startZoomPosition:y})}panStart(){return this}pan(){return this}panEnd(){return this}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startBearing:s,startPitch:o}=this.getState(),{width:a,height:l}=this.getViewportProps();if(!i||s===void 0||o===void 0)return this;let u;if(e){const c=(e[0]-i[0])/a,f=(e[1]-i[1])/l;u={bearing:s-c*180,pitch:o-f*90}}else u={bearing:s-n,pitch:o-r};return this._getUpdatedState(u)}rotateEnd(){return this._getUpdatedState({startRotatePos:null,startBearing:null,startPitch:null})}zoomStart(){return this._getUpdatedState({startZoomPosition:this.getViewportProps().position})}zoom({scale:e}){let{startZoomPosition:n}=this.getState();n||(n=this.getViewportProps().position);const r=this.getDirection();return this._move(r,Math.log2(e)*_l,n)}zoomEnd(){return this._getUpdatedState({startZoomPosition:null})}moveLeft(e=_l){const n=this.getDirection(!0);return this._move(n.rotateZ({radians:Math.PI/2}),e)}moveRight(e=_l){const n=this.getDirection(!0);return this._move(n.rotateZ({radians:-Math.PI/2}),e)}moveUp(e=_l){const n=this.getDirection(!0);return this._move(n,e)}moveDown(e=_l){const n=this.getDirection(!0);return this._move(n.negate(),e)}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}zoomIn(e=2){return this.zoom({scale:e})}zoomOut(e=2){return this.zoom({scale:1/e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{bearing:i,longitude:s}=r;return Math.abs(i-n.bearing)>180&&(r.bearing=i<0?i+360:i-360),s!==null&&n.longitude!==null&&Math.abs(s-n.longitude)>180&&(r.longitude=s<0?s+360:s-360),r}_move(e,n,r=this.getViewportProps().position){const i=e.scale(n);return this._getUpdatedState({position:new ir(r).add(i)})}getDirection(e=!1){return new Jh({bearing:this.getViewportProps().bearing,pitch:e?90:90+this.getViewportProps().pitch}).toVector3().normalize()}_getUpdatedState(e){return new k0({...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{pitch:n,maxPitch:r,minPitch:i,longitude:s,bearing:o}=e;return e.pitch=Ct(n,i,r),s!==null&&(s<-180||s>180)&&(e.longitude=Jf(s+180,360)-180),(o<-180||o>180)&&(e.bearing=Jf(o+180,360)-180),e}}class Q$ extends ju{constructor(...e){super(...e),b(this,"ControllerState",k0),b(this,"transition",{transitionDuration:300,transitionInterpolator:new za(["position","pitch","bearing"])})}}class J$ extends zr{get ViewportType(){return K$}get ControllerType(){return Q$}}b(J$,"displayName","FirstPersonView");class eG extends zr{constructor(e={}){super(e),this.props.orbitAxis=e.orbitAxis||"Z"}get ViewportType(){return Z$}get ControllerType(){return C9}}b(eG,"displayName","OrbitView");class tG extends JA{applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i}=e;e.zoom=Ct(i,r,n);const{longitude:s,latitude:o}=e;return(s<-180||s>180)&&(e.longitude=Jf(s+180,360)-180),e.latitude=Ct(o,-89,89),e}}class nG extends ju{constructor(...e){super(...e),b(this,"ControllerState",tG),b(this,"transition",{transitionDuration:300,transitionInterpolator:new za(["longitude","latitude","zoom"])}),b(this,"dragMode","pan")}setProps(e){super.setProps(e),this.dragRotate=!1,this.touchRotate=!1}}class rG extends zr{get ViewportType(){return q$}get ControllerType(){return nG}}b(rG,"displayName","GlobeView");class iG{constructor(e){b(this,"opts",void 0),e&&(this.opts=e)}equals(e){return this===e?!0:this.constructor===e.constructor&&no(this.opts,e.opts)}getShaders(e){return null}getSubLayerProps(e){const{defaultProps:n}=e.constructor,r={updateTriggers:{}};for(const i in n)if(i in this.props){const s=n[i],o=this.props[i];r[i]=o,s&&s.type==="accessor"&&(r.updateTriggers[i]=this.props.updateTriggers[i],typeof o=="function"&&(r[i]=this.getSubLayerAccessor(o)))}return r}initializeState(e,n){}updateState(e,n){}draw(e,n){}finalizeState(e,n){}}b(iG,"defaultProps",{});function sG(t,e,n){var r=this,i=W.exports.useRef(null),s=W.exports.useRef(0),o=W.exports.useRef(null),a=W.exports.useRef([]),l=W.exports.useRef(),u=W.exports.useRef(),c=W.exports.useRef(t),f=W.exports.useRef(!0);W.exports.useEffect(function(){c.current=t},[t]);var d=!e&&e!==0&&typeof window<"u";if(typeof t!="function")throw new TypeError("Expected a function");e=+e||0;var g=!!(n=n||{}).leading,y=!("trailing"in n)||!!n.trailing,m="maxWait"in n,x=m?Math.max(+n.maxWait||0,e):null;W.exports.useEffect(function(){return f.current=!0,function(){f.current=!1}},[]);var S=W.exports.useMemo(function(){var v=function(N){var H=a.current,G=l.current;return a.current=l.current=null,s.current=N,u.current=c.current.apply(G,H)},w=function(N,H){d&&cancelAnimationFrame(o.current),o.current=d?requestAnimationFrame(N):setTimeout(N,H)},R=function(N){if(!f.current)return!1;var H=N-i.current;return!i.current||H>=e||H<0||m&&N-s.current>=x},L=function(N){return o.current=null,y&&a.current?v(N):(a.current=l.current=null,u.current)},C=function N(){var H=Date.now();if(R(H))return L(H);if(f.current){var G=e-(H-i.current),ie=m?Math.min(G,x-(H-s.current)):G;w(N,ie)}},U=function(){var N=Date.now(),H=R(N);if(a.current=[].slice.call(arguments),l.current=r,i.current=N,H){if(!o.current&&f.current)return s.current=i.current,w(C,e),g?v(i.current):u.current;if(m)return w(C,e),v(i.current)}return o.current||w(C,e),u.current};return U.cancel=function(){o.current&&(d?cancelAnimationFrame(o.current):clearTimeout(o.current)),s.current=0,a.current=i.current=l.current=o.current=null},U.isPending=function(){return!!o.current},U.flush=function(){return o.current?L(Date.now()):u.current},U},[g,m,e,x,y,d]);return S}function oG(t,e){return t===e}function bw(t){return typeof t=="function"?function(){return t}:t}function IW(t,e,n){var r,i,s=n&&n.equalityFn||oG,o=(r=W.exports.useState(bw(t)),i=r[1],[r[0],W.exports.useCallback(function(f){return i(bw(f))},[])]),a=o[0],l=o[1],u=sG(W.exports.useCallback(function(f){return l(f)},[l]),e,n),c=W.exports.useRef(t);return s(c.current,t)||(u(t),c.current=t),[a,u]}const aG=typeof window<"u"?W.exports.useLayoutEffect:W.exports.useEffect;function ih(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const lG={position:"absolute",zIndex:-1};function _x(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(n=>_x(n,e));if(sd(t)){if(uG(t))return e.style=lG,W.exports.cloneElement(t,e);if(cG(t))return W.exports.cloneElement(t,e)}return t}function sd(t){return t&&typeof t=="object"&&"type"in t||!1}function uG(t){const e=t.type,n=e&&e.defaultProps;return n&&n.mapStyle}function cG(t){const e=t.type;return e&&e.deckGLViewProps}function Nm(t){if(typeof t=="function")return W.exports.createElement(zr,{},t);if(Array.isArray(t))return t.map(Nm);if(sd(t)){if(t.type===W.exports.Fragment)return Nm(t.props.children);if(ih(t.type,zr))return t}return t}function fG({children:t,layers:e=[],views:n=null}){const r=[],i=[],s={};return W.exports.Children.forEach(Nm(t),o=>{if(sd(o)){const a=o.type;if(ih(a,id)){const l=hG(a,o.props);i.push(l)}else r.push(o);if(ih(a,zr)&&a!==zr&&o.props.id){const l=new a(o.props);s[l.id]=l}}else o&&r.push(o)}),Object.keys(s).length>0&&(Array.isArray(n)?n.forEach(o=>{s[o.id]=o}):n&&(s[n.id]=n),n=Object.values(s)),e=i.length>0?[...i,...e]:e,{layers:e,children:r,views:n}}function hG(t,e){const n={},r=t.defaultProps||{};for(const i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}function dG({children:t,deck:e,ContextProvider:n}){const{viewManager:r}=e||{};if(!r||!r.views.length)return[];const i={},s=r.views[0].id;for(const o of t){let a=s,l=o;sd(o)&&ih(o.type,zr)&&(a=o.props.id||s,l=o.props.children);const u=r.getViewport(a),c=r.getViewState(a);if(u){const{x:f,y:d,width:g,height:y}=u;l=_x(l,{x:f,y:d,width:g,height:y,viewport:u,viewState:c}),i[a]||(i[a]={viewport:u,children:[]}),i[a].children.push(l)}}return Object.keys(i).map(o=>{const{viewport:a,children:l}=i[o],{x:u,y:c,width:f,height:d}=a,g={position:"absolute",left:u,top:c,width:f,height:d},y="view-".concat(o),m=W.exports.createElement("div",{key:y,id:y,style:g},...l);if(n){const x={viewport:a,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:S=>{S.viewId=o,e._onViewStateChange(S)}};return W.exports.createElement(n,{key:y,value:x},m)}return m})}const pG={mixBlendMode:null};function gG({width:t,height:e,style:n}){const r={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},i={left:0,top:0};if(n)for(const s in n)s in pG?i[s]=n[s]:r[s]=n[s];return{containerStyle:r,canvasStyle:i}}function mG(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function bx(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function vG(t,e,n){const r=new e({...n,_customRender:i=>{t.redrawReason=i;const s=r.getViewports();t.lastRenderedViewports!==s?t.forceUpdate():bx(t)}});return r}const yG=W.exports.forwardRef((t,e)=>{const[n,r]=W.exports.useState(0),s=W.exports.useRef({control:null,version:n,forceUpdate:()=>r(L=>L+1)}).current,o=W.exports.useRef(null),a=W.exports.useRef(null),l=W.exports.useMemo(()=>fG(t),[t.layers,t.views,t.children]);let u=!0;const c=L=>{var C;return u&&t.viewState?(s.viewStateUpdateRequested=L,null):(s.viewStateUpdateRequested=null,(C=t.onViewStateChange)===null||C===void 0?void 0:C.call(t,L))},f=L=>{if(u)s.interactionStateUpdateRequested=L;else{var C;s.interactionStateUpdateRequested=null,(C=t.onInteractionStateChange)===null||C===void 0||C.call(t,L)}},d=W.exports.useMemo(()=>{const L={...t,style:null,width:"100%",height:"100%",parent:o.current,canvas:a.current,layers:l.layers,views:l.views,onViewStateChange:c,onInteractionStateChange:f};return delete L._customRender,s.deck&&s.deck.setProps(L),L},[t]);W.exports.useEffect(()=>{const L=t.Deck||rd;return s.deck=vG(s,L,{...d,parent:o.current,canvas:a.current}),()=>{var C;return(C=s.deck)===null||C===void 0?void 0:C.finalize()}},[]),aG(()=>{bx(s);const{viewStateUpdateRequested:L,interactionStateUpdateRequested:C}=s;L&&c(L),C&&f(C)}),W.exports.useImperativeHandle(e,()=>mG(s),[]);const g=s.deck&&s.deck.isInitialized?s.deck.getViewports():void 0,{ContextProvider:y,width:m,height:x,id:S,style:v}=t,{containerStyle:w,canvasStyle:R}=W.exports.useMemo(()=>gG({width:m,height:x,style:v}),[m,x,v]);if(!s.viewStateUpdateRequested&&s.lastRenderedViewports===g||s.version!==n){s.lastRenderedViewports=g,s.version=n;const L=dG({children:l.children,deck:s.deck,ContextProvider:y}),C=W.exports.createElement("canvas",{key:"canvas",id:S||"deckgl-overlay",ref:a,style:R});s.control=W.exports.createElement("div",{id:"".concat(S||"deckgl","-wrapper"),ref:o,style:w},[C,L])}return u=!1,s.control});yG.defaultProps=rd.defaultProps;function NW(t,e){e===void 0&&(e={});var n=0,r=0,i=0;return S2(t,function(s){n+=s[0],r+=s[1],i++},!0),CF([n/i,r/i],e.properties)}class od{constructor(){this.listeners=[],this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.push(e),this.onSubscribe(),()=>{this.listeners=this.listeners.filter(n=>n!==e),this.onUnsubscribe()}}hasListeners(){return this.listeners.length>0}onSubscribe(){}onUnsubscribe(){}}const O0=typeof window>"u";function gr(){}function _G(t,e){return typeof t=="function"?t(e):t}function bG(t){return typeof t=="number"&&t>=0&&t!==1/0}function wG(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Jp(t,e,n){return ad(t)?typeof e=="function"?{...n,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}function Ni(t,e,n){return ad(t)?[{...e,queryKey:t},n]:[t||{},e]}function ww(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(ad(o)){if(r){if(e.queryHash!==I0(o,e.options))return!1}else if(!sh(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||typeof i<"u"&&i!==e.state.fetchStatus||s&&!s(e))}function Ew(t,e){const{exact:n,fetching:r,predicate:i,mutationKey:s}=t;if(ad(s)){if(!e.options.mutationKey)return!1;if(n){if(Is(e.options.mutationKey)!==Is(s))return!1}else if(!sh(e.options.mutationKey,s))return!1}return!(typeof r=="boolean"&&e.state.status==="loading"!==r||i&&!i(e))}function I0(t,e){return((e==null?void 0:e.queryKeyHashFn)||Is)(t)}function Is(t){return JSON.stringify(t,(e,n)=>Dm(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function sh(t,e){return wx(t,e)}function wx(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!wx(t[n],e[n])):!1}function Ex(t,e){if(t===e)return t;const n=Sw(t)&&Sw(e);if(n||Dm(t)&&Dm(e)){const r=n?t.length:Object.keys(t).length,i=n?e:Object.keys(e),s=i.length,o=n?[]:{};let a=0;for(let l=0;l<s;l++){const u=n?l:i[l];o[u]=Ex(t[u],e[u]),o[u]===t[u]&&a++}return r===s&&a===r?t:o}return e}function Sw(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Dm(t){if(!Tw(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!Tw(n)||!n.hasOwnProperty("isPrototypeOf"))}function Tw(t){return Object.prototype.toString.call(t)==="[object Object]"}function ad(t){return Array.isArray(t)}function Sx(t){return new Promise(e=>{setTimeout(e,t)})}function Aw(t){Sx(0).then(t)}function EG(){if(typeof AbortController=="function")return new AbortController}function SG(t,e,n){return n.isDataEqual!=null&&n.isDataEqual(t,e)?t:typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Ex(t,e):e}class TG extends od{constructor(){super(),this.setup=e=>{if(!O0&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(e){this.focused=e,e&&this.onFocus()}onFocus(){this.listeners.forEach(e=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const Fm=new TG;class AG extends od{constructor(){super(),this.setup=e=>{if(!O0&&window.addEventListener){const n=()=>e();return window.addEventListener("online",n,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setOnline(r):this.onOnline()})}setOnline(e){this.online=e,e&&this.onOnline()}onOnline(){this.listeners.forEach(e=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const oh=new AG;function xG(t){return Math.min(1e3*2**t,3e4)}function N0(t){return(t!=null?t:"online")==="online"?oh.isOnline():!0}class Tx{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function eg(t){return t instanceof Tx}function Ax(t){let e=!1,n=0,r=!1,i,s,o;const a=new Promise((x,S)=>{s=x,o=S}),l=x=>{r||(g(new Tx(x)),t.abort==null||t.abort())},u=()=>{e=!0},c=()=>{e=!1},f=()=>!Fm.isFocused()||t.networkMode!=="always"&&!oh.isOnline(),d=x=>{r||(r=!0,t.onSuccess==null||t.onSuccess(x),i==null||i(),s(x))},g=x=>{r||(r=!0,t.onError==null||t.onError(x),i==null||i(),o(x))},y=()=>new Promise(x=>{i=S=>{if(r||!f())return x(S)},t.onPause==null||t.onPause()}).then(()=>{i=void 0,r||t.onContinue==null||t.onContinue()}),m=()=>{if(r)return;let x;try{x=t.fn()}catch(S){x=Promise.reject(S)}Promise.resolve(x).then(d).catch(S=>{var v,w;if(r)return;const R=(v=t.retry)!=null?v:3,L=(w=t.retryDelay)!=null?w:xG,C=typeof L=="function"?L(n,S):L,U=R===!0||typeof R=="number"&&n<R||typeof R=="function"&&R(n,S);if(e||!U){g(S);return}n++,t.onFail==null||t.onFail(n,S),Sx(C).then(()=>{if(f())return y()}).then(()=>{e?g(S):m()})})};return N0(t.networkMode)?m():y().then(m),{promise:a,cancel:l,continue:()=>{i==null||i()},cancelRetry:u,continueRetry:c}}const D0=console;function RG(){let t=[],e=0,n=c=>{c()},r=c=>{c()};const i=c=>{let f;e++;try{f=c()}finally{e--,e||a()}return f},s=c=>{e?t.push(c):Aw(()=>{n(c)})},o=c=>(...f)=>{s(()=>{c(...f)})},a=()=>{const c=t;t=[],c.length&&Aw(()=>{r(()=>{c.forEach(f=>{n(f)})})})};return{batch:i,batchCalls:o,schedule:s,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c}}}const pn=RG();class xx{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),bG(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e!=null?e:O0?1/0:5*60*1e3)}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class CG extends xx{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||D0,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||PG(this.options),this.state=this.initialState,this.meta=e.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.meta=e==null?void 0:e.meta,this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,n){const r=SG(this.state.data,e,this.options);return this.dispatch({data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){this.dispatch({type:"setState",state:e,setStateOptions:n})}cancel(e){var n;const r=this.promise;return(n=this.retryer)==null||n.cancel(e),r?r.then(gr).catch(gr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!wG(this.state.dataUpdatedAt,e)}onFocus(){var e;const n=this.observers.find(r=>r.shouldFetchOnWindowFocus());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const n=this.observers.find(r=>r.shouldFetchOnReconnect());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.indexOf(e)===-1&&(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.indexOf(e)!==-1&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,n){var r,i;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&n!=null&&n.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var s;return(s=this.retryer)==null||s.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const g=this.observers.find(y=>y.options.queryFn);g&&this.setOptions(g.options)}Array.isArray(this.options.queryKey);const o=EG(),a={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},l=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>{if(o)return this.abortSignalConsumed=!0,o.signal}})};l(a);const u=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(a)):Promise.reject("Missing queryFn"),c={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:u,meta:this.meta};if(l(c),(r=this.options.behavior)==null||r.onFetch(c),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((i=c.fetchOptions)==null?void 0:i.meta)){var f;this.dispatch({type:"fetch",meta:(f=c.fetchOptions)==null?void 0:f.meta})}const d=g=>{if(eg(g)&&g.silent||this.dispatch({type:"error",error:g}),!eg(g)){var y,m;(y=(m=this.cache.config).onError)==null||y.call(m,g,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=Ax({fn:c.fetchFn,abort:o==null?void 0:o.abort.bind(o),onSuccess:g=>{var y,m;if(typeof g>"u"){d(new Error("undefined"));return}this.setData(g),(y=(m=this.cache.config).onSuccess)==null||y.call(m,g,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:d,onFail:()=>{this.dispatch({type:"failed"})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const n=r=>{var i,s;switch(e.type){case"failed":return{...r,fetchFailureCount:r.fetchFailureCount+1};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,fetchFailureCount:0,fetchMeta:(i=e.meta)!=null?i:null,fetchStatus:N0(this.options.networkMode)?"fetching":"paused",...!r.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(s=e.dataUpdatedAt)!=null?s:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0}};case"error":const o=e.error;return eg(o)&&o.revert&&this.revertState?{...this.revertState}:{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),pn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function PG(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=typeof t.initialData<"u"?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0,i=typeof e<"u";return{data:e,dataUpdateCount:0,dataUpdatedAt:i?r!=null?r:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isInvalidated:!1,status:i?"success":"loading",fetchStatus:"idle"}}class MG extends od{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,n,r){var i;const s=n.queryKey,o=(i=n.queryHash)!=null?i:I0(s,n);let a=this.get(o);return a||(a=new CG({cache:this,logger:e.getLogger(),queryKey:s,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s),meta:n.meta}),this.add(a)),a}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const n=this.queriesMap[e.queryHash];n&&(e.destroy(),this.queries=this.queries.filter(r=>r!==e),n===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){pn.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,n){const[r]=Ni(e,n);return typeof r.exact>"u"&&(r.exact=!0),this.queries.find(i=>ww(r,i))}findAll(e,n){const[r]=Ni(e,n);return Object.keys(r).length>0?this.queries.filter(i=>ww(r,i)):this.queries}notify(e){pn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){pn.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){pn.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class LG extends xx{constructor(e){super(),this.options={...e.defaultOptions,...e.options},this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||D0,this.observers=[],this.state=e.state||kG(),this.meta=e.meta,this.updateCacheTime(this.options.cacheTime),this.scheduleGc()}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.indexOf(e)===-1&&(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(n=>n!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()}async execute(){const e=()=>{var w;return this.retryer=Ax({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:()=>{this.dispatch({type:"failed"})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(w=this.options.retry)!=null?w:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},n=this.state.status==="loading";try{var r,i,s,o,a,l;if(!n){var u,c,f,d;this.dispatch({type:"loading",variables:this.options.variables}),await((u=(c=this.mutationCache.config).onMutate)==null?void 0:u.call(c,this.state.variables,this));const R=await((f=(d=this.options).onMutate)==null?void 0:f.call(d,this.state.variables));R!==this.state.context&&this.dispatch({type:"loading",context:R,variables:this.state.variables})}const w=await e();return await((r=(i=this.mutationCache.config).onSuccess)==null?void 0:r.call(i,w,this.state.variables,this.state.context,this)),await((s=(o=this.options).onSuccess)==null?void 0:s.call(o,w,this.state.variables,this.state.context)),await((a=(l=this.options).onSettled)==null?void 0:a.call(l,w,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:w}),w}catch(w){try{var g,y,m,x,S,v;throw await((g=(y=this.mutationCache.config).onError)==null?void 0:g.call(y,w,this.state.variables,this.state.context,this)),await((m=(x=this.options).onError)==null?void 0:m.call(x,w,this.state.variables,this.state.context)),await((S=(v=this.options).onSettled)==null?void 0:S.call(v,void 0,w,this.state.variables,this.state.context)),w}finally{this.dispatch({type:"error",error:w})}}}dispatch(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:r.failureCount+1};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"loading":return{...r,context:e.context,data:void 0,error:null,isPaused:!N0(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...r,data:e.data,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,isPaused:!1,status:"error"};case"setState":return{...r,...e.state}}};this.state=n(this.state),pn.batch(()=>{this.observers.forEach(r=>{r.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function kG(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}class OG extends od{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,n,r){const i=new LG({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(n),state:r,defaultOptions:n.mutationKey?e.getMutationDefaults(n.mutationKey):void 0,meta:n.meta});return this.add(i),i}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(n=>n!==e),this.notify({type:"removed",mutation:e})}clear(){pn.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(n=>Ew(e,n))}findAll(e){return this.mutations.filter(n=>Ew(e,n))}notify(e){pn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.mutations.filter(n=>n.state.isPaused);return pn.batch(()=>e.reduce((n,r)=>n.then(()=>r.continue().catch(gr)),Promise.resolve()))}}function IG(){return{onFetch:t=>{t.fetchFn=()=>{var e,n,r,i,s,o;const a=(e=t.fetchOptions)==null||(n=e.meta)==null?void 0:n.refetchPage,l=(r=t.fetchOptions)==null||(i=r.meta)==null?void 0:i.fetchMore,u=l==null?void 0:l.pageParam,c=(l==null?void 0:l.direction)==="forward",f=(l==null?void 0:l.direction)==="backward",d=((s=t.state.data)==null?void 0:s.pages)||[],g=((o=t.state.data)==null?void 0:o.pageParams)||[];let y=g,m=!1;const x=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>{var U;if((U=t.signal)!=null&&U.aborted)m=!0;else{var N;(N=t.signal)==null||N.addEventListener("abort",()=>{m=!0})}return t.signal}})},S=t.options.queryFn||(()=>Promise.reject("Missing queryFn")),v=(C,U,N,H)=>(y=H?[U,...y]:[...y,U],H?[N,...C]:[...C,N]),w=(C,U,N,H)=>{if(m)return Promise.reject("Cancelled");if(typeof N>"u"&&!U&&C.length)return Promise.resolve(C);const G={queryKey:t.queryKey,pageParam:N,meta:t.meta};x(G);const ie=S(G);return Promise.resolve(ie).then(Ee=>v(C,N,Ee,H))};let R;if(!d.length)R=w([]);else if(c){const C=typeof u<"u",U=C?u:xw(t.options,d);R=w(d,C,U)}else if(f){const C=typeof u<"u",U=C?u:NG(t.options,d);R=w(d,C,U,!0)}else{y=[];const C=typeof t.options.getNextPageParam>"u";R=(a&&d[0]?a(d[0],0,d):!0)?w([],C,g[0]):Promise.resolve(v([],g[0],d[0]));for(let N=1;N<d.length;N++)R=R.then(H=>{if(a&&d[N]?a(d[N],N,d):!0){const ie=C?g[N]:xw(t.options,H);return w(H,C,ie)}return Promise.resolve(v(H,g[N],d[N]))})}return R.then(C=>({pages:C,pageParams:y}))}}}}function xw(t,e){return t.getNextPageParam==null?void 0:t.getNextPageParam(e[e.length-1],e)}function NG(t,e){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(e[0],e)}class DW{constructor(e={}){this.queryCache=e.queryCache||new MG,this.mutationCache=e.mutationCache||new OG,this.logger=e.logger||D0,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}mount(){this.unsubscribeFocus=Fm.subscribe(()=>{Fm.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=oh.subscribe(()=>{oh.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())})}unmount(){var e,n;(e=this.unsubscribeFocus)==null||e.call(this),(n=this.unsubscribeOnline)==null||n.call(this)}isFetching(e,n){const[r]=Ni(e,n);return r.fetchStatus="fetching",this.queryCache.findAll(r).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,n){var r;return(r=this.queryCache.find(e,n))==null?void 0:r.state.data}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:n,state:r})=>{const i=r.data;return[n,i]})}setQueryData(e,n,r){const i=this.queryCache.find(e),s=i==null?void 0:i.state.data,o=_G(n,s);if(typeof o>"u")return;const a=Jp(e),l=this.defaultQueryOptions(a);return this.queryCache.build(this,l).setData(o,{...r,manual:!0})}setQueriesData(e,n,r){return pn.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,n,r)]))}getQueryState(e,n){var r;return(r=this.queryCache.find(e,n))==null?void 0:r.state}removeQueries(e,n){const[r]=Ni(e,n),i=this.queryCache;pn.batch(()=>{i.findAll(r).forEach(s=>{i.remove(s)})})}resetQueries(e,n,r){const[i,s]=Ni(e,n,r),o=this.queryCache,a={type:"active",...i};return pn.batch(()=>(o.findAll(i).forEach(l=>{l.reset()}),this.refetchQueries(a,s)))}cancelQueries(e,n,r){const[i,s={}]=Ni(e,n,r);typeof s.revert>"u"&&(s.revert=!0);const o=pn.batch(()=>this.queryCache.findAll(i).map(a=>a.cancel(s)));return Promise.all(o).then(gr).catch(gr)}invalidateQueries(e,n,r){const[i,s]=Ni(e,n,r);return pn.batch(()=>{var o,a;if(this.queryCache.findAll(i).forEach(u=>{u.invalidate()}),i.refetchType==="none")return Promise.resolve();const l={...i,type:(o=(a=i.refetchType)!=null?a:i.type)!=null?o:"active"};return this.refetchQueries(l,s)})}refetchQueries(e,n,r){const[i,s]=Ni(e,n,r),o=pn.batch(()=>this.queryCache.findAll(i).filter(l=>!l.isDisabled()).map(l=>{var u;return l.fetch(void 0,{...s,cancelRefetch:(u=s==null?void 0:s.cancelRefetch)!=null?u:!0,meta:{refetchPage:i.refetchPage}})}));let a=Promise.all(o).then(gr);return s!=null&&s.throwOnError||(a=a.catch(gr)),a}fetchQuery(e,n,r){const i=Jp(e,n,r),s=this.defaultQueryOptions(i);typeof s.retry>"u"&&(s.retry=!1);const o=this.queryCache.build(this,s);return o.isStaleByTime(s.staleTime)?o.fetch(s):Promise.resolve(o.state.data)}prefetchQuery(e,n,r){return this.fetchQuery(e,n,r).then(gr).catch(gr)}fetchInfiniteQuery(e,n,r){const i=Jp(e,n,r);return i.behavior=IG(),this.fetchQuery(i)}prefetchInfiniteQuery(e,n,r){return this.fetchInfiniteQuery(e,n,r).then(gr).catch(gr)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,n){const r=this.queryDefaults.find(i=>Is(e)===Is(i.queryKey));r?r.defaultOptions=n:this.queryDefaults.push({queryKey:e,defaultOptions:n})}getQueryDefaults(e){if(!e)return;const n=this.queryDefaults.find(r=>sh(e,r.queryKey));return n==null?void 0:n.defaultOptions}setMutationDefaults(e,n){const r=this.mutationDefaults.find(i=>Is(e)===Is(i.mutationKey));r?r.defaultOptions=n:this.mutationDefaults.push({mutationKey:e,defaultOptions:n})}getMutationDefaults(e){if(!e)return;const n=this.mutationDefaults.find(r=>sh(e,r.mutationKey));return n==null?void 0:n.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const n={...this.defaultOptions.queries,...this.getQueryDefaults(e==null?void 0:e.queryKey),...e,_defaulted:!0};return!n.queryHash&&n.queryKey&&(n.queryHash=I0(n.queryKey,n)),typeof n.refetchOnReconnect>"u"&&(n.refetchOnReconnect=n.networkMode!=="always"),typeof n.useErrorBoundary>"u"&&(n.useErrorBoundary=!!n.suspense),n}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e==null?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}const Rw=W.exports.createContext(void 0),DG=W.exports.createContext(!1);function FG(t,e){return t||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=Rw),window.ReactQueryClientContext):Rw)}const FW=({client:t,children:e,context:n,contextSharing:r=!1})=>{W.exports.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]);const i=FG(n,r);return Oe(DG.Provider,{value:!n&&r,children:Oe(i.Provider,{value:t,children:e})})};function UW(t){return Gt({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"title",attr:{},child:[]},{tag:"path",attr:{d:"M0 4.583v14.833h.865V4.583zm1.788 0v14.833h2.653V4.583zm3.518 0v14.832H7.96V4.583zm3.547 0v14.834h.866V4.583zm1.789 0v14.833h.865V4.583zm1.759 0v14.834h2.653V4.583zm3.518 0v14.834h.923V4.583zm1.788 0v14.833h2.653V4.583zm3.64 0v14.834h.865V4.583zm1.788 0v14.834H24V4.583Z"}}]})(t)}function VW(t){return Gt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor",ariaHidden:"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z",clipRule:"evenodd"}}]})(t)}function BW(t){return Gt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor",ariaHidden:"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z",clipRule:"evenodd"}}]})(t)}var Ue={exports:{}},UG="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",VG=UG,BG=VG;function Rx(){}function Cx(){}Cx.resetWarningCache=Rx;var zG=function(){function t(r,i,s,o,a,l){if(l!==BG){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Cx,resetWarningCache:Rx};return n.PropTypes=n,n};Ue.exports=zG();var Um={exports:{}},qs={},Vm={exports:{}},xr={},ah={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var n="none",r="contents",i=/input|select|textarea|button|object|iframe/;function s(f,d){return d.getPropertyValue("overflow")!=="visible"||f.scrollWidth<=0&&f.scrollHeight<=0}function o(f){var d=f.offsetWidth<=0&&f.offsetHeight<=0;if(d&&!f.innerHTML)return!0;try{var g=window.getComputedStyle(f),y=g.getPropertyValue("display");return d?y!==r&&s(f,g):y===n}catch{return console.warn("Failed to inspect element style"),!1}}function a(f){for(var d=f,g=f.getRootNode&&f.getRootNode();d&&d!==document.body;){if(g&&d===g&&(d=g.host.parentNode),o(d))return!1;d=d.parentNode}return!0}function l(f,d){var g=f.nodeName.toLowerCase(),y=i.test(g)&&!f.disabled||g==="a"&&f.href||d;return y&&a(f)}function u(f){var d=f.getAttribute("tabindex");d===null&&(d=void 0);var g=isNaN(d);return(g||d>=0)&&l(f,!g)}function c(f){var d=[].slice.call(f.querySelectorAll("*"),0).reduce(function(g,y){return g.concat(y.shadowRoot?c(y.shadowRoot):[y])},[]);return d.filter(u)}t.exports=e.default})(ah,ah.exports);Object.defineProperty(xr,"__esModule",{value:!0});xr.resetState=HG;xr.log=WG;xr.handleBlur=yu;xr.handleFocus=_u;xr.markForFocusLater=XG;xr.returnFocus=qG;xr.popWithoutFocus=YG;xr.setupScopedFocus=ZG;xr.teardownScopedFocus=KG;var jG=ah.exports,$G=GG(jG);function GG(t){return t&&t.__esModule?t:{default:t}}var ka=[],ta=null,Bm=!1;function HG(){ka=[]}function WG(){}function yu(){Bm=!0}function _u(){if(Bm){if(Bm=!1,!ta)return;setTimeout(function(){if(!ta.contains(document.activeElement)){var t=(0,$G.default)(ta)[0]||ta;t.focus()}},0)}}function XG(){ka.push(document.activeElement)}function qG(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=null;try{ka.length!==0&&(e=ka.pop(),e.focus({preventScroll:t}));return}catch{console.warn(["You tried to return focus to",e,"but it is not in the DOM anymore"].join(" "))}}function YG(){ka.length>0&&ka.pop()}function ZG(t){ta=t,window.addEventListener?(window.addEventListener("blur",yu,!1),document.addEventListener("focus",_u,!0)):(window.attachEvent("onBlur",yu),document.attachEvent("onFocus",_u))}function KG(){ta=null,window.addEventListener?(window.removeEventListener("blur",yu),document.removeEventListener("focus",_u)):(window.detachEvent("onBlur",yu),document.detachEvent("onFocus",_u))}var zm={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=ah.exports,r=i(n);function i(a){return a&&a.__esModule?a:{default:a}}function s(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return a.activeElement.shadowRoot?s(a.activeElement.shadowRoot):a.activeElement}function o(a,l){var u=(0,r.default)(a);if(!u.length){l.preventDefault();return}var c=void 0,f=l.shiftKey,d=u[0],g=u[u.length-1],y=s();if(a===y){if(!f)return;c=g}if(g===y&&!f&&(c=d),d===y&&f&&(c=g),c){l.preventDefault(),c.focus();return}var m=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),x=m!=null&&m[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(!!x){var S=u.indexOf(y);if(S>-1&&(S+=f?-1:1),c=u[S],typeof c>"u"){l.preventDefault(),c=f?g:d,c.focus();return}l.preventDefault(),c.focus()}}t.exports=e.default})(zm,zm.exports);var Rr={},QG=function(){},JG=QG,Tr={},Px={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/(function(t){(function(){var e=!!(typeof window<"u"&&window.document&&window.document.createElement),n={canUseDOM:e,canUseWorkers:typeof Worker<"u",canUseEventListeners:e&&!!(window.addEventListener||window.attachEvent),canUseViewport:e&&!!window.screen};t.exports?t.exports=n:window.ExecutionEnvironment=n})()})(Px);Object.defineProperty(Tr,"__esModule",{value:!0});Tr.canUseDOM=Tr.SafeNodeList=Tr.SafeHTMLCollection=void 0;var eH=Px.exports,tH=nH(eH);function nH(t){return t&&t.__esModule?t:{default:t}}var ld=tH.default,rH=ld.canUseDOM?window.HTMLElement:{};Tr.SafeHTMLCollection=ld.canUseDOM?window.HTMLCollection:{};Tr.SafeNodeList=ld.canUseDOM?window.NodeList:{};Tr.canUseDOM=ld.canUseDOM;Tr.default=rH;Object.defineProperty(Rr,"__esModule",{value:!0});Rr.resetState=lH;Rr.log=uH;Rr.assertNodeList=Mx;Rr.setElement=cH;Rr.validateElement=F0;Rr.hide=fH;Rr.show=hH;Rr.documentNotReadyOrSSRTesting=dH;var iH=JG,sH=aH(iH),oH=Tr;function aH(t){return t&&t.__esModule?t:{default:t}}var Yn=null;function lH(){Yn&&(Yn.removeAttribute?Yn.removeAttribute("aria-hidden"):Yn.length!=null?Yn.forEach(function(t){return t.removeAttribute("aria-hidden")}):document.querySelectorAll(Yn).forEach(function(t){return t.removeAttribute("aria-hidden")})),Yn=null}function uH(){}function Mx(t,e){if(!t||!t.length)throw new Error("react-modal: No elements were found for selector "+e+".")}function cH(t){var e=t;if(typeof e=="string"&&oH.canUseDOM){var n=document.querySelectorAll(e);Mx(n,e),e=n}return Yn=e||Yn,Yn}function F0(t){var e=t||Yn;return e?Array.isArray(e)||e instanceof HTMLCollection||e instanceof NodeList?e:[e]:((0,sH.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function fH(t){var e=!0,n=!1,r=void 0;try{for(var i=F0(t)[Symbol.iterator](),s;!(e=(s=i.next()).done);e=!0){var o=s.value;o.setAttribute("aria-hidden","true")}}catch(a){n=!0,r=a}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}}function hH(t){var e=!0,n=!1,r=void 0;try{for(var i=F0(t)[Symbol.iterator](),s;!(e=(s=i.next()).done);e=!0){var o=s.value;o.removeAttribute("aria-hidden")}}catch(a){n=!0,r=a}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}}function dH(){Yn=null}var $a={};Object.defineProperty($a,"__esModule",{value:!0});$a.resetState=pH;$a.log=gH;var Xl={},ql={};function Cw(t,e){t.classList.remove(e)}function pH(){var t=document.getElementsByTagName("html")[0];for(var e in Xl)Cw(t,Xl[e]);var n=document.body;for(var r in ql)Cw(n,ql[r]);Xl={},ql={}}function gH(){}var mH=function(e,n){return e[n]||(e[n]=0),e[n]+=1,n},vH=function(e,n){return e[n]&&(e[n]-=1),n},yH=function(e,n,r){r.forEach(function(i){mH(n,i),e.add(i)})},_H=function(e,n,r){r.forEach(function(i){vH(n,i),n[i]===0&&e.remove(i)})};$a.add=function(e,n){return yH(e.classList,e.nodeName.toLowerCase()=="html"?Xl:ql,n.split(" "))};$a.remove=function(e,n){return _H(e.classList,e.nodeName.toLowerCase()=="html"?Xl:ql,n.split(" "))};var Ga={};Object.defineProperty(Ga,"__esModule",{value:!0});Ga.log=wH;Ga.resetState=EH;function bH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Lx=function t(){var e=this;bH(this,t),this.register=function(n){e.openInstances.indexOf(n)===-1&&(e.openInstances.push(n),e.emit("register"))},this.deregister=function(n){var r=e.openInstances.indexOf(n);r!==-1&&(e.openInstances.splice(r,1),e.emit("deregister"))},this.subscribe=function(n){e.subscribers.push(n)},this.emit=function(n){e.subscribers.forEach(function(r){return r(n,e.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},lh=new Lx;function wH(){console.log("portalOpenInstances ----------"),console.log(lh.openInstances.length),lh.openInstances.forEach(function(t){return console.log(t)}),console.log("end portalOpenInstances ----------")}function EH(){lh=new Lx}Ga.default=lh;var U0={};Object.defineProperty(U0,"__esModule",{value:!0});U0.resetState=xH;U0.log=RH;var SH=Ga,TH=AH(SH);function AH(t){return t&&t.__esModule?t:{default:t}}var sn=void 0,mr=void 0,Us=[];function xH(){for(var t=[sn,mr],e=0;e<t.length;e++){var n=t[e];!n||n.parentNode&&n.parentNode.removeChild(n)}sn=mr=null,Us=[]}function RH(){console.log("bodyTrap ----------"),console.log(Us.length);for(var t=[sn,mr],e=0;e<t.length;e++){var n=t[e],r=n||{};console.log(r.nodeName,r.className,r.id)}console.log("edn bodyTrap ----------")}function Pw(){Us.length!==0&&Us[Us.length-1].focusContent()}function CH(t,e){!sn&&!mr&&(sn=document.createElement("div"),sn.setAttribute("data-react-modal-body-trap",""),sn.style.position="absolute",sn.style.opacity="0",sn.setAttribute("tabindex","0"),sn.addEventListener("focus",Pw),mr=sn.cloneNode(),mr.addEventListener("focus",Pw)),Us=e,Us.length>0?(document.body.firstChild!==sn&&document.body.insertBefore(sn,document.body.firstChild),document.body.lastChild!==mr&&document.body.appendChild(mr)):(sn.parentElement&&sn.parentElement.removeChild(sn),mr.parentElement&&mr.parentElement.removeChild(mr))}TH.default.subscribe(CH);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(ee){for(var _e=1;_e<arguments.length;_e++){var Be=arguments[_e];for(var j in Be)Object.prototype.hasOwnProperty.call(Be,j)&&(ee[j]=Be[j])}return ee},r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},i=function(){function ee(_e,Be){for(var j=0;j<Be.length;j++){var $=Be[j];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(_e,$.key,$)}}return function(_e,Be,j){return Be&&ee(_e.prototype,Be),j&&ee(_e,j),_e}}(),s=W.exports,o=Ue.exports,a=L(o),l=xr,u=R(l),c=zm.exports,f=L(c),d=Rr,g=R(d),y=$a,m=R(y),x=Tr,S=L(x),v=Ga,w=L(v);function R(ee){if(ee&&ee.__esModule)return ee;var _e={};if(ee!=null)for(var Be in ee)Object.prototype.hasOwnProperty.call(ee,Be)&&(_e[Be]=ee[Be]);return _e.default=ee,_e}function L(ee){return ee&&ee.__esModule?ee:{default:ee}}function C(ee,_e){if(!(ee instanceof _e))throw new TypeError("Cannot call a class as a function")}function U(ee,_e){if(!ee)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e&&(typeof _e=="object"||typeof _e=="function")?_e:ee}function N(ee,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _e);ee.prototype=Object.create(_e&&_e.prototype,{constructor:{value:ee,enumerable:!1,writable:!0,configurable:!0}}),_e&&(Object.setPrototypeOf?Object.setPrototypeOf(ee,_e):ee.__proto__=_e)}var H={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},G=function(_e){return _e.code==="Tab"||_e.keyCode===9},ie=function(_e){return _e.code==="Escape"||_e.keyCode===27},Ce=0,Ee=function(ee){N(_e,ee);function _e(Be){C(this,_e);var j=U(this,(_e.__proto__||Object.getPrototypeOf(_e)).call(this,Be));return j.setOverlayRef=function($){j.overlay=$,j.props.overlayRef&&j.props.overlayRef($)},j.setContentRef=function($){j.content=$,j.props.contentRef&&j.props.contentRef($)},j.afterClose=function(){var $=j.props,ae=$.appElement,re=$.ariaHideApp,oe=$.htmlOpenClassName,I=$.bodyOpenClassName,K=$.parentSelector,Q=K&&K().ownerDocument||document;I&&m.remove(Q.body,I),oe&&m.remove(Q.getElementsByTagName("html")[0],oe),re&&Ce>0&&(Ce-=1,Ce===0&&g.show(ae)),j.props.shouldFocusAfterRender&&(j.props.shouldReturnFocusAfterClose?(u.returnFocus(j.props.preventScroll),u.teardownScopedFocus()):u.popWithoutFocus()),j.props.onAfterClose&&j.props.onAfterClose(),w.default.deregister(j)},j.open=function(){j.beforeOpen(),j.state.afterOpen&&j.state.beforeClose?(clearTimeout(j.closeTimer),j.setState({beforeClose:!1})):(j.props.shouldFocusAfterRender&&(u.setupScopedFocus(j.node),u.markForFocusLater()),j.setState({isOpen:!0},function(){j.openAnimationFrame=requestAnimationFrame(function(){j.setState({afterOpen:!0}),j.props.isOpen&&j.props.onAfterOpen&&j.props.onAfterOpen({overlayEl:j.overlay,contentEl:j.content})})}))},j.close=function(){j.props.closeTimeoutMS>0?j.closeWithTimeout():j.closeWithoutTimeout()},j.focusContent=function(){return j.content&&!j.contentHasFocus()&&j.content.focus({preventScroll:!0})},j.closeWithTimeout=function(){var $=Date.now()+j.props.closeTimeoutMS;j.setState({beforeClose:!0,closesAt:$},function(){j.closeTimer=setTimeout(j.closeWithoutTimeout,j.state.closesAt-Date.now())})},j.closeWithoutTimeout=function(){j.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},j.afterClose)},j.handleKeyDown=function($){G($)&&(0,f.default)(j.content,$),j.props.shouldCloseOnEsc&&ie($)&&($.stopPropagation(),j.requestClose($))},j.handleOverlayOnClick=function($){j.shouldClose===null&&(j.shouldClose=!0),j.shouldClose&&j.props.shouldCloseOnOverlayClick&&(j.ownerHandlesClose()?j.requestClose($):j.focusContent()),j.shouldClose=null},j.handleContentOnMouseUp=function(){j.shouldClose=!1},j.handleOverlayOnMouseDown=function($){!j.props.shouldCloseOnOverlayClick&&$.target==j.overlay&&$.preventDefault()},j.handleContentOnClick=function(){j.shouldClose=!1},j.handleContentOnMouseDown=function(){j.shouldClose=!1},j.requestClose=function($){return j.ownerHandlesClose()&&j.props.onRequestClose($)},j.ownerHandlesClose=function(){return j.props.onRequestClose},j.shouldBeClosed=function(){return!j.state.isOpen&&!j.state.beforeClose},j.contentHasFocus=function(){return document.activeElement===j.content||j.content.contains(document.activeElement)},j.buildClassName=function($,ae){var re=(typeof ae>"u"?"undefined":r(ae))==="object"?ae:{base:H[$],afterOpen:H[$]+"--after-open",beforeClose:H[$]+"--before-close"},oe=re.base;return j.state.afterOpen&&(oe=oe+" "+re.afterOpen),j.state.beforeClose&&(oe=oe+" "+re.beforeClose),typeof ae=="string"&&ae?oe+" "+ae:oe},j.attributesFromObject=function($,ae){return Object.keys(ae).reduce(function(re,oe){return re[$+"-"+oe]=ae[oe],re},{})},j.state={afterOpen:!1,beforeClose:!1},j.shouldClose=null,j.moveFromContentToOverlay=null,j}return i(_e,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(j,$){this.props.isOpen&&!j.isOpen?this.open():!this.props.isOpen&&j.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!$.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var j=this.props,$=j.appElement,ae=j.ariaHideApp,re=j.htmlOpenClassName,oe=j.bodyOpenClassName,I=j.parentSelector,K=I&&I().ownerDocument||document;oe&&m.add(K.body,oe),re&&m.add(K.getElementsByTagName("html")[0],re),ae&&(Ce+=1,g.hide($)),w.default.register(this)}},{key:"render",value:function(){var j=this.props,$=j.id,ae=j.className,re=j.overlayClassName,oe=j.defaultStyles,I=j.children,K=ae?{}:oe.content,Q=re?{}:oe.overlay;if(this.shouldBeClosed())return null;var be={ref:this.setOverlayRef,className:this.buildClassName("overlay",re),style:n({},Q,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},ue=n({id:$,ref:this.setContentRef,style:n({},K,this.props.style.content),className:this.buildClassName("content",ae),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",n({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),de=this.props.contentElement(ue,I);return this.props.overlayElement(be,de)}}]),_e}(s.Component);Ee.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},Ee.propTypes={isOpen:a.default.bool.isRequired,defaultStyles:a.default.shape({content:a.default.object,overlay:a.default.object}),style:a.default.shape({content:a.default.object,overlay:a.default.object}),className:a.default.oneOfType([a.default.string,a.default.object]),overlayClassName:a.default.oneOfType([a.default.string,a.default.object]),parentSelector:a.default.func,bodyOpenClassName:a.default.string,htmlOpenClassName:a.default.string,ariaHideApp:a.default.bool,appElement:a.default.oneOfType([a.default.instanceOf(S.default),a.default.instanceOf(x.SafeHTMLCollection),a.default.instanceOf(x.SafeNodeList),a.default.arrayOf(a.default.instanceOf(S.default))]),onAfterOpen:a.default.func,onAfterClose:a.default.func,onRequestClose:a.default.func,closeTimeoutMS:a.default.number,shouldFocusAfterRender:a.default.bool,shouldCloseOnOverlayClick:a.default.bool,shouldReturnFocusAfterClose:a.default.bool,preventScroll:a.default.bool,role:a.default.string,contentLabel:a.default.string,aria:a.default.object,data:a.default.object,children:a.default.node,shouldCloseOnEsc:a.default.bool,overlayRef:a.default.func,contentRef:a.default.func,id:a.default.string,overlayElement:a.default.func,contentElement:a.default.func,testId:a.default.string},e.default=Ee,t.exports=e.default})(Vm,Vm.exports);function kx(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);t!=null&&this.setState(t)}function Ox(t){function e(n){var r=this.constructor.getDerivedStateFromProps(t,n);return r!=null?r:null}this.setState(e.bind(this))}function Ix(t,e){try{var n=this.props,r=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}kx.__suppressDeprecationWarning=!0;Ox.__suppressDeprecationWarning=!0;Ix.__suppressDeprecationWarning=!0;function PH(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return t;var n=null,r=null,i=null;if(typeof e.componentWillMount=="function"?n="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(n="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?r="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(r="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?i="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),n!==null||r!==null||i!==null){var s=t.displayName||t.name,o=typeof t.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+s+" uses "+o+" but also contains the following legacy lifecycles:"+(n!==null?`
  `+n:"")+(r!==null?`
  `+r:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof t.getDerivedStateFromProps=="function"&&(e.componentWillMount=kx,e.componentWillReceiveProps=Ox),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=Ix;var a=e.componentDidUpdate;e.componentDidUpdate=function(u,c,f){var d=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:f;a.call(this,u,c,d)}}return t}const MH=Object.freeze(Object.defineProperty({__proto__:null,polyfill:PH},Symbol.toStringTag,{value:"Module"})),LH=VP(MH);Object.defineProperty(qs,"__esModule",{value:!0});qs.bodyOpenClassName=qs.portalClassName=void 0;var Mw=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kH=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Nx=W.exports,uh=$u(Nx),OH=Ia.exports,ch=$u(OH),IH=Ue.exports,Pe=$u(IH),NH=Vm.exports,Lw=$u(NH),DH=Rr,FH=VH(DH),zi=Tr,kw=$u(zi),UH=LH;function VH(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function $u(t){return t&&t.__esModule?t:{default:t}}function BH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ow(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function zH(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var jH=qs.portalClassName="ReactModalPortal",$H=qs.bodyOpenClassName="ReactModal__Body--open",Cs=zi.canUseDOM&&ch.default.createPortal!==void 0,Iw=function(e){return document.createElement(e)},Nw=function(){return Cs?ch.default.createPortal:ch.default.unstable_renderSubtreeIntoContainer};function Bc(t){return t()}var Gu=function(t){zH(e,t);function e(){var n,r,i,s;BH(this,e);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return s=(r=(i=Ow(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(a))),i),i.removePortal=function(){!Cs&&ch.default.unmountComponentAtNode(i.node);var u=Bc(i.props.parentSelector);u&&u.contains(i.node)?u.removeChild(i.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},i.portalRef=function(u){i.portal=u},i.renderPortal=function(u){var c=Nw(),f=c(i,uh.default.createElement(Lw.default,Mw({defaultStyles:e.defaultStyles},u)),i.node);i.portalRef(f)},r),Ow(i,s)}return kH(e,[{key:"componentDidMount",value:function(){if(!!zi.canUseDOM){Cs||(this.node=Iw("div")),this.node.className=this.props.portalClassName;var r=Bc(this.props.parentSelector);r.appendChild(this.node),!Cs&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(r){var i=Bc(r.parentSelector),s=Bc(this.props.parentSelector);return{prevParent:i,nextParent:s}}},{key:"componentDidUpdate",value:function(r,i,s){if(!!zi.canUseDOM){var o=this.props,a=o.isOpen,l=o.portalClassName;r.portalClassName!==l&&(this.node.className=l);var u=s.prevParent,c=s.nextParent;c!==u&&(u.removeChild(this.node),c.appendChild(this.node)),!(!r.isOpen&&!a)&&!Cs&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!zi.canUseDOM||!this.node||!this.portal)){var r=this.portal.state,i=Date.now(),s=r.isOpen&&this.props.closeTimeoutMS&&(r.closesAt||i+this.props.closeTimeoutMS);s?(r.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,s-i)):this.removePortal()}}},{key:"render",value:function(){if(!zi.canUseDOM||!Cs)return null;!this.node&&Cs&&(this.node=Iw("div"));var r=Nw();return r(uh.default.createElement(Lw.default,Mw({ref:this.portalRef,defaultStyles:e.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(r){FH.setElement(r)}}]),e}(Nx.Component);Gu.propTypes={isOpen:Pe.default.bool.isRequired,style:Pe.default.shape({content:Pe.default.object,overlay:Pe.default.object}),portalClassName:Pe.default.string,bodyOpenClassName:Pe.default.string,htmlOpenClassName:Pe.default.string,className:Pe.default.oneOfType([Pe.default.string,Pe.default.shape({base:Pe.default.string.isRequired,afterOpen:Pe.default.string.isRequired,beforeClose:Pe.default.string.isRequired})]),overlayClassName:Pe.default.oneOfType([Pe.default.string,Pe.default.shape({base:Pe.default.string.isRequired,afterOpen:Pe.default.string.isRequired,beforeClose:Pe.default.string.isRequired})]),appElement:Pe.default.oneOfType([Pe.default.instanceOf(kw.default),Pe.default.instanceOf(zi.SafeHTMLCollection),Pe.default.instanceOf(zi.SafeNodeList),Pe.default.arrayOf(Pe.default.instanceOf(kw.default))]),onAfterOpen:Pe.default.func,onRequestClose:Pe.default.func,closeTimeoutMS:Pe.default.number,ariaHideApp:Pe.default.bool,shouldFocusAfterRender:Pe.default.bool,shouldCloseOnOverlayClick:Pe.default.bool,shouldReturnFocusAfterClose:Pe.default.bool,preventScroll:Pe.default.bool,parentSelector:Pe.default.func,aria:Pe.default.object,data:Pe.default.object,role:Pe.default.string,contentLabel:Pe.default.string,shouldCloseOnEsc:Pe.default.bool,overlayRef:Pe.default.func,contentRef:Pe.default.func,id:Pe.default.string,overlayElement:Pe.default.func,contentElement:Pe.default.func};Gu.defaultProps={isOpen:!1,portalClassName:jH,bodyOpenClassName:$H,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,n){return uh.default.createElement("div",e,n)},contentElement:function(e,n){return uh.default.createElement("div",e,n)}};Gu.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,UH.polyfill)(Gu);qs.default=Gu;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=qs,r=i(n);function i(s){return s&&s.__esModule?s:{default:s}}e.default=r.default,t.exports=e.default})(Um,Um.exports);const GH=Hm(Um.exports);function Dw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dw(Object(n),!0).forEach(function(r){jm(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dw(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function WH(t,e,n){return e&&Fw(t.prototype,e),n&&Fw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function jm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XH(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$m(t,e)}function fh(t){return fh=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},fh(t)}function $m(t,e){return $m=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},$m(t,e)}function qH(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Lt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YH(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lt(t)}function ZH(t){var e=qH();return function(){var r=fh(t),i;if(e){var s=fh(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return YH(this,i)}}function Uw(t,e){return QH(t)||eW(t,e)||Dx(t,e)||nW()}function tg(t){return KH(t)||JH(t)||Dx(t)||tW()}function KH(t){if(Array.isArray(t))return Gm(t)}function QH(t){if(Array.isArray(t))return t}function JH(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function eW(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function Dx(t,e){if(!!t){if(typeof t=="string")return Gm(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gm(t,e)}}function Gm(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function tW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vw(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!t)return"";var n=t;return e&&Object.keys(e).forEach(function(r){n=n.replace(r,e[r])}),n}function Bw(){return typeof global.window<"u"?global.window.innerWidth:0}function rW(){return typeof global.window<"u"?global.window.innerHeight:0}var iW=function(){try{return global.window.location.hostname!==global.window.parent.location.hostname}catch{return!0}};function Fx(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:global.window.self;return t===global.window.top||iW()?t:Fx(t.parent)}var Xn=0,bl=300,sW=1.007,ng=100,oW=200,aW=1,zc={ESC:27,LEFT_ARROW:37,RIGHT_ARROW:39},wl=0,rg=1,ig=2,jc=3,sg=0,Do=1,Fo=2,$c=3,lW=200,Ux=function(t){XH(n,t);var e=ZH(n);function n(r){var i;return HH(this,n),i=e.call(this,r),i.state={isClosing:!r.animationDisabled,shouldAnimate:!1,zoomLevel:Xn,offsetX:0,offsetY:0,loadErrorStatus:{}},i.outerEl=qe.createRef(),i.zoomInBtn=qe.createRef(),i.zoomOutBtn=qe.createRef(),i.caption=qe.createRef(),i.closeIfClickInner=i.closeIfClickInner.bind(Lt(i)),i.handleImageDoubleClick=i.handleImageDoubleClick.bind(Lt(i)),i.handleImageMouseWheel=i.handleImageMouseWheel.bind(Lt(i)),i.handleKeyInput=i.handleKeyInput.bind(Lt(i)),i.handleMouseUp=i.handleMouseUp.bind(Lt(i)),i.handleMouseDown=i.handleMouseDown.bind(Lt(i)),i.handleMouseMove=i.handleMouseMove.bind(Lt(i)),i.handleOuterMousewheel=i.handleOuterMousewheel.bind(Lt(i)),i.handleTouchStart=i.handleTouchStart.bind(Lt(i)),i.handleTouchMove=i.handleTouchMove.bind(Lt(i)),i.handleTouchEnd=i.handleTouchEnd.bind(Lt(i)),i.handlePointerEvent=i.handlePointerEvent.bind(Lt(i)),i.handleCaptionMousewheel=i.handleCaptionMousewheel.bind(Lt(i)),i.handleWindowResize=i.handleWindowResize.bind(Lt(i)),i.handleZoomInButtonClick=i.handleZoomInButtonClick.bind(Lt(i)),i.handleZoomOutButtonClick=i.handleZoomOutButtonClick.bind(Lt(i)),i.requestClose=i.requestClose.bind(Lt(i)),i.requestMoveNext=i.requestMoveNext.bind(Lt(i)),i.requestMovePrev=i.requestMovePrev.bind(Lt(i)),i.timeouts=[],i.currentAction=wl,i.eventsSource=sg,i.pointerList=[],i.preventInnerClose=!1,i.preventInnerCloseTimeout=null,i.keyPressed=!1,i.imageCache={},i.lastKeyDownTime=0,i.resizeTimeout=null,i.wheelActionTimeout=null,i.resetScrollTimeout=null,i.scrollX=0,i.scrollY=0,i.moveStartX=0,i.moveStartY=0,i.moveStartOffsetX=0,i.moveStartOffsetY=0,i.swipeStartX=0,i.swipeStartY=0,i.swipeEndX=0,i.swipeEndY=0,i.pinchTouchList=null,i.pinchDistance=0,i.keyCounter=0,i.moveRequested=!1,i}return WH(n,[{key:"componentDidMount",value:function(){var i=this;this.props.animationDisabled||this.setState({isClosing:!1}),this.windowContext=Fx(),this.listeners={resize:this.handleWindowResize,mouseup:this.handleMouseUp,touchend:this.handleTouchEnd,touchcancel:this.handleTouchEnd,pointerdown:this.handlePointerEvent,pointermove:this.handlePointerEvent,pointerup:this.handlePointerEvent,pointercancel:this.handlePointerEvent},Object.keys(this.listeners).forEach(function(s){i.windowContext.addEventListener(s,i.listeners[s])}),this.loadAllImages()}},{key:"shouldComponentUpdate",value:function(i){var s=this;return this.getSrcTypes().forEach(function(o){s.props[o.name]!==i[o.name]&&(s.moveRequested=!1)}),!this.moveRequested}},{key:"componentDidUpdate",value:function(i){var s=this,o=!1,a={},l={};this.getSrcTypes().forEach(function(u){i[u.name]!==s.props[u.name]&&(o=!0,a[i[u.name]]=!0,l[s.props[u.name]]=!0)}),(o||this.moveRequested)&&(Object.keys(a).forEach(function(u){!(u in l)&&u in s.imageCache&&(s.imageCache[u].loaded=!1)}),this.moveRequested=!1,this.loadAllImages(this.props))}},{key:"componentWillUnmount",value:function(){var i=this;this.didUnmount=!0,Object.keys(this.listeners).forEach(function(s){i.windowContext.removeEventListener(s,i.listeners[s])}),this.timeouts.forEach(function(s){return clearTimeout(s)})}},{key:"setTimeout",value:function(r){function i(s,o){return r.apply(this,arguments)}return i.toString=function(){return r.toString()},i}(function(r,i){var s=this,o=setTimeout(function(){s.timeouts=s.timeouts.filter(function(a){return a!==o}),r()},i);return this.timeouts.push(o),o})},{key:"setPreventInnerClose",value:function(){var i=this;this.preventInnerCloseTimeout&&this.clearTimeout(this.preventInnerCloseTimeout),this.preventInnerClose=!0,this.preventInnerCloseTimeout=this.setTimeout(function(){i.preventInnerClose=!1,i.preventInnerCloseTimeout=null},100)}},{key:"getBestImageForType",value:function(i){var s=this.props[i],o={};if(this.isImageLoaded(s))o=this.getFitSizes(this.imageCache[s].width,this.imageCache[s].height);else if(this.isImageLoaded(this.props["".concat(i,"Thumbnail")]))s=this.props["".concat(i,"Thumbnail")],o=this.getFitSizes(this.imageCache[s].width,this.imageCache[s].height,!0);else return null;return{src:s,height:this.imageCache[s].height,width:this.imageCache[s].width,targetHeight:o.height,targetWidth:o.width}}},{key:"getFitSizes",value:function(i,s,o){var a=this.getLightboxRect(),l=a.height-this.props.imagePadding*2,u=a.width-this.props.imagePadding*2;o||(l=Math.min(l,s),u=Math.min(u,i));var c=u/l,f=i/s;return c>f?{width:i*l/s,height:l}:{width:u,height:s*u/i}}},{key:"getMaxOffsets",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.state.zoomLevel,s=this.getBestImageForType("mainSrc");if(s===null)return{maxX:0,minX:0,maxY:0,minY:0};var o=this.getLightboxRect(),a=this.getZoomMultiplier(i),l=0;a*s.width-o.width<0?l=(o.width-a*s.width)/2:l=(a*s.width-o.width)/2;var u=0;return a*s.height-o.height<0?u=(o.height-a*s.height)/2:u=(a*s.height-o.height)/2,{maxX:l,maxY:u,minX:-1*l,minY:-1*u}}},{key:"getSrcTypes",value:function(){return[{name:"mainSrc",keyEnding:"i".concat(this.keyCounter)},{name:"mainSrcThumbnail",keyEnding:"t".concat(this.keyCounter)},{name:"nextSrc",keyEnding:"i".concat(this.keyCounter+1)},{name:"nextSrcThumbnail",keyEnding:"t".concat(this.keyCounter+1)},{name:"prevSrc",keyEnding:"i".concat(this.keyCounter-1)},{name:"prevSrcThumbnail",keyEnding:"t".concat(this.keyCounter-1)}]}},{key:"getZoomMultiplier",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.state.zoomLevel;return Math.pow(sW,i)}},{key:"getLightboxRect",value:function(){return this.outerEl.current?this.outerEl.current.getBoundingClientRect():{width:Bw(),height:rW(),top:0,right:0,bottom:0,left:0}}},{key:"clearTimeout",value:function(r){function i(s){return r.apply(this,arguments)}return i.toString=function(){return r.toString()},i}(function(r){this.timeouts=this.timeouts.filter(function(i){return i!==r}),clearTimeout(r)})},{key:"changeZoom",value:function(i,s,o){if(!!this.props.enableZoom){var a=Math.max(Xn,Math.min(bl,i));if(a!==this.state.zoomLevel){if(a===Xn){this.setState({zoomLevel:a,offsetX:0,offsetY:0});return}var l=this.getBestImageForType("mainSrc");if(l!==null){var u=this.getZoomMultiplier(),c=this.getZoomMultiplier(a),f=this.getLightboxRect(),d=typeof s<"u"?s-f.left:f.width/2,g=typeof o<"u"?o-f.top:f.height/2,y=(f.width-l.width*u)/2,m=(f.height-l.height*u)/2,x=y-this.state.offsetX,S=m-this.state.offsetY,v=(d-x)/u,w=(g-S)/u,R=d-v*c,L=g-w*c,C=(f.width-l.width*c)/2,U=(f.height-l.height*c)/2,N=C-R,H=U-L;if(this.currentAction!==jc){var G=this.getMaxOffsets();this.state.zoomLevel>a&&(N=Math.max(G.minX,Math.min(G.maxX,N)),H=Math.max(G.minY,Math.min(G.maxY,H)))}this.setState({zoomLevel:a,offsetX:N,offsetY:H})}}}}},{key:"closeIfClickInner",value:function(i){!this.preventInnerClose&&i.target.className.search(/\bril-inner\b/)>-1&&this.requestClose(i)}},{key:"handleKeyInput",value:function(i){if(i.stopPropagation(),!this.isAnimating()){if(i.type==="keyup"){this.lastKeyDownTime-=this.props.keyRepeatKeyupBonus;return}var s=i.which||i.keyCode,o=new Date;if(!(o.getTime()-this.lastKeyDownTime<this.props.keyRepeatLimit&&s!==zc.ESC))switch(this.lastKeyDownTime=o.getTime(),s){case zc.ESC:i.preventDefault(),this.requestClose(i);break;case zc.LEFT_ARROW:if(!this.props.prevSrc)return;i.preventDefault(),this.keyPressed=!0,this.requestMovePrev(i);break;case zc.RIGHT_ARROW:if(!this.props.nextSrc)return;i.preventDefault(),this.keyPressed=!0,this.requestMoveNext(i);break}}}},{key:"handleOuterMousewheel",value:function(i){var s=this;i.stopPropagation();var o=oW,a=0,l=500;if(this.clearTimeout(this.resetScrollTimeout),this.resetScrollTimeout=this.setTimeout(function(){s.scrollX=0,s.scrollY=0},300),!(this.wheelActionTimeout!==null||this.isAnimating())){if(Math.abs(i.deltaY)<Math.abs(i.deltaX)){this.scrollY=0,this.scrollX+=i.deltaX;var u=o/2;this.scrollX>=o||i.deltaX>=u?(this.requestMoveNext(i),a=l,this.scrollX=0):(this.scrollX<=-1*o||i.deltaX<=-1*u)&&(this.requestMovePrev(i),a=l,this.scrollX=0)}a!==0&&(this.wheelActionTimeout=this.setTimeout(function(){s.wheelActionTimeout=null},a))}}},{key:"handleImageMouseWheel",value:function(i){var s=aW;if(Math.abs(i.deltaY)>=Math.abs(i.deltaX)){if(i.stopPropagation(),Math.abs(i.deltaY)<s)return;this.scrollX=0,this.scrollY+=i.deltaY,this.changeZoom(this.state.zoomLevel-i.deltaY,i.clientX,i.clientY)}}},{key:"handleImageDoubleClick",value:function(i){this.state.zoomLevel>Xn?this.changeZoom(Xn,i.clientX,i.clientY):this.changeZoom(this.state.zoomLevel+ng,i.clientX,i.clientY)}},{key:"shouldHandleEvent",value:function(i){if(this.eventsSource===i)return!0;if(this.eventsSource===sg)return this.eventsSource=i,!0;switch(i){case Do:return!1;case Fo:return this.eventsSource=Fo,this.filterPointersBySource(),!0;case $c:return this.eventsSource===Do?(this.eventsSource=$c,this.filterPointersBySource(),!0):!1;default:return!1}}},{key:"addPointer",value:function(i){this.pointerList.push(i)}},{key:"removePointer",value:function(i){this.pointerList=this.pointerList.filter(function(s){var o=s.id;return o!==i.id})}},{key:"filterPointersBySource",value:function(){var i=this;this.pointerList=this.pointerList.filter(function(s){var o=s.source;return o===i.eventsSource})}},{key:"handleMouseDown",value:function(i){this.shouldHandleEvent(Do)&&n.isTargetMatchImage(i.target)&&(this.addPointer(n.parseMouseEvent(i)),this.multiPointerStart(i))}},{key:"handleMouseMove",value:function(i){this.shouldHandleEvent(Do)&&this.multiPointerMove(i,[n.parseMouseEvent(i)])}},{key:"handleMouseUp",value:function(i){this.shouldHandleEvent(Do)&&(this.removePointer(n.parseMouseEvent(i)),this.multiPointerEnd(i))}},{key:"handlePointerEvent",value:function(i){if(this.shouldHandleEvent($c))switch(i.type){case"pointerdown":n.isTargetMatchImage(i.target)&&(this.addPointer(n.parsePointerEvent(i)),this.multiPointerStart(i));break;case"pointermove":this.multiPointerMove(i,[n.parsePointerEvent(i)]);break;case"pointerup":case"pointercancel":this.removePointer(n.parsePointerEvent(i)),this.multiPointerEnd(i);break}}},{key:"handleTouchStart",value:function(i){var s=this;this.shouldHandleEvent(Fo)&&n.isTargetMatchImage(i.target)&&([].forEach.call(i.changedTouches,function(o){return s.addPointer(n.parseTouchPointer(o))}),this.multiPointerStart(i))}},{key:"handleTouchMove",value:function(i){this.shouldHandleEvent(Fo)&&this.multiPointerMove(i,[].map.call(i.changedTouches,function(s){return n.parseTouchPointer(s)}))}},{key:"handleTouchEnd",value:function(i){var s=this;this.shouldHandleEvent(Fo)&&([].map.call(i.changedTouches,function(o){return s.removePointer(n.parseTouchPointer(o))}),this.multiPointerEnd(i))}},{key:"decideMoveOrSwipe",value:function(i){this.state.zoomLevel<=Xn?this.handleSwipeStart(i):this.handleMoveStart(i)}},{key:"multiPointerStart",value:function(i){switch(this.handleEnd(null),this.pointerList.length){case 1:{i.preventDefault(),this.decideMoveOrSwipe(this.pointerList[0]);break}case 2:{i.preventDefault(),this.handlePinchStart(this.pointerList);break}}}},{key:"multiPointerMove",value:function(i,s){switch(this.currentAction){case rg:{i.preventDefault(),this.handleMove(s[0]);break}case ig:{i.preventDefault(),this.handleSwipe(s[0]);break}case jc:{i.preventDefault(),this.handlePinch(s);break}}}},{key:"multiPointerEnd",value:function(i){switch(this.currentAction!==wl&&(this.setPreventInnerClose(),this.handleEnd(i)),this.pointerList.length){case 0:{this.eventsSource=sg;break}case 1:{i.preventDefault(),this.decideMoveOrSwipe(this.pointerList[0]);break}case 2:{i.preventDefault(),this.handlePinchStart(this.pointerList);break}}}},{key:"handleEnd",value:function(i){switch(this.currentAction){case rg:this.handleMoveEnd(i);break;case ig:this.handleSwipeEnd(i);break;case jc:this.handlePinchEnd(i);break}}},{key:"handleMoveStart",value:function(i){var s=i.x,o=i.y;!this.props.enableZoom||(this.currentAction=rg,this.moveStartX=s,this.moveStartY=o,this.moveStartOffsetX=this.state.offsetX,this.moveStartOffsetY=this.state.offsetY)}},{key:"handleMove",value:function(i){var s=i.x,o=i.y,a=this.moveStartX-s+this.moveStartOffsetX,l=this.moveStartY-o+this.moveStartOffsetY;(this.state.offsetX!==a||this.state.offsetY!==l)&&this.setState({offsetX:a,offsetY:l})}},{key:"handleMoveEnd",value:function(){var i=this;this.currentAction=wl,this.moveStartX=0,this.moveStartY=0,this.moveStartOffsetX=0,this.moveStartOffsetY=0;var s=this.getMaxOffsets(),o=Math.max(s.minX,Math.min(s.maxX,this.state.offsetX)),a=Math.max(s.minY,Math.min(s.maxY,this.state.offsetY));(o!==this.state.offsetX||a!==this.state.offsetY)&&(this.setState({offsetX:o,offsetY:a,shouldAnimate:!0}),this.setTimeout(function(){i.setState({shouldAnimate:!1})},this.props.animationDuration))}},{key:"handleSwipeStart",value:function(i){var s=i.x,o=i.y;this.currentAction=ig,this.swipeStartX=s,this.swipeStartY=o,this.swipeEndX=s,this.swipeEndY=o}},{key:"handleSwipe",value:function(i){var s=i.x,o=i.y;this.swipeEndX=s,this.swipeEndY=o}},{key:"handleSwipeEnd",value:function(i){var s=this.swipeEndX-this.swipeStartX,o=Math.abs(s),a=Math.abs(this.swipeEndY-this.swipeStartY);if(this.currentAction=wl,this.swipeStartX=0,this.swipeStartY=0,this.swipeEndX=0,this.swipeEndY=0,!(!i||this.isAnimating()||o<a*1.5)){if(o<lW){var l=this.getLightboxRect();if(o<l.width/4)return}s>0&&this.props.prevSrc?(i.preventDefault(),this.requestMovePrev()):s<0&&this.props.nextSrc&&(i.preventDefault(),this.requestMoveNext())}}},{key:"calculatePinchDistance",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pinchTouchList,s=Uw(i,2),o=s[0],a=s[1];return Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2))}},{key:"calculatePinchCenter",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pinchTouchList,s=Uw(i,2),o=s[0],a=s[1];return{x:o.x-(o.x-a.x)/2,y:o.y-(o.y-a.y)/2}}},{key:"handlePinchStart",value:function(i){!this.props.enableZoom||(this.currentAction=jc,this.pinchTouchList=i.map(function(s){var o=s.id,a=s.x,l=s.y;return{id:o,x:a,y:l}}),this.pinchDistance=this.calculatePinchDistance())}},{key:"handlePinch",value:function(i){this.pinchTouchList=this.pinchTouchList.map(function(c){for(var f=0;f<i.length;f+=1)if(i[f].id===c.id)return i[f];return c});var s=this.calculatePinchDistance(),o=this.state.zoomLevel+s-this.pinchDistance;this.pinchDistance=s;var a=this.calculatePinchCenter(this.pinchTouchList),l=a.x,u=a.y;this.changeZoom(o,l,u)}},{key:"handlePinchEnd",value:function(){this.currentAction=wl,this.pinchTouchList=null,this.pinchDistance=0}},{key:"handleWindowResize",value:function(){this.clearTimeout(this.resizeTimeout),this.resizeTimeout=this.setTimeout(this.forceUpdate.bind(this),100)}},{key:"handleZoomInButtonClick",value:function(){var i=this.state.zoomLevel+ng;this.changeZoom(i),i===bl&&this.zoomOutBtn.current.focus()}},{key:"handleZoomOutButtonClick",value:function(){var i=this.state.zoomLevel-ng;this.changeZoom(i),i===Xn&&this.zoomInBtn.current.focus()}},{key:"handleCaptionMousewheel",value:function(i){if(i.stopPropagation(),!!this.caption.current){var s=this.caption.current.getBoundingClientRect(),o=s.height,a=this.caption.current,l=a.scrollHeight,u=a.scrollTop;(i.deltaY>0&&o+u>=l||i.deltaY<0&&u<=0)&&i.preventDefault()}}},{key:"isAnimating",value:function(){return this.state.shouldAnimate||this.state.isClosing}},{key:"isImageLoaded",value:function(i){return i&&i in this.imageCache&&this.imageCache[i].loaded}},{key:"loadImage",value:function(i,s,o){var a=this;if(this.isImageLoaded(s)){this.setTimeout(function(){o()},1);return}var l=new global.Image;this.props.imageCrossOrigin&&(l.crossOrigin=this.props.imageCrossOrigin),l.onerror=function(u){a.props.onImageLoadError(s,i,u),a.setState(function(c){return{loadErrorStatus:Wn(Wn({},c.loadErrorStatus),{},jm({},i,!0))}}),o(u)},l.onload=function(){a.props.onImageLoad(s,i,l),a.imageCache[s]={loaded:!0,width:l.width,height:l.height},o()},l.src=s}},{key:"loadAllImages",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,o=function(l,u){return function(c){c||i.props[l]!==u||i.didUnmount||i.forceUpdate()}};this.getSrcTypes().forEach(function(a){var l=a.name;s[l]&&i.state.loadErrorStatus[l]&&i.setState(function(u){return{loadErrorStatus:Wn(Wn({},u.loadErrorStatus),{},jm({},l,!1))}}),s[l]&&!i.isImageLoaded(s[l])&&i.loadImage(l,s[l],o(l,s[l]))})}},{key:"requestClose",value:function(i){var s=this,o=function(){return s.props.onCloseRequest(i)};if(this.props.animationDisabled||i.type==="keydown"&&!this.props.animationOnKeyInput){o();return}this.setState({isClosing:!0}),this.setTimeout(o,this.props.animationDuration)}},{key:"requestMove",value:function(i,s){var o=this,a={zoomLevel:Xn,offsetX:0,offsetY:0};!this.props.animationDisabled&&(!this.keyPressed||this.props.animationOnKeyInput)&&(a.shouldAnimate=!0,this.setTimeout(function(){return o.setState({shouldAnimate:!1})},this.props.animationDuration)),this.keyPressed=!1,this.moveRequested=!0,i==="prev"?(this.keyCounter-=1,this.setState(a),this.props.onMovePrevRequest(s)):(this.keyCounter+=1,this.setState(a),this.props.onMoveNextRequest(s))}},{key:"requestMoveNext",value:function(i){this.requestMove("next",i)}},{key:"requestMovePrev",value:function(i){this.requestMove("prev",i)}},{key:"render",value:function(){var i=this,s=this.props,o=s.animationDisabled,a=s.animationDuration,l=s.clickOutsideToClose,u=s.discourageDownloads,c=s.enableZoom,f=s.imageTitle,d=s.nextSrc,g=s.prevSrc,y=s.toolbarButtons,m=s.reactModalStyle,x=s.onAfterOpen,S=s.imageCrossOrigin,v=s.reactModalProps,w=s.loader,R=this.state,L=R.zoomLevel,C=R.offsetX,U=R.offsetY,N=R.isClosing,H=R.loadErrorStatus,G=this.getLightboxRect(),ie={};!o&&this.isAnimating()&&(ie=Wn(Wn({},ie),{},{transition:"transform ".concat(a,"ms")}));var Ce={};this.getSrcTypes().forEach(function(j){var $=j.name,ae=j.keyEnding;Ce[$]=ae});var Ee=[],ee=function($,ae,re){if(!!i.props[$]){var oe=i.getBestImageForType($),I=Wn(Wn({},ie),n.getTransform(Wn(Wn({},re),oe)));L>Xn&&(I.cursor="move");var K=function(de){return Object.keys(de).some(function(Re){return de[Re]})};if(oe===null&&K(H)){Ee.push(Oe("div",{className:"".concat(ae," ril__image ril-errored"),style:I,children:Oe("div",{className:"ril__errorContainer",children:i.props.imageLoadErrorMessage})},i.props[$]+Ce[$]));return}if(oe===null){var Q=w!==void 0?w:Oe("div",{className:"ril-loading-circle ril__loadingCircle ril__loadingContainer__icon",children:tg(new Array(12)).map(function(ue,de){return Oe("div",{className:"ril-loading-circle-point ril__loadingCirclePoint"},de)})});Ee.push(Oe("div",{className:"".concat(ae," ril__image ril-not-loaded"),style:I,children:Oe("div",{className:"ril__loadingContainer",children:Q})},i.props[$]+Ce[$]));return}var be=oe.src;u?(I.backgroundImage="url('".concat(be,"')"),Ee.push(Oe("div",{className:"".concat(ae," ril__image ril__imageDiscourager"),onDoubleClick:i.handleImageDoubleClick,onWheel:i.handleImageMouseWheel,style:I,children:Oe("div",{className:"ril-download-blocker ril__downloadBlocker"})},be+Ce[$]))):Ee.push(W.exports.createElement("img",{...S?{crossOrigin:S}:{},className:"".concat(ae," ril__image"),onDoubleClick:i.handleImageDoubleClick,onWheel:i.handleImageMouseWheel,onDragStart:function(de){return de.preventDefault()},style:I,src:be,key:be+Ce[$],alt:typeof f=="string"?f:Vw("Image"),draggable:!1}))}},_e=this.getZoomMultiplier();ee("nextSrc","ril-image-next ril__imageNext",{x:G.width}),ee("mainSrc","ril-image-current",{x:-1*C,y:-1*U,zoom:_e}),ee("prevSrc","ril-image-prev ril__imagePrev",{x:-1*G.width});var Be={overlay:Wn({zIndex:1e3,backgroundColor:"transparent"},m.overlay),content:Wn({backgroundColor:"transparent",overflow:"hidden",border:"none",borderRadius:0,padding:0,top:0,left:0,right:0,bottom:0},m.content)};return Oe(GH,{isOpen:!0,onRequestClose:l?this.requestClose:void 0,onAfterOpen:function(){i.outerEl.current&&i.outerEl.current.focus(),x()},style:Be,contentLabel:Vw("Lightbox"),appElement:typeof global.window<"u"?global.window.document.body:void 0,...v,children:la("div",{className:"ril-outer ril__outer ril__outerAnimating ".concat(this.props.wrapperClassName," ").concat(N?"ril-closing ril__outerClosing":""),style:{transition:"opacity ".concat(a,"ms"),animationDuration:"".concat(a,"ms"),animationDirection:N?"normal":"reverse"},ref:this.outerEl,onWheel:this.handleOuterMousewheel,onMouseMove:this.handleMouseMove,onMouseDown:this.handleMouseDown,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,tabIndex:"-1",onKeyDown:this.handleKeyInput,onKeyUp:this.handleKeyInput,children:[Oe("div",{className:"ril-inner ril__inner",onClick:l?this.closeIfClickInner:void 0,children:Ee}),g&&Oe("button",{type:"button",className:"ril-prev-button ril__navButtons ril__navButtonPrev","aria-label":this.props.prevLabel,title:this.props.prevLabel,onClick:this.isAnimating()?void 0:this.requestMovePrev},"prev"),d&&Oe("button",{type:"button",className:"ril-next-button ril__navButtons ril__navButtonNext","aria-label":this.props.nextLabel,title:this.props.nextLabel,onClick:this.isAnimating()?void 0:this.requestMoveNext},"next"),la("div",{className:"ril-toolbar ril__toolbar",children:[Oe("ul",{className:"ril-toolbar-left ril__toolbarSide ril__toolbarLeftSide",children:Oe("li",{className:"ril-toolbar__item ril__toolbarItem",children:Oe("span",{className:"ril-toolbar__item__child ril__toolbarItemChild",children:f})})}),la("ul",{className:"ril-toolbar-right ril__toolbarSide ril__toolbarRightSide",children:[y&&y.map(function(j,$){return Oe("li",{className:"ril-toolbar__item ril__toolbarItem",children:j},"button_".concat($+1))}),c&&Oe("li",{className:"ril-toolbar__item ril__toolbarItem",children:Oe("button",{type:"button","aria-label":this.props.zoomInLabel,title:this.props.zoomInLabel,className:["ril-zoom-in","ril__toolbarItemChild","ril__builtinButton","ril__zoomInButton"].concat(tg(L===bl?["ril__builtinButtonDisabled"]:[])).join(" "),ref:this.zoomInBtn,disabled:this.isAnimating()||L===bl,onClick:!this.isAnimating()&&L!==bl?this.handleZoomInButtonClick:void 0},"zoom-in")}),c&&Oe("li",{className:"ril-toolbar__item ril__toolbarItem",children:Oe("button",{type:"button","aria-label":this.props.zoomOutLabel,title:this.props.zoomOutLabel,className:["ril-zoom-out","ril__toolbarItemChild","ril__builtinButton","ril__zoomOutButton"].concat(tg(L===Xn?["ril__builtinButtonDisabled"]:[])).join(" "),ref:this.zoomOutBtn,disabled:this.isAnimating()||L===Xn,onClick:!this.isAnimating()&&L!==Xn?this.handleZoomOutButtonClick:void 0},"zoom-out")}),Oe("li",{className:"ril-toolbar__item ril__toolbarItem",children:Oe("button",{type:"button","aria-label":this.props.closeLabel,title:this.props.closeLabel,className:"ril-close ril-toolbar__item__child ril__toolbarItemChild ril__builtinButton ril__closeButton",onClick:this.isAnimating()?void 0:this.requestClose},"close")})]})]}),this.props.imageCaption&&Oe("div",{onWheel:this.handleCaptionMousewheel,onMouseDown:function($){return $.stopPropagation()},className:"ril-caption ril__caption",ref:this.caption,children:Oe("div",{className:"ril-caption-content ril__captionContent",children:this.props.imageCaption})})]})})}}],[{key:"isTargetMatchImage",value:function(i){return i&&/ril-image-current/.test(i.className)}},{key:"parseMouseEvent",value:function(i){return{id:"mouse",source:Do,x:parseInt(i.clientX,10),y:parseInt(i.clientY,10)}}},{key:"parseTouchPointer",value:function(i){return{id:i.identifier,source:Fo,x:parseInt(i.clientX,10),y:parseInt(i.clientY,10)}}},{key:"parsePointerEvent",value:function(i){return{id:i.pointerId,source:$c,x:parseInt(i.clientX,10),y:parseInt(i.clientY,10)}}},{key:"getTransform",value:function(i){var s=i.x,o=s===void 0?0:s,a=i.y,l=a===void 0?0:a,u=i.zoom,c=u===void 0?1:u,f=i.width,d=i.targetWidth,g=o,y=Bw();f>y&&(g+=(y-f)/2);var m=c*(d/f);return{transform:"translate3d(".concat(g,"px,").concat(l,"px,0) scale3d(").concat(m,",").concat(m,",1)")}}}]),n}(W.exports.Component);Ux.propTypes={mainSrc:Ue.exports.string.isRequired,prevSrc:Ue.exports.string,nextSrc:Ue.exports.string,mainSrcThumbnail:Ue.exports.string,prevSrcThumbnail:Ue.exports.string,nextSrcThumbnail:Ue.exports.string,onCloseRequest:Ue.exports.func.isRequired,onMovePrevRequest:Ue.exports.func,onMoveNextRequest:Ue.exports.func,onImageLoadError:Ue.exports.func,onImageLoad:Ue.exports.func,onAfterOpen:Ue.exports.func,discourageDownloads:Ue.exports.bool,animationDisabled:Ue.exports.bool,animationOnKeyInput:Ue.exports.bool,animationDuration:Ue.exports.number,keyRepeatLimit:Ue.exports.number,keyRepeatKeyupBonus:Ue.exports.number,imageTitle:Ue.exports.node,imageCaption:Ue.exports.node,imageCrossOrigin:Ue.exports.string,reactModalStyle:Ue.exports.shape({}),imagePadding:Ue.exports.number,wrapperClassName:Ue.exports.string,toolbarButtons:Ue.exports.arrayOf(Ue.exports.node),clickOutsideToClose:Ue.exports.bool,enableZoom:Ue.exports.bool,reactModalProps:Ue.exports.shape({}),nextLabel:Ue.exports.string,prevLabel:Ue.exports.string,zoomInLabel:Ue.exports.string,zoomOutLabel:Ue.exports.string,closeLabel:Ue.exports.string,imageLoadErrorMessage:Ue.exports.node,loader:Ue.exports.node};Ux.defaultProps={imageTitle:null,imageCaption:null,toolbarButtons:null,reactModalProps:{},animationDisabled:!1,animationDuration:300,animationOnKeyInput:!1,clickOutsideToClose:!0,closeLabel:"Close lightbox",discourageDownloads:!1,enableZoom:!0,imagePadding:10,imageCrossOrigin:null,keyRepeatKeyupBonus:40,keyRepeatLimit:180,mainSrcThumbnail:null,nextLabel:"Next image",nextSrc:null,nextSrcThumbnail:null,onAfterOpen:function(){},onImageLoadError:function(){},onImageLoad:function(){},onMoveNextRequest:function(){},onMovePrevRequest:function(){},prevLabel:"Previous image",prevSrc:null,prevSrcThumbnail:null,reactModalStyle:{},wrapperClassName:"",zoomInLabel:"Zoom in",zoomOutLabel:"Zoom out",imageLoadErrorMessage:"This image failed to load",loader:void 0};function zW(t){return Gt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"}}]})(t)}function jW(t){return Gt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"}}]})(t)}function $W(t){return Gt({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 117.66v346.32c0 11.32 11.43 19.06 21.94 14.86L160 416V32L20.12 87.95A32.006 32.006 0 0 0 0 117.66zM192 416l192 64V96L192 32v384zM554.06 33.16L416 96v384l139.88-55.95A31.996 31.996 0 0 0 576 394.34V48.02c0-11.32-11.43-19.06-21.94-14.86z"}}]})(t)}function GW(t){return Gt({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 624c93.9 0 170-75.2 170-168V232c0-92.8-76.1-168-170-168s-170 75.2-170 168v224c0 92.8 76.1 168 170 168zm330-170c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 140.3-113.7 254-254 254S258 594.3 258 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 168.7 126.6 307.9 290 327.6V884H326.7c-13.7 0-24.7 14.3-24.7 32v36c0 4.4 2.8 8 6.2 8h407.6c3.4 0 6.2-3.6 6.2-8v-36c0-17.7-11-32-24.7-32H548V782.1c165.3-18 294-158 294-328.1z"}}]})(t)}function HW(t){return Gt({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"}}]})(t)}function WW(t){return Gt({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2 5a2 2 0 012-2h8a2 2 0 012 2v10a2 2 0 002 2H4a2 2 0 01-2-2V5zm3 1h6v4H5V6zm6 6H5v2h6v-2z",clipRule:"evenodd"}},{tag:"path",attr:{d:"M15 7h1a2 2 0 012 2v5.5a1.5 1.5 0 01-3 0V7z"}}]})(t)}function XW(t){return Gt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"}}]})(t)}function qW(t){return Gt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"3.2"}},{tag:"path",attr:{d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"}}]})(t)}function YW(t){return Gt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M421.84 37.37a25.86 25.86 0 00-22.6-4.46L199.92 86.49A32.3 32.3 0 00176 118v226c0 6.74-4.36 12.56-11.11 14.83l-.12.05-52 18C92.88 383.53 80 402 80 423.91a55.54 55.54 0 0023.23 45.63A54.78 54.78 0 00135.34 480a55.82 55.82 0 0017.75-2.93l.38-.13 21.84-7.94A47.84 47.84 0 00208 423.91v-212c0-7.29 4.77-13.21 12.16-15.07l.21-.06L395 150.14a4 4 0 015 3.86v141.93c0 6.75-4.25 12.38-11.11 14.68l-.25.09-50.89 18.11A49.09 49.09 0 00304 375.92a55.67 55.67 0 0023.23 45.8 54.63 54.63 0 0049.88 7.35l.36-.12 21.84-7.95A47.83 47.83 0 00432 375.92V58a25.74 25.74 0 00-10.16-20.63z"}}]})(t)}function ZW(t){return Gt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 20h8v2h-8C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10a9.956 9.956 0 0 1-2 6h-2.708A8 8 0 1 0 12 20zm0-10a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm-4 4a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm8 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm-4 4a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"}}]}]})(t)}function uW(t,e,n){var r=this,i=W.exports.useRef(null),s=W.exports.useRef(0),o=W.exports.useRef(null),a=W.exports.useRef([]),l=W.exports.useRef(),u=W.exports.useRef(),c=W.exports.useRef(t),f=W.exports.useRef(!0);W.exports.useEffect(function(){c.current=t},[t]);var d=!e&&e!==0&&typeof window<"u";if(typeof t!="function")throw new TypeError("Expected a function");e=+e||0;var g=!!(n=n||{}).leading,y=!("trailing"in n)||!!n.trailing,m="maxWait"in n,x=m?Math.max(+n.maxWait||0,e):null;W.exports.useEffect(function(){return f.current=!0,function(){f.current=!1}},[]);var S=W.exports.useMemo(function(){var v=function(N){var H=a.current,G=l.current;return a.current=l.current=null,s.current=N,u.current=c.current.apply(G,H)},w=function(N,H){d&&cancelAnimationFrame(o.current),o.current=d?requestAnimationFrame(N):setTimeout(N,H)},R=function(N){if(!f.current)return!1;var H=N-i.current;return!i.current||H>=e||H<0||m&&N-s.current>=x},L=function(N){return o.current=null,y&&a.current?v(N):(a.current=l.current=null,u.current)},C=function N(){var H=Date.now();if(R(H))return L(H);if(f.current){var G=e-(H-i.current),ie=m?Math.min(G,x-(H-s.current)):G;w(N,ie)}},U=function(){var N=Date.now(),H=R(N);if(a.current=[].slice.call(arguments),l.current=r,i.current=N,H){if(!o.current&&f.current)return s.current=i.current,w(C,e),g?v(i.current):u.current;if(m)return w(C,e),v(i.current)}return o.current||w(C,e),u.current};return U.cancel=function(){o.current&&(d?cancelAnimationFrame(o.current):clearTimeout(o.current)),s.current=0,a.current=i.current=l.current=o.current=null},U.isPending=function(){return!!o.current},U.flush=function(){return o.current?L(Date.now()):u.current},U},[g,m,e,x,y,d]);return S}function cW(t,e){return t===e}function zw(t){return typeof t=="function"?function(){return t}:t}function KW(t,e,n){var r,i,s=n&&n.equalityFn||cW,o=(r=W.exports.useState(zw(t)),i=r[1],[r[0],W.exports.useCallback(function(f){return i(zw(f))},[])]),a=o[0],l=o[1],u=uW(W.exports.useCallback(function(f){return l(f)},[l]),e,n),c=W.exports.useRef(t);return s(c.current,t)||(u(t),c.current=t),[a,u]}export{GW as A,qW as B,PW as C,yG as D,BW as E,fW as F,dW as G,TW as H,RW as I,hW as J,VW as K,SW as L,bW as M,mW as N,UW as O,KW as P,DW as Q,vW as R,EW as S,OW as T,$y as U,FW as V,ts as W,gW as X,pW as Y,UP as Z,yW as a,_W as b,la as c,AW as d,xW as e,xl as f,CW as g,MW as h,qe as i,Oe as j,_2 as k,NW as l,kW as m,LW as n,IW as o,Ux as p,zW as q,W as r,jW as s,XW as t,wW as u,HW as v,$W as w,ZW as x,YW as y,WW as z};
